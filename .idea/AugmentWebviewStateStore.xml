<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="AugmentWebviewStateStore">
    <option name="stateMap">
      <map>
        <entry key="CHAT_STATE" value="eyJjdXJyZW50Q29udmVyc2F0aW9uSWQiOiI3MDhmNjRlNi0yYzVmLTQxNTYtYTE0Ny04ZDZlYzdkMzBkZjciLCJjb252ZXJzYXRpb25zIjp7ImY2NTE1OTlmLWUzOTktNDNjZC1iZWZhLTlhYzM0ZjJiYTJlOCI6eyJpZCI6ImY2NTE1OTlmLWUzOTktNDNjZC1iZWZhLTlhYzM0ZjJiYTJlOCIsImNyZWF0ZWRBdElzbyI6IjIwMjUtMDUtMDhUMDk6MjA6NDEuNjU2WiIsImxhc3RJbnRlcmFjdGVkQXRJc28iOiIyMDI1LTA1LTA4VDA5OjIwOjQxLjY1NloiLCJjaGF0SGlzdG9yeSI6W10sImZlZWRiYWNrU3RhdGVzIjp7fSwidG9vbFVzZVN0YXRlcyI6e30sImRyYWZ0RXhjaGFuZ2UiOnsicmVxdWVzdF9tZXNzYWdlIjoiIiwicmljaF90ZXh0X2pzb25fcmVwciI6eyJ0eXBlIjoiZG9jIiwiY29udGVudCI6W3sidHlwZSI6InBhcmFncmFwaCJ9XX0sInN0YXR1cyI6ImRyYWZ0In0sInJlcXVlc3RJZHMiOltdLCJpc1Bpbm5lZCI6ZmFsc2UsImlzU2hhcmVhYmxlIjpmYWxzZSwiZXh0cmFEYXRhIjp7Imhhc0RpcnR5RWRpdHMiOmZhbHNlfSwicGVyc29uYVR5cGUiOjB9LCJkOGIxODg0MC1hZTg3LTRlNWYtYmQxNS0xOTc1ZTAyMTg0ODMiOnsiaWQiOiJkOGIxODg0MC1hZTg3LTRlNWYtYmQxNS0xOTc1ZTAyMTg0ODMiLCJjcmVhdGVkQXRJc28iOiIyMDI1LTA1LTA4VDA5OjIwOjQyLjA5OFoiLCJsYXN0SW50ZXJhY3RlZEF0SXNvIjoiMjAyNS0wNS0wOFQwOToyMDo0Mi4wOThaIiwiY2hhdEhpc3RvcnkiOltdLCJmZWVkYmFja1N0YXRlcyI6e30sInRvb2xVc2VTdGF0ZXMiOnt9LCJkcmFmdEV4Y2hhbmdlIjp7InJlcXVlc3RfbWVzc2FnZSI6IiIsInJpY2hfdGV4dF9qc29uX3JlcHIiOnsidHlwZSI6ImRvYyIsImNvbnRlbnQiOlt7InR5cGUiOiJwYXJhZ3JhcGgifV19LCJzdGF0dXMiOiJkcmFmdCJ9LCJyZXF1ZXN0SWRzIjpbXSwiaXNQaW5uZWQiOmZhbHNlLCJpc1NoYXJlYWJsZSI6ZmFsc2UsImV4dHJhRGF0YSI6eyJoYXNEaXJ0eUVkaXRzIjpmYWxzZX0sInBlcnNvbmFUeXBlIjowfSwiNzA4ZjY0ZTYtMmM1Zi00MTU2LWExNDctOGQ2ZWM3ZDMwZGY3Ijp7ImlkIjoiNzA4ZjY0ZTYtMmM1Zi00MTU2LWExNDctOGQ2ZWM3ZDMwZGY3IiwibmFtZSI6IldlbGNvbWUgdG8gdGhlIEF1Z21lbnQgQWdlbnQiLCJjcmVhdGVkQXRJc28iOiIyMDI1LTA1LTA4VDA5OjIyOjM1Ljc0MloiLCJsYXN0SW50ZXJhY3RlZEF0SXNvIjoiMjAyNS0wNS0wOFQwOTo0NDoxNy41NDVaIiwiY2hhdEhpc3RvcnkiOlt7InJlcXVlc3RfaWQiOiJjYzQ4YjRlZi0wNmMwLTQyZmQtOThhNC0yNDdiOWMwZGU4MTQiLCJ1dWlkIjoiN2ZiMzk0MDgtMjFiMC00NTQ3LWJjNTYtODdlNDk2YTE1NDFhIiwiY2hhdEl0ZW1UeXBlIjoiYWdlbnRpYy1jaGVja3BvaW50LWRlbGltaXRlciIsInN0YXR1cyI6InN1Y2Nlc3MiLCJmcm9tVGltZXN0YW1wIjowLCJ0b1RpbWVzdGFtcCI6MTc0NjY5NjE1NTc0OCwic2Vlbl9zdGF0ZSI6InNlZW4ifSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiYzgyZWZjNjEtYzhlNy00MzYyLTg3YTEtNGQ2ZmRjN2FjZTVmIiwicmVxdWVzdF9tZXNzYWdlIjoid2h5IHRoZXJlIGlzIG5vIHBpY3R1cmUgaW4gaG9rbWUgcGFnZSBzaG9wIGJ5IGNhdGVnb3J5IiwicmljaF90ZXh0X2pzb25fcmVwciI6eyJ0eXBlIjoiZG9jIiwiY29udGVudCI6W3sidHlwZSI6InBhcmFncmFwaCIsImNvbnRlbnQiOlt7InR5cGUiOiJ0ZXh0IiwidGV4dCI6IndoeSB0aGVyZSBpcyBubyBwaWN0dXJlIGluIGhva21lIHBhZ2Ugc2hvcCBieSBjYXRlZ29yeSJ9XX1dfSwibWVudGlvbmVkX2l0ZW1zIjpbXSwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxRU5qSHVhYzYzOVVpaHVzM2JSUWIxaiIsInRvb2xfbmFtZSI6ImNvZGViYXNlLXJldHJpZXZhbCIsImlucHV0X2pzb24iOiJ7XCJpbmZvcm1hdGlvbl9yZXF1ZXN0XCI6IFwiRmluZCB0aGUgaG9tZSBwYWdlIEpTUCBmaWxlIHRoYXQgY29udGFpbnMgdGhlIFxcXCJTaG9wIGJ5IENhdGVnb3J5XFxcIiBzZWN0aW9uIGFuZCBhbnkgcmVsYXRlZCBjb2RlIHRoYXQgaGFuZGxlcyBkaXNwbGF5aW5nIGNhdGVnb3J5IGltYWdlc1wifSIsIm1jcF9zZXJ2ZXJfbmFtZSI6IiIsIm1jcF90b29sX25hbWUiOiIifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IkknbGwgaGVscCB5b3UgaW52ZXN0aWdhdGUgd2h5IHRoZXJlIGFyZSBubyBwaWN0dXJlcyBzaG93aW5nIGluIHRoZSBcIlNob3AgYnkgQ2F0ZWdvcnlcIiBzZWN0aW9uIG9uIHRoZSBob21lIHBhZ2UuIExldCBtZSBmaXJzdCBnYXRoZXIgc29tZSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgcmVsZXZhbnQgY29kZSB0byB1bmRlcnN0YW5kIGhvdyB0aGUgY2F0ZWdvcnkgaW1hZ2VzIGFyZSBzdXBwb3NlZCB0byBiZSBkaXNwbGF5ZWQuXG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjowLCJ0ZXh0X25vZGUiOnsiY29udGVudCI6IndoeSB0aGVyZSBpcyBubyBwaWN0dXJlIGluIGhva21lIHBhZ2Ugc2hvcCBieSBjYXRlZ29yeSJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkM6L1VzZXJzL1VTRVIvTXVzaWMvY2xvdGhlZSBmaW5hbC9oeS9DbG90aGVlIiwiZm9sZGVyUm9vdCI6IkM6L1VzZXJzL1VTRVIvTXVzaWMvY2xvdGhlZSBmaW5hbC9oeS9DbG90aGVlIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0wOFQwOToyMjo0OS41MTlaIiwicmVzcG9uc2VfdGV4dCI6IkknbGwgaGVscCB5b3UgaW52ZXN0aWdhdGUgd2h5IHRoZXJlIGFyZSBubyBwaWN0dXJlcyBzaG93aW5nIGluIHRoZSBcIlNob3AgYnkgQ2F0ZWdvcnlcIiBzZWN0aW9uIG9uIHRoZSBob21lIHBhZ2UuIExldCBtZSBmaXJzdCBnYXRoZXIgc29tZSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgcmVsZXZhbnQgY29kZSB0byB1bmRlcnN0YW5kIGhvdyB0aGUgY2F0ZWdvcnkgaW1hZ2VzIGFyZSBzdXBwb3NlZCB0byBiZSBkaXNwbGF5ZWQuXG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiMGVkZWQxNzEtYmRjZi00NGM2LThlZDYtMGJmZDVhMmZjOWY4IiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxQlJ5ZWI4cDJBREZ5YnI5bUp1bTVBcCIsInRvb2xfbmFtZSI6ImNvZGViYXNlLXJldHJpZXZhbCIsImlucHV0X2pzb24iOiJ7XCJpbmZvcm1hdGlvbl9yZXF1ZXN0XCI6IFwiRmluZCB0aGUgQ2F0ZWdvcnkgbW9kZWwgY2xhc3MgYW5kIENhdGVnb3J5REFPIGltcGxlbWVudGF0aW9uIHRvIHVuZGVyc3RhbmQgaG93IGNhdGVnb3J5IGltYWdlcyBhcmUgc3RvcmVkIGFuZCByZXRyaWV2ZWRcIn0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJOb3cgbGV0IG1lIGNoZWNrIHRoZSBDYXRlZ29yeSBtb2RlbCBhbmQgREFPIHRvIHVuZGVyc3RhbmQgaG93IGNhdGVnb3J5IGltYWdlcyBhcmUgc3RvcmVkIGFuZCByZXRyaWV2ZWQ6XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJUaGUgZm9sbG93aW5nIGNvZGUgc2VjdGlvbnMgd2VyZSByZXRyaWV2ZWQ6XG5QYXRoOiBDbG90aGVlL3NyYy9tYWluL3dlYmFwcC9pbmRleC5qc3Bcbi4uLlxuXG4gICAgICAgICAgICAvLyBEaXNwbGF5IHVwIHRvIDYgY2F0ZWdvcmllc1xuICAgICAgICAgICAgaW50IG1heENhdGVnb3JpZXMgPSBNYXRoLm1pbihjYXRlZ29yaWVzLnNpemUoKSwgNik7XG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG1heENhdGVnb3JpZXM7IGkrKykge1xuICAgICAgICAgICAgICAgIENhdGVnb3J5IGNhdGVnb3J5ID0gY2F0ZWdvcmllcy5nZXQoaSk7XG4gICAgICAgICAgICAgICAgU3RyaW5nIGltYWdlVXJsID0gY2F0ZWdvcnkuZ2V0SW1hZ2VVcmwoKTtcbiAgICAgICAgICAgICAgICAvLyBVc2UgZGVmYXVsdCBpbWFnZSBpZiBubyBpbWFnZSBpcyBzZXRcbiAgICAgICAgICAgICAgICBpZiAoaW1hZ2VVcmwgPT0gbnVsbCB8fCBpbWFnZVVybC5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRGVmYXVsdCBpbWFnZXMgYmFzZWQgb24gY2F0ZWdvcnkgaW5kZXhcbiAgICAgICAgICAgICAgICAgICAgU3RyaW5nW10gZGVmYXVsdEltYWdlcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1ODEwNDQ3Nzc1NTAtNGNmYTYwNzA3YzAzP2l4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTc3MiZxPTgwXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNjE3MTM3OTY4NDI3LTg1OTI0YzgwMGEyMj9peGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0QmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz03NzQmcT04MFwiLFxuLi4uXG4gICAgICAgICAgICAgICAgICAgIGltYWdlVXJsID0gZGVmYXVsdEltYWdlc1tpICUgZGVmYXVsdEltYWdlcy5sZW5ndGhdO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFVzZSB0aGUgaW1hZ2UgZnJvbSB0aGUgZGF0YWJhc2VcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VVcmwgPSByZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9cIiArIGltYWdlVXJsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICU+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2F0ZWdvcnktY2FyZFwiPlxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiPCU9IGltYWdlVXJsICU+XCIgYWx0PVwiPCU9IGNhdGVnb3J5LmdldE5hbWUoKSAlPlwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXRlZ29yeS1jb250ZW50XCI+XG4gICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzcz1cImNhdGVnb3J5LXRpdGxlXCI+PCU9IGNhdGVnb3J5LmdldE5hbWUoKSAlPjwvaDM+XG4gICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCJQcm9kdWN0U2VydmxldD9jYXRlZ29yeT08JT0gY2F0ZWdvcnkuZ2V0SWQoKSAlPlwiIGNsYXNzPVwiY2F0ZWdvcnktbGlua1wiPlNob3AgTm93IDxpIGNsYXNzPVwiZmFzIGZhLWFycm93LXJpZ2h0XCI+PC9pPjwvYT5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPCUgfSAlPlxuXG4gICAgICAgICAgICA8JSBpZiAoY2F0ZWdvcmllcy5pc0VtcHR5KCkpIHsgJT5cbiAgICAgICAgICAgIDwhLS0gRGVmYXVsdCBjYXRlZ29yaWVzIGlmIG5vIGNhdGVnb3JpZXMgaW4gZGF0YWJhc2UgLS0+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2F0ZWdvcnktY2FyZFwiPlxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1ODEwNDQ3Nzc1NTAtNGNmYTYwNzA3YzAzP2l4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTc3MiZxPTgwXCIgYWx0PVwiV29tZW4ncyBGYXNoaW9uXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhdGVnb3J5LWNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPVwiY2F0ZWdvcnktdGl0bGVcIj5Xb21lbidzIEZhc2hpb248L2gzPlxuICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiUHJvZHVjdFNlcnZsZXQ/Y2F0ZWdvcnk9d29tZW5cIiBjbGFzcz1cImNhdGVnb3J5LWxpbmtcIj5TaG9wIE5vdyA8aSBjbGFzcz1cImZhcyBmYS1hcnJvdy1yaWdodFwiPjwvaT48L2E+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhdGVnb3J5LWNhcmRcIj5cbiAgICAgICAgICAgICAgICA8aW1nIHNyYz1cImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNjE3MTM3OTY4NDI3LTg1OTI0YzgwMGEyMj9peGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0QmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz03NzQmcT04MFwiIGFsdD1cIk1lbidzIEZhc2hpb25cIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2F0ZWdvcnktY29udGVudFwiPlxuICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3M9XCJjYXRlZ29yeS10aXRsZVwiPk1lbidzIEZhc2hpb248L2gzPlxuICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiUHJvZHVjdFNlcnZsZXQ/Y2F0ZWdvcnk9bWVuXCIgY2xhc3M9XCJjYXRlZ29yeS1saW5rXCI+U2hvcCBOb3cgPGkgY2xhc3M9XCJmYXMgZmEtYXJyb3ctcmlnaHRcIj48L2k+PC9hPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXRlZ29yeS1jYXJkXCI+XG4gICAgICAgICAgICAgICAgPGltZyBzcmM9XCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTU4NDkxNzg2NTQ0Mi1kZTg5ZGY3NmFmZDM/aXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9ODcwJnE9ODBcIiBhbHQ9XCJBY2Nlc3Nvcmllc1wiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXRlZ29yeS1jb250ZW50XCI+XG4gICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzcz1cImNhdGVnb3J5LXRpdGxlXCI+QWNjZXNzb3JpZXM8L2gzPlxuICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiUHJvZHVjdFNlcnZsZXQ/Y2F0ZWdvcnk9YWNjZXNzb3JpZXNcIiBjbGFzcz1cImNhdGVnb3J5LWxpbmtcIj5TaG9wIE5vdyA8aSBjbGFzcz1cImZhcyBmYS1hcnJvdy1yaWdodFwiPjwvaT48L2E+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwlIH0gJT5cbiAgICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG48L3NlY3Rpb24+XG5cbjwhLS0gRmVhdHVyZWQgUHJvZHVjdHMgLS0+XG48c2VjdGlvbiBjbGFzcz1cImZlYXR1cmVkLXByb2R1Y3RzXCI+XG4gICAgPGRpdiBjbGFzcz1cImNvbnRhaW5lclwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwic2VjdGlvbi10aXRsZVwiPlxuICAgICAgICAgICAgPGgyPkZlYXR1cmVkIFByb2R1Y3RzPC9oMj5cbiAgICAgICAgPC9kaXY+XG4uLi5cblxuPCEtLSBDb2xsZWN0aW9uIFNob3djYXNlIC0tPlx0YFxuPHNlY3Rpb24gY2xhc3M9XCJjb2xsZWN0aW9uLXNob3djYXNlXCI+XG4gICAgPGRpdiBjbGFzcz1cImNvbnRhaW5lclwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwic2VjdGlvbi10aXRsZVwiPlxuICAgICAgICAgICAgPGgyPk91ciBDb2xsZWN0aW9uczwvaDI+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxkaXYgY2xhc3M9XCJjb2xsZWN0aW9ucy1ncmlkXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sbGVjdGlvbi1pdGVtIGxhcmdlXCI+XG4gICAgICAgICAgICAgICAgPGltZyBzcmM9XCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTUzOTEwOTEzNjg4MS0zYmUwNjE2YWNmNGI/aXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9Nzc0JnE9ODBcIiBhbHQ9XCJQcmVtaXVtIENvbGxlY3Rpb25cIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sbGVjdGlvbi1jb250ZW50XCI+XG4gICAgICAgICAgICAgICAgICAgIDxoMz5QcmVtaXVtIENvbGxlY3Rpb248L2gzPlxuICAgICAgICAgICAgICAgICAgICA8cD5MdXh1cnkgZmFicmljcyBhbmQgZXhjbHVzaXZlIGRlc2lnbnM8L3A+XG4gICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCJQcm9kdWN0U2VydmxldD9jYXRlZ29yeT1wcmVtaXVtXCIgY2xhc3M9XCJidG4gYnRuLXNtXCI+RXhwbG9yZTwvYT5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sbGVjdGlvbi1pdGVtXCI+XG4gICAgICAgICAgICAgICAgPGltZyBzcmM9XCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTU1MTIzMjg2NC0zZjA4OTBlNTgwZDk/aXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9Nzc0JnE9ODBcIiBhbHQ9XCJDYXN1YWwgQ29sbGVjdGlvblwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2xsZWN0aW9uLWNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICAgICAgPGgzPkNhc3VhbCBXZWFyPC9oMz5cbiAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIlByb2R1Y3RTZXJ2bGV0P2NhdGVnb3J5PWNhc3VhbFwiIGNsYXNzPVwiYnRuIGJ0bi1zbVwiPkV4cGxvcmU8L2E+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbGxlY3Rpb24taXRlbVwiPlxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1OTU3Nzc0NTc1ODMtOTVlMDU5ZDU4MWI4P2l4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTc4MyZxPTgwXCIgYWx0PVwiRm9ybWFsIENvbGxlY3Rpb25cIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sbGVjdGlvbi1jb250ZW50XCI+XG4gICAgICAgICAgICAgICAgICAgIDxoMz5Gb3JtYWwgV2VhcjwvaDM+XG4gICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCJQcm9kdWN0U2VydmxldD9jYXRlZ29yeT1mb3JtYWxcIiBjbGFzcz1cImJ0biBidG4tc21cIj5FeHBsb3JlPC9hPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuPC9zZWN0aW9uPlxuLi4uXG5QYXRoOiBzcmMvbWFpbi93ZWJhcHAvaW5kZXguanNwXG4uLi5cbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VVcmwgPSBkZWZhdWx0SW1hZ2VzW2kgJSBkZWZhdWx0SW1hZ2VzLmxlbmd0aF07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVXNlIHRoZSBpbWFnZSBmcm9tIHRoZSBkYXRhYmFzZVxuICAgICAgICAgICAgICAgICAgICBpbWFnZVVybCA9IHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL1wiICsgaW1hZ2VVcmw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgJT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXRlZ29yeS1jYXJkXCI+XG4gICAgICAgICAgICAgICAgPGltZyBzcmM9XCI8JT0gaW1hZ2VVcmwgJT5cIiBhbHQ9XCI8JT0gY2F0ZWdvcnkuZ2V0TmFtZSgpICU+XCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhdGVnb3J5LWNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPVwiY2F0ZWdvcnktdGl0bGVcIj48JT0gY2F0ZWdvcnkuZ2V0TmFtZSgpICU+PC9oMz5cbiAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIlByb2R1Y3RTZXJ2bGV0P2NhdGVnb3J5PTwlPSBjYXRlZ29yeS5nZXRJZCgpICU+XCIgY2xhc3M9XCJjYXRlZ29yeS1saW5rXCI+U2hvcCBOb3cgPGkgY2xhc3M9XCJmYXMgZmEtYXJyb3ctcmlnaHRcIj48L2k+PC9hPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8JSB9ICU+XG5cbiAgICAgICAgICAgIDwlIGlmIChjYXRlZ29yaWVzLmlzRW1wdHkoKSkgeyAlPlxuICAgICAgICAgICAgPCEtLSBEZWZhdWx0IGNhdGVnb3JpZXMgaWYgbm8gY2F0ZWdvcmllcyBpbiBkYXRhYmFzZSAtLT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXRlZ29yeS1jYXJkXCI+XG4gICAgICAgICAgICAgICAgPGltZyBzcmM9XCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTU4MTA0NDc3NzU1MC00Y2ZhNjA3MDdjMDM/aXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9NzcyJnE9ODBcIiBhbHQ9XCJXb21lbidzIEZhc2hpb25cIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2F0ZWdvcnktY29udGVudFwiPlxuICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3M9XCJjYXRlZ29yeS10aXRsZVwiPldvbWVuJ3MgRmFzaGlvbjwvaDM+XG4gICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCJQcm9kdWN0U2VydmxldD9jYXRlZ29yeT13b21lblwiIGNsYXNzPVwiY2F0ZWdvcnktbGlua1wiPlNob3AgTm93IDxpIGNsYXNzPVwiZmFzIGZhLWFycm93LXJpZ2h0XCI+PC9pPjwvYT5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2F0ZWdvcnktY2FyZFwiPlxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE2MTcxMzc5Njg0MjctODU5MjRjODAwYTIyP2l4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTc3NCZxPTgwXCIgYWx0PVwiTWVuJ3MgRmFzaGlvblwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXRlZ29yeS1jb250ZW50XCI+XG4gICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzcz1cImNhdGVnb3J5LXRpdGxlXCI+TWVuJ3MgRmFzaGlvbjwvaDM+XG4gICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCJQcm9kdWN0U2VydmxldD9jYXRlZ29yeT1tZW5cIiBjbGFzcz1cImNhdGVnb3J5LWxpbmtcIj5TaG9wIE5vdyA8aSBjbGFzcz1cImZhcyBmYS1hcnJvdy1yaWdodFwiPjwvaT48L2E+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbi4uLlxuUGF0aDogQ2xvdGhlZS9zcmMvbWFpbi93ZWJhcHAvV0VCLUlORi92aWV3cy91c2VyL2Rhc2hib2FyZC5qc3Bcbi4uLlxuXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNob3AtY2F0ZWdvcmllcy1zZWN0aW9uXCI+XG4gICAgICAgICAgICAgICAgICAgIDxoMz5TaG9wIGJ5IENhdGVnb3J5PC9oMz5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhdGVnb3J5LWNhcmRzXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiUHJvZHVjdFNlcnZsZXQ/Y2F0ZWdvcnk9TWVuXCIgY2xhc3M9XCJjYXRlZ29yeS1jYXJkXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhdGVnb3J5LWltYWdlXCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ2h0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTE2MjU3OTg0LWIxYjRkNzA3NDEyZT9peGxpYj1yYi0xLjIuMSZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTEzNTAmcT04MCcpO1wiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoND5NZW48L2g0PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIlByb2R1Y3RTZXJ2bGV0P2NhdGVnb3J5PVdvbWVuXCIgY2xhc3M9XCJjYXRlZ29yeS1jYXJkXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhdGVnb3J5LWltYWdlXCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ2h0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNDgzOTg1OTg4MzU1LTc2MzcyOGUxOTM1Yj9peGxpYj1yYi0xLjIuMSZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTEzNTAmcT04MCcpO1wiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoND5Xb21lbjwvaDQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiUHJvZHVjdFNlcnZsZXQ/Y2F0ZWdvcnk9S2lkc1wiIGNsYXNzPVwiY2F0ZWdvcnktY2FyZFwiPlxuLi4uXG5QYXRoOiBDbG90aGVlL3NyYy9tYWluL3dlYmFwcC9jYXRlZ29yaWVzLmpzcFxuLi4uXG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3dcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhdGVnb3J5LWNhcmQgY2xpY2thYmxlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwicHJvZHVjdHMuanNwP2NhdGVnb3J5PXRyYWRpdGlvbmFsJnR5cGU9d29tZW5cIiBjbGFzcz1cImNhcmQtbGlua1wiPjwvYT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXRlZ29yeS1pbWFnZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1ODMzOTE3MzM5NTYtMzc1MGUwZmY0ZThiP2l4bGliPXJiLTEuMi4xJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9NzcyJnE9ODBcIiBhbHQ9XCJXb21lbidzIFRyYWRpdGlvbmFsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXRlZ29yeS1jb250ZW50XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzPldvbWVuJ3MgVHJhZGl0aW9uYWw8L2gzPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPkVsZWdhbnQgc2FyZWVzLCBsZWhlbmdhcywgYW5kIGV0aG5pYyB3ZWFyIGZvciB3b21lbi48L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJjYXRlZ29yeS1idG5cIj5FeHBsb3JlPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuLi4uXG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3dcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhdGVnb3J5LWNhcmQgY2xpY2thYmxlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwicHJvZHVjdHMuanNwP2NhdGVnb3J5PWFlc3RoZXRpYyZ0eXBlPWNhc3VhbFwiIGNsYXNzPVwiY2FyZC1saW5rXCI+PC9hPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhdGVnb3J5LWltYWdlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTU4MTA0NDc3NzU1MC00Y2ZhNjA3MDdjMDM/aXhsaWI9cmItNC4wLjMmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz03NzImcT04MFwiIGFsdD1cIkNhc3VhbCBBZXN0aGV0aWNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhdGVnb3J5LWNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDM+Q2FzdWFsIEFlc3RoZXRpYzwvaDM+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+RWZmb3J0bGVzc2x5IHN0eWxpc2ggZXZlcnlkYXkgd2VhciB3aXRoIGFlc3RoZXRpYyBhcHBlYWwuPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY2F0ZWdvcnktYnRuXCI+RXhwbG9yZTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbi4uLlxuXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93XCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC0zXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXRlZ29yeS1jYXJkIGNsaWNrYWJsZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cInByb2R1Y3RzLmpzcD9jYXRlZ29yeT1mb3JtYWwmdHlwZT1idXNpbmVzc1wiIGNsYXNzPVwiY2FyZC1saW5rXCI+PC9hPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhdGVnb3J5LWltYWdlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTU4MDY1NzAxODk1MC1jN2Y3ZDZhNmQ5OTA/aXhsaWI9cmItMS4yLjEmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz03NzImcT04MFwiIGFsdD1cIkJ1c2luZXNzIEF0dGlyZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2F0ZWdvcnktY29udGVudFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMz5CdXNpbmVzcyBBdHRpcmU8L2gzPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPlByb2Zlc3Npb25hbCBzdWl0cyBhbmQgYnVzaW5lc3Mgd2VhciBmb3IgdGhlIHdvcmtwbGFjZS48L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJjYXRlZ29yeS1idG5cIj5FeHBsb3JlPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuLi4uXG5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhdGVnb3J5LWNhcmQgY2xpY2thYmxlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwicHJvZHVjdHMuanNwP2NhdGVnb3J5PWZvcm1hbCZ0eXBlPWFjY2Vzc29yaWVzXCIgY2xhc3M9XCJjYXJkLWxpbmtcIj48L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2F0ZWdvcnktaW1hZ2VcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTg0OTE3ODY1NDQyLWRlODlkZjc2YWZkMz9peGxpYj1yYi00LjAuMyZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTg3MCZxPTgwXCIgYWx0PVwiRm9ybWFsIEFjY2Vzc29yaWVzXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXRlZ29yeS1jb250ZW50XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzPkZvcm1hbCBBY2Nlc3NvcmllczwvaDM+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+U29waGlzdGljYXRlZCBhY2Nlc3NvcmllcyB0byBjb21wbGV0ZSB5b3VyIGZvcm1hbCBsb29rLjwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImNhdGVnb3J5LWJ0blwiPkV4cGxvcmU8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG48L3NlY3Rpb24+XG5cbjwhLS0gSmF2YVNjcmlwdCByZW1vdmVkIGFzIHJlcXVlc3RlZCAtLT5cblxuPCVAIGluY2x1ZGUgZmlsZT1cImluY2x1ZGVzL2Zvb3Rlci5qc3BcIiAlPlxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbnRyb2xsZXIvQ2F0ZWdvcnlTZXJ2bGV0LmphdmFcbi4uLlxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHJvdGVjdGVkIHZvaWQgZG9Qb3N0KEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBIdHRwU2VydmxldFJlc3BvbnNlIHJlc3BvbnNlKVxuICAgICAgICAgICAgdGhyb3dzIFNlcnZsZXRFeGNlcHRpb24sIElPRXhjZXB0aW9uIHtcbiAgICAgICAgLy8gQ2hlY2sgaWYgdXNlciBpcyBsb2dnZWQgaW4gYW5kIGlzIGFuIGFkbWluXG4gICAgICAgIEh0dHBTZXNzaW9uIHNlc3Npb24gPSByZXF1ZXN0LmdldFNlc3Npb24oZmFsc2UpO1xuICAgICAgICBpZiAoc2Vzc2lvbiA9PSBudWxsIHx8IHNlc3Npb24uZ2V0QXR0cmlidXRlKFwidXNlclwiKSA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvTG9naW5TZXJ2bGV0XCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgVXNlciB1c2VyID0gKFVzZXIpIHNlc3Npb24uZ2V0QXR0cmlidXRlKFwidXNlclwiKTtcbiAgICAgICAgaWYgKCF1c2VyLmlzQWRtaW4oKSkge1xuICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL0xvZ2luU2VydmxldFwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIFN0cmluZyBhY3Rpb24gPSByZXF1ZXN0LmdldFBhcmFtZXRlcihcImFjdGlvblwiKTtcblxuICAgICAgICBpZiAoYWN0aW9uID09IG51bGwpIHtcbiAgICAgICAgICAgIGFjdGlvbiA9IFwibGlzdFwiO1xuICAgICAgICB9XG5cbiAgICAgICAgc3dpdGNoIChhY3Rpb24pIHtcbiAgICAgICAgICAgIGNhc2UgXCJhZGRcIjpcbiAgICAgICAgICAgICAgICBhZGRDYXRlZ29yeShyZXF1ZXN0LCByZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwidXBkYXRlXCI6XG4gICAgICAgICAgICAgICAgdXBkYXRlQ2F0ZWdvcnkocmVxdWVzdCwgcmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBsaXN0Q2F0ZWdvcmllcyhyZXF1ZXN0LCByZXNwb25zZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHZvaWQgbGlzdENhdGVnb3JpZXMoSHR0cFNlcnZsZXRSZXF1ZXN0IHJlcXVlc3QsIEh0dHBTZXJ2bGV0UmVzcG9uc2UgcmVzcG9uc2UpIHRocm93cyBTZXJ2bGV0RXhjZXB0aW9uLCBJT0V4Y2VwdGlvbiB7XG4gICAgICAgIHJlcXVlc3Quc2V0QXR0cmlidXRlKFwiY2F0ZWdvcmllc1wiLCBjYXRlZ29yeURBTy5nZXRBbGxDYXRlZ29yaWVzKCkpO1xuICAgICAgICByZXF1ZXN0LmdldFJlcXVlc3REaXNwYXRjaGVyKFwiL2FkbWluL2NhdGVnb3JpZXMuanNwXCIpLmZvcndhcmQocmVxdWVzdCwgcmVzcG9uc2UpO1xuICAgIH1cblxuICAgIHByaXZhdGUgdm9pZCB2aWV3Q2F0ZWdvcnkoSHR0cFNlcnZsZXRSZXF1ZXN0IHJlcXVlc3QsIEh0dHBTZXJ2bGV0UmVzcG9uc2UgcmVzcG9uc2UpIHRocm93cyBTZXJ2bGV0RXhjZXB0aW9uLCBJT0V4Y2VwdGlvbiB7XG4gICAgICAgIGludCBjYXRlZ29yeUlkID0gSW50ZWdlci5wYXJzZUludChyZXF1ZXN0LmdldFBhcmFtZXRlcihcImlkXCIpKTtcbiAgICAgICAgQ2F0ZWdvcnkgY2F0ZWdvcnkgPSBjYXRlZ29yeURBTy5nZXRDYXRlZ29yeUJ5SWQoY2F0ZWdvcnlJZCk7XG5cbiAgICAgICAgaWYgKGNhdGVnb3J5ICE9IG51bGwpIHtcbiAgICAgICAgICAgIC8vIEdldCBwcm9kdWN0cyBpbiB0aGlzIGNhdGVnb3J5XG4gICAgICAgICAgICBQcm9kdWN0REFPIHByb2R1Y3REQU8gPSBuZXcgUHJvZHVjdERBTygpO1xuICAgICAgICAgICAgTGlzdDxQcm9kdWN0PiBwcm9kdWN0cyA9IHByb2R1Y3REQU8uZ2V0UHJvZHVjdHNCeUNhdGVnb3J5KGNhdGVnb3J5LmdldE5hbWUoKSk7XG5cbiAgICAgICAgICAgIHJlcXVlc3Quc2V0QXR0cmlidXRlKFwiY2F0ZWdvcnlcIiwgY2F0ZWdvcnkpO1xuICAgICAgICAgICAgcmVxdWVzdC5zZXRBdHRyaWJ1dGUoXCJwcm9kdWN0c1wiLCBwcm9kdWN0cyk7XG4gICAgICAgICAgICByZXF1ZXN0LmdldFJlcXVlc3REaXNwYXRjaGVyKFwiL2FkbWluL3ZpZXctY2F0ZWdvcnkuanNwXCIpLmZvcndhcmQocmVxdWVzdCwgcmVzcG9uc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL2FkbWluL2NhdGVnb3JpZXMuanNwP2Vycm9yPUNhdGVnb3J5K25vdCtmb3VuZFwiKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgdm9pZCBhZGRDYXRlZ29yeShIdHRwU2VydmxldFJlcXVlc3QgcmVxdWVzdCwgSHR0cFNlcnZsZXRSZXNwb25zZSByZXNwb25zZSkgdGhyb3dzIFNlcnZsZXRFeGNlcHRpb24sIElPRXhjZXB0aW9uIHtcbiAgICAgICAgU3RyaW5nIG5hbWUgPSByZXF1ZXN0LmdldFBhcmFtZXRlcihcIm5hbWVcIik7XG4gICAgICAgIFN0cmluZyBkZXNjcmlwdGlvbiA9IHJlcXVlc3QuZ2V0UGFyYW1ldGVyKFwiZGVzY3JpcHRpb25cIik7XG5cbiAgICAgICAgQ2F0ZWdvcnkgY2F0ZWdvcnkgPSBuZXcgQ2F0ZWdvcnkoKTtcbiAgICAgICAgY2F0ZWdvcnkuc2V0TmFtZShuYW1lKTtcbiAgICAgICAgY2F0ZWdvcnkuc2V0RGVzY3JpcHRpb24oZGVzY3JpcHRpb24pO1xuXG4gICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IGNhdGVnb3J5REFPLmFkZENhdGVnb3J5KGNhdGVnb3J5KTtcblxuICAgICAgICBpZiAoc3VjY2Vzcykge1xuICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL2FkbWluL2NhdGVnb3JpZXMuanNwP21lc3NhZ2U9Q2F0ZWdvcnkrYWRkZWQrc3VjY2Vzc2Z1bGx5XCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL2FkbWluL2NhdGVnb3JpZXMuanNwP2Vycm9yPUZhaWxlZCt0bythZGQrY2F0ZWdvcnlcIik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHZvaWQgdXBkYXRlQ2F0ZWdvcnkoSHR0cFNlcnZsZXRSZXF1ZXN0IHJlcXVlc3QsIEh0dHBTZXJ2bGV0UmVzcG9uc2UgcmVzcG9uc2UpIHRocm93cyBTZXJ2bGV0RXhjZXB0aW9uLCBJT0V4Y2VwdGlvbiB7XG4gICAgICAgIGludCBjYXRlZ29yeUlkID0gSW50ZWdlci5wYXJzZUludChyZXF1ZXN0LmdldFBhcmFtZXRlcihcImlkXCIpKTtcbiAgICAgICAgU3RyaW5nIG5hbWUgPSByZXF1ZXN0LmdldFBhcmFtZXRlcihcIm5hbWVcIik7XG4gICAgICAgIFN0cmluZyBkZXNjcmlwdGlvbiA9IHJlcXVlc3QuZ2V0UGFyYW1ldGVyKFwiZGVzY3JpcHRpb25cIik7XG5cbiAgICAgICAgQ2F0ZWdvcnkgY2F0ZWdvcnkgPSBuZXcgQ2F0ZWdvcnkoKTtcbiAgICAgICAgY2F0ZWdvcnkuc2V0SWQoY2F0ZWdvcnlJZCk7XG4gICAgICAgIGNhdGVnb3J5LnNldE5hbWUobmFtZSk7XG4gICAgICAgIGNhdGVnb3J5LnNldERlc2NyaXB0aW9uKGRlc2NyaXB0aW9uKTtcblxuICAgICAgICBib29sZWFuIHN1Y2Nlc3MgPSBjYXRlZ29yeURBTy51cGRhdGVDYXRlZ29yeShjYXRlZ29yeSk7XG5cbiAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9hZG1pbi9jYXRlZ29yaWVzLmpzcD9tZXNzYWdlPUNhdGVnb3J5K3VwZGF0ZWQrc3VjY2Vzc2Z1bGx5XCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL2FkbWluL2NhdGVnb3JpZXMuanNwP2Vycm9yPUZhaWxlZCt0byt1cGRhdGUrY2F0ZWdvcnlcIik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHZvaWQgc2hvd0FkZEZvcm0oSHR0cFNlcnZsZXRSZXF1ZXN0IHJlcXVlc3QsIEh0dHBTZXJ2bGV0UmVzcG9uc2UgcmVzcG9uc2UpIHRocm93cyBTZXJ2bGV0RXhjZXB0aW9uLCBJT0V4Y2VwdGlvbiB7XG4gICAgICAgIHJlcXVlc3QuZ2V0UmVxdWVzdERpc3BhdGNoZXIoXCIvYWRtaW4vYWRkLWNhdGVnb3J5LmpzcFwiKS5mb3J3YXJkKHJlcXVlc3QsIHJlc3BvbnNlKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHZvaWQgc2hvd0VkaXRGb3JtKEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBIdHRwU2VydmxldFJlc3BvbnNlIHJlc3BvbnNlKSB0aHJvd3MgU2VydmxldEV4Y2VwdGlvbiwgSU9FeGNlcHRpb24ge1xuICAgICAgICBpbnQgY2F0ZWdvcnlJZCA9IEludGVnZXIucGFyc2VJbnQocmVxdWVzdC5nZXRQYXJhbWV0ZXIoXCJpZFwiKSk7XG4gICAgICAgIENhdGVnb3J5IGNhdGVnb3J5ID0gY2F0ZWdvcnlEQU8uZ2V0Q2F0ZWdvcnlCeUlkKGNhdGVnb3J5SWQpO1xuXG4gICAgICAgIGlmIChjYXRlZ29yeSAhPSBudWxsKSB7XG4gICAgICAgICAgICByZXF1ZXN0LnNldEF0dHJpYnV0ZShcImNhdGVnb3J5XCIsIGNhdGVnb3J5KTtcbiAgICAgICAgICAgIHJlcXVlc3QuZ2V0UmVxdWVzdERpc3BhdGNoZXIoXCIvYWRtaW4vZWRpdC1jYXRlZ29yeS5qc3BcIikuZm9yd2FyZChyZXF1ZXN0LCByZXNwb25zZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvYWRtaW4vY2F0ZWdvcmllcy5qc3A/ZXJyb3I9Q2F0ZWdvcnkrbm90K2ZvdW5kXCIpO1xuICAgICAgICB9XG4gICAgfVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbnRyb2xsZXIvSG9tZVNlcnZsZXQuamF2YVxucGFja2FnZSBjb250cm9sbGVyO1xuXG5pbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjtcbmltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0O1xuaW1wb3J0IGphdmEudXRpbC5EYXRlO1xuaW1wb3J0IGphdmEudXRpbC5MaXN0O1xuXG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0LlNlcnZsZXRFeGNlcHRpb247XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0LmFubm90YXRpb24uV2ViU2VydmxldDtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuaHR0cC5IdHRwU2VydmxldDtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuaHR0cC5IdHRwU2VydmxldFJlcXVlc3Q7XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXRSZXNwb25zZTtcbmltcG9ydCBtb2RlbC5TbGlkZTtcblxuXG4vKipcbiAqIFNlcnZsZXQgaW1wbGVtZW50YXRpb24gY2xhc3MgSG9tZVNlcnZsZXRcbiAqL1xuLy8gU2VydmxldCBtYXBwaW5nIGRlZmluZWQgaW4gd2ViLnhtbFxucHVibGljIGNsYXNzIEhvbWVTZXJ2bGV0IGV4dGVuZHMgSHR0cFNlcnZsZXQge1xuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIGxvbmcgc2VyaWFsVmVyc2lvblVJRCA9IDFMO1xuICAgIHByaXZhdGUgTGlzdDxTbGlkZT4gc2xpZGVzO1xuXG5cblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgdGhlIHNsaWRlc1xuICAgICAqL1xuICAgIHByaXZhdGUgdm9pZCBpbml0aWFsaXplU2xpZGVzKCkge1xuICAgICAgICBzbGlkZXMgPSBuZXcgQXJyYXlMaXN0PD4oKTtcblxuICAgICAgICAvLyBBZGQgc2xpZGVzXG4gICAgICAgIHNsaWRlcy5hZGQobmV3IFNsaWRlKFxuICAgICAgICAgICAgXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTQ5MDQ4MTY1MTg3MS1hYjY4ZGUyNWQ0M2Q/aXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9MTc3MCZxPTgwXCIsXG4gICAgICAgICAgICBcIkVsZXZhdGUgWW91ciBTdHlsZVwiLFxuICAgICAgICAgICAgXCJEaXNjb3ZlciB0aGUgbGF0ZXN0IHRyZW5kcyBpbiBmYXNoaW9uIGFuZCBleHByZXNzIHlvdXJzZWxmIHdpdGggb3VyIHByZW1pdW0gY29sbGVjdGlvbiBvZiBjbG90aGluZyBhbmQgYWNjZXNzb3JpZXMuXCIsXG4gICAgICAgICAgICBcIlByb2R1Y3RTZXJ2bGV0P2NhdGVnb3J5PW5ld1wiLFxuICAgICAgICAgICAgXCJTaG9wIE5vd1wiLFxuICAgICAgICAgICAgXCJQcm9kdWN0U2VydmxldD9jYXRlZ29yeT1zYWxlXCIsXG4gICAgICAgICAgICBcIlZpZXcgU2FsZVwiXG4gICAgICAgICkpO1xuXG4gICAgICAgIHNsaWRlcy5hZGQobmV3IFNsaWRlKFxuICAgICAgICAgICAgXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTQ0NTIwNTE3MDIzMC0wNTNiODMwMTYwNTA/aXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9MTc3MSZxPTgwXCIsXG4gICAgICAgICAgICBcIlN1bW1lciBDb2xsZWN0aW9uIDIwMjNcIixcbiAgICAgICAgICAgIFwiQmVhdCB0aGUgaGVhdCB3aXRoIG91ciBjb29sIGFuZCBjb21mb3J0YWJsZSBzdW1tZXIgY29sbGVjdGlvbi5cIixcbiAgICAgICAgICAgIFwiUHJvZHVjdFNlcnZsZXQ/Y2F0ZWdvcnk9c3VtbWVyXCIsXG4gICAgICAgICAgICBcIkV4cGxvcmUgQ29sbGVjdGlvblwiLFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIG51bGxcbiAgICAgICAgKSk7XG5cbiAgICAgICAgc2xpZGVzLmFkZChuZXcgU2xpZGUoXG4gICAgICAgICAgICBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNDQxOTg0OTA0OTk2LWUwYjZiYTY4N2UwND9peGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0QmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz0xNzcwJnE9ODBcIixcbiAgICAgICAgICAgIFwiRXhjbHVzaXZlIERpc2NvdW50c1wiLFxuICAgICAgICAgICAgXCJVcCB0byA1MCUgb2ZmIG9uIHNlbGVjdGVkIGl0ZW1zLiBMaW1pdGVkIHRpbWUgb2ZmZXIhXCIsXG4gICAgICAgICAgICBcIlByb2R1Y3RTZXJ2bGV0P2NhdGVnb3J5PXNhbGVcIixcbiAgICAgICAgICAgIFwiU2hvcCBTYWxlXCIsXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgbnVsbFxuICAgICAgICApKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAc2VlIEh0dHBTZXJ2bGV0I2RvR2V0KEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBIdHRwU2VydmxldFJlc3BvbnNlIHJlc3BvbnNlKVxuICAgICAqL1xuICAgIHByb3RlY3RlZCB2b2lkIGRvR2V0KEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBIdHRwU2VydmxldFJlc3BvbnNlIHJlc3BvbnNlKVxuICAgICAgICAgICAgdGhyb3dzIFNlcnZsZXRFeGNlcHRpb24sIElPRXhjZXB0aW9uIHtcbiAgICAgICAgLy8gSGFuZGxlIHNsaWRlIHBhcmFtZXRlclxuICAgICAgICBTdHJpbmcgc2xpZGVQYXJhbSA9IHJlcXVlc3QuZ2V0UGFyYW1ldGVyKFwic2xpZGVcIik7XG4gICAgICAgIGludCBjdXJyZW50U2xpZGUgPSAwO1xuLi4uXG5cbiAgICAgICAgLy8gU3RvcmUgY3VycmVudCBzbGlkZSBpbiBzZXNzaW9uXG4gICAgICAgIHJlcXVlc3QuZ2V0U2Vzc2lvbigpLnNldEF0dHJpYnV0ZShcImN1cnJlbnRTbGlkZVwiLCBjdXJyZW50U2xpZGUpO1xuXG4gICAgICAgIC8vIFNldCBzbGlkZXNcbiAgICAgICAgcmVxdWVzdC5zZXRBdHRyaWJ1dGUoXCJzbGlkZXNcIiwgc2xpZGVzKTtcbiAgICAgICAgcmVxdWVzdC5zZXRBdHRyaWJ1dGUoXCJjdXJyZW50U2xpZGVcIiwgY3VycmVudFNsaWRlKTtcbiAgICB9XG59XG4uLi5cbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMUVOakh1YWM2MzlVaWh1czNiUlFiMWoifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJDOi9Vc2Vycy9VU0VSL011c2ljL2Nsb3RoZWUgZmluYWwvaHkvQ2xvdGhlZSIsImZvbGRlclJvb3QiOiJDOi9Vc2Vycy9VU0VSL011c2ljL2Nsb3RoZWUgZmluYWwvaHkvQ2xvdGhlZSJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMDhUMDk6MjM6MDIuMjY3WiIsInJlc3BvbnNlX3RleHQiOiJOb3cgbGV0IG1lIGNoZWNrIHRoZSBDYXRlZ29yeSBtb2RlbCBhbmQgREFPIHRvIHVuZGVyc3RhbmQgaG93IGNhdGVnb3J5IGltYWdlcyBhcmUgc3RvcmVkIGFuZCByZXRyaWV2ZWQ6XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiY2EwYmRhMjgtODQxZS00MWVjLThjNjItNTY1NDhlYzU3NGFiIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxRUFpeTV0YTVRMzJQUjFkZ2htSmlkMSIsInRvb2xfbmFtZSI6ImNvZGViYXNlLXJldHJpZXZhbCIsImlucHV0X2pzb24iOiJ7XCJpbmZvcm1hdGlvbl9yZXF1ZXN0XCI6IFwiRmluZCBjb2RlIGluIGluZGV4LmpzcCB0aGF0IGxvYWRzIGNhdGVnb3JpZXMgYW5kIHRoZWlyIGltYWdlcyBmb3IgdGhlIFxcXCJTaG9wIGJ5IENhdGVnb3J5XFxcIiBzZWN0aW9uXCJ9IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiTGV0IG1lIGNoZWNrIHRoZSBkYXRhYmFzZSBzdHJ1Y3R1cmUgYW5kIGhvdyB0aGUgaW1hZ2VzIGFyZSBiZWluZyBsb2FkZWQgb24gdGhlIGhvbWUgcGFnZTpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IENsb3RoZWUvc3JjL21haW4vamF2YS9jb250cm9sbGVyL0NhdGVnb3J5SW1hZ2VTZXJ2bGV0LmphdmFcbi4uLlxuXG4gICAgICAgICAgICBTdHJpbmcgZmlsZUV4dGVuc2lvbiA9IGZpbGVOYW1lLnN1YnN0cmluZyhmaWxlTmFtZS5sYXN0SW5kZXhPZihcIi5cIikpO1xuICAgICAgICAgICAgU3RyaW5nIG5ld0ZpbGVOYW1lID0gXCJjYXRlZ29yeV9cIiArIGNhdGVnb3J5SWQgKyBmaWxlRXh0ZW5zaW9uO1xuXG4gICAgICAgICAgICAvLyBTYXZlIHRoZSBmaWxlIHRvIGEgcGVybWFuZW50IGxvY2F0aW9uXG4gICAgICAgICAgICBTdHJpbmcgcmVsYXRpdmVQYXRoID0gXCJpbWFnZXMvY2F0ZWdvcmllc1wiO1xuXG4gICAgICAgICAgICAvLyBHZXQgdGhlIHJlYWwgcGF0aCB0byB0aGUgd2ViIGFwcGxpY2F0aW9uIHJvb3QgZGlyZWN0b3J5XG4gICAgICAgICAgICBTdHJpbmcgd2ViYXBwUm9vdCA9IHJlcXVlc3QuZ2V0U2VydmxldENvbnRleHQoKS5nZXRSZWFsUGF0aChcIi9cIik7XG5cbiAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgZGVwbG95bWVudCBkaXJlY3RvcnkgcGF0aFxuICAgICAgICAgICAgU3RyaW5nIGRlcGxveW1lbnRQYXRoID0gd2ViYXBwUm9vdCArIHJlbGF0aXZlUGF0aDtcblxuICAgICAgICAgICAgLy8gRW5zdXJlIGRlcGxveW1lbnQgZGlyZWN0b3J5IGV4aXN0c1xuICAgICAgICAgICAgRmlsZSBkZXBsb3ltZW50RGlyID0gbmV3IEZpbGUoZGVwbG95bWVudFBhdGgpO1xuICAgICAgICAgICAgaWYgKCFkZXBsb3ltZW50RGlyLmV4aXN0cygpKSB7XG4gICAgICAgICAgICAgICAgYm9vbGVhbiBjcmVhdGVkID0gZGVwbG95bWVudERpci5ta2RpcnMoKTtcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJDYXRlZ29yeUltYWdlU2VydmxldCAtIENyZWF0ZWQgZGVwbG95bWVudCBkaXJlY3Rvcnk6IFwiICsgY3JlYXRlZCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEdldCB0aGUgcGVybWFuZW50IHBhdGggKHBlcnNpc3RzIGFjcm9zcyBzZXJ2ZXIgcmVzdGFydHMpXG4gICAgICAgICAgICBTdHJpbmcgcGVybWFuZW50UGF0aCA9IGdldFBlcm1hbmVudFBhdGgod2ViYXBwUm9vdCwgcmVsYXRpdmVQYXRoKTtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNhdGVnb3J5SW1hZ2VTZXJ2bGV0IC0gUGVybWFuZW50IHBhdGg6IFwiICsgcGVybWFuZW50UGF0aCk7XG5cbiAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgcGVybWFuZW50IGRpcmVjdG9yeSBpZiBpdCBkb2Vzbid0IGV4aXN0XG4gICAgICAgICAgICBib29sZWFuIGRpckNyZWF0ZWQgPSBlbnN1cmVEaXJlY3RvcnlFeGlzdHMocGVybWFuZW50UGF0aCk7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJDYXRlZ29yeUltYWdlU2VydmxldCAtIENyZWF0ZWQgcGVybWFuZW50IGRpcmVjdG9yeTogXCIgKyBkaXJDcmVhdGVkKTtcblxuICAgICAgICAgICAgLy8gV3JpdGUgdGhlIGZpbGUgdG8gZGVwbG95bWVudCBwYXRoXG4gICAgICAgICAgICBTdHJpbmcgZGVwbG95bWVudEZpbGVQYXRoID0gZGVwbG95bWVudFBhdGggKyBcIi9cIiArIG5ld0ZpbGVOYW1lO1xuICAgICAgICAgICAgZmlsZVBhcnQud3JpdGUoZGVwbG95bWVudEZpbGVQYXRoKTtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNhdGVnb3J5SW1hZ2VTZXJ2bGV0IC0gSW1hZ2Ugc2F2ZWQgdG8gZGVwbG95bWVudCBwYXRoOiBcIiArIGRlcGxveW1lbnRGaWxlUGF0aCk7XG4uLi5cblxuICAgICAgICAgICAgLy8gVXBkYXRlIGNhdGVnb3J5IGltYWdlIFVSTCBpbiBkYXRhYmFzZVxuICAgICAgICAgICAgU3RyaW5nIGltYWdlVXJsID0gcmVsYXRpdmVQYXRoICsgXCIvXCIgKyBuZXdGaWxlTmFtZTtcbiAgICAgICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IGNhdGVnb3J5REFPLnVwZGF0ZUNhdGVnb3J5SW1hZ2UoY2F0ZWdvcnlJZCwgaW1hZ2VVcmwpO1xuXG4gICAgICAgICAgICBpZiAoc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9hZG1pbi9jYXRlZ29yaWVzLmpzcD9zdWNjZXNzPXRydWUmbWVzc2FnZT1DYXRlZ29yeStpbWFnZSt1cGRhdGVkK3N1Y2Nlc3NmdWxseVwiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL2FkbWluL2NhdGVnb3JpZXMuanNwP2Vycm9yPXRydWUmbWVzc2FnZT1GYWlsZWQrdG8rdXBkYXRlK2NhdGVnb3J5K2ltYWdlXCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0gY2F0Y2ggKE51bWJlckZvcm1hdEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvYWRtaW4vY2F0ZWdvcmllcy5qc3A/ZXJyb3I9dHJ1ZSZtZXNzYWdlPUludmFsaWQrY2F0ZWdvcnkrSURcIik7XG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvYWRtaW4vY2F0ZWdvcmllcy5qc3A/ZXJyb3I9dHJ1ZSZtZXNzYWdlPUVycm9yK3VwbG9hZGluZytpbWFnZTorXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgIH1cbiAgICB9XG4uLi5cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgcGVybWFuZW50IHBhdGggZm9yIHN0b3JpbmcgaW1hZ2VzXG4gICAgICogQHBhcmFtIHdlYmFwcFJvb3QgVGhlIHdlYmFwcCByb290IHBhdGhcbiAgICAgKiBAcGFyYW0gcmVsYXRpdmVQYXRoIFRoZSByZWxhdGl2ZSBwYXRoIHdpdGhpbiB0aGUgd2ViYXBwXG4gICAgICogQHJldHVybiBUaGUgcGVybWFuZW50IHBhdGhcbiAgICAgKi9cbiAgICBwcml2YXRlIFN0cmluZyBnZXRQZXJtYW5lbnRQYXRoKFN0cmluZyB3ZWJhcHBSb290LCBTdHJpbmcgcmVsYXRpdmVQYXRoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBGaXJzdCwgdHJ5IHRvIHVzZSBhIGZpeGVkLCBhYnNvbHV0ZSBwYXRoIHRoYXQgd2lsbCBkZWZpbml0ZWx5IHBlcnNpc3RcbiAgICAgICAgICAgIC8vIFRoaXMgcGF0aCBzaG91bGQgYmUgb3V0c2lkZSB0aGUgZGVwbG95bWVudCBkaXJlY3RvcnkgYnV0IGFjY2Vzc2libGUgYnkgdGhlIHdlYiBzZXJ2ZXJcbiAgICAgICAgICAgIC8vIFVzZSB0aGUgdXNlcidzIGhvbWUgZGlyZWN0b3J5XG4gICAgICAgICAgICBTdHJpbmcgdXNlckhvbWUgPSBTeXN0ZW0uZ2V0UHJvcGVydHkoXCJ1c2VyLmhvbWVcIik7XG4gICAgICAgICAgICBTdHJpbmcgZml4ZWRQYXRoID0gdXNlckhvbWUgKyBGaWxlLnNlcGFyYXRvciArIFwiQ2xvdGhlZUltYWdlc1wiICsgRmlsZS5zZXBhcmF0b3IgKyByZWxhdGl2ZVBhdGg7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJDYXRlZ29yeUltYWdlU2VydmxldCAtIFVzaW5nIGZpeGVkIHBhdGggaW4gdXNlciBob21lOiBcIiArIGZpeGVkUGF0aCk7XG4gICAgICAgICAgICBGaWxlIGZpeGVkRGlyID0gbmV3IEZpbGUoZml4ZWRQYXRoKTtcbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9jb250cm9sbGVyL0NhdGVnb3J5SW1hZ2VTZXJ2bGV0LmphdmFcbi4uLlxuXG4gICAgICAgICAgICAvLyBQcm9jZXNzIHRoZSB1cGxvYWRlZCBmaWxlXG4gICAgICAgICAgICBTdHJpbmcgZmlsZU5hbWUgPSBnZXRTdWJtaXR0ZWRGaWxlTmFtZShmaWxlUGFydCk7XG4gICAgICAgICAgICBpZiAoZmlsZU5hbWUgPT0gbnVsbCB8fCBmaWxlTmFtZS5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvYWRtaW4vY2F0ZWdvcmllcy5qc3A/ZXJyb3I9dHJ1ZSZtZXNzYWdlPUludmFsaWQrZmlsZStuYW1lXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgU3RyaW5nIGZpbGVFeHRlbnNpb24gPSBmaWxlTmFtZS5zdWJzdHJpbmcoZmlsZU5hbWUubGFzdEluZGV4T2YoXCIuXCIpKTtcbiAgICAgICAgICAgIFN0cmluZyBuZXdGaWxlTmFtZSA9IFwiY2F0ZWdvcnlfXCIgKyBjYXRlZ29yeUlkICsgZmlsZUV4dGVuc2lvbjtcblxuICAgICAgICAgICAgLy8gU2F2ZSB0aGUgZmlsZSB0byB0aGUgc2VydmVyXG4gICAgICAgICAgICBTdHJpbmcgcmVsYXRpdmVQYXRoID0gXCJpbWFnZXMvY2F0ZWdvcmllc1wiO1xuICAgICAgICAgICAgU3RyaW5nIHVwbG9hZFBhdGggPSByZXF1ZXN0LmdldFNlcnZsZXRDb250ZXh0KCkuZ2V0UmVhbFBhdGgoXCIvXCIpICsgcmVsYXRpdmVQYXRoICsgXCIvXCI7XG5cbiAgICAgICAgICAgIEZpbGUgdXBsb2FkRGlyID0gbmV3IEZpbGUodXBsb2FkUGF0aCk7XG4gICAgICAgICAgICBpZiAoIXVwbG9hZERpci5leGlzdHMoKSkge1xuICAgICAgICAgICAgICAgIHVwbG9hZERpci5ta2RpcnMoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZmlsZVBhcnQud3JpdGUodXBsb2FkUGF0aCArIG5ld0ZpbGVOYW1lKTtcblxuICAgICAgICAgICAgLy8gVXBkYXRlIGNhdGVnb3J5IGltYWdlIFVSTCBpbiBkYXRhYmFzZVxuICAgICAgICAgICAgU3RyaW5nIGltYWdlVXJsID0gcmVsYXRpdmVQYXRoICsgXCIvXCIgKyBuZXdGaWxlTmFtZTtcbiAgICAgICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IGNhdGVnb3J5REFPLnVwZGF0ZUNhdGVnb3J5SW1hZ2UoY2F0ZWdvcnlJZCwgaW1hZ2VVcmwpO1xuXG4gICAgICAgICAgICBpZiAoc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9hZG1pbi9jYXRlZ29yaWVzLmpzcD9zdWNjZXNzPXRydWUmbWVzc2FnZT1DYXRlZ29yeStpbWFnZSt1cGRhdGVkK3N1Y2Nlc3NmdWxseVwiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL2FkbWluL2NhdGVnb3JpZXMuanNwP2Vycm9yPXRydWUmbWVzc2FnZT1GYWlsZWQrdG8rdXBkYXRlK2NhdGVnb3J5K2ltYWdlXCIpO1xuICAgICAgICAgICAgfVxuLi4uXG5QYXRoOiBDbG90aGVlL3NyYy9tYWluL2phdmEvZGFvL0NhdGVnb3J5REFPLmphdmFcbi4uLlxuXG4gICAgLyoqXG4gICAgICogQWRkIGEgbmV3IGNhdGVnb3J5IHRvIHRoZSBkYXRhYmFzZVxuICAgICAqIEBwYXJhbSBjYXRlZ29yeSBDYXRlZ29yeSBvYmplY3QgdG8gYWRkXG4gICAgICogQHJldHVybiB0cnVlIGlmIHN1Y2Nlc3NmdWwsIGZhbHNlIG90aGVyd2lzZVxuICAgICAqL1xuICAgIHB1YmxpYyBib29sZWFuIGFkZENhdGVnb3J5KENhdGVnb3J5IGNhdGVnb3J5KSB7XG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIj09PT09IEFERElORyBDQVRFR09SWSA9PT09PVwiKTtcbiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQ2F0ZWdvcnkgbmFtZTogXCIgKyBjYXRlZ29yeS5nZXROYW1lKCkpO1xuICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJDYXRlZ29yeSBkZXNjcmlwdGlvbjogXCIgKyBjYXRlZ29yeS5nZXREZXNjcmlwdGlvbigpKTtcbiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQ2F0ZWdvcnkgaW1hZ2VVcmw6IFwiICsgY2F0ZWdvcnkuZ2V0SW1hZ2VVcmwoKSk7XG5cbiAgICAgICAgLy8gRmlyc3QgY2hlY2sgaWYgYSBjYXRlZ29yeSB3aXRoIHRoaXMgbmFtZSBhbHJlYWR5IGV4aXN0c1xuICAgICAgICBpZiAoY2F0ZWdvcnlFeGlzdHMoY2F0ZWdvcnkuZ2V0TmFtZSgpKSkge1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQ2F0ZWdvcnkgYWxyZWFkeSBleGlzdHM6IFwiICsgY2F0ZWdvcnkuZ2V0TmFtZSgpKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRyeSBhIHNpbXBsZXIgcXVlcnkgd2l0aG91dCB0aGUgaW1hZ2VfdXJsIGZpZWxkXG4gICAgICAgIFN0cmluZyBxdWVyeSA9IFwiSU5TRVJUIElOVE8gY2F0ZWdvcmllcyAobmFtZSwgZGVzY3JpcHRpb24pIFZBTFVFUyAoPywgPylcIjtcbi4uLlxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIGNhdGVnb3J5IGltYWdlIFVSTFxuICAgICAqIEBwYXJhbSBjYXRlZ29yeUlkIENhdGVnb3J5IElEXG4gICAgICogQHBhcmFtIGltYWdlVXJsIEltYWdlIFVSTFxuICAgICAqIEByZXR1cm4gdHJ1ZSBpZiBzdWNjZXNzZnVsLCBmYWxzZSBvdGhlcndpc2VcbiAgICAgKi9cbiAgICBwdWJsaWMgYm9vbGVhbiB1cGRhdGVDYXRlZ29yeUltYWdlKGludCBjYXRlZ29yeUlkLCBTdHJpbmcgaW1hZ2VVcmwpIHtcbiAgICAgICAgU3RyaW5nIHF1ZXJ5ID0gXCJVUERBVEUgY2F0ZWdvcmllcyBTRVQgaW1hZ2VfdXJsID0gPyBXSEVSRSBpZCA9ID9cIjtcblxuICAgICAgICB0cnkgKENvbm5lY3Rpb24gY29ubiA9IERCQ29ubmVjdGlvbi5nZXRDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChxdWVyeSkpIHtcblxuICAgICAgICAgICAgaWYgKGltYWdlVXJsID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBzdG10LnNldE51bGwoMSwgamF2YS5zcWwuVHlwZXMuVkFSQ0hBUik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIGltYWdlVXJsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN0bXQuc2V0SW50KDIsIGNhdGVnb3J5SWQpO1xuXG4gICAgICAgICAgICBpbnQgcm93c0FmZmVjdGVkID0gc3RtdC5leGVjdXRlVXBkYXRlKCk7XG4gICAgICAgICAgICByZXR1cm4gcm93c0FmZmVjdGVkID4gMDtcblxuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbi4uLlxuXG4gICAgLyoqXG4gICAgICogR2V0IGNhdGVnb3J5IGJ5IElEXG4gICAgICogQHBhcmFtIGNhdGVnb3J5SWQgQ2F0ZWdvcnkgSURcbiAgICAgKiBAcmV0dXJuIENhdGVnb3J5IG9iamVjdCBpZiBmb3VuZCwgbnVsbCBvdGhlcndpc2VcbiAgICAgKi9cbiAgICBwdWJsaWMgQ2F0ZWdvcnkgZ2V0Q2F0ZWdvcnlCeUlkKGludCBjYXRlZ29yeUlkKSB7XG4gICAgICAgIFN0cmluZyBxdWVyeSA9IFwiU0VMRUNUICogRlJPTSBjYXRlZ29yaWVzIFdIRVJFIGlkID0gP1wiO1xuXG4gICAgICAgIHRyeSAoQ29ubmVjdGlvbiBjb25uID0gREJDb25uZWN0aW9uLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHF1ZXJ5KSkge1xuXG4gICAgICAgICAgICBzdG10LnNldEludCgxLCBjYXRlZ29yeUlkKTtcblxuICAgICAgICAgICAgdHJ5IChSZXN1bHRTZXQgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeSgpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJzLm5leHQoKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXh0cmFjdENhdGVnb3J5RnJvbVJlc3VsdFNldChycyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuLi4uXG5cbiAgICAvKipcbiAgICAgKiBHZXQgYWxsIGNhdGVnb3JpZXNcbiAgICAgKiBAcmV0dXJuIExpc3Qgb2YgYWxsIGNhdGVnb3JpZXNcbiAgICAgKi9cbiAgICBwdWJsaWMgTGlzdDxDYXRlZ29yeT4gZ2V0QWxsQ2F0ZWdvcmllcygpIHtcbiAgICAgICAgTGlzdDxDYXRlZ29yeT4gY2F0ZWdvcmllcyA9IG5ldyBBcnJheUxpc3Q8PigpO1xuXG4gICAgICAgIC8vIFNpbXBsaWZpZWQgcXVlcnkgdG8gZW5zdXJlIHdlIGdldCBhbGwgY2F0ZWdvcmllcyByZWdhcmRsZXNzIG9mIHByb2R1Y3RzXG4gICAgICAgIFN0cmluZyBxdWVyeSA9IFwiU0VMRUNUICogRlJPTSBjYXRlZ29yaWVzIE9SREVSIEJZIG5hbWVcIjtcblxuICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJFeGVjdXRpbmcgZ2V0QWxsQ2F0ZWdvcmllcyBxdWVyeTogXCIgKyBxdWVyeSk7XG5cbiAgICAgICAgdHJ5IChDb25uZWN0aW9uIGNvbm4gPSBEQkNvbm5lY3Rpb24uZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgIFN0YXRlbWVudCBzdG10ID0gY29ubi5jcmVhdGVTdGF0ZW1lbnQoKTtcbiAgICAgICAgICAgICBSZXN1bHRTZXQgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeShxdWVyeSkpIHtcblxuICAgICAgICAgICAgaW50IGNvdW50ID0gMDtcbiAgICAgICAgICAgIHdoaWxlIChycy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICBjb3VudCsrO1xuICAgICAgICAgICAgICAgIENhdGVnb3J5IGNhdGVnb3J5ID0gZXh0cmFjdENhdGVnb3J5RnJvbVJlc3VsdFNldChycyk7XG4gICAgICAgICAgICAgICAgLy8gU2V0IHByb2R1Y3QgY291bnQgdG8gMCBieSBkZWZhdWx0XG4gICAgICAgICAgICAgICAgY2F0ZWdvcnkuc2V0UHJvZHVjdENvdW50KDApO1xuICAgICAgICAgICAgICAgIGNhdGVnb3JpZXMuYWRkKGNhdGVnb3J5KTtcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJGb3VuZCBjYXRlZ29yeTogXCIgKyBjYXRlZ29yeS5nZXROYW1lKCkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJUb3RhbCBjYXRlZ29yaWVzIGZvdW5kOiBcIiArIGNvdW50KTtcblxuICAgICAgICAgICAgLy8gTm93IGdldCBwcm9kdWN0IGNvdW50cyBpbiBhIHNlcGFyYXRlIHF1ZXJ5XG4gICAgICAgICAgICBpZiAoIWNhdGVnb3JpZXMuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgU3RyaW5nIGNvdW50UXVlcnkgPSBcIlNFTEVDVCBjYXRlZ29yeSwgQ09VTlQoKikgYXMgY291bnQgRlJPTSBwcm9kdWN0cyBHUk9VUCBCWSBjYXRlZ29yeVwiO1xuICAgICAgICAgICAgICAgIHRyeSAoU3RhdGVtZW50IGNvdW50U3RtdCA9IGNvbm4uY3JlYXRlU3RhdGVtZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICBSZXN1bHRTZXQgY291bnRScyA9IGNvdW50U3RtdC5leGVjdXRlUXVlcnkoY291bnRRdWVyeSkpIHtcblxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoY291bnRScy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBjYXRlZ29yeU5hbWUgPSBjb3VudFJzLmdldFN0cmluZyhcImNhdGVnb3J5XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW50IHByb2R1Y3RDb3VudCA9IGNvdW50UnMuZ2V0SW50KFwiY291bnRcIik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgcHJvZHVjdCBjb3VudCBmb3IgdGhlIG1hdGNoaW5nIGNhdGVnb3J5XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKENhdGVnb3J5IGNhdGVnb3J5IDogY2F0ZWdvcmllcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYXRlZ29yeS5nZXROYW1lKCkuZXF1YWxzKGNhdGVnb3J5TmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnkuc2V0UHJvZHVjdENvdW50KHByb2R1Y3RDb3VudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbi4uLlxuUGF0aDogQ2xvdGhlZS9zcmMvbWFpbi9qYXZhL21vZGVsL0NhdGVnb3J5LmphdmFcbnBhY2thZ2UgbW9kZWw7XG5cbmltcG9ydCBqYXZhLnNxbC5UaW1lc3RhbXA7XG5pbXBvcnQgamF2YS51dGlsLkRhdGU7XG5cbi8qKlxuICogQ2F0ZWdvcnkgbW9kZWwgY2xhc3NcbiAqL1xucHVibGljIGNsYXNzIENhdGVnb3J5IHtcbiAgICBwcml2YXRlIGludCBpZDtcbiAgICBwcml2YXRlIFN0cmluZyBuYW1lO1xuICAgIHByaXZhdGUgU3RyaW5nIGRlc2NyaXB0aW9uO1xuICAgIHByaXZhdGUgU3RyaW5nIGltYWdlVXJsOyAvLyBBZGRlZCBmaWVsZCBmb3IgY2F0ZWdvcnkgaW1hZ2VcbiAgICBwcml2YXRlIFRpbWVzdGFtcCBjcmVhdGVkQXQ7XG4gICAgcHJpdmF0ZSBpbnQgcHJvZHVjdENvdW50OyAvLyBOdW1iZXIgb2YgcHJvZHVjdHMgaW4gdGhpcyBjYXRlZ29yeVxuXG4gICAgLy8gRGVmYXVsdCBjb25zdHJ1Y3RvclxuICAgIHB1YmxpYyBDYXRlZ29yeSgpIHtcbiAgICB9XG5cbiAgICAvLyBDb25zdHJ1Y3RvciB3aXRoIGZpZWxkc1xuICAgIHB1YmxpYyBDYXRlZ29yeShpbnQgaWQsIFN0cmluZyBuYW1lLCBTdHJpbmcgZGVzY3JpcHRpb24sIFN0cmluZyBpbWFnZVVybCwgVGltZXN0YW1wIGNyZWF0ZWRBdCkge1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICAgICAgdGhpcy5pbWFnZVVybCA9IGltYWdlVXJsO1xuICAgICAgICB0aGlzLmNyZWF0ZWRBdCA9IGNyZWF0ZWRBdDtcbiAgICB9XG5cbiAgICAvLyBHZXR0ZXJzIGFuZCBTZXR0ZXJzXG4gICAgcHVibGljIGludCBnZXRJZCgpIHtcbiAgICAgICAgcmV0dXJuIGlkO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldElkKGludCBpZCkge1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgfVxuXG4gICAgcHVibGljIFN0cmluZyBnZXROYW1lKCkge1xuICAgICAgICByZXR1cm4gbmFtZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXROYW1lKFN0cmluZyBuYW1lKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgfVxuXG4gICAgcHVibGljIFN0cmluZyBnZXREZXNjcmlwdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGRlc2NyaXB0aW9uO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldERlc2NyaXB0aW9uKFN0cmluZyBkZXNjcmlwdGlvbikge1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgfVxuXG4gICAgcHVibGljIFN0cmluZyBnZXRJbWFnZVVybCgpIHtcbiAgICAgICAgcmV0dXJuIGltYWdlVXJsO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldEltYWdlVXJsKFN0cmluZyBpbWFnZVVybCkge1xuICAgICAgICB0aGlzLmltYWdlVXJsID0gaW1hZ2VVcmw7XG4gICAgfVxuXG4gICAgcHVibGljIFRpbWVzdGFtcCBnZXRDcmVhdGVkQXQoKSB7XG4gICAgICAgIHJldHVybiBjcmVhdGVkQXQ7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0Q3JlYXRlZEF0KFRpbWVzdGFtcCBjcmVhdGVkQXQpIHtcbiAgICAgICAgdGhpcy5jcmVhdGVkQXQgPSBjcmVhdGVkQXQ7XG4gICAgfVxuXG4gICAgcHVibGljIGludCBnZXRQcm9kdWN0Q291bnQoKSB7XG4gICAgICAgIHJldHVybiBwcm9kdWN0Q291bnQ7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0UHJvZHVjdENvdW50KGludCBwcm9kdWN0Q291bnQpIHtcbiAgICAgICAgdGhpcy5wcm9kdWN0Q291bnQgPSBwcm9kdWN0Q291bnQ7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIFN0cmluZyB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFwiQ2F0ZWdvcnl7XCIgK1xuICAgICAgICAgICAgICAgIFwiaWQ9XCIgKyBpZCArXG4gICAgICAgICAgICAgICAgXCIsIG5hbWU9J1wiICsgbmFtZSArICdcXCcnICtcbiAgICAgICAgICAgICAgICBcIiwgZGVzY3JpcHRpb249J1wiICsgZGVzY3JpcHRpb24gKyAnXFwnJyArXG4gICAgICAgICAgICAgICAgXCIsIGltYWdlVXJsPSdcIiArIGltYWdlVXJsICsgJ1xcJycgK1xuICAgICAgICAgICAgICAgIFwiLCBjcmVhdGVkQXQ9XCIgKyBjcmVhdGVkQXQgK1xuICAgICAgICAgICAgICAgIFwiLCBwcm9kdWN0Q291bnQ9XCIgKyBwcm9kdWN0Q291bnQgK1xuICAgICAgICAgICAgICAgICd9JztcbiAgICB9XG59XG4uLi5cblBhdGg6IENsb3RoZWUvc3JjL21haW4vamF2YS9kYW8vUHJvZHVjdERBTy5qYXZhXG4uLi5cblxuICAgIC8qKlxuICAgICAqIExvYWQgYWRkaXRpb25hbCBpbWFnZXMgZm9yIGEgcHJvZHVjdFxuICAgICAqIEBwYXJhbSBwcm9kdWN0IFByb2R1Y3QgdG8gbG9hZCBpbWFnZXMgZm9yXG4gICAgICovXG4gICAgcHJpdmF0ZSB2b2lkIGxvYWRQcm9kdWN0SW1hZ2VzKFByb2R1Y3QgcHJvZHVjdCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gSW4gdGhpcyBpbXBsZW1lbnRhdGlvbiwgd2UgZG9uJ3QgaGF2ZSBhIHNlcGFyYXRlIHByb2R1Y3RfaW1hZ2VzIHRhYmxlXG4gICAgICAgICAgICAvLyBUaGUgbWFpbiBpbWFnZSBpcyBzdG9yZWQgaW4gdGhlIHByb2R1Y3RzIHRhYmxlJ3MgaW1hZ2VfdXJsIGNvbHVtblxuICAgICAgICAgICAgLy8gRm9yIG5vdywgd2UnbGwganVzdCB1c2UgdGhlIG1haW4gaW1hZ2UgYXMgdGhlIG9ubHkgaW1hZ2VcbiAgICAgICAgICAgIC8vIFRoaXMgbWV0aG9kIGNhbiBiZSBleHBhbmRlZCBsYXRlciBpZiB5b3UgYWRkIGEgcHJvZHVjdF9pbWFnZXMgdGFibGVcblxuICAgICAgICAgICAgLy8gQWRkIHRoZSBtYWluIGltYWdlIGFzIHRoZSBvbmx5IGltYWdlIGlmIGl0IGV4aXN0c1xuICAgICAgICAgICAgU3RyaW5nIGltYWdlVXJsID0gcHJvZHVjdC5nZXRJbWFnZVVybCgpO1xuICAgICAgICAgICAgaWYgKGltYWdlVXJsICE9IG51bGwgJiYgIWltYWdlVXJsLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgIHByb2R1Y3QuYWRkQWRkaXRpb25hbEltYWdlKGltYWdlVXJsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkVycm9yIGluIGxvYWRQcm9kdWN0SW1hZ2VzOiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICAvLyBDb250aW51ZSB3aXRob3V0IGFkZGl0aW9uYWwgaW1hZ2VzXG4gICAgICAgIH1cbiAgICB9XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvbW9kZWwvQ2F0ZWdvcnkuamF2YVxuLi4uXG5cbi8qKlxuICogQ2F0ZWdvcnkgbW9kZWwgY2xhc3NcbiAqL1xucHVibGljIGNsYXNzIENhdGVnb3J5IHtcbiAgICBwcml2YXRlIGludCBpZDtcbiAgICBwcml2YXRlIFN0cmluZyBuYW1lO1xuICAgIHByaXZhdGUgU3RyaW5nIGRlc2NyaXB0aW9uO1xuICAgIHByaXZhdGUgU3RyaW5nIGltYWdlVXJsOyAvLyBBZGRlZCBmaWVsZCBmb3IgY2F0ZWdvcnkgaW1hZ2VcbiAgICBwcml2YXRlIFRpbWVzdGFtcCBjcmVhdGVkQXQ7XG4gICAgcHJpdmF0ZSBpbnQgcHJvZHVjdENvdW50OyAvLyBOdW1iZXIgb2YgcHJvZHVjdHMgaW4gdGhpcyBjYXRlZ29yeVxuXG4gICAgLy8gRGVmYXVsdCBjb25zdHJ1Y3RvclxuICAgIHB1YmxpYyBDYXRlZ29yeSgpIHtcbiAgICB9XG5cbiAgICAvLyBDb25zdHJ1Y3RvciB3aXRoIGZpZWxkc1xuICAgIHB1YmxpYyBDYXRlZ29yeShpbnQgaWQsIFN0cmluZyBuYW1lLCBTdHJpbmcgZGVzY3JpcHRpb24sIFN0cmluZyBpbWFnZVVybCwgVGltZXN0YW1wIGNyZWF0ZWRBdCkge1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICAgICAgdGhpcy5pbWFnZVVybCA9IGltYWdlVXJsO1xuICAgICAgICB0aGlzLmNyZWF0ZWRBdCA9IGNyZWF0ZWRBdDtcbiAgICB9XG5cbiAgICAvLyBHZXR0ZXJzIGFuZCBTZXR0ZXJzXG4gICAgcHVibGljIGludCBnZXRJZCgpIHtcbiAgICAgICAgcmV0dXJuIGlkO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldElkKGludCBpZCkge1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgfVxuXG4gICAgcHVibGljIFN0cmluZyBnZXROYW1lKCkge1xuICAgICAgICByZXR1cm4gbmFtZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXROYW1lKFN0cmluZyBuYW1lKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgfVxuXG4gICAgcHVibGljIFN0cmluZyBnZXREZXNjcmlwdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGRlc2NyaXB0aW9uO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldERlc2NyaXB0aW9uKFN0cmluZyBkZXNjcmlwdGlvbikge1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgfVxuXG4gICAgcHVibGljIFN0cmluZyBnZXRJbWFnZVVybCgpIHtcbiAgICAgICAgcmV0dXJuIGltYWdlVXJsO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldEltYWdlVXJsKFN0cmluZyBpbWFnZVVybCkge1xuICAgICAgICB0aGlzLmltYWdlVXJsID0gaW1hZ2VVcmw7XG4gICAgfVxuXG4gICAgcHVibGljIFRpbWVzdGFtcCBnZXRDcmVhdGVkQXQoKSB7XG4gICAgICAgIHJldHVybiBjcmVhdGVkQXQ7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0Q3JlYXRlZEF0KFRpbWVzdGFtcCBjcmVhdGVkQXQpIHtcbiAgICAgICAgdGhpcy5jcmVhdGVkQXQgPSBjcmVhdGVkQXQ7XG4gICAgfVxuXG4gICAgcHVibGljIGludCBnZXRQcm9kdWN0Q291bnQoKSB7XG4gICAgICAgIHJldHVybiBwcm9kdWN0Q291bnQ7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0UHJvZHVjdENvdW50KGludCBwcm9kdWN0Q291bnQpIHtcbiAgICAgICAgdGhpcy5wcm9kdWN0Q291bnQgPSBwcm9kdWN0Q291bnQ7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIFN0cmluZyB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFwiQ2F0ZWdvcnl7XCIgK1xuICAgICAgICAgICAgICAgIFwiaWQ9XCIgKyBpZCArXG4gICAgICAgICAgICAgICAgXCIsIG5hbWU9J1wiICsgbmFtZSArICdcXCcnICtcbiAgICAgICAgICAgICAgICBcIiwgZGVzY3JpcHRpb249J1wiICsgZGVzY3JpcHRpb24gKyAnXFwnJyArXG4gICAgICAgICAgICAgICAgXCIsIGltYWdlVXJsPSdcIiArIGltYWdlVXJsICsgJ1xcJycgK1xuICAgICAgICAgICAgICAgIFwiLCBjcmVhdGVkQXQ9XCIgKyBjcmVhdGVkQXQgK1xuICAgICAgICAgICAgICAgIFwiLCBwcm9kdWN0Q291bnQ9XCIgKyBwcm9kdWN0Q291bnQgK1xuICAgICAgICAgICAgICAgICd9JztcbiAgICB9XG59XG4uLi5cblBhdGg6IENsb3RoZWUvc3JjL21haW4vcmVzb3VyY2VzL2Nsb3RoZWUuc3FsXG4tLSBEcm9wIGV4aXN0aW5nIHRhYmxlcyBpZiBuZWVkZWRcbkRST1AgVEFCTEUgSUYgRVhJU1RTIG1lc3NhZ2VzLCB3aXNobGlzdCwgY2FydCwgcmV2aWV3cywgc2hpcHBpbmcsIHBheW1lbnRzLCBvcmRlcl9pdGVtcywgb3JkZXJzLCBwcm9kdWN0cywgY2F0ZWdvcmllcywgdXNlcnM7XG5cbi0tIENyZWF0ZSB1c2VycyB0YWJsZVxuQ1JFQVRFIFRBQkxFIHVzZXJzIChcbiAgICBpZCBJTlQgQVVUT19JTkNSRU1FTlQgUFJJTUFSWSBLRVksXG4gICAgZmlyc3RfbmFtZSBWQVJDSEFSKDUwKSBOT1QgTlVMTCxcbiAgICBsYXN0X25hbWUgVkFSQ0hBUig1MCkgTk9UIE5VTEwsXG4gICAgZW1haWwgVkFSQ0hBUigxMDApIE5PVCBOVUxMIFVOSVFVRSxcbiAgICBwYXNzd29yZCBWQVJDSEFSKDI1NSkgTk9UIE5VTEwsXG4gICAgcGhvbmUgVkFSQ0hBUigyMCksXG4gICAgcm9sZSBWQVJDSEFSKDIwKSBOT1QgTlVMTCBERUZBVUxUICd1c2VyJyxcbiAgICBpc19hZG1pbiBCT09MRUFOIE5PVCBOVUxMIERFRkFVTFQgRkFMU0UsXG4gICAgcHJvZmlsZV9pbWFnZSBWQVJDSEFSKDI1NSksXG4gICAgY3JlYXRlZF9hdCBUSU1FU1RBTVAgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCxcbiAgICB1cGRhdGVkX2F0IFRJTUVTVEFNUCBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QIE9OIFVQREFURSBDVVJSRU5UX1RJTUVTVEFNUFxuKTtcbi4uLlxuXG4tLSBDcmVhdGUgY2F0ZWdvcmllcyB0YWJsZVxuQ1JFQVRFIFRBQkxFIGNhdGVnb3JpZXMgKFxuICAgIGlkIElOVCBBVVRPX0lOQ1JFTUVOVCBQUklNQVJZIEtFWSxcbiAgICBuYW1lIFZBUkNIQVIoNTApIE5PVCBOVUxMIFVOSVFVRSxcbiAgICBkZXNjcmlwdGlvbiBURVhULFxuICAgIGltYWdlX3VybCBWQVJDSEFSKDI1NSksXG4gICAgY3JlYXRlZF9hdCBUSU1FU1RBTVAgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUFxuKTtcblxuSU5TRVJUIElOVE8gY2F0ZWdvcmllcyAobmFtZSwgZGVzY3JpcHRpb24pIFZBTFVFU1xuKCdNZW4nLCAnTWVuJydzIGNsb3RoaW5nIGFuZCBhY2Nlc3NvcmllcycpLFxuKCdXb21lbicsICdXb21lbicncyBjbG90aGluZyBhbmQgYWNjZXNzb3JpZXMnKSxcbignS2lkcycsICdDaGlsZHJlbicncyBjbG90aGluZyBhbmQgYWNjZXNzb3JpZXMnKSxcbignQWNjZXNzb3JpZXMnLCAnRmFzaGlvbiBhY2Nlc3NvcmllcyBmb3IgYWxsJyk7XG5cbi0tIENyZWF0ZSBwcm9kdWN0cyB0YWJsZVxuQ1JFQVRFIFRBQkxFIHByb2R1Y3RzIChcbiAgICBpZCBJTlQgQVVUT19JTkNSRU1FTlQgUFJJTUFSWSBLRVksXG4gICAgbmFtZSBWQVJDSEFSKDEwMCkgTk9UIE5VTEwsXG4gICAgZGVzY3JpcHRpb24gVEVYVCxcbiAgICBwcmljZSBERUNJTUFMKDEwLCAyKSBOT1QgTlVMTCxcbiAgICBzdG9jayBJTlQgTk9UIE5VTEwgREVGQVVMVCAwLFxuICAgIGNhdGVnb3J5IFZBUkNIQVIoNTApIE5PVCBOVUxMLFxuICAgIHR5cGUgVkFSQ0hBUig1MCksXG4gICAgaW1hZ2VfdXJsIFZBUkNIQVIoMjU1KSxcbiAgICBmZWF0dXJlZCBCT09MRUFOIERFRkFVTFQgRkFMU0UsXG4gICAgY3JlYXRlZF9hdCBUSU1FU1RBTVAgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCxcbiAgICB1cGRhdGVkX2F0IFRJTUVTVEFNUCBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QIE9OIFVQREFURSBDVVJSRU5UX1RJTUVTVEFNUFxuKTtcbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9kYW8vQ2F0ZWdvcnlEQU8uamF2YVxuLi4uXG5cbiAgICAvKipcbiAgICAgKiBHZXQgYWxsIGNhdGVnb3JpZXNcbiAgICAgKiBAcmV0dXJuIExpc3Qgb2YgYWxsIGNhdGVnb3JpZXNcbiAgICAgKi9cbiAgICBwdWJsaWMgTGlzdDxDYXRlZ29yeT4gZ2V0QWxsQ2F0ZWdvcmllcygpIHtcbiAgICAgICAgTGlzdDxDYXRlZ29yeT4gY2F0ZWdvcmllcyA9IG5ldyBBcnJheUxpc3Q8PigpO1xuXG4gICAgICAgIC8vIFNpbXBsaWZpZWQgcXVlcnkgdG8gZW5zdXJlIHdlIGdldCBhbGwgY2F0ZWdvcmllcyByZWdhcmRsZXNzIG9mIHByb2R1Y3RzXG4gICAgICAgIFN0cmluZyBxdWVyeSA9IFwiU0VMRUNUICogRlJPTSBjYXRlZ29yaWVzIE9SREVSIEJZIG5hbWVcIjtcblxuICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJFeGVjdXRpbmcgZ2V0QWxsQ2F0ZWdvcmllcyBxdWVyeTogXCIgKyBxdWVyeSk7XG5cbiAgICAgICAgdHJ5IChDb25uZWN0aW9uIGNvbm4gPSBEQkNvbm5lY3Rpb24uZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgIFN0YXRlbWVudCBzdG10ID0gY29ubi5jcmVhdGVTdGF0ZW1lbnQoKTtcbiAgICAgICAgICAgICBSZXN1bHRTZXQgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeShxdWVyeSkpIHtcblxuICAgICAgICAgICAgaW50IGNvdW50ID0gMDtcbiAgICAgICAgICAgIHdoaWxlIChycy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICBjb3VudCsrO1xuICAgICAgICAgICAgICAgIENhdGVnb3J5IGNhdGVnb3J5ID0gZXh0cmFjdENhdGVnb3J5RnJvbVJlc3VsdFNldChycyk7XG4gICAgICAgICAgICAgICAgLy8gU2V0IHByb2R1Y3QgY291bnQgdG8gMCBieSBkZWZhdWx0XG4gICAgICAgICAgICAgICAgY2F0ZWdvcnkuc2V0UHJvZHVjdENvdW50KDApO1xuICAgICAgICAgICAgICAgIGNhdGVnb3JpZXMuYWRkKGNhdGVnb3J5KTtcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJGb3VuZCBjYXRlZ29yeTogXCIgKyBjYXRlZ29yeS5nZXROYW1lKCkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJUb3RhbCBjYXRlZ29yaWVzIGZvdW5kOiBcIiArIGNvdW50KTtcblxuICAgICAgICAgICAgLy8gTm93IGdldCBwcm9kdWN0IGNvdW50cyBpbiBhIHNlcGFyYXRlIHF1ZXJ5XG4gICAgICAgICAgICBpZiAoIWNhdGVnb3JpZXMuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgU3RyaW5nIGNvdW50UXVlcnkgPSBcIlNFTEVDVCBjYXRlZ29yeSwgQ09VTlQoKikgYXMgY291bnQgRlJPTSBwcm9kdWN0cyBHUk9VUCBCWSBjYXRlZ29yeVwiO1xuICAgICAgICAgICAgICAgIHRyeSAoU3RhdGVtZW50IGNvdW50U3RtdCA9IGNvbm4uY3JlYXRlU3RhdGVtZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICBSZXN1bHRTZXQgY291bnRScyA9IGNvdW50U3RtdC5leGVjdXRlUXVlcnkoY291bnRRdWVyeSkpIHtcblxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoY291bnRScy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBjYXRlZ29yeU5hbWUgPSBjb3VudFJzLmdldFN0cmluZyhcImNhdGVnb3J5XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW50IHByb2R1Y3RDb3VudCA9IGNvdW50UnMuZ2V0SW50KFwiY291bnRcIik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgcHJvZHVjdCBjb3VudCBmb3IgdGhlIG1hdGNoaW5nIGNhdGVnb3J5XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKENhdGVnb3J5IGNhdGVnb3J5IDogY2F0ZWdvcmllcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYXRlZ29yeS5nZXROYW1lKCkuZXF1YWxzKGNhdGVnb3J5TmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnkuc2V0UHJvZHVjdENvdW50KHByb2R1Y3RDb3VudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbi4uLlxuUGF0aDogc3JjL21haW4vcmVzb3VyY2VzL2Nsb3RoZWUuc3FsXG4tLSBEcm9wIGV4aXN0aW5nIHRhYmxlcyBpZiBuZWVkZWRcbkRST1AgVEFCTEUgSUYgRVhJU1RTIG1lc3NhZ2VzLCB3aXNobGlzdCwgY2FydCwgcmV2aWV3cywgc2hpcHBpbmcsIHBheW1lbnRzLCBvcmRlcl9pdGVtcywgb3JkZXJzLCBwcm9kdWN0cywgY2F0ZWdvcmllcywgdXNlcnM7XG5cbi0tIENyZWF0ZSB1c2VycyB0YWJsZVxuQ1JFQVRFIFRBQkxFIHVzZXJzIChcbiAgICBpZCBJTlQgQVVUT19JTkNSRU1FTlQgUFJJTUFSWSBLRVksXG4gICAgZmlyc3RfbmFtZSBWQVJDSEFSKDUwKSBOT1QgTlVMTCxcbiAgICBsYXN0X25hbWUgVkFSQ0hBUig1MCkgTk9UIE5VTEwsXG4gICAgZW1haWwgVkFSQ0hBUigxMDApIE5PVCBOVUxMIFVOSVFVRSxcbiAgICBwYXNzd29yZCBWQVJDSEFSKDI1NSkgTk9UIE5VTEwsXG4gICAgcGhvbmUgVkFSQ0hBUigyMCksXG4gICAgcm9sZSBWQVJDSEFSKDIwKSBOT1QgTlVMTCBERUZBVUxUICd1c2VyJyxcbiAgICBpc19hZG1pbiBCT09MRUFOIE5PVCBOVUxMIERFRkFVTFQgRkFMU0UsXG4gICAgcHJvZmlsZV9pbWFnZSBWQVJDSEFSKDI1NSksXG4gICAgY3JlYXRlZF9hdCBUSU1FU1RBTVAgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCxcbiAgICB1cGRhdGVkX2F0IFRJTUVTVEFNUCBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QIE9OIFVQREFURSBDVVJSRU5UX1RJTUVTVEFNUFxuKTtcblxuSU5TRVJUIElOVE8gdXNlcnMgKGZpcnN0X25hbWUsIGxhc3RfbmFtZSwgZW1haWwsIHBhc3N3b3JkLCBwaG9uZSwgcm9sZSwgaXNfYWRtaW4sIHByb2ZpbGVfaW1hZ2UpIFZBTFVFU1xuKCdSYW0nLCAnQmFoYWR1cicsICdyYW1AZXhhbXBsZS5jb20nLCAncGFzc3dvcmQxMjMnLCAnOTgwMDAwMDAwMScsICd1c2VyJywgRkFMU0UsICdwcm9maWxlcy9yYW0uanBnJyksXG4oJ1NpdGEnLCAnRGV2aScsICdzaXRhQGV4YW1wbGUuY29tJywgJ3Bhc3N3b3JkNDU2JywgJzk4MDAwMDAwMDInLCAnYWRtaW4nLCBUUlVFLCAncHJvZmlsZXMvc2l0YS5qcGcnKSxcbignR29wYWwnLCAnVGhhcGEnLCAnZ29wYWxAZXhhbXBsZS5jb20nLCAncGFzc3dvcmQ3ODknLCAnOTgwMDAwMDAwMycsICd1c2VyJywgRkFMU0UsICdwcm9maWxlcy9nb3BhbC5qcGcnKSxcblxuXG4tLSBDcmVhdGUgY2F0ZWdvcmllcyB0YWJsZVxuQ1JFQVRFIFRBQkxFIGNhdGVnb3JpZXMgKFxuICAgIGlkIElOVCBBVVRPX0lOQ1JFTUVOVCBQUklNQVJZIEtFWSxcbiAgICBuYW1lIFZBUkNIQVIoNTApIE5PVCBOVUxMIFVOSVFVRSxcbiAgICBkZXNjcmlwdGlvbiBURVhULFxuICAgIGltYWdlX3VybCBWQVJDSEFSKDI1NSksXG4gICAgY3JlYXRlZF9hdCBUSU1FU1RBTVAgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUFxuKTtcblxuSU5TRVJUIElOVE8gY2F0ZWdvcmllcyAobmFtZSwgZGVzY3JpcHRpb24pIFZBTFVFU1xuKCdNZW4nLCAnTWVuJydzIGNsb3RoaW5nIGFuZCBhY2Nlc3NvcmllcycpLFxuKCdXb21lbicsICdXb21lbicncyBjbG90aGluZyBhbmQgYWNjZXNzb3JpZXMnKSxcbignS2lkcycsICdDaGlsZHJlbicncyBjbG90aGluZyBhbmQgYWNjZXNzb3JpZXMnKSxcbignQWNjZXNzb3JpZXMnLCAnRmFzaGlvbiAuLi4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFCUnllYjhwMkFERnlicjltSnVtNUFwIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiQzovVXNlcnMvVVNFUi9NdXNpYy9jbG90aGVlIGZpbmFsL2h5L0Nsb3RoZWUiLCJmb2xkZXJSb290IjoiQzovVXNlcnMvVVNFUi9NdXNpYy9jbG90aGVlIGZpbmFsL2h5L0Nsb3RoZWUifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTA4VDA5OjIzOjEyLjM2NFoiLCJyZXNwb25zZV90ZXh0IjoiTGV0IG1lIGNoZWNrIHRoZSBkYXRhYmFzZSBzdHJ1Y3R1cmUgYW5kIGhvdyB0aGUgaW1hZ2VzIGFyZSBiZWluZyBsb2FkZWQgb24gdGhlIGhvbWUgcGFnZTpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiJhZTkwNTZkZi03ZjEyLTRlZjEtYWE0Yy1lYmExOWY4ODJkMmEiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFZOU1XczlrdXBLSFd6bXRveEFDd1hHIiwidG9vbF9uYW1lIjoiY29kZWJhc2UtcmV0cmlldmFsIiwiaW5wdXRfanNvbiI6IntcImluZm9ybWF0aW9uX3JlcXVlc3RcIjogXCJGaW5kIHRoZSBEQkNvbm5lY3Rpb24gY2xhc3MgYW5kIGNoZWNrIGhvdyB0aGUgZGF0YWJhc2UgY29ubmVjdGlvbiBpcyBlc3RhYmxpc2hlZC4gQWxzbywgZmluZCBpbmZvcm1hdGlvbiBhYm91dCB0aGUgZGlyZWN0b3J5IHN0cnVjdHVyZSBmb3Igc3RvcmluZyBpbWFnZXMuXCJ9IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiTGV0IG1lIGNoZWNrIHRoZSBkYXRhYmFzZSBjb25uZWN0aW9uIGFuZCB0aGUgZGlyZWN0b3J5IHN0cnVjdHVyZSB0byB1bmRlcnN0YW5kIHdoZXJlIHRoZSBpbWFnZXMgc2hvdWxkIGJlIHN0b3JlZDpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IHNyYy9tYWluL3dlYmFwcC9pbmRleC5qc3Bcbi4uLlxuXG4gICAgICAgIDxkaXYgY2xhc3M9XCJjYXRlZ29yaWVzLWdyaWRcIj5cbiAgICAgICAgICAgIDwlXG4gICAgICAgICAgICAvLyBHZXQgY2F0ZWdvcmllcyBmcm9tIGRhdGFiYXNlXG4gICAgICAgICAgICBDYXRlZ29yeURBTyBjYXRlZ29yeURBTyA9IG5ldyBDYXRlZ29yeURBTygpO1xuICAgICAgICAgICAgTGlzdDxDYXRlZ29yeT4gY2F0ZWdvcmllcyA9IGNhdGVnb3J5REFPLmdldEFsbENhdGVnb3JpZXMoKTtcblxuICAgICAgICAgICAgLy8gRGlzcGxheSB1cCB0byA2IGNhdGVnb3JpZXNcbiAgICAgICAgICAgIGludCBtYXhDYXRlZ29yaWVzID0gTWF0aC5taW4oY2F0ZWdvcmllcy5zaXplKCksIDYpO1xuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBtYXhDYXRlZ29yaWVzOyBpKyspIHtcbiAgICAgICAgICAgICAgICBDYXRlZ29yeSBjYXRlZ29yeSA9IGNhdGVnb3JpZXMuZ2V0KGkpO1xuICAgICAgICAgICAgICAgIFN0cmluZyBpbWFnZVVybCA9IGNhdGVnb3J5LmdldEltYWdlVXJsKCk7XG4gICAgICAgICAgICAgICAgLy8gVXNlIGRlZmF1bHQgaW1hZ2UgaWYgbm8gaW1hZ2UgaXMgc2V0XG4gICAgICAgICAgICAgICAgaWYgKGltYWdlVXJsID09IG51bGwgfHwgaW1hZ2VVcmwuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIERlZmF1bHQgaW1hZ2VzIGJhc2VkIG9uIGNhdGVnb3J5IGluZGV4XG4gICAgICAgICAgICAgICAgICAgIFN0cmluZ1tdIGRlZmF1bHRJbWFnZXMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTgxMDQ0Nzc3NTUwLTRjZmE2MDcwN2MwMz9peGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0QmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz03NzImcT04MFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTYxNzEzNzk2ODQyNy04NTkyNGM4MDBhMjI/aXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9Nzc0JnE9ODBcIixcbi4uLlxuICAgICAgICAgICAgICAgICAgICBpbWFnZVVybCA9IGRlZmF1bHRJbWFnZXNbaSAlIGRlZmF1bHRJbWFnZXMubGVuZ3RoXTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBVc2UgdGhlIGltYWdlIGZyb20gdGhlIGRhdGFiYXNlXG4gICAgICAgICAgICAgICAgICAgIGltYWdlVXJsID0gcmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvXCIgKyBpbWFnZVVybDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAlPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhdGVnb3J5LWNhcmRcIj5cbiAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIjwlPSBpbWFnZVVybCAlPlwiIGFsdD1cIjwlPSBjYXRlZ29yeS5nZXROYW1lKCkgJT5cIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2F0ZWdvcnktY29udGVudFwiPlxuICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3M9XCJjYXRlZ29yeS10aXRsZVwiPjwlPSBjYXRlZ29yeS5nZXROYW1lKCkgJT48L2gzPlxuICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiUHJvZHVjdFNlcnZsZXQ/Y2F0ZWdvcnk9PCU9IGNhdGVnb3J5LmdldElkKCkgJT5cIiBjbGFzcz1cImNhdGVnb3J5LWxpbmtcIj5TaG9wIE5vdyA8aSBjbGFzcz1cImZhcyBmYS1hcnJvdy1yaWdodFwiPjwvaT48L2E+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwlIH0gJT5cblxuICAgICAgICAgICAgPCUgaWYgKGNhdGVnb3JpZXMuaXNFbXB0eSgpKSB7ICU+XG4gICAgICAgICAgICA8IS0tIERlZmF1bHQgY2F0ZWdvcmllcyBpZiBubyBjYXRlZ29yaWVzIGluIGRhdGFiYXNlIC0tPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhdGVnb3J5LWNhcmRcIj5cbiAgICAgICAgICAgICAgICA8aW1nIHNyYz1cImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTgxMDQ0Nzc3NTUwLTRjZmE2MDcwN2MwMz9peGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0QmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz03NzImcT04MFwiIGFsdD1cIldvbWVuJ3MgRmFzaGlvblwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXRlZ29yeS1jb250ZW50XCI+XG4gICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzcz1cImNhdGVnb3J5LXRpdGxlXCI+V29tZW4ncyBGYXNoaW9uPC9oMz5cbiAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIlByb2R1Y3RTZXJ2bGV0P2NhdGVnb3J5PXdvbWVuXCIgY2xhc3M9XCJjYXRlZ29yeS1saW5rXCI+U2hvcCBOb3cgPGkgY2xhc3M9XCJmYXMgZmEtYXJyb3ctcmlnaHRcIj48L2k+PC9hPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXRlZ29yeS1jYXJkXCI+XG4gICAgICAgICAgICAgICAgPGltZyBzcmM9XCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTYxNzEzNzk2ODQyNy04NTkyNGM4MDBhMjI/aXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9Nzc0JnE9ODBcIiBhbHQ9XCJNZW4ncyBGYXNoaW9uXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhdGVnb3J5LWNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPVwiY2F0ZWdvcnktdGl0bGVcIj5NZW4ncyBGYXNoaW9uPC9oMz5cbiAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIlByb2R1Y3RTZXJ2bGV0P2NhdGVnb3J5PW1lblwiIGNsYXNzPVwiY2F0ZWdvcnktbGlua1wiPlNob3AgTm93IDxpIGNsYXNzPVwiZmFzIGZhLWFycm93LXJpZ2h0XCI+PC9pPjwvYT5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2F0ZWdvcnktY2FyZFwiPlxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1ODQ5MTc4NjU0NDItZGU4OWRmNzZhZmQzP2l4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTg3MCZxPTgwXCIgYWx0PVwiQWNjZXNzb3JpZXNcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2F0ZWdvcnktY29udGVudFwiPlxuICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3M9XCJjYXRlZ29yeS10aXRsZVwiPkFjY2Vzc29yaWVzPC9oMz5cbiAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIlByb2R1Y3RTZXJ2bGV0P2NhdGVnb3J5PWFjY2Vzc29yaWVzXCIgY2xhc3M9XCJjYXRlZ29yeS1saW5rXCI+U2hvcCBOb3cgPGkgY2xhc3M9XCJmYXMgZmEtYXJyb3ctcmlnaHRcIj48L2k+PC9hPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8JSB9ICU+XG4gICAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuPC9zZWN0aW9uPlxuXG48IS0tIEZlYXR1cmVkIFByb2R1Y3RzIC0tPlxuPHNlY3Rpb24gY2xhc3M9XCJmZWF0dXJlZC1wcm9kdWN0c1wiPlxuICAgIDxkaXYgY2xhc3M9XCJjb250YWluZXJcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInNlY3Rpb24tdGl0bGVcIj5cbiAgICAgICAgICAgIDxoMj5GZWF0dXJlZCBQcm9kdWN0czwvaDI+XG4gICAgICAgIDwvZGl2PlxuLi4uXG5QYXRoOiBDbG90aGVlL3NyYy9tYWluL3dlYmFwcC9pbmRleC5qc3Bcbi4uLlxuXG48JVxuICAgIC8vIENyZWF0ZSBzbGlkZXMgZGlyZWN0bHkgaW4gdGhlIEpTUFxuICAgIExpc3Q8U2xpZGU+IHNsaWRlcyA9IG5ldyBBcnJheUxpc3Q8PigpO1xuXG4gICAgLy8gQWRkIHNsaWRlc1xuICAgIHNsaWRlcy5hZGQobmV3IFNsaWRlKFxuICAgICAgICBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNDkwNDgxNjUxODcxLWFiNjhkZTI1ZDQzZD9peGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0QmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz0xNzcwJnE9ODBcIixcbiAgICAgICAgXCJFbGV2YXRlIFlvdXIgU3R5bGVcIixcbiAgICAgICAgXCJEaXNjb3ZlciB0aGUgbGF0ZXN0IHRyZW5kcyBpbiBmYXNoaW9uIGFuZCBleHByZXNzIHlvdXJzZWxmIHdpdGggb3VyIHByZW1pdW0gY29sbGVjdGlvbiBvZiBjbG90aGluZyBhbmQgYWNjZXNzb3JpZXMuXCIsXG4gICAgICAgIFwiUHJvZHVjdFNlcnZsZXQ/Y2F0ZWdvcnk9bmV3XCIsXG4gICAgICAgIFwiU2hvcCBOb3dcIixcbiAgICAgICAgXCJQcm9kdWN0U2VydmxldD9jYXRlZ29yeT1zYWxlXCIsXG4gICAgICAgIFwiVmlldyBTYWxlXCJcbiAgICApKTtcbi4uLlxuXG4gICAgICAgIDxkaXYgY2xhc3M9XCJjYXRlZ29yaWVzLWdyaWRcIj5cbiAgICAgICAgICAgIDwlXG4gICAgICAgICAgICAvLyBHZXQgY2F0ZWdvcmllcyBmcm9tIGRhdGFiYXNlXG4gICAgICAgICAgICBDYXRlZ29yeURBTyBjYXRlZ29yeURBTyA9IG5ldyBDYXRlZ29yeURBTygpO1xuICAgICAgICAgICAgTGlzdDxDYXRlZ29yeT4gY2F0ZWdvcmllcyA9IGNhdGVnb3J5REFPLmdldEFsbENhdGVnb3JpZXMoKTtcblxuICAgICAgICAgICAgLy8gRGlzcGxheSB1cCB0byA2IGNhdGVnb3JpZXNcbiAgICAgICAgICAgIGludCBtYXhDYXRlZ29yaWVzID0gTWF0aC5taW4oY2F0ZWdvcmllcy5zaXplKCksIDYpO1xuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBtYXhDYXRlZ29yaWVzOyBpKyspIHtcbiAgICAgICAgICAgICAgICBDYXRlZ29yeSBjYXRlZ29yeSA9IGNhdGVnb3JpZXMuZ2V0KGkpO1xuICAgICAgICAgICAgICAgIFN0cmluZyBpbWFnZVVybCA9IGNhdGVnb3J5LmdldEltYWdlVXJsKCk7XG4gICAgICAgICAgICAgICAgLy8gVXNlIGRlZmF1bHQgaW1hZ2UgaWYgbm8gaW1hZ2UgaXMgc2V0XG4gICAgICAgICAgICAgICAgaWYgKGltYWdlVXJsID09IG51bGwgfHwgaW1hZ2VVcmwuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIERlZmF1bHQgaW1hZ2VzIGJhc2VkIG9uIGNhdGVnb3J5IGluZGV4XG4gICAgICAgICAgICAgICAgICAgIFN0cmluZ1tdIGRlZmF1bHRJbWFnZXMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTgxMDQ0Nzc3NTUwLTRjZmE2MDcwN2MwMz9peGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0QmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz03NzImcT04MFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTYxNzEzNzk2ODQyNy04NTkyNGM4MDBhMjI/aXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9Nzc0JnE9ODBcIixcbi4uLlxuICAgICAgICAgICAgICAgICAgICBpbWFnZVVybCA9IGRlZmF1bHRJbWFnZXNbaSAlIGRlZmF1bHRJbWFnZXMubGVuZ3RoXTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBVc2UgdGhlIGltYWdlIGZyb20gdGhlIGRhdGFiYXNlXG4gICAgICAgICAgICAgICAgICAgIGltYWdlVXJsID0gcmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvXCIgKyBpbWFnZVVybDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAlPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhdGVnb3J5LWNhcmRcIj5cbiAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIjwlPSBpbWFnZVVybCAlPlwiIGFsdD1cIjwlPSBjYXRlZ29yeS5nZXROYW1lKCkgJT5cIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2F0ZWdvcnktY29udGVudFwiPlxuICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3M9XCJjYXRlZ29yeS10aXRsZVwiPjwlPSBjYXRlZ29yeS5nZXROYW1lKCkgJT48L2gzPlxuICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiUHJvZHVjdFNlcnZsZXQ/Y2F0ZWdvcnk9PCU9IGNhdGVnb3J5LmdldElkKCkgJT5cIiBjbGFzcz1cImNhdGVnb3J5LWxpbmtcIj5TaG9wIE5vdyA8aSBjbGFzcz1cImZhcyBmYS1hcnJvdy1yaWdodFwiPjwvaT48L2E+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwlIH0gJT5cblxuICAgICAgICAgICAgPCUgaWYgKGNhdGVnb3JpZXMuaXNFbXB0eSgpKSB7ICU+XG4gICAgICAgICAgICA8IS0tIERlZmF1bHQgY2F0ZWdvcmllcyBpZiBubyBjYXRlZ29yaWVzIGluIGRhdGFiYXNlIC0tPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhdGVnb3J5LWNhcmRcIj5cbiAgICAgICAgICAgICAgICA8aW1nIHNyYz1cImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTgxMDQ0Nzc3NTUwLTRjZmE2MDcwN2MwMz9peGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0QmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz03NzImcT04MFwiIGFsdD1cIldvbWVuJ3MgRmFzaGlvblwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXRlZ29yeS1jb250ZW50XCI+XG4gICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzcz1cImNhdGVnb3J5LXRpdGxlXCI+V29tZW4ncyBGYXNoaW9uPC9oMz5cbiAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIlByb2R1Y3RTZXJ2bGV0P2NhdGVnb3J5PXdvbWVuXCIgY2xhc3M9XCJjYXRlZ29yeS1saW5rXCI+U2hvcCBOb3cgPGkgY2xhc3M9XCJmYXMgZmEtYXJyb3ctcmlnaHRcIj48L2k+PC9hPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXRlZ29yeS1jYXJkXCI+XG4gICAgICAgICAgICAgICAgPGltZyBzcmM9XCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTYxNzEzNzk2ODQyNy04NTkyNGM4MDBhMjI/aXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9Nzc0JnE9ODBcIiBhbHQ9XCJNZW4ncyBGYXNoaW9uXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhdGVnb3J5LWNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPVwiY2F0ZWdvcnktdGl0bGVcIj5NZW4ncyBGYXNoaW9uPC9oMz5cbiAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIlByb2R1Y3RTZXJ2bGV0P2NhdGVnb3J5PW1lblwiIGNsYXNzPVwiY2F0ZWdvcnktbGlua1wiPlNob3AgTm93IDxpIGNsYXNzPVwiZmFzIGZhLWFycm93LXJpZ2h0XCI+PC9pPjwvYT5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2F0ZWdvcnktY2FyZFwiPlxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1ODQ5MTc4NjU0NDItZGU4OWRmNzZhZmQzP2l4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTg3MCZxPTgwXCIgYWx0PVwiQWNjZXNzb3JpZXNcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2F0ZWdvcnktY29udGVudFwiPlxuICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3M9XCJjYXRlZ29yeS10aXRsZVwiPkFjY2Vzc29yaWVzPC9oMz5cbiAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIlByb2R1Y3RTZXJ2bGV0P2NhdGVnb3J5PWFjY2Vzc29yaWVzXCIgY2xhc3M9XCJjYXRlZ29yeS1saW5rXCI+U2hvcCBOb3cgPGkgY2xhc3M9XCJmYXMgZmEtYXJyb3ctcmlnaHRcIj48L2k+PC9hPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8JSB9ICU+XG4gICAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuPC9zZWN0aW9uPlxuXG48IS0tIEZlYXR1cmVkIFByb2R1Y3RzIC0tPlxuPHNlY3Rpb24gY2xhc3M9XCJmZWF0dXJlZC1wcm9kdWN0c1wiPlxuICAgIDxkaXYgY2xhc3M9XCJjb250YWluZXJcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInNlY3Rpb24tdGl0bGVcIj5cbiAgICAgICAgICAgIDxoMj5GZWF0dXJlZCBQcm9kdWN0czwvaDI+XG4gICAgICAgIDwvZGl2PlxuLi4uXG5QYXRoOiBDbG90aGVlL3NyYy9tYWluL3dlYmFwcC9jYXRlZ29yaWVzLmpzcFxuLi4uXG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3dcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhdGVnb3J5LWNhcmQgY2xpY2thYmxlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwicHJvZHVjdHMuanNwP2NhdGVnb3J5PWFlc3RoZXRpYyZ0eXBlPWNhc3VhbFwiIGNsYXNzPVwiY2FyZC1saW5rXCI+PC9hPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhdGVnb3J5LWltYWdlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTU4MTA0NDc3NzU1MC00Y2ZhNjA3MDdjMDM/aXhsaWI9cmItNC4wLjMmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz03NzImcT04MFwiIGFsdD1cIkNhc3VhbCBBZXN0aGV0aWNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhdGVnb3J5LWNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDM+Q2FzdWFsIEFlc3RoZXRpYzwvaDM+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+RWZmb3J0bGVzc2x5IHN0eWxpc2ggZXZlcnlkYXkgd2VhciB3aXRoIGFlc3RoZXRpYyBhcHBlYWwuPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY2F0ZWdvcnktYnRuXCI+RXhwbG9yZTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbi4uLlxuUGF0aDogQ2xvdGhlZS9zcmMvbWFpbi9qYXZhL2Rhby9DYXRlZ29yeURBTy5qYXZhXG4uLi5cblxuICAgIC8qKlxuICAgICAqIEFkZCBhIG5ldyBjYXRlZ29yeSB0byB0aGUgZGF0YWJhc2VcbiAgICAgKiBAcGFyYW0gY2F0ZWdvcnkgQ2F0ZWdvcnkgb2JqZWN0IHRvIGFkZFxuICAgICAqIEByZXR1cm4gdHJ1ZSBpZiBzdWNjZXNzZnVsLCBmYWxzZSBvdGhlcndpc2VcbiAgICAgKi9cbiAgICBwdWJsaWMgYm9vbGVhbiBhZGRDYXRlZ29yeShDYXRlZ29yeSBjYXRlZ29yeSkge1xuICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCI9PT09PSBBRERJTkcgQ0FURUdPUlkgPT09PT1cIik7XG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNhdGVnb3J5IG5hbWU6IFwiICsgY2F0ZWdvcnkuZ2V0TmFtZSgpKTtcbiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQ2F0ZWdvcnkgZGVzY3JpcHRpb246IFwiICsgY2F0ZWdvcnkuZ2V0RGVzY3JpcHRpb24oKSk7XG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNhdGVnb3J5IGltYWdlVXJsOiBcIiArIGNhdGVnb3J5LmdldEltYWdlVXJsKCkpO1xuXG4gICAgICAgIC8vIEZpcnN0IGNoZWNrIGlmIGEgY2F0ZWdvcnkgd2l0aCB0aGlzIG5hbWUgYWxyZWFkeSBleGlzdHNcbiAgICAgICAgaWYgKGNhdGVnb3J5RXhpc3RzKGNhdGVnb3J5LmdldE5hbWUoKSkpIHtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNhdGVnb3J5IGFscmVhZHkgZXhpc3RzOiBcIiArIGNhdGVnb3J5LmdldE5hbWUoKSk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUcnkgYSBzaW1wbGVyIHF1ZXJ5IHdpdGhvdXQgdGhlIGltYWdlX3VybCBmaWVsZFxuICAgICAgICBTdHJpbmcgcXVlcnkgPSBcIklOU0VSVCBJTlRPIGNhdGVnb3JpZXMgKG5hbWUsIGRlc2NyaXB0aW9uKSBWQUxVRVMgKD8sID8pXCI7XG4uLi5cblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCBjYXRlZ29yeS5nZXROYW1lKCkpO1xuICAgICAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDIsIGNhdGVnb3J5LmdldERlc2NyaXB0aW9uKCkpO1xuXG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRXhlY3V0aW5nIHVwZGF0ZS4uLlwiKTtcbiAgICAgICAgICAgICAgICBpbnQgcm93c0FmZmVjdGVkID0gc3RtdC5leGVjdXRlVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiUm93cyBhZmZlY3RlZDogXCIgKyByb3dzQWZmZWN0ZWQpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHJvd3NBZmZlY3RlZCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiR2V0dGluZyBnZW5lcmF0ZWQga2V5cy4uLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgUmVzdWx0U2V0IHJzID0gc3RtdC5nZXRHZW5lcmF0ZWRLZXlzKCk7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocnMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50IGlkID0gcnMuZ2V0SW50KDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkdlbmVyYXRlZCBJRDogXCIgKyBpZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnkuc2V0SWQoaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJObyBnZW5lcmF0ZWQga2V5cyByZXR1cm5lZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChycyAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcnMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0bXQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBzdG10LmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChjb25uICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY29ubi5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbi4uLlxuXG4gICAgLyoqXG4gICAgICogR2V0IGFsbCBjYXRlZ29yaWVzXG4gICAgICogQHJldHVybiBMaXN0IG9mIGFsbCBjYXRlZ29yaWVzXG4gICAgICovXG4gICAgcHVibGljIExpc3Q8Q2F0ZWdvcnk+IGdldEFsbENhdGVnb3JpZXMoKSB7XG4gICAgICAgIExpc3Q8Q2F0ZWdvcnk+IGNhdGVnb3JpZXMgPSBuZXcgQXJyYXlMaXN0PD4oKTtcblxuICAgICAgICAvLyBTaW1wbGlmaWVkIHF1ZXJ5IHRvIGVuc3VyZSB3ZSBnZXQgYWxsIGNhdGVnb3JpZXMgcmVnYXJkbGVzcyBvZiBwcm9kdWN0c1xuICAgICAgICBTdHJpbmcgcXVlcnkgPSBcIlNFTEVDVCAqIEZST00gY2F0ZWdvcmllcyBPUkRFUiBCWSBuYW1lXCI7XG5cbiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRXhlY3V0aW5nIGdldEFsbENhdGVnb3JpZXMgcXVlcnk6IFwiICsgcXVlcnkpO1xuXG4gICAgICAgIHRyeSAoQ29ubmVjdGlvbiBjb25uID0gREJDb25uZWN0aW9uLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgICBTdGF0ZW1lbnQgc3RtdCA9IGNvbm4uY3JlYXRlU3RhdGVtZW50KCk7XG4gICAgICAgICAgICAgUmVzdWx0U2V0IHJzID0gc3RtdC5leGVjdXRlUXVlcnkocXVlcnkpKSB7XG5cbiAgICAgICAgICAgIGludCBjb3VudCA9IDA7XG4gICAgICAgICAgICB3aGlsZSAocnMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgY291bnQrKztcbiAgICAgICAgICAgICAgICBDYXRlZ29yeSBjYXRlZ29yeSA9IGV4dHJhY3RDYXRlZ29yeUZyb21SZXN1bHRTZXQocnMpO1xuICAgICAgICAgICAgICAgIC8vIFNldCBwcm9kdWN0IGNvdW50IHRvIDAgYnkgZGVmYXVsdFxuICAgICAgICAgICAgICAgIGNhdGVnb3J5LnNldFByb2R1Y3RDb3VudCgwKTtcbiAgICAgICAgICAgICAgICBjYXRlZ29yaWVzLmFkZChjYXRlZ29yeSk7XG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRm91bmQgY2F0ZWdvcnk6IFwiICsgY2F0ZWdvcnkuZ2V0TmFtZSgpKTtcbiAgICAgICAgICAgIH1cbi4uLlxuUGF0aDogQ2xvdGhlZS9zcmMvbWFpbi9qYXZhL21vZGVsL0NhdGVnb3J5LmphdmFcbnBhY2thZ2UgbW9kZWw7XG5cbmltcG9ydCBqYXZhLnNxbC5UaW1lc3RhbXA7XG5pbXBvcnQgamF2YS51dGlsLkRhdGU7XG5cbi8qKlxuICogQ2F0ZWdvcnkgbW9kZWwgY2xhc3NcbiAqL1xucHVibGljIGNsYXNzIENhdGVnb3J5IHtcbiAgICBwcml2YXRlIGludCBpZDtcbiAgICBwcml2YXRlIFN0cmluZyBuYW1lO1xuICAgIHByaXZhdGUgU3RyaW5nIGRlc2NyaXB0aW9uO1xuICAgIHByaXZhdGUgU3RyaW5nIGltYWdlVXJsOyAvLyBBZGRlZCBmaWVsZCBmb3IgY2F0ZWdvcnkgaW1hZ2VcbiAgICBwcml2YXRlIFRpbWVzdGFtcCBjcmVhdGVkQXQ7XG4gICAgcHJpdmF0ZSBpbnQgcHJvZHVjdENvdW50OyAvLyBOdW1iZXIgb2YgcHJvZHVjdHMgaW4gdGhpcyBjYXRlZ29yeVxuXG4gICAgLy8gRGVmYXVsdCBjb25zdHJ1Y3RvclxuICAgIHB1YmxpYyBDYXRlZ29yeSgpIHtcbiAgICB9XG5cbiAgICAvLyBDb25zdHJ1Y3RvciB3aXRoIGZpZWxkc1xuICAgIHB1YmxpYyBDYXRlZ29yeShpbnQgaWQsIFN0cmluZyBuYW1lLCBTdHJpbmcgZGVzY3JpcHRpb24sIFN0cmluZyBpbWFnZVVybCwgVGltZXN0YW1wIGNyZWF0ZWRBdCkge1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICAgICAgdGhpcy5pbWFnZVVybCA9IGltYWdlVXJsO1xuICAgICAgICB0aGlzLmNyZWF0ZWRBdCA9IGNyZWF0ZWRBdDtcbiAgICB9XG5cbiAgICAvLyBHZXR0ZXJzIGFuZCBTZXR0ZXJzXG4gICAgcHVibGljIGludCBnZXRJZCgpIHtcbiAgICAgICAgcmV0dXJuIGlkO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldElkKGludCBpZCkge1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgfVxuXG4gICAgcHVibGljIFN0cmluZyBnZXROYW1lKCkge1xuICAgICAgICByZXR1cm4gbmFtZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXROYW1lKFN0cmluZyBuYW1lKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgfVxuLi4uXG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgU3RyaW5nIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gXCJDYXRlZ29yeXtcIiArXG4gICAgICAgICAgICAgICAgXCJpZD1cIiArIGlkICtcbiAgICAgICAgICAgICAgICBcIiwgbmFtZT0nXCIgKyBuYW1lICsgJ1xcJycgK1xuICAgICAgICAgICAgICAgIFwiLCBkZXNjcmlwdGlvbj0nXCIgKyBkZXNjcmlwdGlvbiArICdcXCcnICtcbiAgICAgICAgICAgICAgICBcIiwgaW1hZ2VVcmw9J1wiICsgaW1hZ2VVcmwgKyAnXFwnJyArXG4gICAgICAgICAgICAgICAgXCIsIGNyZWF0ZWRBdD1cIiArIGNyZWF0ZWRBdCArXG4gICAgICAgICAgICAgICAgXCIsIHByb2R1Y3RDb3VudD1cIiArIHByb2R1Y3RDb3VudCArXG4gICAgICAgICAgICAgICAgJ30nO1xuICAgIH1cbn1cbi4uLlxuUGF0aDogQ2xvdGhlZS9zcmMvbWFpbi9qYXZhL2NvbnRyb2xsZXIvQ2F0ZWdvcnlJbWFnZVNlcnZsZXQuamF2YVxuLi4uXG5cbiAgICAgICAgICAgIC8vIFVwZGF0ZSBjYXRlZ29yeSBpbWFnZSBVUkwgaW4gZGF0YWJhc2VcbiAgICAgICAgICAgIFN0cmluZyBpbWFnZVVybCA9IHJlbGF0aXZlUGF0aCArIFwiL1wiICsgbmV3RmlsZU5hbWU7XG4gICAgICAgICAgICBib29sZWFuIHN1Y2Nlc3MgPSBjYXRlZ29yeURBTy51cGRhdGVDYXRlZ29yeUltYWdlKGNhdGVnb3J5SWQsIGltYWdlVXJsKTtcblxuICAgICAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvYWRtaW4vY2F0ZWdvcmllcy5qc3A/c3VjY2Vzcz10cnVlJm1lc3NhZ2U9Q2F0ZWdvcnkraW1hZ2UrdXBkYXRlZCtzdWNjZXNzZnVsbHlcIik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9hZG1pbi9jYXRlZ29yaWVzLmpzcD9lcnJvcj10cnVlJm1lc3NhZ2U9RmFpbGVkK3RvK3VwZGF0ZStjYXRlZ29yeStpbWFnZVwiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9IGNhdGNoIChOdW1iZXJGb3JtYXRFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL2FkbWluL2NhdGVnb3JpZXMuanNwP2Vycm9yPXRydWUmbWVzc2FnZT1JbnZhbGlkK2NhdGVnb3J5K0lEXCIpO1xuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL2FkbWluL2NhdGVnb3JpZXMuanNwP2Vycm9yPXRydWUmbWVzc2FnZT1FcnJvcit1cGxvYWRpbmcraW1hZ2U6K1wiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICB9XG4gICAgfVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL21vZGVsL0NhdGVnb3J5LmphdmFcbi4uLlxuXG4vKipcbiAqIENhdGVnb3J5IG1vZGVsIGNsYXNzXG4gKi9cbnB1YmxpYyBjbGFzcyBDYXRlZ29yeSB7XG4gICAgcHJpdmF0ZSBpbnQgaWQ7XG4gICAgcHJpdmF0ZSBTdHJpbmcgbmFtZTtcbiAgICBwcml2YXRlIFN0cmluZyBkZXNjcmlwdGlvbjtcbiAgICBwcml2YXRlIFN0cmluZyBpbWFnZVVybDsgLy8gQWRkZWQgZmllbGQgZm9yIGNhdGVnb3J5IGltYWdlXG4gICAgcHJpdmF0ZSBUaW1lc3RhbXAgY3JlYXRlZEF0O1xuICAgIHByaXZhdGUgaW50IHByb2R1Y3RDb3VudDsgLy8gTnVtYmVyIG9mIHByb2R1Y3RzIGluIHRoaXMgY2F0ZWdvcnlcblxuICAgIC8vIERlZmF1bHQgY29uc3RydWN0b3JcbiAgICBwdWJsaWMgQ2F0ZWdvcnkoKSB7XG4gICAgfVxuXG4gICAgLy8gQ29uc3RydWN0b3Igd2l0aCBmaWVsZHNcbiAgICBwdWJsaWMgQ2F0ZWdvcnkoaW50IGlkLCBTdHJpbmcgbmFtZSwgU3RyaW5nIGRlc2NyaXB0aW9uLCBTdHJpbmcgaW1hZ2VVcmwsIFRpbWVzdGFtcCBjcmVhdGVkQXQpIHtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgICAgIHRoaXMuaW1hZ2VVcmwgPSBpbWFnZVVybDtcbiAgICAgICAgdGhpcy5jcmVhdGVkQXQgPSBjcmVhdGVkQXQ7XG4gICAgfVxuXG4gICAgLy8gR2V0dGVycyBhbmQgU2V0dGVyc1xuICAgIHB1YmxpYyBpbnQgZ2V0SWQoKSB7XG4gICAgICAgIHJldHVybiBpZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRJZChpbnQgaWQpIHtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgIH1cblxuICAgIHB1YmxpYyBTdHJpbmcgZ2V0TmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIG5hbWU7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0TmFtZShTdHJpbmcgbmFtZSkge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIH1cbi4uLlxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIFN0cmluZyB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFwiQ2F0ZWdvcnl7XCIgK1xuICAgICAgICAgICAgICAgIFwiaWQ9XCIgKyBpZCArXG4gICAgICAgICAgICAgICAgXCIsIG5hbWU9J1wiICsgbmFtZSArICdcXCcnICtcbiAgICAgICAgICAgICAgICBcIiwgZGVzY3JpcHRpb249J1wiICsgZGVzY3JpcHRpb24gKyAnXFwnJyArXG4gICAgICAgICAgICAgICAgXCIsIGltYWdlVXJsPSdcIiArIGltYWdlVXJsICsgJ1xcJycgK1xuICAgICAgICAgICAgICAgIFwiLCBjcmVhdGVkQXQ9XCIgKyBjcmVhdGVkQXQgK1xuICAgICAgICAgICAgICAgIFwiLCBwcm9kdWN0Q291bnQ9XCIgKyBwcm9kdWN0Q291bnQgK1xuICAgICAgICAgICAgICAgICd9JztcbiAgICB9XG59XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvY29udHJvbGxlci9DYXRlZ29yeUltYWdlU2VydmxldC5qYXZhXG4uLi5cbnB1YmxpYyBjbGFzcyBDYXRlZ29yeUltYWdlU2VydmxldCBleHRlbmRzIEh0dHBTZXJ2bGV0IHtcbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBsb25nIHNlcmlhbFZlcnNpb25VSUQgPSAxTDtcbiAgICBwcml2YXRlIENhdGVnb3J5REFPIGNhdGVnb3J5REFPO1xuXG4gICAgcHVibGljIENhdGVnb3J5SW1hZ2VTZXJ2bGV0KCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBjYXRlZ29yeURBTyA9IG5ldyBDYXRlZ29yeURBTygpO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCB2b2lkIGRvUG9zdChIdHRwU2VydmxldFJlcXVlc3QgcmVxdWVzdCwgSHR0cFNlcnZsZXRSZXNwb25zZSByZXNwb25zZSlcbiAgICAgICAgICAgIHRocm93cyBTZXJ2bGV0RXhjZXB0aW9uLCBJT0V4Y2VwdGlvbiB7XG5cbiAgICAgICAgLy8gR2V0IGNhdGVnb3J5IElEIGZyb20gcmVxdWVzdFxuICAgICAgICBTdHJpbmcgY2F0ZWdvcnlJZFN0ciA9IHJlcXVlc3QuZ2V0UGFyYW1ldGVyKFwiY2F0ZWdvcnlJZFwiKTtcblxuICAgICAgICBpZiAoY2F0ZWdvcnlJZFN0ciA9PSBudWxsIHx8IGNhdGVnb3J5SWRTdHIuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvYWRtaW4vY2F0ZWdvcmllcy5qc3A/ZXJyb3I9dHJ1ZSZtZXNzYWdlPUNhdGVnb3J5K0lEK2lzK3JlcXVpcmVkXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4uLi5cblxuICAgICAgICAgICAgLy8gUHJvY2VzcyB0aGUgdXBsb2FkZWQgZmlsZVxuICAgICAgICAgICAgU3RyaW5nIGZpbGVOYW1lID0gZ2V0U3VibWl0dGVkRmlsZU5hbWUoZmlsZVBhcnQpO1xuICAgICAgICAgICAgaWYgKGZpbGVOYW1lID09IG51bGwgfHwgZmlsZU5hbWUuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL2FkbWluL2NhdGVnb3JpZXMuanNwP2Vycm9yPXRydWUmbWVzc2FnZT1JbnZhbGlkK2ZpbGUrbmFtZVwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFN0cmluZyBmaWxlRXh0ZW5zaW9uID0gZmlsZU5hbWUuc3Vic3RyaW5nKGZpbGVOYW1lLmxhc3RJbmRleE9mKFwiLlwiKSk7XG4gICAgICAgICAgICBTdHJpbmcgbmV3RmlsZU5hbWUgPSBcImNhdGVnb3J5X1wiICsgY2F0ZWdvcnlJZCArIGZpbGVFeHRlbnNpb247XG5cbiAgICAgICAgICAgIC8vIFNhdmUgdGhlIGZpbGUgdG8gdGhlIHNlcnZlclxuICAgICAgICAgICAgU3RyaW5nIHJlbGF0aXZlUGF0aCA9IFwiaW1hZ2VzL2NhdGVnb3JpZXNcIjtcbiAgICAgICAgICAgIFN0cmluZyB1cGxvYWRQYXRoID0gcmVxdWVzdC5nZXRTZXJ2bGV0Q29udGV4dCgpLmdldFJlYWxQYXRoKFwiL1wiKSArIHJlbGF0aXZlUGF0aCArIFwiL1wiO1xuXG4gICAgICAgICAgICBGaWxlIHVwbG9hZERpciA9IG5ldyBGaWxlKHVwbG9hZFBhdGgpO1xuICAgICAgICAgICAgaWYgKCF1cGxvYWREaXIuZXhpc3RzKCkpIHtcbiAgICAgICAgICAgICAgICB1cGxvYWREaXIubWtkaXJzKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZpbGVQYXJ0LndyaXRlKHVwbG9hZFBhdGggKyBuZXdGaWxlTmFtZSk7XG5cbiAgICAgICAgICAgIC8vIFVwZGF0ZSBjYXRlZ29yeSBpbWFnZSBVUkwgaW4gZGF0YWJhc2VcbiAgICAgICAgICAgIFN0cmluZyBpbWFnZVVybCA9IHJlbGF0aXZlUGF0aCArIFwiL1wiICsgbmV3RmlsZU5hbWU7XG4gICAgICAgICAgICBib29sZWFuIHN1Y2Nlc3MgPSBjYXRlZ29yeURBTy51cGRhdGVDYXRlZ29yeUltYWdlKGNhdGVnb3J5SWQsIGltYWdlVXJsKTtcblxuICAgICAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvYWRtaW4vY2F0ZWdvcmllcy5qc3A/c3VjY2Vzcz10cnVlJm1lc3NhZ2U9Q2F0ZWdvcnkraW1hZ2UrdXBkYXRlZCtzdWNjZXNzZnVsbHlcIik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9hZG1pbi9jYXRlZ29yaWVzLmpzcD9lcnJvcj10cnVlJm1lc3NhZ2U9RmFpbGVkK3RvK3VwZGF0ZStjYXRlZ29yeStpbWFnZVwiKTtcbiAgICAgICAgICAgIH1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9kYW8vQ2F0ZWdvcnlEQU8uamF2YVxuLi4uXG5cbiAgICAvKipcbiAgICAgKiBBZGQgYSBuZXcgY2F0ZWdvcnkgdG8gdGhlIGRhdGFiYXNlXG4gICAgICogQHBhcmFtIGNhdGVnb3J5IENhdGVnb3J5IG9iamVjdCB0byBhZGRcbiAgICAgKiBAcmV0dXJuIHRydWUgaWYgc3VjY2Vzc2Z1bCwgZmFsc2Ugb3RoZXJ3aXNlXG4gICAgICovXG4gICAgcHVibGljIGJvb2xlYW4gYWRkQ2F0ZWdvcnkoQ2F0ZWdvcnkgY2F0ZWdvcnkpIHtcbiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiPT09PT0gQURESU5HIENBVEVHT1JZID09PT09XCIpO1xuICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJDYXRlZ29yeSBuYW1lOiBcIiArIGNhdGVnb3J5LmdldE5hbWUoKSk7XG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNhdGVnb3J5IGRlc2NyaXB0aW9uOiBcIiArIGNhdGVnb3J5LmdldERlc2NyaXB0aW9uKCkpO1xuICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJDYXRlZ29yeSBpbWFnZVVybDogXCIgKyBjYXRlZ29yeS5nZXRJbWFnZVVybCgpKTtcblxuICAgICAgICAvLyBGaXJzdCBjaGVjayBpZiBhIGNhdGVnb3J5IHdpdGggdGhpcyBuYW1lIGFscmVhZHkgZXhpc3RzXG4gICAgICAgIGlmIChjYXRlZ29yeUV4aXN0cyhjYXRlZ29yeS5nZXROYW1lKCkpKSB7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJDYXRlZ29yeSBhbHJlYWR5IGV4aXN0czogXCIgKyBjYXRlZ29yeS5nZXROYW1lKCkpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVHJ5IGEgc2ltcGxlciBxdWVyeSB3aXRob3V0IHRoZSBpbWFnZV91cmwgZmllbGRcbiAgICAgICAgU3RyaW5nIHF1ZXJ5ID0gXCJJTlNFUlQgSU5UTyBjYXRlZ29yaWVzIChuYW1lLCBkZXNjcmlwdGlvbikgVkFMVUVTICg/LCA/KVwiO1xuLi4uXG5cbiAgICAvKipcbiAgICAgKiBHZXQgYWxsIGNhdGVnb3JpZXNcbiAgICAgKiBAcmV0dXJuIExpc3Qgb2YgYWxsIGNhdGVnb3JpZXNcbiAgICAgKi9cbiAgICBwdWJsaWMgTGlzdDxDYXRlZ29yeT4gZ2V0QWxsQ2F0ZWdvcmllcygpIHtcbiAgICAgICAgTGlzdDxDYXRlZ29yeT4gY2F0ZWdvcmllcyA9IG5ldyBBcnJheUxpc3Q8PigpO1xuXG4gICAgICAgIC8vIFNpbXBsaWZpZWQgcXVlcnkgdG8gZW5zdXJlIHdlIGdldCBhbGwgY2F0ZWdvcmllcyByZWdhcmRsZXNzIG9mIHByb2R1Y3RzXG4gICAgICAgIFN0cmluZyBxdWVyeSA9IFwiU0VMRUNUICogRlJPTSBjYXRlZ29yaWVzIE9SREVSIEJZIG5hbWVcIjtcblxuICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJFeGVjdXRpbmcgZ2V0QWxsQ2F0ZWdvcmllcyBxdWVyeTogXCIgKyBxdWVyeSk7XG5cbiAgICAgICAgdHJ5IChDb25uZWN0aW9uIGNvbm4gPSBEQkNvbm5lY3Rpb24uZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgIFN0YXRlbWVudCBzdG10ID0gY29ubi5jcmVhdGVTdGF0ZW1lbnQoKTtcbiAgICAgICAgICAgICBSZXN1bHRTZXQgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeShxdWVyeSkpIHtcblxuICAgICAgICAgICAgaW50IGNvdW50ID0gMDtcbiAgICAgICAuLi4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFFQWl5NXRhNVEzMlBSMWRnaG1KaWQxIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiQzovVXNlcnMvVVNFUi9NdXNpYy9jbG90aGVlIGZpbmFsL2h5L0Nsb3RoZWUiLCJmb2xkZXJSb290IjoiQzovVXNlcnMvVVNFUi9NdXNpYy9jbG90aGVlIGZpbmFsL2h5L0Nsb3RoZWUifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTA4VDA5OjIzOjIwLjg5MFoiLCJyZXNwb25zZV90ZXh0IjoiTGV0IG1lIGNoZWNrIHRoZSBkYXRhYmFzZSBjb25uZWN0aW9uIGFuZCB0aGUgZGlyZWN0b3J5IHN0cnVjdHVyZSB0byB1bmRlcnN0YW5kIHdoZXJlIHRoZSBpbWFnZXMgc2hvdWxkIGJlIHN0b3JlZDpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiIzZTI0NzRmZi1hNDQxLTRmOTctODhlZS00NTExZGYzNjU0OTciLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFDeHNudXM4RGRNQTg2M0xmWWY2eURpIiwidG9vbF9uYW1lIjoiY29kZWJhc2UtcmV0cmlldmFsIiwiaW5wdXRfanNvbiI6IntcImluZm9ybWF0aW9uX3JlcXVlc3RcIjogXCJGaW5kIHRoZSBhZG1pbiBpbnRlcmZhY2UgSlNQIGZpbGVzIGZvciBtYW5hZ2luZyBjYXRlZ29yaWVzLCBlc3BlY2lhbGx5IHRoZSBwYXJ0IHRoYXQgaGFuZGxlcyB1cGxvYWRpbmcgY2F0ZWdvcnkgaW1hZ2VzXCJ9IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiTGV0IG1lIGNoZWNrIHRoZSBhZG1pbiBpbnRlcmZhY2UgZm9yIG1hbmFnaW5nIGNhdGVnb3JpZXMgdG8gc2VlIGhvdyBjYXRlZ29yeSBpbWFnZXMgYXJlIHN1cHBvc2VkIHRvIGJlIHVwbG9hZGVkOlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiVGhlIGZvbGxvd2luZyBjb2RlIHNlY3Rpb25zIHdlcmUgcmV0cmlldmVkOlxuUGF0aDogQ2xvdGhlZS9zcmMvbWFpbi9qYXZhL3V0aWwvREJDb25uZWN0aW9uLmphdmFcbi4uLlxuXG5wdWJsaWMgY2xhc3MgREJDb25uZWN0aW9uIHtcbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgSkRCQ19VUkwgPSBcImpkYmM6bXlzcWw6Ly9sb2NhbGhvc3Q6MzMwNi9jbG90aGVlP3VzZVNTTD1mYWxzZSZzZXJ2ZXJUaW1lem9uZT1VVENcIjtcbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgSkRCQ19VU0VSID0gXCJyb290XCI7XG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIEpEQkNfUEFTU1dPUkQgPSBcIlwiOyAvLyBVcGRhdGUgd2l0aCB5b3VyIE15U1FMIHBhc3N3b3JkIGlmIHNldFxuXG4gICAgc3RhdGljIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIENsYXNzLmZvck5hbWUoXCJjb20ubXlzcWwuY2ouamRiYy5Ecml2ZXJcIik7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJNeVNRTCBKREJDIGRyaXZlciBsb2FkZWQgc3VjY2Vzc2Z1bGx5XCIpO1xuXG4gICAgICAgIH0gY2F0Y2ggKENsYXNzTm90Rm91bmRFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgU3lzdGVtLmVyci5wcmludGxuKFwiRXJyb3IgbG9hZGluZyBNeVNRTCBKREJDIGRyaXZlcjogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFeGNlcHRpb24oXCJGYWlsZWQgdG8gbG9hZCBNeVNRTCBKREJDIGRyaXZlclwiLCBlKTtcbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIFN5c3RlbS5lcnIucHJpbnRsbihcIkVycm9yIGluaXRpYWxpemluZyBkYXRhYmFzZTogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxuICAgIHB1YmxpYyBzdGF0aWMgQ29ubmVjdGlvbiBnZXRDb25uZWN0aW9uKCkgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7XG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkRCQ29ubmVjdGlvbjogZ2V0Q29ubmVjdGlvbiBjYWxsZWRcIik7XG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkRCQ29ubmVjdGlvbjogSkRCQ19VUkwgPSBcIiArIEpEQkNfVVJMKTtcbiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiREJDb25uZWN0aW9uOiBKREJDX1VTRVIgPSBcIiArIEpEQkNfVVNFUik7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkRCQ29ubmVjdGlvbjogQXR0ZW1wdGluZyB0byBlc3RhYmxpc2ggY29ubmVjdGlvblwiKTtcbiAgICAgICAgICAgIENvbm5lY3Rpb24gY29ubiA9IERyaXZlck1hbmFnZXIuZ2V0Q29ubmVjdGlvbihKREJDX1VSTCwgSkRCQ19VU0VSLCBKREJDX1BBU1NXT1JEKTtcblxuICAgICAgICAgICAgaWYgKGNvbm4gPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkRCQ29ubmVjdGlvbjogQ29ubmVjdGlvbiBpcyBudWxsXCIpO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBTUUxFeGNlcHRpb24oXCJDb25uZWN0aW9uIGlzIG51bGxcIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChjb25uLmlzQ2xvc2VkKCkpIHtcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJEQkNvbm5lY3Rpb246IENvbm5lY3Rpb24gaXMgY2xvc2VkXCIpO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBTUUxFeGNlcHRpb24oXCJDb25uZWN0aW9uIGlzIGNsb3NlZFwiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiREJDb25uZWN0aW9uOiBEYXRhYmFzZSBjb25uZWN0aW9uIGVzdGFibGlzaGVkIHN1Y2Nlc3NmdWxseSBmb3IgY2xvdGhlZVwiKTtcbiAgICAgICAgICAgIHJldHVybiBjb25uO1xuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgU3lzdGVtLmVyci5wcmludGxuKFwiREJDb25uZWN0aW9uOiBFcnJvciBlc3RhYmxpc2hpbmcgZGF0YWJhc2UgY29ubmVjdGlvbjogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNRTEV4Y2VwdGlvbihcIkZhaWxlZCB0byBjb25uZWN0IHRvIGRhdGFiYXNlOiBcIiArIGUuZ2V0TWVzc2FnZSgpLCBlKTtcbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIFN5c3RlbS5lcnIucHJpbnRsbihcIkRCQ29ubmVjdGlvbjogVW5leHBlY3RlZCBlcnJvcjogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNRTEV4Y2VwdGlvbihcIlVuZXhwZWN0ZWQgZXJyb3I6IFwiICsgZS5nZXRNZXNzYWdlKCksIGUpO1xuICAgICAgICB9XG4gICAgfVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3V0aWwvREJDb25uZWN0aW9uLmphdmFcbi4uLlxuXG5wdWJsaWMgY2xhc3MgREJDb25uZWN0aW9uIHtcbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgSkRCQ19VUkwgPSBcImpkYmM6bXlzcWw6Ly9sb2NhbGhvc3Q6MzMwNi9jbG90aGVlP3VzZVNTTD1mYWxzZSZzZXJ2ZXJUaW1lem9uZT1VVENcIjtcbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgSkRCQ19VU0VSID0gXCJyb290XCI7XG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIEpEQkNfUEFTU1dPUkQgPSBcIlwiOyAvLyBVcGRhdGUgd2l0aCB5b3VyIE15U1FMIHBhc3N3b3JkIGlmIHNldFxuXG4gICAgc3RhdGljIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIENsYXNzLmZvck5hbWUoXCJjb20ubXlzcWwuY2ouamRiYy5Ecml2ZXJcIik7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJNeVNRTCBKREJDIGRyaXZlciBsb2FkZWQgc3VjY2Vzc2Z1bGx5XCIpO1xuXG4gICAgICAgIH0gY2F0Y2ggKENsYXNzTm90Rm91bmRFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgU3lzdGVtLmVyci5wcmludGxuKFwiRXJyb3IgbG9hZGluZyBNeVNRTCBKREJDIGRyaXZlcjogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFeGNlcHRpb24oXCJGYWlsZWQgdG8gbG9hZCBNeVNRTCBKREJDIGRyaXZlclwiLCBlKTtcbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIFN5c3RlbS5lcnIucHJpbnRsbihcIkVycm9yIGluaXRpYWxpemluZyBkYXRhYmFzZTogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxuICAgIHB1YmxpYyBzdGF0aWMgQ29ubmVjdGlvbiBnZXRDb25uZWN0aW9uKCkgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7XG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkRCQ29ubmVjdGlvbjogZ2V0Q29ubmVjdGlvbiBjYWxsZWRcIik7XG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkRCQ29ubmVjdGlvbjogSkRCQ19VUkwgPSBcIiArIEpEQkNfVVJMKTtcbiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiREJDb25uZWN0aW9uOiBKREJDX1VTRVIgPSBcIiArIEpEQkNfVVNFUik7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkRCQ29ubmVjdGlvbjogQXR0ZW1wdGluZyB0byBlc3RhYmxpc2ggY29ubmVjdGlvblwiKTtcbiAgICAgICAgICAgIENvbm5lY3Rpb24gY29ubiA9IERyaXZlck1hbmFnZXIuZ2V0Q29ubmVjdGlvbihKREJDX1VSTCwgSkRCQ19VU0VSLCBKREJDX1BBU1NXT1JEKTtcblxuICAgICAgICAgICAgaWYgKGNvbm4gPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkRCQ29ubmVjdGlvbjogQ29ubmVjdGlvbiBpcyBudWxsXCIpO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBTUUxFeGNlcHRpb24oXCJDb25uZWN0aW9uIGlzIG51bGxcIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChjb25uLmlzQ2xvc2VkKCkpIHtcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJEQkNvbm5lY3Rpb246IENvbm5lY3Rpb24gaXMgY2xvc2VkXCIpO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBTUUxFeGNlcHRpb24oXCJDb25uZWN0aW9uIGlzIGNsb3NlZFwiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiREJDb25uZWN0aW9uOiBEYXRhYmFzZSBjb25uZWN0aW9uIGVzdGFibGlzaGVkIHN1Y2Nlc3NmdWxseSBmb3IgY2xvdGhlZVwiKTtcbiAgICAgICAgICAgIHJldHVybiBjb25uO1xuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgU3lzdGVtLmVyci5wcmludGxuKFwiREJDb25uZWN0aW9uOiBFcnJvciBlc3RhYmxpc2hpbmcgZGF0YWJhc2UgY29ubmVjdGlvbjogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNRTEV4Y2VwdGlvbihcIkZhaWxlZCB0byBjb25uZWN0IHRvIGRhdGFiYXNlOiBcIiArIGUuZ2V0TWVzc2FnZSgpLCBlKTtcbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIFN5c3RlbS5lcnIucHJpbnRsbihcIkRCQ29ubmVjdGlvbjogVW5leHBlY3RlZCBlcnJvcjogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNRTEV4Y2VwdGlvbihcIlVuZXhwZWN0ZWQgZXJyb3I6IFwiICsgZS5nZXRNZXNzYWdlKCksIGUpO1xuICAgICAgICB9XG4gICAgfVxuLi4uXG5QYXRoOiBDbG90aGVlL3NyYy9tYWluL2phdmEvc2VydmljZS9Qcm9kdWN0SW1hZ2VTZXJ2aWNlLmphdmFcbi4uLlxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBwZXJtYW5lbnQgcGF0aCBmb3Igc3RvcmluZyBpbWFnZXNcbiAgICAgKiBAcGFyYW0gd2ViYXBwUm9vdCBUaGUgd2ViYXBwIHJvb3QgcGF0aFxuICAgICAqIEBwYXJhbSByZWxhdGl2ZVBhdGggVGhlIHJlbGF0aXZlIHBhdGggd2l0aGluIHRoZSB3ZWJhcHBcbiAgICAgKiBAcmV0dXJuIFRoZSBwZXJtYW5lbnQgcGF0aFxuICAgICAqL1xuICAgIHByaXZhdGUgU3RyaW5nIGdldFBlcm1hbmVudFBhdGgoU3RyaW5nIHdlYmFwcFJvb3QsIFN0cmluZyByZWxhdGl2ZVBhdGgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFVzZSBhIGZpeGVkLCBhYnNvbHV0ZSBwYXRoIHRoYXQgd2lsbCBkZWZpbml0ZWx5IHBlcnNpc3RcbiAgICAgICAgICAgIC8vIFRoaXMgcGF0aCBzaG91bGQgYmUgb3V0c2lkZSB0aGUgZGVwbG95bWVudCBkaXJlY3RvcnkgYnV0IGFjY2Vzc2libGUgYnkgdGhlIHdlYiBzZXJ2ZXJcbiAgICAgICAgICAgIC8vIEZpcnN0IHRyeSB0aGUgdXNlcidzIGhvbWUgZGlyZWN0b3J5XG4gICAgICAgICAgICBTdHJpbmcgdXNlckhvbWUgPSBTeXN0ZW0uZ2V0UHJvcGVydHkoXCJ1c2VyLmhvbWVcIik7XG4gICAgICAgICAgICBTdHJpbmcgZml4ZWRQYXRoID0gdXNlckhvbWUgKyBGaWxlLnNlcGFyYXRvciArIFwiQ2xvdGhlZUltYWdlc1wiICsgRmlsZS5zZXBhcmF0b3IgKyByZWxhdGl2ZVBhdGg7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJQcm9kdWN0SW1hZ2VTZXJ2aWNlIC0gVXNpbmcgZml4ZWQgcGF0aCBpbiB1c2VyIGhvbWU6IFwiICsgZml4ZWRQYXRoKTtcbiAgICAgICAgICAgIEZpbGUgZml4ZWREaXIgPSBuZXcgRmlsZShmaXhlZFBhdGgpO1xuLi4uXG5QYXRoOiBDbG90aGVlL3NyYy9tYWluL2phdmEvY29udHJvbGxlci9DYXRlZ29yeUltYWdlU2VydmxldC5qYXZhXG4uLi5cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgcGVybWFuZW50IHBhdGggZm9yIHN0b3JpbmcgaW1hZ2VzXG4gICAgICogQHBhcmFtIHdlYmFwcFJvb3QgVGhlIHdlYmFwcCByb290IHBhdGhcbiAgICAgKiBAcGFyYW0gcmVsYXRpdmVQYXRoIFRoZSByZWxhdGl2ZSBwYXRoIHdpdGhpbiB0aGUgd2ViYXBwXG4gICAgICogQHJldHVybiBUaGUgcGVybWFuZW50IHBhdGhcbiAgICAgKi9cbiAgICBwcml2YXRlIFN0cmluZyBnZXRQZXJtYW5lbnRQYXRoKFN0cmluZyB3ZWJhcHBSb290LCBTdHJpbmcgcmVsYXRpdmVQYXRoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBGaXJzdCwgdHJ5IHRvIHVzZSBhIGZpeGVkLCBhYnNvbHV0ZSBwYXRoIHRoYXQgd2lsbCBkZWZpbml0ZWx5IHBlcnNpc3RcbiAgICAgICAgICAgIC8vIFRoaXMgcGF0aCBzaG91bGQgYmUgb3V0c2lkZSB0aGUgZGVwbG95bWVudCBkaXJlY3RvcnkgYnV0IGFjY2Vzc2libGUgYnkgdGhlIHdlYiBzZXJ2ZXJcbiAgICAgICAgICAgIC8vIFVzZSB0aGUgdXNlcidzIGhvbWUgZGlyZWN0b3J5XG4gICAgICAgICAgICBTdHJpbmcgdXNlckhvbWUgPSBTeXN0ZW0uZ2V0UHJvcGVydHkoXCJ1c2VyLmhvbWVcIik7XG4gICAgICAgICAgICBTdHJpbmcgZml4ZWRQYXRoID0gdXNlckhvbWUgKyBGaWxlLnNlcGFyYXRvciArIFwiQ2xvdGhlZUltYWdlc1wiICsgRmlsZS5zZXBhcmF0b3IgKyByZWxhdGl2ZVBhdGg7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJDYXRlZ29yeUltYWdlU2VydmxldCAtIFVzaW5nIGZpeGVkIHBhdGggaW4gdXNlciBob21lOiBcIiArIGZpeGVkUGF0aCk7XG4gICAgICAgICAgICBGaWxlIGZpeGVkRGlyID0gbmV3IEZpbGUoZml4ZWRQYXRoKTtcbi4uLlxuXG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgcGVybWFuZW50IHBhdGggZXhpc3RzIG9yIGNhbiBiZSBjcmVhdGVkXG4gICAgICAgICAgICBGaWxlIHBlcm1hbmVudERpciA9IG5ldyBGaWxlKHBlcm1hbmVudFBhdGgpO1xuICAgICAgICAgICAgaWYgKCFwZXJtYW5lbnREaXIuZXhpc3RzKCkpIHtcbiAgICAgICAgICAgICAgICBib29sZWFuIGNyZWF0ZWQgPSBwZXJtYW5lbnREaXIubWtkaXJzKCk7XG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQ2F0ZWdvcnlJbWFnZVNlcnZsZXQgLSBDcmVhdGVkIHBlcm1hbmVudCBkaXJlY3Rvcnk6IFwiICsgY3JlYXRlZCk7XG4gICAgICAgICAgICAgICAgaWYgKCFjcmVhdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHdlIGNhbid0IGNyZWF0ZSB0aGUgcGVybWFuZW50IGRpcmVjdG9yeSwgdXNlIHRoZSBkZXBsb3ltZW50IHBhdGggYXMgZmFsbGJhY2tcbiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQ2F0ZWdvcnlJbWFnZVNlcnZsZXQgLSBDb3VsZCBub3QgY3JlYXRlIHBlcm1hbmVudCBkaXJlY3RvcnksIHVzaW5nIGRlcGxveW1lbnQgcGF0aCBhcyBmYWxsYmFja1wiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdlYmFwcFJvb3QgKyByZWxhdGl2ZVBhdGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gcGVybWFuZW50UGF0aDtcbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNhdGVnb3J5SW1hZ2VTZXJ2bGV0IC0gRXJyb3IgZ2V0dGluZyBwZXJtYW5lbnQgcGF0aDogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgcmV0dXJuIHdlYmFwcFJvb3QgKyByZWxhdGl2ZVBhdGg7XG4gICAgICAgIH1cbiAgICB9XG4uLi5cblBhdGg6IENsb3RoZWUvc3JjL21haW4vamF2YS9zZXJ2aWNlL1VzZXJJbWFnZVNlcnZpY2UuamF2YVxuLi4uXG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHBlcm1hbmVudCBwYXRoIGZvciBhIGZpbGUgKHBlcnNpc3RzIGFjcm9zcyBzZXJ2ZXIgcmVzdGFydHMpXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZGVwbG95bWVudFJvb3QgVGhlIGRlcGxveW1lbnQgcm9vdCBwYXRoXG4gICAgICogQHBhcmFtIHJlbGF0aXZlUGF0aCBUaGUgcmVsYXRpdmUgcGF0aCB3aXRoaW4gdGhlIHdlYmFwcFxuICAgICAqIEByZXR1cm4gVGhlIHBlcm1hbmVudCBwYXRoXG4gICAgICovXG4gICAgcHJpdmF0ZSBTdHJpbmcgZ2V0UGVybWFuZW50UGF0aChTdHJpbmcgZGVwbG95bWVudFJvb3QsIFN0cmluZyByZWxhdGl2ZVBhdGgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIEZpcnN0LCB0cnkgdG8gdXNlIGEgZml4ZWQsIGFic29sdXRlIHBhdGggdGhhdCB3aWxsIGRlZmluaXRlbHkgcGVyc2lzdFxuICAgICAgICAgICAgLy8gVGhpcyBwYXRoIHNob3VsZCBiZSBvdXRzaWRlIHRoZSBkZXBsb3ltZW50IGRpcmVjdG9yeSBidXQgYWNjZXNzaWJsZSBieSB0aGUgd2ViIHNlcnZlclxuICAgICAgICAgICAgLy8gVXNlIHRoZSB1c2VyJ3MgaG9tZSBkaXJlY3RvcnlcbiAgICAgICAgICAgIFN0cmluZyB1c2VySG9tZSA9IFN5c3RlbS5nZXRQcm9wZXJ0eShcInVzZXIuaG9tZVwiKTtcbiAgICAgICAgICAgIFN0cmluZyBmaXhlZFBhdGggPSB1c2VySG9tZSArIEZpbGUuc2VwYXJhdG9yICsgXCJDbG90aGVlSW1hZ2VzXCIgKyBGaWxlLnNlcGFyYXRvciArIHJlbGF0aXZlUGF0aDtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlVzZXJJbWFnZVNlcnZpY2UgLSBVc2luZyBmaXhlZCBwYXRoIGluIHVzZXIgaG9tZTogXCIgKyBmaXhlZFBhdGgpO1xuICAgICAgICAgICAgRmlsZSBmaXhlZERpciA9IG5ldyBGaWxlKGZpeGVkUGF0aCk7XG4uLi5cblBhdGg6IENsb3RoZWUvc3JjL21haW4vamF2YS91dGlsL0ltYWdlUGF0aFV0aWwuamF2YVxuLi4uXG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHBlcm1hbmVudCBwYXRoIGZvciBzdG9yaW5nIGltYWdlc1xuICAgICAqIEBwYXJhbSB3ZWJhcHBSb290IFRoZSB3ZWJhcHAgcm9vdCBwYXRoXG4gICAgICogQHBhcmFtIHJlbGF0aXZlUGF0aCBUaGUgcmVsYXRpdmUgcGF0aCB3aXRoaW4gdGhlIHdlYmFwcFxuICAgICAqIEByZXR1cm4gVGhlIHBlcm1hbmVudCBwYXRoXG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBTdHJpbmcgZ2V0UGVybWFuZW50UGF0aChTdHJpbmcgd2ViYXBwUm9vdCwgU3RyaW5nIHJlbGF0aXZlUGF0aCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gRmluZCB0aGUgcHJvamVjdCByb290IGRpcmVjdG9yeSAob3V0c2lkZSB0aGUgZGVwbG95bWVudCBkaXJlY3RvcnkpXG4gICAgICAgICAgICBGaWxlIGRlcGxveW1lbnREaXIgPSBuZXcgRmlsZSh3ZWJhcHBSb290KTtcbiAgICAgICAgICAgIEZpbGUgcHJvamVjdFJvb3QgPSBkZXBsb3ltZW50RGlyLmdldFBhcmVudEZpbGUoKS5nZXRQYXJlbnRGaWxlKCkuZ2V0UGFyZW50RmlsZSgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDcmVhdGUgdGhlIHBlcm1hbmVudCBwYXRoXG4gICAgICAgICAgICBTdHJpbmcgcGVybWFuZW50UGF0aCA9IHByb2plY3RSb290LmdldEFic29sdXRlUGF0aCgpICsgXCIvc3JjL21haW4vd2ViYXBwL1wiICsgcmVsYXRpdmVQYXRoO1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiSW1hZ2VQYXRoVXRpbCAtIFByb2plY3Qgcm9vdDogXCIgKyBwcm9qZWN0Um9vdC5nZXRBYnNvbHV0ZVBhdGgoKSk7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJJbWFnZVBhdGhVdGlsIC0gUGVybWFuZW50IHBhdGg6IFwiICsgcGVybWFuZW50UGF0aCk7XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvY29udHJvbGxlci9JbWFnZVNlcnZsZXQuamF2YVxucGFja2FnZSBjb250cm9sbGVyO1xuXG5pbXBvcnQgamF2YS5pby5GaWxlO1xuaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247XG5cbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuU2VydmxldEV4Y2VwdGlvbjtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuYW5ub3RhdGlvbi5NdWx0aXBhcnRDb25maWc7XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0LmFubm90YXRpb24uV2ViU2VydmxldDtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuaHR0cC5IdHRwU2VydmxldDtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuaHR0cC5IdHRwU2VydmxldFJlcXVlc3Q7XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXRSZXNwb25zZTtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuaHR0cC5QYXJ0O1xuXG5pbXBvcnQgc2VydmljZS5Qcm9kdWN0SW1hZ2VTZXJ2aWNlO1xuaW1wb3J0IHNlcnZpY2UuUHJvZHVjdFNlcnZpY2U7XG5pbXBvcnQgbW9kZWwuUHJvZHVjdDtcblxuLyoqXG4gKiBTZXJ2bGV0IGltcGxlbWVudGF0aW9uIGNsYXNzIEltYWdlU2VydmxldFxuICogSGFuZGxlcyBwcm9kdWN0IGltYWdlIHVwbG9hZHNcbiAqL1xuLy8gU2VydmxldCBtYXBwaW5nIGRlZmluZWQgaW4gd2ViLnhtbFxuQE11bHRpcGFydENvbmZpZ1xucHVibGljIGNsYXNzIEltYWdlU2VydmxldCBleHRlbmRzIEh0dHBTZXJ2bGV0IHtcbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBsb25nIHNlcmlhbFZlcnNpb25VSUQgPSAxTDtcbiAgICBwcml2YXRlIFByb2R1Y3RJbWFnZVNlcnZpY2UgcHJvZHVjdEltYWdlU2VydmljZTtcbiAgICBwcml2YXRlIFByb2R1Y3RTZXJ2aWNlIHByb2R1Y3RTZXJ2aWNlO1xuXG4gICAgLyoqXG4gICAgICogQHNlZSBIdHRwU2VydmxldCNIdHRwU2VydmxldCgpXG4gICAgICovXG4gICAgcHVibGljIEltYWdlU2VydmxldCgpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgcHJvZHVjdEltYWdlU2VydmljZSA9IG5ldyBQcm9kdWN0SW1hZ2VTZXJ2aWNlKCk7XG4gICAgICAgIHByb2R1Y3RTZXJ2aWNlID0gbmV3IFByb2R1Y3RTZXJ2aWNlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHNlZSBIdHRwU2VydmxldCNkb1Bvc3QoSHR0cFNlcnZsZXRSZXF1ZXN0IHJlcXVlc3QsIEh0dHBTZXJ2bGV0UmVzcG9uc2UgcmVzcG9uc2UpXG4gICAgICovXG4gICAgcHJvdGVjdGVkIHZvaWQgZG9Qb3N0KEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBIdHRwU2VydmxldFJlc3BvbnNlIHJlc3BvbnNlKSB0aHJvd3MgU2VydmxldEV4Y2VwdGlvbiwgSU9FeGNlcHRpb24ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gR2V0IHByb2R1Y3QgSUQgZnJvbSByZXF1ZXN0XG4gICAgICAgICAgICBTdHJpbmcgcHJvZHVjdElkU3RyID0gcmVxdWVzdC5nZXRQYXJhbWV0ZXIoXCJwcm9kdWN0SWRcIik7XG4gICAgICAgICAgICBTdHJpbmcgcmV0dXJuVXJsID0gcmVxdWVzdC5nZXRQYXJhbWV0ZXIoXCJyZXR1cm5VcmxcIik7XG5cbiAgICAgICAgICAgIC8vIERlZmF1bHQgcmV0dXJuIFVSTCBpZiBub3Qgc3BlY2lmaWVkXG4gICAgICAgICAgICBpZiAocmV0dXJuVXJsID09IG51bGwgfHwgcmV0dXJuVXJsLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgIHJldHVyblVybCA9IFwiL2FkbWluL0FkbWluUHJvZHVjdFNlcnZsZXRcIjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHByb2R1Y3RJZFN0ciA9PSBudWxsIHx8IHByb2R1Y3RJZFN0ci5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgcmV0dXJuVXJsICsgXCI/ZXJyb3I9UHJvZHVjdCtJRCtpcytyZXF1aXJlZFwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4uLi5cblxuICAgICAgICAgICAgICAgIC8vIFVwbG9hZCB0aGUgaW1hZ2UgdXNpbmcgdGhlIHNlcnZpY2VcbiAgICAgICAgICAgICAgICBTdHJpbmcgdXBsb2FkUGF0aCA9IHJlcXVlc3QuZ2V0U2VydmxldENvbnRleHQoKS5nZXRSZWFsUGF0aChcIi9cIik7XG4gICAgICAgICAgICAgICAgU3RyaW5nIGltYWdlVXJsID0gcHJvZHVjdEltYWdlU2VydmljZS51cGxvYWRQcm9kdWN0SW1hZ2UocHJvZHVjdElkLCBmaWxlUGFydCwgdXBsb2FkUGF0aCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoaW1hZ2VVcmwgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgcmV0dXJuVXJsICsgXCI/ZXJyb3I9RmFpbGVkK3RvK3VwbG9hZCtpbWFnZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBwcm9kdWN0IGltYWdlIFVSTCBpbiBkYXRhYmFzZVxuICAgICAgICAgICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IHByb2R1Y3RJbWFnZVNlcnZpY2UudXBkYXRlUHJvZHVjdEltYWdlVXJsKHByb2R1Y3RJZCwgaW1hZ2VVcmwpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIHJldHVyblVybCArIFwiP3N1Y2Nlc3M9UHJvZHVjdCtpbWFnZSt1cGRhdGVkK3N1Y2Nlc3NmdWxseVwiKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgcmV0dXJuVXJsICsgXCI/ZXJyb3I9RmFpbGVkK3RvK3VwZGF0ZStwcm9kdWN0K2ltYWdlXCIpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSBjYXRjaCAoTnVtYmVyRm9ybWF0RXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJFcnJvciBwYXJzaW5nIHByb2R1Y3QgSUQ6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIHJldHVyblVybCArIFwiP2Vycm9yPUludmFsaWQrcHJvZHVjdCtJRFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkVycm9yIGluIEltYWdlU2VydmxldC5kb1Bvc3Q6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9hZG1pbi9BZG1pblByb2R1Y3RTZXJ2bGV0P2Vycm9yPUVycm9yK3VwbG9hZGluZytpbWFnZTorXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgIH1cbiAgICB9XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvY29udHJvbGxlci9JbWFnZURvd25sb2FkU2VydmxldC5qYXZhXG4uLi5cblxuICAgICAgICBpZiAoXCJkb3dubG9hZFwiLmVxdWFscyhhY3Rpb24pKSB7XG4gICAgICAgICAgICAvLyBEb3dubG9hZCBpbWFnZXNcbiAgICAgICAgICAgIFN0cmluZyBjYXRlZ29yeSA9IHJlcXVlc3QuZ2V0UGFyYW1ldGVyKFwiY2F0ZWdvcnlcIik7XG5cbiAgICAgICAgICAgIGlmIChjYXRlZ29yeSA9PSBudWxsIHx8IGNhdGVnb3J5LmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgIC8vIERvd25sb2FkIGFsbCBjYXRlZ29yaWVzXG4gICAgICAgICAgICAgICAgZm9yIChTdHJpbmcgY2F0IDogSU1BR0VfVVJMUy5rZXlTZXQoKSkge1xuICAgICAgICAgICAgICAgICAgICBkb3dubG9hZEltYWdlcyhjYXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzZXNzaW9uLnNldEF0dHJpYnV0ZShcInN1Y2Nlc3NNZXNzYWdlXCIsIFwiQWxsIGltYWdlcyBkb3dubG9hZGVkIHN1Y2Nlc3NmdWxseVwiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gRG93bmxvYWQgc3BlY2lmaWMgY2F0ZWdvcnlcbiAgICAgICAgICAgICAgICBpZiAoSU1BR0VfVVJMUy5jb250YWluc0tleShjYXRlZ29yeSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRJbWFnZXMoY2F0ZWdvcnkpO1xuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uLnNldEF0dHJpYnV0ZShcInN1Y2Nlc3NNZXNzYWdlXCIsIGNhdGVnb3J5ICsgXCIgaW1hZ2VzIGRvd25sb2FkZWQgc3VjY2Vzc2Z1bGx5XCIpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb24uc2V0QXR0cmlidXRlKFwiZXJyb3JNZXNzYWdlXCIsIFwiSW52YWxpZCBjYXRlZ29yeTogXCIgKyBjYXRlZ29yeSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QoXCJJbWFnZURvd25sb2FkU2VydmxldFwiKTtcbiAgICAgICAgfVxuICAgIH1cbi4uLlxuXG4gICAgLyoqXG4gICAgICogRG93bmxvYWQgaW1hZ2VzIGZvciBhIHNwZWNpZmljIGNhdGVnb3J5XG4gICAgICogQHBhcmFtIGNhdGVnb3J5IENhdGVnb3J5IHRvIGRvd25sb2FkIGltYWdlcyBmb3JcbiAgICAgKi9cbiAgICBwcml2YXRlIHZvaWQgZG93bmxvYWRJbWFnZXMoU3RyaW5nIGNhdGVnb3J5KSB7XG4gICAgICAgIExpc3Q8U3RyaW5nPiB1cmxzID0gSU1BR0VfVVJMUy5nZXQoY2F0ZWdvcnkpO1xuXG4gICAgICAgIGlmICh1cmxzID09IG51bGwgfHwgdXJscy5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIFN0cmluZyBiYXNlUGF0aCA9IGdldFNlcnZsZXRDb250ZXh0KCkuZ2V0UmVhbFBhdGgoXCIvaW1hZ2VzL3Byb2R1Y3RzL1wiICsgY2F0ZWdvcnkpO1xuICAgICAgICBGaWxlIGJhc2VEaXIgPSBuZXcgRmlsZShiYXNlUGF0aCk7XG5cbiAgICAgICAgaWYgKCFiYXNlRGlyLmV4aXN0cygpKSB7XG4gICAgICAgICAgICBiYXNlRGlyLm1rZGlycygpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCB1cmxzLnNpemUoKTsgaSsrKSB7XG4gICAgICAgICAgICBTdHJpbmcgdXJsID0gdXJscy5nZXQoaSk7XG4gICAgICAgICAgICBTdHJpbmcgZmlsZU5hbWUgPSBjYXRlZ29yeSArIChpICsgMSkgKyBcIi5qcGdcIjtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBkb3dubG9hZEltYWdlKHVybCwgbmV3IEZpbGUoYmFzZURpciwgZmlsZU5hbWUpKTtcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJEb3dubG9hZGVkOiBcIiArIGZpbGVOYW1lKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKElPRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgICAgICBTeXN0ZW0uZXJyLnByaW50bG4oXCJFcnJvciBkb3dubG9hZGluZyBcIiArIGZpbGVOYW1lICsgXCI6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRG93bmxvYWQgYW4gaW1hZ2UgZnJvbSBhIFVSTCBhbmQgc2F2ZSBpdCB0byBhIGZpbGVcbiAgICAgKiBAcGFyYW0gaW1hZ2VVcmwgVVJMIG9mIHRoZSBpbWFnZSB0byBkb3dubG9hZFxuICAgICAqIEBwYXJhbSBkZXN0aW5hdGlvbkZpbGUgRmlsZSB0byBzYXZlIHRoZSBpbWFnZSB0b1xuICAgICAqIEB0aHJvd3MgSU9FeGNlcHRpb24gSWYgYW4gZXJyb3Igb2NjdXJzIGR1cmluZyBkb3dubG9hZFxuICAgICAqL1xuICAgIHByaXZhdGUgdm9pZCBkb3dubG9hZEltYWdlKFN0cmluZyBpbWFnZVVybCwgRmlsZSBkZXN0aW5hdGlvbkZpbGUpIHRocm93cyBJT0V4Y2VwdGlvbiB7XG4gICAgICAgIFVSTCB1cmwgPSBuZXcgVVJMKGltYWdlVXJsKTtcbiAgICAgICAgVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiVXNlci1BZ2VudFwiLCBcIk1vemlsbGEvNS4wXCIpO1xuXG4gICAgICAgIHRyeSAoSW5wdXRTdHJlYW0gaW4gPSBjb25uZWN0aW9uLmdldElucHV0U3RyZWFtKCk7XG4gICAgICAgICAgICAgRmlsZU91dHB1dFN0cmVhbSBvdXQgPSBuZXcgRmlsZU91dHB1dFN0cmVhbShkZXN0aW5hdGlvbkZpbGUpKSB7XG5cbiAgICAgICAgICAgIGJ5dGVbXSBidWZmZXIgPSBuZXcgYnl0ZVs0MDk2XTtcbiAgICAgICAgICAgIGludCBieXRlc1JlYWQ7XG5cbiAgICAgICAgICAgIHdoaWxlICgoYnl0ZXNSZWFkID0gaW4ucmVhZChidWZmZXIpKSAhPSAtMSkge1xuICAgICAgICAgICAgICAgIG91dC53cml0ZShidWZmZXIsIDAsIGJ5dGVzUmVhZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4uLi5cblBhdGg6IHNyYy9tYWluL3dlYmFwcC9pbWFnZXMvUkVBRE1FLnR4dFxuUGxlYXNlIGFkZCBhIGRlZmF1bHQgcHJvZmlsZSBpbWFnZSBuYW1lZCBcImRlZmF1bHQtcHJvZmlsZS5qcGdcIiBpbiB0aGlzIGRpcmVjdG9yeS5cblRoaXMgaW1hZ2Ugd2lsbCBiZSB1c2VkIGFzIHRoZSBkZWZhdWx0IHByb2ZpbGUgcGljdHVyZSBmb3IgdXNlcnMgd2hvIGhhdmVuJ3QgdXBsb2FkZWQgdGhlaXIgb3duLlxuLi4uXG5QYXRoOiBDbG90aGVlL3NyYy9tYWluL3dlYmFwcC9pbWFnZXMvUkVBRE1FLnR4dFxuUGxlYXNlIGFkZCBhIGRlZmF1bHQgcHJvZmlsZSBpbWFnZSBuYW1lZCBcImRlZmF1bHQtcHJvZmlsZS5qcGdcIiBpbiB0aGlzIGRpcmVjdG9yeS5cblRoaXMgaW1hZ2Ugd2lsbCBiZSB1c2VkIGFzIHRoZSBkZWZhdWx0IHByb2ZpbGUgcGljdHVyZSBmb3IgdXNlcnMgd2hvIGhhdmVuJ3QgdXBsb2FkZWQgdGhlaXIgb3duLlxuLi4uXG5QYXRoOiBDbG90aGVlL3NyYy9tYWluL2phdmEvY29udHJvbGxlci9JbWFnZURvd25sb2FkU2VydmxldC5qYXZhXG4uLi5cblxuICAgICAgICBpZiAoXCJkb3dubG9hZFwiLmVxdWFscyhhY3Rpb24pKSB7XG4gICAgICAgICAgICAvLyBEb3dubG9hZCBpbWFnZXNcbiAgICAgICAgICAgIFN0cmluZyBjYXRlZ29yeSA9IHJlcXVlc3QuZ2V0UGFyYW1ldGVyKFwiY2F0ZWdvcnlcIik7XG5cbiAgICAgICAgICAgIGlmIChjYXRlZ29yeSA9PSBudWxsIHx8IGNhdGVnb3J5LmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgIC8vIERvd25sb2FkIGFsbCBjYXRlZ29yaWVzXG4gICAgICAgICAgICAgICAgZm9yIChTdHJpbmcgY2F0IDogSU1BR0VfVVJMUy5rZXlTZXQoKSkge1xuICAgICAgICAgICAgICAgICAgICBkb3dubG9hZEltYWdlcyhjYXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzZXNzaW9uLnNldEF0dHJpYnV0ZShcInN1Y2Nlc3NNZXNzYWdlXCIsIFwiQWxsIGltYWdlcyBkb3dubG9hZGVkIHN1Y2Nlc3NmdWxseVwiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gRG93bmxvYWQgc3BlY2lmaWMgY2F0ZWdvcnlcbiAgICAgICAgICAgICAgICBpZiAoSU1BR0VfVVJMUy5jb250YWluc0tleShjYXRlZ29yeSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRJbWFnZXMoY2F0ZWdvcnkpO1xuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uLnNldEF0dHJpYnV0ZShcInN1Y2Nlc3NNZXNzYWdlXCIsIGNhdGVnb3J5ICsgXCIgaW1hZ2VzIGRvd25sb2FkZWQgc3VjY2Vzc2Z1bGx5XCIpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb24uc2V0QXR0cmlidXRlKFwiZXJyb3JNZXNzYWdlXCIsIFwiSW52YWxpZCBjYXRlZ29yeTogXCIgKyBjYXRlZ29yeSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QoXCJJbWFnZURvd25sb2FkU2VydmxldFwiKTtcbiAgICAgICAgfVxuICAgIH1cbi4uLlxuXG4gICAgLyoqXG4gICAgICogRG93bmxvYWQgaW1hZ2VzIGZvciBhIHNwZWNpZmljIGNhdGVnb3J5XG4gICAgICogQHBhcmFtIGNhdGVnb3J5IENhdGVnb3J5IHRvIGRvd25sb2FkIGltYWdlcyBmb3JcbiAgICAgKi9cbiAgICBwcml2YXRlIHZvaWQgZG93bmxvYWRJbWFnZXMoU3RyaW5nIGNhdGVnb3J5KSB7XG4gICAgICAgIExpc3Q8U3RyaW5nPiB1cmxzID0gSU1BR0VfVVJMUy5nZXQoY2F0ZWdvcnkpO1xuXG4gICAgICAgIGlmICh1cmxzID09IG51bGwgfHwgdXJscy5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIFN0cmluZyBiYXNlUGF0aCA9IGdldFNlcnZsZXRDb250ZXh0KCkuZ2V0UmVhbFBhdGgoXCIvaW1hZ2VzL3Byb2R1Y3RzL1wiICsgY2F0ZWdvcnkpO1xuICAgICAgICBGaWxlIGJhc2VEaXIgPSBuZXcgRmlsZShiYXNlUGF0aCk7XG5cbiAgICAgICAgaWYgKCFiYXNlRGlyLmV4aXN0cygpKSB7XG4gICAgICAgICAgICBiYXNlRGlyLm1rZGlycygpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCB1cmxzLnNpemUoKTsgaSsrKSB7XG4gICAgICAgICAgICBTdHJpbmcgdXJsID0gdXJscy5nZXQoaSk7XG4gICAgICAgICAgICBTdHJpbmcgZmlsZU5hbWUgPSBjYXRlZ29yeSArIChpICsgMSkgKyBcIi5qcGdcIjtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBkb3dubG9hZEltYWdlKHVybCwgbmV3IEZpbGUoYmFzZURpciwgZmlsZU5hbWUpKTtcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJEb3dubG9hZGVkOiBcIiArIGZpbGVOYW1lKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKElPRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgICAgICBTeXN0ZW0uZXJyLnByaW50bG4oXCJFcnJvciBkb3dubG9hZGluZyBcIiArIGZpbGVOYW1lICsgXCI6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuLi4uXG5QYXRoOiBzcmMvbWFpbi93ZWJhcHAvaW1hZ2VzL3Byb2R1Y3RzL1JFQURNRS50eHRcblByb2R1Y3QgSW1hZ2VzIERpcmVjdG9yeSBTdHJ1Y3R1cmVcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5UaGlzIGRpcmVjdG9yeSBjb250YWlucyBwcm9kdWN0IGltYWdlcyBvcmdhbml6ZWQgYnkgY2F0ZWdvcnk6XG5cbi9tZW4gLSBNZW4ncyBjbG90aGluZyBhbmQgYWNjZXNzb3JpZXNcbi93b21lbiAtIFdvbWVuJ3MgY2xvdGhpbmcgYW5kIGFjY2Vzc29yaWVzXG4va2lkcyAtIEtpZHMnIGNsb3RoaW5nIGFuZCBhY2Nlc3Nvcmllc1xuL2FjY2Vzc29yaWVzIC0gR2VuZXJhbCBhY2Nlc3Nvcmllc1xuXG5JbWFnZSBOYW1pbmcgQ29udmVudGlvblxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuUGxlYXNlIG5hbWUgeW91ciBwcm9kdWN0IGltYWdlcyB1c2luZyB0aGUgZm9sbG93aW5nIGZvcm1hdDpcbltjYXRlZ29yeV1fW3Byb2R1Y3QtdHlwZV1fW251bWJlcl0uanBnXG5cbkV4YW1wbGVzOlxuLSBtZW5fdHNoaXJ0XzEuanBnXG4tIHdvbWVuX2RyZXNzXzIuanBnXG4tIGtpZHNfamVhbnNfMS5qcGdcbi0gYWNjZXNzb3JpZXNfYmVsdF8xLmpwZ1xuXG5JbWFnZSBSZXF1aXJlbWVudHNcbi0tLS0tLS0tLS0tLS0tLS0tXG4tIEZvcm1hdDogSlBHIG9yIFBOR1xuLSBTaXplOiA4MDB4ODAwIHBpeGVscyAoc3F1YXJlKSByZWNvbW1lbmRlZFxuLSBNYXggZmlsZSBzaXplOiA1MDBLQlxuLi4uXG5QYXRoOiBzcmMvbWFpbi93ZWJhcHAvaW1hZ2VzL3Byb2R1Y3RzL1JFQURNRS5odG1sXG4uLi5cbiAgICBcbiAgICA8ZGl2IGNsYXNzPVwiY29udGFpbmVyXCI+XG4gICAgICAgIDxoMj5EYXRhYmFzZSBTZXR1cDwvaDI+XG4gICAgICAgIDxwPkFmdGVyIHBsYWNpbmcgdGhlIGltYWdlcyBpbiB0aGUgY29ycmVjdCBkaXJlY3RvcmllcywgeW91IG5lZWQgdG8gdXBkYXRlIHRoZSBkYXRhYmFzZTo8L3A+XG4gICAgICAgIFxuICAgICAgICA8b2w+XG4gICAgICAgICAgICA8bGk+UnVuIHRoZSA8Y29kZT5wcm9kdWN0X2ltYWdlcy5zcWw8L2NvZGU+IHNjcmlwdCB0byBjcmVhdGUgdGhlIHByb2R1Y3RfaW1hZ2VzIHRhYmxlPC9saT5cbiAgICAgICAgICAgIDxsaT5SdW4gdGhlIDxjb2RlPnNhbXBsZV9wcm9kdWN0X2ltYWdlcy5zcWw8L2NvZGU+IHNjcmlwdCB0byBhZGQgdGhlIGltYWdlIHJlZmVyZW5jZXMgdG8gdGhlIGRhdGFiYXNlPC9saT5cbiAgICAgICAgPC9vbD5cbiAgICAgICAgXG4gICAgICAgIDxwcmU+XG4tLSBSdW4gdGhlc2UgY29tbWFuZHMgaW4geW91ciBNeVNRTCBkYXRhYmFzZVxuc291cmNlIHByb2R1Y3RfaW1hZ2VzLnNxbFxuc291cmNlIHNhbXBsZV9wcm9kdWN0X2ltYWdlcy5zcWxcbiAgICAgICAgPC9wcmU+XG4gICAgPC9kaXY+XG4gICAgXG4gICAgPGRpdiBjbGFzcz1cImNvbnRhaW5lclwiPlxuICAgICAgICA8aDI+VmVyaWZ5aW5nIHRoZSBTZXR1cDwvaDI+XG4gICAgICAgIDxwPlRvIHZlcmlmeSB0aGF0IHRoZSBpbWFnZXMgYXJlIGNvcnJlY3RseSBzZXQgdXA6PC9wPlxuICAgICAgICBcbiAgICAgICAgPG9sPlxuICAgICAgICAgICAgPGxpPlN0YXJ0IHRoZSBUb21jYXQgc2VydmVyPC9saT5cbiAgICAgICAgICAgIDxsaT5OYXZpZ2F0ZSB0byB0aGUgcHJvZHVjdHMgcGFnZTwvbGk+XG4gICAgICAgICAgICA8bGk+Q2xpY2sgb24gYSBwcm9kdWN0IHRvIHZpZXcgaXRzIGRldGFpbHM8L2xpPlxuICAgICAgICAgICAgPGxpPlZlcmlmeSB0aGF0IHRoZSBpbWFnZXMgYXJlIGRpc3BsYXllZCBjb3JyZWN0bHk8L2xpPlxuICAgICAgICAgICAgPGxpPlRlc3QgdGhlIGltYWdlIGdhbGxlcnkgZnVuY3Rpb25hbGl0eSBieSBjbGlja2luZyBvbiB0aHVtYm5haWxzPC8uLi4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFZOU1XczlrdXBLSFd6bXRveEFDd1hHIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiQzovVXNlcnMvVVNFUi9NdXNpYy9jbG90aGVlIGZpbmFsL2h5L0Nsb3RoZWUiLCJmb2xkZXJSb290IjoiQzovVXNlcnMvVVNFUi9NdXNpYy9jbG90aGVlIGZpbmFsL2h5L0Nsb3RoZWUifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTA4VDA5OjIzOjMwLjQ4N1oiLCJyZXNwb25zZV90ZXh0IjoiTGV0IG1lIGNoZWNrIHRoZSBhZG1pbiBpbnRlcmZhY2UgZm9yIG1hbmFnaW5nIGNhdGVnb3JpZXMgdG8gc2VlIGhvdyBjYXRlZ29yeSBpbWFnZXMgYXJlIHN1cHBvc2VkIHRvIGJlIHVwbG9hZGVkOlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjMyZWFhNTRkLWFkYjYtNGYzZi04M2RjLTAzNmJjYTA2MzdjMyIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IkJhc2VkIG9uIG15IGludmVzdGlnYXRpb24sIEkgY2FuIG5vdyBpZGVudGlmeSB0aGUgaXNzdWUgd2l0aCB0aGUgY2F0ZWdvcnkgaW1hZ2VzIG5vdCBzaG93aW5nIG9uIHRoZSBob21lIHBhZ2UuIExldCBtZSBleHBsYWluIHRoZSBwcm9ibGVtIGFuZCBwcm92aWRlIGEgc29sdXRpb246XG5cbiMjIFRoZSBJc3N1ZVxuXG5UaGUgXCJTaG9wIGJ5IENhdGVnb3J5XCIgc2VjdGlvbiBvbiB0aGUgaG9tZSBwYWdlIGlzIG5vdCBkaXNwbGF5aW5nIGltYWdlcyBiZWNhdXNlOlxuXG4xLiBUaGUgY2F0ZWdvcnkgaW1hZ2VzIGFyZSBzdXBwb3NlZCB0byBiZSBzdG9yZWQgaW4gdGhlIGBpbWFnZXMvY2F0ZWdvcmllc2AgZGlyZWN0b3J5LCBidXQgdGhpcyBkaXJlY3RvcnkgbWlnaHQgbm90IGV4aXN0IG9yIHRoZSBpbWFnZXMgaGF2ZW4ndCBiZWVuIHVwbG9hZGVkLlxuXG4yLiBUaGUgY29kZSBpbiBgaW5kZXguanNwYCBpcyBjb3JyZWN0bHkgc2V0IHVwIHRvIGRpc3BsYXkgZWl0aGVyOlxuICAgLSBUaGUgY2F0ZWdvcnkgaW1hZ2UgZnJvbSB0aGUgZGF0YWJhc2UgaWYgaXQgZXhpc3RzXG4gICAtIEEgZGVmYXVsdCBpbWFnZSBpZiBubyBpbWFnZSBpcyBzZXQgZm9yIHRoZSBjYXRlZ29yeVxuXG4zLiBUaGUgZGF0YWJhc2UgaGFzIGNhdGVnb3JpZXMgZGVmaW5lZCAoTWVuLCBXb21lbiwgS2lkcywgQWNjZXNzb3JpZXMpLCBidXQgdGhleSBsaWtlbHkgZG9uJ3QgaGF2ZSBpbWFnZSBVUkxzIHNldCBpbiB0aGUgYGltYWdlX3VybGAgY29sdW1uIG9mIHRoZSBgY2F0ZWdvcmllc2AgdGFibGUuXG5cbiMjIFNvbHV0aW9uXG5cbllvdSBuZWVkIHRvIHVwbG9hZCBpbWFnZXMgZm9yIHlvdXIgY2F0ZWdvcmllcyB1c2luZyB0aGUgYWRtaW4gaW50ZXJmYWNlLiBIZXJlJ3MgaG93IHRvIGZpeCB0aGlzOlxuXG4xLiBMb2cgaW4gYXMgYW4gYWRtaW4gdXNlciAobGlrZSBcInNpdGFAZXhhbXBsZS5jb21cIiB3aXRoIHBhc3N3b3JkIFwicGFzc3dvcmQ0NTZcIiBiYXNlZCBvbiB5b3VyIFNRTCBmaWxlKVxuMi4gR28gdG8gdGhlIGFkbWluIGNhdGVnb3JpZXMgcGFnZVxuMy4gRm9yIGVhY2ggY2F0ZWdvcnksIGNsaWNrIHRoZSBcIkltYWdlXCIgYnV0dG9uIGFuZCB1cGxvYWQgYW4gYXBwcm9wcmlhdGUgaW1hZ2VcblxuSWYgeW91IGRvbid0IHdhbnQgdG8gZ28gdGhyb3VnaCB0aGUgYWRtaW4gaW50ZXJmYWNlLCB5b3UgY2FuIGFsc286XG5cbjEuIE1ha2Ugc3VyZSB0aGUgYGltYWdlcy9jYXRlZ29yaWVzYCBkaXJlY3RvcnkgZXhpc3RzIGluIHlvdXIgd2ViYXBwXG4yLiBBZGQgaW1hZ2VzIGRpcmVjdGx5IHRvIHRoaXMgZGlyZWN0b3J5IHdpdGggdGhlIG5hbWluZyBjb252ZW50aW9uIGBjYXRlZ29yeV9baWRdLltleHRlbnNpb25dYFxuMy4gVXBkYXRlIHRoZSBkYXRhYmFzZSB0byBzZXQgdGhlIGNvcnJlY3QgaW1hZ2UgVVJMcyBmb3IgZWFjaCBjYXRlZ29yeVxuXG4jIyBTdGVwLWJ5LVN0ZXAgSW5zdHJ1Y3Rpb25zXG5cbjEuIExvZyBpbiBhcyBhbiBhZG1pbiB1c2VyXG4yLiBOYXZpZ2F0ZSB0byB0aGUgYWRtaW4gcGFuZWxcbjMuIEdvIHRvIHRoZSBDYXRlZ29yaWVzIHNlY3Rpb25cbjQuIEZvciBlYWNoIGNhdGVnb3J5IChNZW4sIFdvbWVuLCBLaWRzLCBBY2Nlc3Nvcmllcyk6XG4gICAtIENsaWNrIHRoZSBcIkltYWdlXCIgYnV0dG9uXG4gICAtIFVwbG9hZCBhbiBhcHByb3ByaWF0ZSBpbWFnZVxuICAgLSBTYXZlIHRoZSBjaGFuZ2VzXG5cblRoaXMgd2lsbCB1cGRhdGUgdGhlIGBpbWFnZV91cmxgIGNvbHVtbiBpbiB0aGUgYGNhdGVnb3JpZXNgIHRhYmxlLCBhbmQgdGhlIGltYWdlcyB3aWxsIHRoZW4gYXBwZWFyIG9uIHRoZSBob21lIHBhZ2UgaW4gdGhlIFwiU2hvcCBieSBDYXRlZ29yeVwiIHNlY3Rpb24uXG5cbklmIHlvdSBwcmVmZXIgYSBkaXJlY3QgZGF0YWJhc2UgYXBwcm9hY2gsIHlvdSBjYW4gYWxzbyB1cGRhdGUgdGhlIGNhdGVnb3J5IGltYWdlIFVSTHMgZGlyZWN0bHkgaW4gdGhlIGRhdGFiYXNlIHdpdGggU1FMIGNvbW1hbmRzIGxpa2U6XG5cbmBgYHNxbFxuVVBEQVRFIGNhdGVnb3JpZXMgU0VUIGltYWdlX3VybCA9ICdpbWFnZXMvY2F0ZWdvcmllcy9jYXRlZ29yeV8xLmpwZycgV0hFUkUgaWQgPSAxO1xuVVBEQVRFIGNhdGVnb3JpZXMgU0VUIGltYWdlX3VybCA9ICdpbWFnZXMvY2F0ZWdvcmllcy9jYXRlZ29yeV8yLmpwZycgV0hFUkUgaWQgPSAyO1xuYGBgXG5cbkJ1dCB5b3Ugd291bGQgc3RpbGwgbmVlZCB0byBlbnN1cmUgdGhlIGFjdHVhbCBpbWFnZSBmaWxlcyBleGlzdCBpbiB0aGUgY29ycmVjdCBsb2NhdGlvbi5cblxuV291bGQgeW91IGxpa2UgbWUgdG8gaGVscCB5b3Ugd2l0aCBhbnkgc3BlY2lmaWMgcGFydCBvZiB0aGlzIHNvbHV0aW9uP1xuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiVGhlIGZvbGxvd2luZyBjb2RlIHNlY3Rpb25zIHdlcmUgcmV0cmlldmVkOlxuUGF0aDogQ2xvdGhlZS9zcmMvbWFpbi93ZWJhcHAvYWRtaW4vdXBsb2FkLWNhdGVnb3J5LWltYWdlLmpzcFxuPCVAIHBhZ2UgbGFuZ3VhZ2U9XCJqYXZhXCIgY29udGVudFR5cGU9XCJ0ZXh0L2h0bWw7IGNoYXJzZXQ9VVRGLThcIiBwYWdlRW5jb2Rpbmc9XCJVVEYtOFwiJT5cbjwlQCBwYWdlIGltcG9ydD1cImphdmEudXRpbC5MaXN0XCIgJT5cbjwlQCBwYWdlIGltcG9ydD1cIm1vZGVsLlVzZXJcIiAlPlxuPCVAIHBhZ2UgaW1wb3J0PVwibW9kZWwuQ2F0ZWdvcnlcIiAlPlxuPCVAIHBhZ2UgaW1wb3J0PVwiZGFvLkNhdGVnb3J5REFPXCIgJT5cblxuPCVcbi8vIENoZWNrIGlmIHVzZXIgaXMgbG9nZ2VkIGluIGFuZCBpcyBhbiBhZG1pblxuT2JqZWN0IHVzZXJPYmogPSBzZXNzaW9uLmdldEF0dHJpYnV0ZShcInVzZXJcIik7XG5pZiAodXNlck9iaiA9PSBudWxsKSB7XG4gICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL0xvZ2luU2VydmxldFwiKTtcbiAgICByZXR1cm47XG59XG5cblVzZXIgdXNlciA9IChVc2VyKSB1c2VyT2JqO1xuaWYgKCF1c2VyLmlzQWRtaW4oKSkge1xuICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9Mb2dpblNlcnZsZXRcIik7XG4gICAgcmV0dXJuO1xufVxuLi4uXG4gICAgPC9zdHlsZT5cbjwvaGVhZD5cbjxib2R5PlxuICAgIDxkaXYgY2xhc3M9XCJkYXNoYm9hcmQtY29udGFpbmVyXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJzaWRlYmFyXCIgaWQ9XCJzaWRlYmFyXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwic2lkZWJhci1oZWFkZXJcIj5cbiAgICAgICAgICAgICAgICA8YSBocmVmPVwiPCU9IHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSAlPi9pbmRleC5qc3BcIiBjbGFzcz1cImxvZ29cIj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJsb2dvLWljb25cIj48aSBjbGFzcz1cImZhcyBmYS10c2hpcnRcIj48L2k+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImxvZ28tdGV4dFwiPkNMT1RIRUU8L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ1c2VyLWluZm9cIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInVzZXItYXZhdGFyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImZhcyBmYS11c2VyLXNoaWVsZFwiPjwvaT5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ1c2VyLWRldGFpbHNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxoND48JT0gdXNlci5nZXRGaXJzdE5hbWUoKSAlPjwvaDQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cD5BZG1pbmlzdHJhdG9yPC9wPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwic2lkZWJhci1tZW51XCI+XG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cIjwlPSByZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgJT4vYWRtaW4vZGFzaGJvYXJkLmpzcFwiIGNsYXNzPVwibWVudS1pdGVtXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibWVudS1pY29uXCI+PGkgY2xhc3M9XCJmYXMgZmEtdGFjaG9tZXRlci1hbHRcIj48L2k+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICBEYXNoYm9hcmRcbiAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cIjwlPSByZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgJT4vYWRtaW4vcHJvZHVjdHMuanNwXCIgY2xhc3M9XCJtZW51LWl0ZW1cIj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJtZW51LWljb25cIj48aSBjbGFzcz1cImZhcyBmYS1ib3hcIj48L2k+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICBQcm9kdWN0c1xuICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICA8YSBocmVmPVwiPCU9IHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSAlPi9hZG1pbi9jYXRlZ29yaWVzLmpzcFwiIGNsYXNzPVwibWVudS1pdGVtIGFjdGl2ZVwiPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm1lbnUtaWNvblwiPjxpIGNsYXNzPVwiZmFzIGZhLXRhZ3NcIj48L2k+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICBDYXRlZ29yaWVzXG4gICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgIDxhIGhyZWY9XCI8JT0gcmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICU+L2FkbWluL29yZGVycy5qc3BcIiBjbGFzcz1cIm1lbnUtaXRlbVwiPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm1lbnUtaWNvblwiPjxpIGNsYXNzPVwiZmFzIGZhLXNob3BwaW5nLWJhZ1wiPjwvaT48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIE9yZGVyc1xuICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICA8YSBocmVmPVwiPCU9IHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSAlPi9hZG1pbi9jdXN0b21lcnMuanNwXCIgY2xhc3M9XCJtZW51LWl0ZW1cIj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJtZW51LWljb25cIj48aSBjbGFzcz1cImZhcyBmYS11c2Vyc1wiPjwvaT48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIEN1c3RvbWVyc1xuICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICA8YSBocmVmPVwiPCU9IHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSAlPi9hZG1pbi9yZXZpZXdzLmpzcFwiIGNsYXNzPVwibWVudS1pdGVtXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibWVudS1pY29uXCI+PGkgY2xhc3M9XCJmYXMgZmEtc3RhclwiPjwvaT48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIFJldmlld3NcbiAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cIjwlPSByZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgJT4vYWRtaW4vbWVzc2FnZXMuanNwXCIgY2xhc3M9XCJtZW51LWl0ZW1cIj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJtZW51LWljb25cIj48aSBjbGFzcz1cImZhcyBmYS1lbnZlbG9wZVwiPjwvaT48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIE1lc3NhZ2VzXG4gICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgIDxhIGhyZWY9XCI8JT0gcmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICU+L2FkbWluL3NldHRpbmdzLmpzcFwiIGNsYXNzPVwibWVudS1pdGVtXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibWVudS1pY29uXCI+PGkgY2xhc3M9XCJmYXMgZmEtY29nXCI+PC9pPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgU2V0dGluZ3NcbiAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cIjwlPSByZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgJT4vTG9nb3V0U2VydmxldFwiIGNsYXNzPVwibWVudS1pdGVtXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibWVudS1pY29uXCI+PGkgY2xhc3M9XCJmYXMgZmEtc2lnbi1vdXQtYWx0XCI+PC9pPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgTG9nb3V0XG4gICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxkaXYgY2xhc3M9XCJtYWluLWNvbnRlbnRcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJoZWFkZXJcIj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPVwic2lkZWJhclRvZ2dsZVwiIGNsYXNzPVwic2lkZWJhci10b2dnbGVcIj5cbiAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYXMgZmEtYmFyc1wiPjwvaT5cbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cblxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJoZWFkZXItYWN0aW9uc1wiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic2VhcmNoLWJveFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgcGxhY2Vob2xkZXI9XCJTZWFyY2guLi5cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24+PGkgY2xhc3M9XCJmYXMgZmEtc2VhcmNoXCI+PC9pPjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibm90aWZpY2F0aW9uc1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cIm5vdGlmaWNhdGlvbi1idG5cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImZhcyBmYS1iZWxsXCI+PC9pPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiYmFkZ2VcIj4zPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250ZW50XCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRlbnQtaGVhZGVyXCI+XG4gICAgICAgICAgICAgICAgICAgIDxoMT5VcGxvYWQgQ2F0ZWdvcnkgSW1hZ2U8L2gxPlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYnRuLWJhY2tcIiBvbmNsaWNrPVwibG9jYXRpb24uaHJlZj0nPCU9IHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSAlPi9hZG1pbi9lZGl0LWNhdGVnb3J5LmpzcD9pZD08JT0gY2F0ZWdvcnkuZ2V0SWQoKSAlPidcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwiZmFzIGZhLWFycm93LWxlZnRcIj48L2k+IEJhY2sgdG8gRWRpdCBDYXRlZ29yeVxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbi4uLlxuXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tY29udGFpbmVyXCI+XG4gICAgICAgICAgICAgICAgICAgIDxmb3JtIGFjdGlvbj1cIjwlPSByZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgJT4vQ2F0ZWdvcnlJbWFnZVNlcnZsZXRcIiBtZXRob2Q9XCJwb3N0XCIgZW5jdHlwZT1cIm11bHRpcGFydC9mb3JtLWRhdGFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cImNhdGVnb3J5SWRcIiB2YWx1ZT1cIjwlPSBjYXRlZ29yeS5nZXRJZCgpICU+XCI+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cImNhdGVnb3J5SW1hZ2VcIiBjbGFzcz1cImZvcm0tbGFiZWxcIj5TZWxlY3QgSW1hZ2U8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiZmlsZVwiIGlkPVwiY2F0ZWdvcnlJbWFnZVwiIG5hbWU9XCJjYXRlZ29yeUltYWdlXCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBhY2NlcHQ9XCJpbWFnZS8qXCIgcmVxdWlyZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0taGludFwiPlJlY29tbWVuZGVkIHNpemU6IDgwMHg2MDAgcGl4ZWxzLiBNYXggZmlsZSBzaXplOiAxME1CLjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4uLi5cblBhdGg6IENsb3RoZWUvc3JjL21haW4vd2ViYXBwL2FkbWluL2VkaXQtY2F0ZWdvcnkuanNwXG4uLi5cblxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgICAgICAgICA8IS0tIENhdGVnb3J5IEltYWdlIFNlY3Rpb24gLS0+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXRlZ29yeS1pbWFnZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGgzPkNhdGVnb3J5IEltYWdlPC9oMz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwlIGlmIChjYXRlZ29yeS5nZXRJbWFnZVVybCgpICE9IG51bGwgJiYgIWNhdGVnb3J5LmdldEltYWdlVXJsKCkuaXNFbXB0eSgpKSB7ICU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCI8JT0gcmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICU+LzwlPSBjYXRlZ29yeS5nZXRJbWFnZVVybCgpICU+XCIgYWx0PVwiPCU9IGNhdGVnb3J5LmdldE5hbWUoKSAlPlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPCUgfSBlbHNlIHsgJT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibm8taW1hZ2VcIj5ObyBpbWFnZSB1cGxvYWRlZDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPCUgfSAlPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImltYWdlLWFjdGlvbnNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwidXBsb2FkLWNhdGVnb3J5LWltYWdlLmpzcD9pZD08JT0gY2F0ZWdvcnkuZ2V0SWQoKSAlPlwiIGNsYXNzPVwiYnRuLXN1Ym1pdFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImZhcyBmYS11cGxvYWRcIj48L2k+IDwlPSBjYXRlZ29yeS5nZXRJbWFnZVVybCgpICE9IG51bGwgJiYgIWNhdGVnb3J5LmdldEltYWdlVXJsKCkuaXNFbXB0eSgpID8gXCJDaGFuZ2UgSW1hZ2VcIiA6IFwiVXBsb2FkIEltYWdlXCIgJT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPCUgaWYgKGNhdGVnb3J5LmdldEltYWdlVXJsKCkgIT0gbnVsbCAmJiAhY2F0ZWdvcnkuZ2V0SW1hZ2VVcmwoKS5pc0VtcHR5KCkpIHsgJT5cbi4uLlxuUGF0aDogc3JjL21haW4vd2ViYXBwL2FkbWluL3VwbG9hZC1jYXRlZ29yeS1pbWFnZS5qc3Bcbi4uLlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm1lbnUtaWNvblwiPjxpIGNsYXNzPVwiZmFzIGZhLXVzZXJzXCI+PC9pPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgQ3VzdG9tZXJzXG4gICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgIDxhIGhyZWY9XCI8JT0gcmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICU+L2FkbWluL3Jldmlld3MuanNwXCIgY2xhc3M9XCJtZW51LWl0ZW1cIj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJtZW51LWljb25cIj48aSBjbGFzcz1cImZhcyBmYS1zdGFyXCI+PC9pPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgUmV2aWV3c1xuICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICA8YSBocmVmPVwiPCU9IHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSAlPi9hZG1pbi9tZXNzYWdlcy5qc3BcIiBjbGFzcz1cIm1lbnUtaXRlbVwiPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm1lbnUtaWNvblwiPjxpIGNsYXNzPVwiZmFzIGZhLWVudmVsb3BlXCI+PC9pPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgTWVzc2FnZXNcbiAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cIjwlPSByZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgJT4vYWRtaW4vc2V0dGluZ3MuanNwXCIgY2xhc3M9XCJtZW51LWl0ZW1cIj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJtZW51LWljb25cIj48aSBjbGFzcz1cImZhcyBmYS1jb2dcIj48L2k+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICBTZXR0aW5nc1xuICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICA8YSBocmVmPVwiPCU9IHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSAlPi9Mb2dvdXRTZXJ2bGV0XCIgY2xhc3M9XCJtZW51LWl0ZW1cIj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJtZW51LWljb25cIj48aSBjbGFzcz1cImZhcyBmYS1zaWduLW91dC1hbHRcIj48L2k+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICBMb2dvdXRcbiAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4uLi5cblxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgICAgICAgICA8Zm9ybSBhY3Rpb249XCI8JT0gcmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICU+L0NhdGVnb3J5SW1hZ2VTZXJ2bGV0XCIgbWV0aG9kPVwicG9zdFwiIGVuY3R5cGU9XCJtdWx0aXBhcnQvZm9ybS1kYXRhXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImhpZGRlblwiIG5hbWU9XCJjYXRlZ29yeUlkXCIgdmFsdWU9XCI8JT0gY2F0ZWdvcnkuZ2V0SWQoKSAlPlwiPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJjYXRlZ29yeUltYWdlXCIgY2xhc3M9XCJmb3JtLWxhYmVsXCI+U2VsZWN0IEltYWdlPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImZpbGVcIiBpZD1cImNhdGVnb3J5SW1hZ2VcIiBuYW1lPVwiY2F0ZWdvcnlJbWFnZVwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgYWNjZXB0PVwiaW1hZ2UvKlwiIHJlcXVpcmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWhpbnRcIj5SZWNvbW1lbmRlZCBzaXplOiA4MDB4NjAwIHBpeGVscy4gTWF4IGZpbGUgc2l6ZTogMTBNQi48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuLi4uXG5QYXRoOiBDbG90aGVlL3NyYy9tYWluL3dlYmFwcC9hZG1pbi9jYXRlZ29yaWVzLmpzcFxuLi4uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY2F0ZWdvcnktZGF0ZVwiPjxpIGNsYXNzPVwiZmFzIGZhLWNhbGVuZGFyLWFsdFwiPjwvaT4gPCU9IGNhdGVnb3J5LmdldENyZWF0ZWRBdCgpICE9IG51bGwgPyBkYXRlRm9ybWF0LmZvcm1hdChjYXRlZ29yeS5nZXRDcmVhdGVkQXQoKSkgOiBcIk4vQVwiICU+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXRlZ29yeS1hY3Rpb25zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCI8JT0gcmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICU+L0NhdGVnb3J5U2VydmxldD9hY3Rpb249dmlldyZpZD08JT0gY2F0ZWdvcnkuZ2V0SWQoKSAlPlwiIGNsYXNzPVwiYnRuLXZpZXdcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwiZmFzIGZhLWV5ZVwiPjwvaT4gVmlld1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCI8JT0gcmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICU+L0NhdGVnb3J5U2VydmxldD9hY3Rpb249c2hvd0VkaXQmaWQ9PCU9IGNhdGVnb3J5LmdldElkKCkgJT5cIiBjbGFzcz1cImJ0bi1lZGl0XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImZhcyBmYS1lZGl0XCI+PC9pPiBFZGl0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIjwlPSByZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgJT4vYWRtaW4vdXBsb2FkLWNhdGVnb3J5LWltYWdlLmpzcD9pZD08JT0gY2F0ZWdvcnkuZ2V0SWQoKSAlPlwiIGNsYXNzPVwiYnRuLXVwbG9hZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYXMgZmEtaW1hZ2VcIj48L2k+IEltYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cbi4uLlxuUGF0aDogQ2xvdGhlZS9zcmMvbWFpbi9qYXZhL2NvbnRyb2xsZXIvQ2F0ZWdvcnlJbWFnZVNlcnZsZXQuamF2YVxuLi4uXG5cbiAgICAgICAgICAgIFN0cmluZyBmaWxlRXh0ZW5zaW9uID0gZmlsZU5hbWUuc3Vic3RyaW5nKGZpbGVOYW1lLmxhc3RJbmRleE9mKFwiLlwiKSk7XG4gICAgICAgICAgICBTdHJpbmcgbmV3RmlsZU5hbWUgPSBcImNhdGVnb3J5X1wiICsgY2F0ZWdvcnlJZCArIGZpbGVFeHRlbnNpb247XG5cbiAgICAgICAgICAgIC8vIFNhdmUgdGhlIGZpbGUgdG8gYSBwZXJtYW5lbnQgbG9jYXRpb25cbiAgICAgICAgICAgIFN0cmluZyByZWxhdGl2ZVBhdGggPSBcImltYWdlcy9jYXRlZ29yaWVzXCI7XG5cbiAgICAgICAgICAgIC8vIEdldCB0aGUgcmVhbCBwYXRoIHRvIHRoZSB3ZWIgYXBwbGljYXRpb24gcm9vdCBkaXJlY3RvcnlcbiAgICAgICAgICAgIFN0cmluZyB3ZWJhcHBSb290ID0gcmVxdWVzdC5nZXRTZXJ2bGV0Q29udGV4dCgpLmdldFJlYWxQYXRoKFwiL1wiKTtcblxuICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBkZXBsb3ltZW50IGRpcmVjdG9yeSBwYXRoXG4gICAgICAgICAgICBTdHJpbmcgZGVwbG95bWVudFBhdGggPSB3ZWJhcHBSb290ICsgcmVsYXRpdmVQYXRoO1xuXG4gICAgICAgICAgICAvLyBFbnN1cmUgZGVwbG95bWVudCBkaXJlY3RvcnkgZXhpc3RzXG4gICAgICAgICAgICBGaWxlIGRlcGxveW1lbnREaXIgPSBuZXcgRmlsZShkZXBsb3ltZW50UGF0aCk7XG4gICAgICAgICAgICBpZiAoIWRlcGxveW1lbnREaXIuZXhpc3RzKCkpIHtcbiAgICAgICAgICAgICAgICBib29sZWFuIGNyZWF0ZWQgPSBkZXBsb3ltZW50RGlyLm1rZGlycygpO1xuICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNhdGVnb3J5SW1hZ2VTZXJ2bGV0IC0gQ3JlYXRlZCBkZXBsb3ltZW50IGRpcmVjdG9yeTogXCIgKyBjcmVhdGVkKTtcbiAgICAgICAgICAgIH1cbi4uLlxuXG4gICAgICAgICAgICAvLyBVcGRhdGUgY2F0ZWdvcnkgaW1hZ2UgVVJMIGluIGRhdGFiYXNlXG4gICAgICAgICAgICBTdHJpbmcgaW1hZ2VVcmwgPSByZWxhdGl2ZVBhdGggKyBcIi9cIiArIG5ld0ZpbGVOYW1lO1xuICAgICAgICAgICAgYm9vbGVhbiBzdWNjZXNzID0gY2F0ZWdvcnlEQU8udXBkYXRlQ2F0ZWdvcnlJbWFnZShjYXRlZ29yeUlkLCBpbWFnZVVybCk7XG5cbiAgICAgICAgICAgIGlmIChzdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL2FkbWluL2NhdGVnb3JpZXMuanNwP3N1Y2Nlc3M9dHJ1ZSZtZXNzYWdlPUNhdGVnb3J5K2ltYWdlK3VwZGF0ZWQrc3VjY2Vzc2Z1bGx5XCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvYWRtaW4vY2F0ZWdvcmllcy5qc3A/ZXJyb3I9dHJ1ZSZtZXNzYWdlPUZhaWxlZCt0byt1cGRhdGUrY2F0ZWdvcnkraW1hZ2VcIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSBjYXRjaCAoTnVtYmVyRm9ybWF0RXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9hZG1pbi9jYXRlZ29yaWVzLmpzcD9lcnJvcj10cnVlJm1lc3NhZ2U9SW52YWxpZCtjYXRlZ29yeStJRFwiKTtcbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9hZG1pbi9jYXRlZ29yaWVzLmpzcD9lcnJvcj10cnVlJm1lc3NhZ2U9RXJyb3IrdXBsb2FkaW5nK2ltYWdlOitcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgfVxuICAgIH1cbi4uLlxuUGF0aDogQ2xvdGhlZS9zcmMvbWFpbi93ZWJhcHAvYWRtaW4vc2ltcGxlLWFkZC1jYXRlZ29yeS5qc3BcbjwlQCBwYWdlIGxhbmd1YWdlPVwiamF2YVwiIGNvbnRlbnRUeXBlPVwidGV4dC9odG1sOyBjaGFyc2V0PVVURi04XCIgcGFnZUVuY29kaW5nPVwiVVRGLThcIiU+XG48JUAgcGFnZSBpbXBvcnQ9XCJtb2RlbC5Vc2VyXCIgJT5cblxuPCVcbi8vIENoZWNrIGlmIHVzZXIgaXMgbG9nZ2VkIGluIGFuZCBpcyBhbiBhZG1pblxuT2JqZWN0IHVzZXJPYmogPSBzZXNzaW9uLmdldEF0dHJpYnV0ZShcInVzZXJcIik7XG5pZiAodXNlck9iaiA9PSBudWxsKSB7XG4gICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL0xvZ2luU2VydmxldFwiKTtcbiAgICByZXR1cm47XG59XG5cblVzZXIgdXNlciA9IChVc2VyKSB1c2VyT2JqO1xuaWYgKCF1c2VyLmlzQWRtaW4oKSkge1xuICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9Mb2dpblNlcnZsZXRcIik7XG4gICAgcmV0dXJuO1xufVxuLi4uXG5cbjwhRE9DVFlQRSBodG1sPlxuPGh0bWwgbGFuZz1cImVuXCI+XG48aGVhZD5cbiAgICA8bWV0YSBjaGFyc2V0PVwiVVRGLThcIj5cbiAgICA8bWV0YSBuYW1lPVwidmlld3BvcnRcIiBjb250ZW50PVwid2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMFwiPlxuICAgIDx0aXRsZT5BZGQgTmV3IENhdGVnb3J5PC90aXRsZT5cbiAgICA8c3R5bGU+XG4gICAgICAgICoge1xuICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICAgICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgICAgIHBhZGRpbmc6IDA7XG4gICAgICAgICAgICBmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGJvZHkge1xuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2Y1ZjVmNTtcbiAgICAgICAgICAgIGNvbG9yOiAjMzMzO1xuICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNjtcbiAgICAgICAgICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC5jb250YWluZXIge1xuICAgICAgICAgICAgbWF4LXdpZHRoOiA4MDBweDtcbiAgICAgICAgICAgIG1hcmdpbjogMCBhdXRvO1xuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMnB4IDEwcHggcmdiYSgwLCAwLCAwLCAwLjEpO1xuICAgICAgICAgICAgcGFkZGluZzogMzBweDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaDEge1xuICAgICAgICAgICAgZm9udC1zaXplOiAyNHB4O1xuICAgICAgICAgICAgY29sb3I6ICMzMzM7XG4gICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAuZm9ybS1ncm91cCB7XG4gICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBsYWJlbCB7XG4gICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDhweDtcbiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgICAgICBjb2xvcjogIzMzMztcbiAgICAgICAgfVxuLi4uXG4gICAgICAgIFxuICAgICAgICA8Zm9ybSBhY3Rpb249XCI8JT0gcmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICU+L2FkbWluL0FkbWluQ2F0ZWdvcnlTZXJ2bGV0XCIgbWV0aG9kPVwicG9zdFwiPlxuICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJoaWRkZW5cIiBuYW1lPVwiYWN0aW9uXCIgdmFsdWU9XCJhZGRcIj5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwibmFtZVwiPkNhdGVnb3J5IE5hbWU8L2xhYmVsPlxuICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGlkPVwibmFtZVwiIG5hbWU9XCJuYW1lXCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiB2YWx1ZT1cIjwlPSBjYXRlZ29yeU5hbWUgJT5cIiByZXF1aXJlZD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cFwiPlxuICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJkZXNjcmlwdGlvblwiPkRlc2NyaXB0aW9uPC9sYWJlbD5cbiAgICAgICAgICAgICAgICA8dGV4dGFyZWEgaWQ9XCJkZXNjcmlwdGlvblwiIG5hbWU9XCJkZXNjcmlwdGlvblwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCI+PCU9IGNhdGVnb3J5RGVzY3JpcHRpb24gJT48L3RleHRhcmVhPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWFjdGlvbnNcIj5cbiAgICAgICAgICAgICAgICA8YSBocmVmPVwiPCU9IHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSAlPi9hZG1pbi9jYXRlZ29yaWVzLmpzcFwiIGNsYXNzPVwiYnRuLWNhbmNlbFwiPkNhbmNlbDwvYT5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIiBjbGFzcz1cImJ0bi1zdWJtaXRcIj5BZGQgQ2F0ZWdvcnk8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Zvcm0+XG4uLi5cblBhdGg6IENsb3RoZWUvc3JjL21haW4vd2ViYXBwL2FkbWluL3ZpZXctY2F0ZWdvcnkuanNwXG48JUAgcGFnZSBsYW5ndWFnZT1cImphdmFcIiBjb250ZW50VHlwZT1cInRleHQvaHRtbDsgY2hhcnNldD1VVEYtOFwiIHBhZ2VFbmNvZGluZz1cIlVURi04XCIlPlxuPCVAIHBhZ2UgaW1wb3J0PVwiamF2YS51dGlsLkxpc3RcIiAlPlxuPCVAIHBhZ2UgaW1wb3J0PVwibW9kZWwuVXNlclwiICU+XG48JUAgcGFnZSBpbXBvcnQ9XCJtb2RlbC5DYXRlZ29yeVwiICU+XG48JUAgcGFnZSBpbXBvcnQ9XCJtb2RlbC5Qcm9kdWN0XCIgJT5cbjwlQCBwYWdlIGltcG9ydD1cImphdmEudGV4dC5TaW1wbGVEYXRlRm9ybWF0XCIgJT5cblxuPCVcbi8vIENoZWNrIGlmIHVzZXIgaXMgbG9nZ2VkIGluIGFuZCBpcyBhbiBhZG1pblxuT2JqZWN0IHVzZXJPYmogPSBzZXNzaW9uLmdldEF0dHJpYnV0ZShcInVzZXJcIik7XG5pZiAodXNlck9iaiA9PSBudWxsKSB7XG4gICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL0xvZ2luU2VydmxldFwiKTtcbiAgICByZXR1cm47XG59XG5cblVzZXIgdXNlciA9IChVc2VyKSB1c2VyT2JqO1xuaWYgKCF1c2VyLmlzQWRtaW4oKSkge1xuICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9Mb2dpblNlcnZsZXRcIik7XG4gICAgcmV0dXJuO1xufVxuLi4uXG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250ZW50XCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRlbnQtaGVhZGVyXCI+XG4gICAgICAgICAgICAgICAgICAgIDxoMT5DYXRlZ29yeSBEZXRhaWxzOiA8JT0gY2F0ZWdvcnkuZ2V0TmFtZSgpICU+PC9oMT5cbiAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidG4tZWRpdFwiIG9uY2xpY2s9XCJsb2NhdGlvbi5ocmVmPScuLi9hZG1pbi9DYXRlZ29yeVNlcnZsZXQ/YWN0aW9uPWVkaXQmaWQ9PCU9IGNhdGVnb3J5LmdldElkKCkgJT4nXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYXMgZmEtZWRpdFwiPjwvaT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ0bi1iYWNrXCIgb25jbGljaz1cImxvY2F0aW9uLmhyZWY9J2NhdGVnb3JpZXMuanNwJ1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwiZmFzIGZhLWFycm93LWxlZnRcIj48L2k+IEJhY2sgdG8gQ2F0ZWdvcmllc1xuICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbnRyb2xsZXIvQ2F0ZWdvcnlJbWFnZVNlcnZsZXQuamF2YVxuLi4uXG5cbiAgICAgICAgICAgIC8vIFByb2Nlc3MgdGhlIHVwbG9hZGVkIGZpbGVcbiAgICAgICAgICAgIFN0cmluZyBmaWxlTmFtZSA9IGdldFN1Ym1pdHRlZEZpbGVOYW1lKGZpbGVQYXJ0KTtcbiAgICAgICAgICAgIGlmIChmaWxlTmFtZSA9PSBudWxsIHx8IGZpbGVOYW1lLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9hZG1pbi9jYXRlZ29yaWVzLmpzcD9lcnJvcj10cnVlJm1lc3NhZ2U9SW52YWxpZCtmaWxlK25hbWVcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBTdHJpbmcgZmlsZUV4dGVuc2lvbiA9IGZpbGVOYW1lLnN1YnN0cmluZyhmaWxlTmFtZS5sYXN0SW5kZXhPZihcIi5cIikpO1xuICAgICAgICAgICAgU3RyaW5nIG5ld0ZpbGVOYW1lID0gXCJjYXRlZ29yeV9cIiArIGNhdGVnb3J5SWQgKyBmaWxlRXh0ZW5zaW9uO1xuXG4gICAgICAgICAgICAvLyBTYXZlIHRoZSBmaWxlIHRvIHRoZSBzZXJ2ZXJcbiAgICAgICAgICAgIFN0cmluZyByZWxhdGl2ZVBhdGggPSBcImltYWdlcy9jYXRlZ29yaWVzXCI7XG4gICAgICAgICAgICBTdHJpbmcgdXBsb2FkUGF0aCA9IHJlcXVlc3QuZ2V0U2VydmxldENvbnRleHQoKS5nZXRSZWFsUGF0aChcIi9cIikgKyByZWxhdGl2ZVBhdGggKyBcIi9cIjtcblxuICAgICAgICAgICAgRmlsZSB1cGxvYWREaXIgPSBuZXcgRmlsZSh1cGxvYWRQYXRoKTtcbiAgICAgICAgICAgIGlmICghdXBsb2FkRGlyLmV4aXN0cygpKSB7XG4gICAgICAgICAgICAgICAgdXBsb2FkRGlyLm1rZGlycygpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmaWxlUGFydC53cml0ZSh1cGxvYWRQYXRoICsgbmV3RmlsZU5hbWUpO1xuXG4gICAgICAgICAgICAvLyBVcGRhdGUgY2F0ZWdvcnkgaW1hZ2UgVVJMIGluIGRhdGFiYXNlXG4gICAgICAgICAgICBTdHJpbmcgaW1hZ2VVcmwgPSByZWxhdGl2ZVBhdGggKyBcIi9cIiArIG5ld0ZpbGVOYW1lO1xuICAgICAgICAgICAgYm9vbGVhbiBzdWNjZXNzID0gY2F0ZWdvcnlEQU8udXBkYXRlQ2F0ZWdvcnlJbWFnZShjYXRlZ29yeUlkLCBpbWFnZVVybCk7XG5cbiAgICAgICAgICAgIGlmIChzdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL2FkbWluL2NhdGVnb3JpZXMuanNwP3N1Y2Nlc3M9dHJ1ZSZtZXNzYWdlPUNhdGVnb3J5K2ltYWdlK3VwZGF0ZWQrc3VjY2Vzc2Z1bGx5XCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvYWRtaW4vY2F0ZWdvcmllcy5qc3A/ZXJyb3I9dHJ1ZSZtZXNzYWdlPUZhaWxlZCt0byt1cGRhdGUrY2F0ZWdvcnkraW1hZ2VcIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSBjYXRjaCAoTnVtYmVyRm9ybWF0RXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9hZG1pbi9jYXRlZ29yaWVzLmpzcD9lcnJvcj10cnVlJm1lc3NhZ2U9SW52YWxpZCtjYXRlZ29yeStJRFwiKTtcbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9hZG1pbi9jYXRlZ29yaWVzLmpzcD9lcnJvcj10cnVlJm1lc3NhZ2U9RXJyb3IrdXBsb2FkaW5nK2ltYWdlOitcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhlbHBlciBtZXRob2QgdG8gZ2V0IHRoZSBzdWJtaXR0ZWQgZmlsZSBuYW1lIGZyb20gYSBQYXJ0XG4gICAgICovXG4gICAgcHJpdmF0ZSBTdHJpbmcgZ2V0U3VibWl0dGVkRmlsZU5hbWUoUGFydCBwYXJ0KSB7XG4gICAgICAgIGZvciAoU3RyaW5nIGNvbnRlbnQgOiBwYXJ0LmdldEhlYWRlcihcImNvbnRlbnQtZGlzcG9zaXRpb25cIikuc3BsaXQoXCI7XCIpKSB7XG4gICAgICAgICAgICBpZiAoY29udGVudC50cmltKCkuc3RhcnRzV2l0aChcImZpbGVuYW1lXCIpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQuc3Vic3RyaW5nKGNvbnRlbnQuaW5kZXhPZignPScpICsgMSkudHJpbSgpLnJlcGxhY2UoXCJcXFwiXCIsIFwiXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cbi4uLlxuUGF0aDogc3JjL21haW4vd2ViYXBwL2FkbWluL3NpbXBsZS1hZGQtY2F0ZWdvcnkuanNwXG48JUAgcGFnZSBsYW5ndWFnZT1cImphdmFcIiBjb250ZW50VHlwZT1cInRleHQvaHRtbDsgY2hhcnNldD1VVEYtOFwiIHBhZ2VFbmNvZGluZz1cIlVURi04XCIlPlxuPCVAIHBhZ2UgaW1wb3J0PVwibW9kZWwuVXNlclwiICU+XG5cbjwlXG4vLyBDaGVjayBpZiB1c2VyIGlzIGxvZ2dlZCBpbiBhbmQgaXMgYW4gYWRtaW5cbk9iamVjdCB1c2VyT2JqID0gc2Vzc2lvbi5nZXRBdHRyaWJ1dGUoXCJ1c2VyXCIpO1xuaWYgKHVzZXJPYmogPT0gbnVsbCkge1xuICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9Mb2dpblNlcnZsZXRcIik7XG4gICAgcmV0dXJuO1xufVxuXG5Vc2VyIHVzZXIgPSAoVXNlcikgdXNlck9iajtcbmlmICghdXNlci5pc0FkbWluKCkpIHtcbiAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvTG9naW5TZXJ2bGV0XCIpO1xuICAgIHJldHVybjtcbn1cbi4uLlxuICAgICAgICBcbiAgICAgICAgPGZvcm0gYWN0aW9uPVwiPCU9IHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSAlPi9hZG1pbi9BZG1pbkNhdGVnb3J5U2VydmxldFwiIG1ldGhvZD1cInBvc3RcIj5cbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cImFjdGlvblwiIHZhbHVlPVwiYWRkXCI+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwXCI+XG4gICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cIm5hbWVcIj5DYXRlZ29yeSBOYW1lPC9sYWJlbD5cbiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBpZD1cIm5hbWVcIiBuYW1lPVwibmFtZVwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgdmFsdWU9XCI8JT0gY2F0ZWdvcnlOYW1lICU+XCIgcmVxdWlyZWQ+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiZGVzY3JpcHRpb25cIj5EZXNjcmlwdGlvbjwvbGFiZWw+XG4gICAgICAgICAgICAgICAgPHRleHRhcmVhIGlkPVwiZGVzY3JpcHRpb25cIiBuYW1lPVwiZGVzY3JpcHRpb25cIiBjbGFzcz1cImZvcm0tY29udHJvbFwiPjwlPSBjYXRlZ29yeURlc2NyaXB0aW9uICU+PC90ZXh0YXJlYT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1hY3Rpb25zXCI+XG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cIjwlPSByZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgJT4vYWRtaW4vY2F0ZWdvcmllcy5qc3BcIiBjbGFzcz1cImJ0bi1jYW5jZWxcIj5DYW5jZWw8L2E+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwic3VibWl0XCIgY2xhc3M9XCJidG4tc3VibWl0XCI+QWRkIENhdGVnb3J5PC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9mb3JtPlxuLi4uXG5QYXRoOiBzcmMvbWFpbi93ZWJhcHAvYWRtaW4vdmlldy1jYXRlZ29yeS5qc3Bcbi4uLlxuXG4vLyBHZXQgY2F0ZWdvcnkgZnJvbSByZXF1ZXN0IGF0dHJpYnV0ZVxuQ2F0ZWdvcnkgY2F0ZWdvcnkgPSAoQ2F0ZWdvcnkpIHJlcXVlc3QuZ2V0QXR0cmlidXRlKFwiY2F0ZWdvcnlcIik7XG5pZiAoY2F0ZWdvcnkgPT0gbnVsbCkge1xuICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9hZG1pbi9jYXRlZ29yaWVzLmpzcD9lcnJvcj1DYXRlZ29yeStub3QrZm91bmRcIik7XG4gICAgcmV0dXJuO1xufVxuXG4vLyBHZXQgcHJvZHVjdHMgaW4gdGhpcyBjYXRlZ29yeVxuTGlzdDxQcm9kdWN0PiBwcm9kdWN0cyA9IChMaXN0PFByb2R1Y3Q+KSByZXF1ZXN0LmdldEF0dHJpYnV0ZShcInByb2R1Y3RzXCIpO1xuXG4vLyBGb3JtYXQgZGF0ZVxuU2ltcGxlRGF0ZUZvcm1hdCBkYXRlRm9ybWF0ID0gbmV3IFNpbXBsZURhdGVGb3JtYXQoXCJNTU0gZGQsIHl5eXlcIik7XG4lPlxuLi4uXG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250ZW50XCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRlbnQtaGVhZGVyXCI+XG4gICAgICAgICAgICAgICAgICAgIDxoMT5DYXRlZ29yeSBEZXRhaWxzOiA8JT0gY2F0ZWdvcnkuZ2V0TmFtZSgpICU+PC9oMT5cbiAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidG4tZWRpdFwiIG9uY2xpY2s9XCJsb2NhdGlvbi5ocmVmPScuLi9hZG1pbi9DYXRlZ29yeVNlcnZsZXQ/YWN0aW9uPWVkaXQmaWQ9PCU9IGNhdGVnb3J5LmdldElkKCkgJT4nXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYXMgZmEtZWRpdFwiPjwvaT4gRWRpdCBDYXRlZ29yeVxuICAgICAgIC4uLiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMUN4c251czhEZE1BODYzTGZZZjZ5RGkifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJDOi9Vc2Vycy9VU0VSL011c2ljL2Nsb3RoZWUgZmluYWwvaHkvQ2xvdGhlZSIsImZvbGRlclJvb3QiOiJDOi9Vc2Vycy9VU0VSL011c2ljL2Nsb3RoZWUgZmluYWwvaHkvQ2xvdGhlZSJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMDhUMDk6MjM6NDAuMjg3WiIsInJlc3BvbnNlX3RleHQiOiJCYXNlZCBvbiBteSBpbnZlc3RpZ2F0aW9uLCBJIGNhbiBub3cgaWRlbnRpZnkgdGhlIGlzc3VlIHdpdGggdGhlIGNhdGVnb3J5IGltYWdlcyBub3Qgc2hvd2luZyBvbiB0aGUgaG9tZSBwYWdlLiBMZXQgbWUgZXhwbGFpbiB0aGUgcHJvYmxlbSBhbmQgcHJvdmlkZSBhIHNvbHV0aW9uOlxuXG4jIyBUaGUgSXNzdWVcblxuVGhlIFwiU2hvcCBieSBDYXRlZ29yeVwiIHNlY3Rpb24gb24gdGhlIGhvbWUgcGFnZSBpcyBub3QgZGlzcGxheWluZyBpbWFnZXMgYmVjYXVzZTpcblxuMS4gVGhlIGNhdGVnb3J5IGltYWdlcyBhcmUgc3VwcG9zZWQgdG8gYmUgc3RvcmVkIGluIHRoZSBgaW1hZ2VzL2NhdGVnb3JpZXNgIGRpcmVjdG9yeSwgYnV0IHRoaXMgZGlyZWN0b3J5IG1pZ2h0IG5vdCBleGlzdCBvciB0aGUgaW1hZ2VzIGhhdmVuJ3QgYmVlbiB1cGxvYWRlZC5cblxuMi4gVGhlIGNvZGUgaW4gYGluZGV4LmpzcGAgaXMgY29ycmVjdGx5IHNldCB1cCB0byBkaXNwbGF5IGVpdGhlcjpcbiAgIC0gVGhlIGNhdGVnb3J5IGltYWdlIGZyb20gdGhlIGRhdGFiYXNlIGlmIGl0IGV4aXN0c1xuICAgLSBBIGRlZmF1bHQgaW1hZ2UgaWYgbm8gaW1hZ2UgaXMgc2V0IGZvciB0aGUgY2F0ZWdvcnlcblxuMy4gVGhlIGRhdGFiYXNlIGhhcyBjYXRlZ29yaWVzIGRlZmluZWQgKE1lbiwgV29tZW4sIEtpZHMsIEFjY2Vzc29yaWVzKSwgYnV0IHRoZXkgbGlrZWx5IGRvbid0IGhhdmUgaW1hZ2UgVVJMcyBzZXQgaW4gdGhlIGBpbWFnZV91cmxgIGNvbHVtbiBvZiB0aGUgYGNhdGVnb3JpZXNgIHRhYmxlLlxuXG4jIyBTb2x1dGlvblxuXG5Zb3UgbmVlZCB0byB1cGxvYWQgaW1hZ2VzIGZvciB5b3VyIGNhdGVnb3JpZXMgdXNpbmcgdGhlIGFkbWluIGludGVyZmFjZS4gSGVyZSdzIGhvdyB0byBmaXggdGhpczpcblxuMS4gTG9nIGluIGFzIGFuIGFkbWluIHVzZXIgKGxpa2UgXCJzaXRhQGV4YW1wbGUuY29tXCIgd2l0aCBwYXNzd29yZCBcInBhc3N3b3JkNDU2XCIgYmFzZWQgb24geW91ciBTUUwgZmlsZSlcbjIuIEdvIHRvIHRoZSBhZG1pbiBjYXRlZ29yaWVzIHBhZ2VcbjMuIEZvciBlYWNoIGNhdGVnb3J5LCBjbGljayB0aGUgXCJJbWFnZVwiIGJ1dHRvbiBhbmQgdXBsb2FkIGFuIGFwcHJvcHJpYXRlIGltYWdlXG5cbklmIHlvdSBkb24ndCB3YW50IHRvIGdvIHRocm91Z2ggdGhlIGFkbWluIGludGVyZmFjZSwgeW91IGNhbiBhbHNvOlxuXG4xLiBNYWtlIHN1cmUgdGhlIGBpbWFnZXMvY2F0ZWdvcmllc2AgZGlyZWN0b3J5IGV4aXN0cyBpbiB5b3VyIHdlYmFwcFxuMi4gQWRkIGltYWdlcyBkaXJlY3RseSB0byB0aGlzIGRpcmVjdG9yeSB3aXRoIHRoZSBuYW1pbmcgY29udmVudGlvbiBgY2F0ZWdvcnlfW2lkXS5bZXh0ZW5zaW9uXWBcbjMuIFVwZGF0ZSB0aGUgZGF0YWJhc2UgdG8gc2V0IHRoZSBjb3JyZWN0IGltYWdlIFVSTHMgZm9yIGVhY2ggY2F0ZWdvcnlcblxuIyMgU3RlcC1ieS1TdGVwIEluc3RydWN0aW9uc1xuXG4xLiBMb2cgaW4gYXMgYW4gYWRtaW4gdXNlclxuMi4gTmF2aWdhdGUgdG8gdGhlIGFkbWluIHBhbmVsXG4zLiBHbyB0byB0aGUgQ2F0ZWdvcmllcyBzZWN0aW9uXG40LiBGb3IgZWFjaCBjYXRlZ29yeSAoTWVuLCBXb21lbiwgS2lkcywgQWNjZXNzb3JpZXMpOlxuICAgLSBDbGljayB0aGUgXCJJbWFnZVwiIGJ1dHRvblxuICAgLSBVcGxvYWQgYW4gYXBwcm9wcmlhdGUgaW1hZ2VcbiAgIC0gU2F2ZSB0aGUgY2hhbmdlc1xuXG5UaGlzIHdpbGwgdXBkYXRlIHRoZSBgaW1hZ2VfdXJsYCBjb2x1bW4gaW4gdGhlIGBjYXRlZ29yaWVzYCB0YWJsZSwgYW5kIHRoZSBpbWFnZXMgd2lsbCB0aGVuIGFwcGVhciBvbiB0aGUgaG9tZSBwYWdlIGluIHRoZSBcIlNob3AgYnkgQ2F0ZWdvcnlcIiBzZWN0aW9uLlxuXG5JZiB5b3UgcHJlZmVyIGEgZGlyZWN0IGRhdGFiYXNlIGFwcHJvYWNoLCB5b3UgY2FuIGFsc28gdXBkYXRlIHRoZSBjYXRlZ29yeSBpbWFnZSBVUkxzIGRpcmVjdGx5IGluIHRoZSBkYXRhYmFzZSB3aXRoIFNRTCBjb21tYW5kcyBsaWtlOlxuXG5gYGBzcWxcblVQREFURSBjYXRlZ29yaWVzIFNFVCBpbWFnZV91cmwgPSAnaW1hZ2VzL2NhdGVnb3JpZXMvY2F0ZWdvcnlfMS5qcGcnIFdIRVJFIGlkID0gMTtcblVQREFURSBjYXRlZ29yaWVzIFNFVCBpbWFnZV91cmwgPSAnaW1hZ2VzL2NhdGVnb3JpZXMvY2F0ZWdvcnlfMi5qcGcnIFdIRVJFIGlkID0gMjtcbmBgYFxuXG5CdXQgeW91IHdvdWxkIHN0aWxsIG5lZWQgdG8gZW5zdXJlIHRoZSBhY3R1YWwgaW1hZ2UgZmlsZXMgZXhpc3QgaW4gdGhlIGNvcnJlY3QgbG9jYXRpb24uXG5cbldvdWxkIHlvdSBsaWtlIG1lIHRvIGhlbHAgeW91IHdpdGggYW55IHNwZWNpZmljIHBhcnQgb2YgdGhpcyBzb2x1dGlvbj9cbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsicmVxdWVzdF9pZCI6Ijc0NDIxOGYxLTU3ODMtNDg2YS1iNTZlLTNlMDljZGUxZjQyNCIsInN0YXR1cyI6ImNhbmNlbGxlZCIsImNoYXRJdGVtVHlwZSI6ImFnZW50aWMtdHVybi1kZWxpbWl0ZXIifSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiNDljNjY1NTAtYTY1Ny00NmUxLTgxN2QtYmZkYjk0Njg1NGIxIiwicmVxdWVzdF9tZXNzYWdlIjoid2h5IGFzIGEgYWRtaW4gaSBjYW50IHB1dCBwaG90byBhbmQgaXQgc2hvdWxkIGJlIHN0b2VkIGluIGRhdGFiYXNlIGFzIHdlbGwgYXMgd2hlbmV2ZXIgaSByZXN0YXJ0IHRoZSBzZXJ2ZXIgaXQgc2hvdWxkIGJlIHRoZXJlIiwicmljaF90ZXh0X2pzb25fcmVwciI6eyJ0eXBlIjoiZG9jIiwiY29udGVudCI6W3sidHlwZSI6InBhcmFncmFwaCIsImNvbnRlbnQiOlt7InR5cGUiOiJ0ZXh0IiwidGV4dCI6IndoeSBhcyBhIGFkbWluIGkgY2FudCBwdXQgcGhvdG8gYW5kIGl0IHNob3VsZCBiZSBzdG9lZCBpbiBkYXRhYmFzZSBhcyB3ZWxsIGFzIHdoZW5ldmVyIGkgcmVzdGFydCB0aGUgc2VydmVyIGl0IHNob3VsZCBiZSB0aGVyZSJ9XX1dfSwibWVudGlvbmVkX2l0ZW1zIjpbXSwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxUkZoRXEyZlZjNWdOakNhU1JraVZydiIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwidmlld1wiLCBcInBhdGhcIjogXCJDbG90aGVlL3NyYy9tYWluL2phdmEvY29udHJvbGxlci9DYXRlZ29yeUltYWdlU2VydmxldC5qYXZhXCJ9IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiSSB1bmRlcnN0YW5kIHlvdXIgY29uY2Vybi4gTGV0IG1lIGV4cGxhaW4gdGhlIGlzc3VlcyB3aXRoIHN0b3JpbmcgYW5kIHBlcnNpc3RpbmcgY2F0ZWdvcnkgaW1hZ2VzLCBhbmQgcHJvdmlkZSBhIHNvbHV0aW9uIHRoYXQgZW5zdXJlcyBpbWFnZXMgcmVtYWluIGF2YWlsYWJsZSBldmVuIGFmdGVyIHNlcnZlciByZXN0YXJ0cy5cblxuIyMgVGhlIEN1cnJlbnQgSXNzdWVzXG5cbkJhc2VkIG9uIG15IGFuYWx5c2lzIG9mIHlvdXIgY29kZSwgdGhlcmUgYXJlIHR3byBtYWluIHByb2JsZW1zOlxuXG4xLiAqKkltYWdlIFN0b3JhZ2UgTG9jYXRpb24qKjogVGhlIGltYWdlcyBhcmUgYmVpbmcgc2F2ZWQgdG8gYSB0ZW1wb3JhcnkgZGVwbG95bWVudCBkaXJlY3RvcnkgdGhhdCBnZXRzIHdpcGVkIHdoZW4gdGhlIHNlcnZlciByZXN0YXJ0cy5cblxuMi4gKipEYXRhYmFzZSBTdG9yYWdlKio6IFdoaWxlIHRoZSBpbWFnZSBVUkxzIGFyZSBzdG9yZWQgaW4gdGhlIGRhdGFiYXNlLCB0aGV5IHBvaW50IHRvIGZpbGVzIHRoYXQgbWlnaHQgbm90IHBlcnNpc3QgYWNyb3NzIHNlcnZlciByZXN0YXJ0cy5cblxuIyMgV2h5IEltYWdlcyBEaXNhcHBlYXIgQWZ0ZXIgU2VydmVyIFJlc3RhcnRcblxuSW4geW91ciBgQ2F0ZWdvcnlJbWFnZVNlcnZsZXQuamF2YWAsIGltYWdlcyBhcmUgYmVpbmcgc2F2ZWQgdG86XG5gYGBqYXZhXG5TdHJpbmcgdXBsb2FkUGF0aCA9IHJlcXVlc3QuZ2V0U2VydmxldENvbnRleHQoKS5nZXRSZWFsUGF0aChcIi9cIikgKyByZWxhdGl2ZVBhdGggKyBcIi9cIjtcbmBgYFxuXG5UaGUgYGdldFJlYWxQYXRoKFwiL1wiKWAgbWV0aG9kIHJldHVybnMgdGhlIHBhdGggdG8gdGhlIGRlcGxveWVkIGFwcGxpY2F0aW9uIGRpcmVjdG9yeSwgd2hpY2ggaXMgdHlwaWNhbGx5IGEgdGVtcG9yYXJ5IGxvY2F0aW9uIHRoYXQgZ2V0cyBjbGVhcmVkIHdoZW4gdGhlIHNlcnZlciByZXN0YXJ0cy4gVGhpcyBpcyB3aHkgeW91ciBpbWFnZXMgZGlzYXBwZWFyLlxuXG4jIyBTb2x1dGlvbjogUGVybWFuZW50IEltYWdlIFN0b3JhZ2VcblxuWW91ciBjb2RlIGFjdHVhbGx5IGhhcyBhIHNvbHV0aW9uIGZvciB0aGlzIGFscmVhZHksIGJ1dCBpdCBtaWdodCBub3QgYmUgcHJvcGVybHkgaW1wbGVtZW50ZWQuIFRoZSBgZ2V0UGVybWFuZW50UGF0aCgpYCBtZXRob2QgaW4gYENhdGVnb3J5SW1hZ2VTZXJ2bGV0LmphdmFgIGF0dGVtcHRzIHRvIHN0b3JlIGltYWdlcyBpbiBhIHBlcm1hbmVudCBsb2NhdGlvbiwgYnV0IHRoZXJlIG1pZ2h0IGJlIGlzc3VlcyB3aXRoIGhvdyBpdCdzIGJlaW5nIHVzZWQuXG5cbkhlcmUncyBob3cgdG8gZml4IGl0OlxuXG4jIyMgMS4gTW9kaWZ5IHRoZSBDYXRlZ29yeUltYWdlU2VydmxldCB0byB1c2UgYSBwZXJtYW5lbnQgc3RvcmFnZSBsb2NhdGlvblxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MCwidGV4dF9ub2RlIjp7ImNvbnRlbnQiOiJ3aHkgYXMgYSBhZG1pbiBpIGNhbnQgcHV0IHBob3RvIGFuZCBpdCBzaG91bGQgYmUgc3RvZWQgaW4gZGF0YWJhc2UgYXMgd2VsbCBhcyB3aGVuZXZlciBpIHJlc3RhcnQgdGhlIHNlcnZlciBpdCBzaG91bGQgYmUgdGhlcmUifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJDOi9Vc2Vycy9VU0VSL011c2ljL2Nsb3RoZWUgZmluYWwvaHkvQ2xvdGhlZSIsImZvbGRlclJvb3QiOiJDOi9Vc2Vycy9VU0VSL011c2ljL2Nsb3RoZWUgZmluYWwvaHkvQ2xvdGhlZSJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMDhUMDk6MjU6MDUuMTk5WiIsInJlc3BvbnNlX3RleHQiOiJJIHVuZGVyc3RhbmQgeW91ciBjb25jZXJuLiBMZXQgbWUgZXhwbGFpbiB0aGUgaXNzdWVzIHdpdGggc3RvcmluZyBhbmQgcGVyc2lzdGluZyBjYXRlZ29yeSBpbWFnZXMsIGFuZCBwcm92aWRlIGEgc29sdXRpb24gdGhhdCBlbnN1cmVzIGltYWdlcyByZW1haW4gYXZhaWxhYmxlIGV2ZW4gYWZ0ZXIgc2VydmVyIHJlc3RhcnRzLlxuXG4jIyBUaGUgQ3VycmVudCBJc3N1ZXNcblxuQmFzZWQgb24gbXkgYW5hbHlzaXMgb2YgeW91ciBjb2RlLCB0aGVyZSBhcmUgdHdvIG1haW4gcHJvYmxlbXM6XG5cbjEuICoqSW1hZ2UgU3RvcmFnZSBMb2NhdGlvbioqOiBUaGUgaW1hZ2VzIGFyZSBiZWluZyBzYXZlZCB0byBhIHRlbXBvcmFyeSBkZXBsb3ltZW50IGRpcmVjdG9yeSB0aGF0IGdldHMgd2lwZWQgd2hlbiB0aGUgc2VydmVyIHJlc3RhcnRzLlxuXG4yLiAqKkRhdGFiYXNlIFN0b3JhZ2UqKjogV2hpbGUgdGhlIGltYWdlIFVSTHMgYXJlIHN0b3JlZCBpbiB0aGUgZGF0YWJhc2UsIHRoZXkgcG9pbnQgdG8gZmlsZXMgdGhhdCBtaWdodCBub3QgcGVyc2lzdCBhY3Jvc3Mgc2VydmVyIHJlc3RhcnRzLlxuXG4jIyBXaHkgSW1hZ2VzIERpc2FwcGVhciBBZnRlciBTZXJ2ZXIgUmVzdGFydFxuXG5JbiB5b3VyIGBDYXRlZ29yeUltYWdlU2VydmxldC5qYXZhYCwgaW1hZ2VzIGFyZSBiZWluZyBzYXZlZCB0bzpcbmBgYGphdmFcblN0cmluZyB1cGxvYWRQYXRoID0gcmVxdWVzdC5nZXRTZXJ2bGV0Q29udGV4dCgpLmdldFJlYWxQYXRoKFwiL1wiKSArIHJlbGF0aXZlUGF0aCArIFwiL1wiO1xuYGBgXG5cblRoZSBgZ2V0UmVhbFBhdGgoXCIvXCIpYCBtZXRob2QgcmV0dXJucyB0aGUgcGF0aCB0byB0aGUgZGVwbG95ZWQgYXBwbGljYXRpb24gZGlyZWN0b3J5LCB3aGljaCBpcyB0eXBpY2FsbHkgYSB0ZW1wb3JhcnkgbG9jYXRpb24gdGhhdCBnZXRzIGNsZWFyZWQgd2hlbiB0aGUgc2VydmVyIHJlc3RhcnRzLiBUaGlzIGlzIHdoeSB5b3VyIGltYWdlcyBkaXNhcHBlYXIuXG5cbiMjIFNvbHV0aW9uOiBQZXJtYW5lbnQgSW1hZ2UgU3RvcmFnZVxuXG5Zb3VyIGNvZGUgYWN0dWFsbHkgaGFzIGEgc29sdXRpb24gZm9yIHRoaXMgYWxyZWFkeSwgYnV0IGl0IG1pZ2h0IG5vdCBiZSBwcm9wZXJseSBpbXBsZW1lbnRlZC4gVGhlIGBnZXRQZXJtYW5lbnRQYXRoKClgIG1ldGhvZCBpbiBgQ2F0ZWdvcnlJbWFnZVNlcnZsZXQuamF2YWAgYXR0ZW1wdHMgdG8gc3RvcmUgaW1hZ2VzIGluIGEgcGVybWFuZW50IGxvY2F0aW9uLCBidXQgdGhlcmUgbWlnaHQgYmUgaXNzdWVzIHdpdGggaG93IGl0J3MgYmVpbmcgdXNlZC5cblxuSGVyZSdzIGhvdyB0byBmaXggaXQ6XG5cbiMjIyAxLiBNb2RpZnkgdGhlIENhdGVnb3J5SW1hZ2VTZXJ2bGV0IHRvIHVzZSBhIHBlcm1hbmVudCBzdG9yYWdlIGxvY2F0aW9uXG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiOTdiNzEwNDgtOTBiZC00NjhhLThhOTAtMDRjZGFiZTE5NzI0IiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxRHl3Nm8zeXVkYmRVQ0Z0clhlZDRKYSIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwidmlld1wiLCBcInBhdGhcIjogXCJDbG90aGVlL3NyYy9tYWluL3dlYmFwcC9pbmRleC5qc3BcIiwgXCJ2aWV3X3JhbmdlXCI6IFsxLCAxMDBdfSIsIm1jcF9zZXJ2ZXJfbmFtZSI6IiIsIm1jcF90b29sX25hbWUiOiIifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6Ik5vdyBsZXQncyBjaGVjayB0aGUgaW5kZXguanNwIGZpbGUgdG8gc2VlIGhvdyBpdCdzIGxvYWRpbmcgdGhlIGltYWdlczpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gQ2xvdGhlZS9zcmMvbWFpbi9qYXZhL2NvbnRyb2xsZXIvQ2F0ZWdvcnlJbWFnZVNlcnZsZXQuamF2YTpcbiAgICAgMVx0cGFja2FnZSBjb250cm9sbGVyO1xuICAgICAyXHRcbiAgICAgM1x0aW1wb3J0IGphdmEuaW8uRmlsZTtcbiAgICAgNFx0aW1wb3J0IGphdmEuaW8uRmlsZUlucHV0U3RyZWFtO1xuICAgICA1XHRpbXBvcnQgamF2YS5pby5GaWxlT3V0cHV0U3RyZWFtO1xuICAgICA2XHRpbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjtcbiAgICAgN1x0aW1wb3J0IGphdmEuaW8uSW5wdXRTdHJlYW07XG4gICAgIDhcdGltcG9ydCBqYXZhLmlvLk91dHB1dFN0cmVhbTtcbiAgICAgOVx0XG4gICAgMTBcdGltcG9ydCBqYWthcnRhLnNlcnZsZXQuU2VydmxldEV4Y2VwdGlvbjtcbiAgICAxMVx0aW1wb3J0IGpha2FydGEuc2VydmxldC5hbm5vdGF0aW9uLk11bHRpcGFydENvbmZpZztcbiAgICAxMlx0aW1wb3J0IGpha2FydGEuc2VydmxldC5odHRwLkh0dHBTZXJ2bGV0O1xuICAgIDEzXHRpbXBvcnQgamFrYXJ0YS5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXRSZXF1ZXN0O1xuICAgIDE0XHRpbXBvcnQgamFrYXJ0YS5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXRSZXNwb25zZTtcbiAgICAxNVx0aW1wb3J0IGpha2FydGEuc2VydmxldC5odHRwLlBhcnQ7XG4gICAgMTZcdFxuICAgIDE3XHRpbXBvcnQgZGFvLkNhdGVnb3J5REFPO1xuICAgIDE4XHRpbXBvcnQgbW9kZWwuQ2F0ZWdvcnk7XG4gICAgMTlcdFxuICAgIDIwXHRcbiAgICAyMVx0LyoqXG4gICAgMjJcdCAqIFNlcnZsZXQgZm9yIGhhbmRsaW5nIGNhdGVnb3J5IGltYWdlIHVwbG9hZHNcbiAgICAyM1x0ICovXG4gICAgMjRcdC8vIFNlcnZsZXQgbWFwcGluZyBkZWZpbmVkIGluIHdlYi54bWxcbiAgICAyNVx0QE11bHRpcGFydENvbmZpZyhcbiAgICAyNlx0ICAgIGZpbGVTaXplVGhyZXNob2xkID0gMTAyNCAqIDEwMjQsIC8vIDEgTUJcbiAgICAyN1x0ICAgIG1heEZpbGVTaXplID0gMTAyNCAqIDEwMjQgKiAxMCwgIC8vIDEwIE1CXG4gICAgMjhcdCAgICBtYXhSZXF1ZXN0U2l6ZSA9IDEwMjQgKiAxMDI0ICogNTAgLy8gNTAgTUJcbiAgICAyOVx0KVxuICAgIDMwXHRwdWJsaWMgY2xhc3MgQ2F0ZWdvcnlJbWFnZVNlcnZsZXQgZXh0ZW5kcyBIdHRwU2VydmxldCB7XG4gICAgMzFcdCAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBsb25nIHNlcmlhbFZlcnNpb25VSUQgPSAxTDtcbiAgICAzMlx0ICAgIHByaXZhdGUgZmluYWwgQ2F0ZWdvcnlEQU8gY2F0ZWdvcnlEQU87XG4gICAgMzNcdFxuICAgIDM0XHQgICAgcHVibGljIENhdGVnb3J5SW1hZ2VTZXJ2bGV0KCkge1xuICAgIDM1XHQgICAgICAgIHN1cGVyKCk7XG4gICAgMzZcdCAgICAgICAgY2F0ZWdvcnlEQU8gPSBuZXcgQ2F0ZWdvcnlEQU8oKTtcbiAgICAzN1x0ICAgIH1cbiAgICAzOFx0XG4gICAgMzlcdCAgICBwcm90ZWN0ZWQgdm9pZCBkb1Bvc3QoSHR0cFNlcnZsZXRSZXF1ZXN0IHJlcXVlc3QsIEh0dHBTZXJ2bGV0UmVzcG9uc2UgcmVzcG9uc2UpXG4gICAgNDBcdCAgICAgICAgICAgIHRocm93cyBTZXJ2bGV0RXhjZXB0aW9uLCBJT0V4Y2VwdGlvbiB7XG4gICAgNDFcdFxuICAgIDQyXHQgICAgICAgIC8vIENoZWNrIGlmIHVzZXIgaXMgbG9nZ2VkIGluIGFuZCBpcyBhbiBhZG1pblxuICAgIDQzXHQgICAgICAgIGpha2FydGEuc2VydmxldC5odHRwLkh0dHBTZXNzaW9uIHNlc3Npb24gPSByZXF1ZXN0LmdldFNlc3Npb24oKTtcbiAgICA0NFx0ICAgICAgICBtb2RlbC5Vc2VyIHVzZXIgPSAobW9kZWwuVXNlcikgc2Vzc2lvbi5nZXRBdHRyaWJ1dGUoXCJ1c2VyXCIpO1xuICAgIDQ1XHRcbiAgICA0Nlx0ICAgICAgICBpZiAodXNlciA9PSBudWxsIHx8ICF1c2VyLmlzQWRtaW4oKSkge1xuICAgIDQ3XHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJDYXRlZ29yeUltYWdlU2VydmxldCAtIFVzZXIgbm90IGxvZ2dlZCBpbiBvciBub3QgYWRtaW5cIik7XG4gICAgNDhcdCAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9Mb2dpblNlcnZsZXRcIik7XG4gICAgNDlcdCAgICAgICAgICAgIHJldHVybjtcbiAgICA1MFx0ICAgICAgICB9XG4gICAgNTFcdFxuICAgIDUyXHQgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNhdGVnb3J5SW1hZ2VTZXJ2bGV0IC0gVXNlciBpcyBhZG1pbjogXCIgKyB1c2VyLmlzQWRtaW4oKSk7XG4gICAgNTNcdFxuICAgIDU0XHQgICAgICAgIC8vIEdldCBjYXRlZ29yeSBJRCBmcm9tIHJlcXVlc3RcbiAgICA1NVx0ICAgICAgICBTdHJpbmcgY2F0ZWdvcnlJZFN0ciA9IHJlcXVlc3QuZ2V0UGFyYW1ldGVyKFwiY2F0ZWdvcnlJZFwiKTtcbiAgICA1Nlx0XG4gICAgNTdcdCAgICAgICAgaWYgKGNhdGVnb3J5SWRTdHIgPT0gbnVsbCB8fCBjYXRlZ29yeUlkU3RyLmlzRW1wdHkoKSkge1xuICAgIDU4XHQgICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvYWRtaW4vY2F0ZWdvcmllcy5qc3A/ZXJyb3I9dHJ1ZSZtZXNzYWdlPUNhdGVnb3J5K0lEK2lzK3JlcXVpcmVkXCIpO1xuICAgIDU5XHQgICAgICAgICAgICByZXR1cm47XG4gICAgNjBcdCAgICAgICAgfVxuICAgIDYxXHRcbiAgICA2Mlx0ICAgICAgICB0cnkge1xuICAgIDYzXHQgICAgICAgICAgICBpbnQgY2F0ZWdvcnlJZCA9IEludGVnZXIucGFyc2VJbnQoY2F0ZWdvcnlJZFN0cik7XG4gICAgNjRcdFxuICAgIDY1XHQgICAgICAgICAgICAvLyBHZXQgY2F0ZWdvcnkgZnJvbSBkYXRhYmFzZVxuICAgIDY2XHQgICAgICAgICAgICBDYXRlZ29yeSBjYXRlZ29yeSA9IGNhdGVnb3J5REFPLmdldENhdGVnb3J5QnlJZChjYXRlZ29yeUlkKTtcbiAgICA2N1x0XG4gICAgNjhcdCAgICAgICAgICAgIGlmIChjYXRlZ29yeSA9PSBudWxsKSB7XG4gICAgNjlcdCAgICAgICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvYWRtaW4vY2F0ZWdvcmllcy5qc3A/ZXJyb3I9dHJ1ZSZtZXNzYWdlPUNhdGVnb3J5K25vdCtmb3VuZFwiKTtcbiAgICA3MFx0ICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICA3MVx0ICAgICAgICAgICAgfVxuICAgIDcyXHRcbiAgICA3M1x0ICAgICAgICAgICAgLy8gSGFuZGxlIGZpbGUgdXBsb2FkXG4gICAgNzRcdCAgICAgICAgICAgIFBhcnQgZmlsZVBhcnQgPSByZXF1ZXN0LmdldFBhcnQoXCJjYXRlZ29yeUltYWdlXCIpO1xuICAgIDc1XHQgICAgICAgICAgICBpZiAoZmlsZVBhcnQgPT0gbnVsbCB8fCBmaWxlUGFydC5nZXRTaXplKCkgPD0gMCkge1xuICAgIDc2XHQgICAgICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL2FkbWluL2NhdGVnb3JpZXMuanNwP2Vycm9yPXRydWUmbWVzc2FnZT1ObytpbWFnZStmaWxlK3NlbGVjdGVkXCIpO1xuICAgIDc3XHQgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgIDc4XHQgICAgICAgICAgICB9XG4gICAgNzlcdFxuICAgIDgwXHQgICAgICAgICAgICAvLyBQcm9jZXNzIHRoZSB1cGxvYWRlZCBmaWxlXG4gICAgODFcdCAgICAgICAgICAgIFN0cmluZyBmaWxlTmFtZSA9IGdldFN1Ym1pdHRlZEZpbGVOYW1lKGZpbGVQYXJ0KTtcbiAgICA4Mlx0ICAgICAgICAgICAgaWYgKGZpbGVOYW1lID09IG51bGwgfHwgZmlsZU5hbWUuaXNFbXB0eSgpKSB7XG4gICAgODNcdCAgICAgICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvYWRtaW4vY2F0ZWdvcmllcy5qc3A/ZXJyb3I9dHJ1ZSZtZXNzYWdlPUludmFsaWQrZmlsZStuYW1lXCIpO1xuICAgIDg0XHQgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgIDg1XHQgICAgICAgICAgICB9XG4gICAgODZcdFxuICAgIDg3XHQgICAgICAgICAgICBTdHJpbmcgZmlsZUV4dGVuc2lvbiA9IGZpbGVOYW1lLnN1YnN0cmluZyhmaWxlTmFtZS5sYXN0SW5kZXhPZihcIi5cIikpO1xuICAgIDg4XHQgICAgICAgICAgICBTdHJpbmcgbmV3RmlsZU5hbWUgPSBcImNhdGVnb3J5X1wiICsgY2F0ZWdvcnlJZCArIGZpbGVFeHRlbnNpb247XG4gICAgODlcdFxuICAgIDkwXHQgICAgICAgICAgICAvLyBTYXZlIHRoZSBmaWxlIHRvIGEgcGVybWFuZW50IGxvY2F0aW9uXG4gICAgOTFcdCAgICAgICAgICAgIFN0cmluZyByZWxhdGl2ZVBhdGggPSBcImltYWdlcy9jYXRlZ29yaWVzXCI7XG4gICAgOTJcdFxuICAgIDkzXHQgICAgICAgICAgICAvLyBHZXQgdGhlIHJlYWwgcGF0aCB0byB0aGUgd2ViIGFwcGxpY2F0aW9uIHJvb3QgZGlyZWN0b3J5XG4gICAgOTRcdCAgICAgICAgICAgIFN0cmluZyB3ZWJhcHBSb290ID0gcmVxdWVzdC5nZXRTZXJ2bGV0Q29udGV4dCgpLmdldFJlYWxQYXRoKFwiL1wiKTtcbiAgICA5NVx0XG4gICAgOTZcdCAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgZGVwbG95bWVudCBkaXJlY3RvcnkgcGF0aFxuICAgIDk3XHQgICAgICAgICAgICBTdHJpbmcgZGVwbG95bWVudFBhdGggPSB3ZWJhcHBSb290ICsgcmVsYXRpdmVQYXRoO1xuICAgIDk4XHRcbiAgICA5OVx0ICAgICAgICAgICAgLy8gRW5zdXJlIGRlcGxveW1lbnQgZGlyZWN0b3J5IGV4aXN0c1xuICAgMTAwXHQgICAgICAgICAgICBGaWxlIGRlcGxveW1lbnREaXIgPSBuZXcgRmlsZShkZXBsb3ltZW50UGF0aCk7XG4gICAxMDFcdCAgICAgICAgICAgIGlmICghZGVwbG95bWVudERpci5leGlzdHMoKSkge1xuICAgMTAyXHQgICAgICAgICAgICAgICAgYm9vbGVhbiBjcmVhdGVkID0gZGVwbG95bWVudERpci5ta2RpcnMoKTtcbiAgIDEwM1x0ICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNhdGVnb3J5SW1hZ2VTZXJ2bGV0IC0gQ3JlYXRlZCBkZXBsb3ltZW50IGRpcmVjdG9yeTogXCIgKyBjcmVhdGVkKTtcbiAgIDEwNFx0ICAgICAgICAgICAgfVxuICAgMTA1XHRcbiAgIDEwNlx0ICAgICAgICAgICAgLy8gR2V0IHRoZSBwZXJtYW5lbnQgcGF0aCAocGVyc2lzdHMgYWNyb3NzIHNlcnZlciByZXN0YXJ0cylcbiAgIDEwN1x0ICAgICAgICAgICAgU3RyaW5nIHBlcm1hbmVudFBhdGggPSBnZXRQZXJtYW5lbnRQYXRoKHdlYmFwcFJvb3QsIHJlbGF0aXZlUGF0aCk7XG4gICAxMDhcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNhdGVnb3J5SW1hZ2VTZXJ2bGV0IC0gUGVybWFuZW50IHBhdGg6IFwiICsgcGVybWFuZW50UGF0aCk7XG4gICAxMDlcdFxuICAgMTEwXHQgICAgICAgICAgICAvLyBDcmVhdGUgdGhlIHBlcm1hbmVudCBkaXJlY3RvcnkgaWYgaXQgZG9lc24ndCBleGlzdFxuICAgMTExXHQgICAgICAgICAgICBib29sZWFuIGRpckNyZWF0ZWQgPSBlbnN1cmVEaXJlY3RvcnlFeGlzdHMocGVybWFuZW50UGF0aCk7XG4gICAxMTJcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNhdGVnb3J5SW1hZ2VTZXJ2bGV0IC0gQ3JlYXRlZCBwZXJtYW5lbnQgZGlyZWN0b3J5OiBcIiArIGRpckNyZWF0ZWQpO1xuICAgMTEzXHRcbiAgIDExNFx0ICAgICAgICAgICAgLy8gV3JpdGUgdGhlIGZpbGUgdG8gZGVwbG95bWVudCBwYXRoXG4gICAxMTVcdCAgICAgICAgICAgIFN0cmluZyBkZXBsb3ltZW50RmlsZVBhdGggPSBkZXBsb3ltZW50UGF0aCArIFwiL1wiICsgbmV3RmlsZU5hbWU7XG4gICAxMTZcdCAgICAgICAgICAgIGZpbGVQYXJ0LndyaXRlKGRlcGxveW1lbnRGaWxlUGF0aCk7XG4gICAxMTdcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNhdGVnb3J5SW1hZ2VTZXJ2bGV0IC0gSW1hZ2Ugc2F2ZWQgdG8gZGVwbG95bWVudCBwYXRoOiBcIiArIGRlcGxveW1lbnRGaWxlUGF0aCk7XG4gICAxMThcdFxuICAgMTE5XHQgICAgICAgICAgICAvLyBWZXJpZnkgdGhlIGZpbGUgd2FzIHdyaXR0ZW4gc3VjY2Vzc2Z1bGx5XG4gICAxMjBcdCAgICAgICAgICAgIEZpbGUgZGVwbG95bWVudEZpbGUgPSBuZXcgRmlsZShkZXBsb3ltZW50RmlsZVBhdGgpO1xuICAgMTIxXHQgICAgICAgICAgICBpZiAoZGVwbG95bWVudEZpbGUuZXhpc3RzKCkpIHtcbiAgIDEyMlx0ICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNhdGVnb3J5SW1hZ2VTZXJ2bGV0IC0gRGVwbG95bWVudCBmaWxlIGV4aXN0czogXCIgKyBkZXBsb3ltZW50RmlsZS5leGlzdHMoKSk7XG4gICAxMjNcdCAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJDYXRlZ29yeUltYWdlU2VydmxldCAtIERlcGxveW1lbnQgZmlsZSBzaXplOiBcIiArIGRlcGxveW1lbnRGaWxlLmxlbmd0aCgpICsgXCIgYnl0ZXNcIik7XG4gICAxMjRcdFxuICAgMTI1XHQgICAgICAgICAgICAgICAgLy8gQ29weSB0aGUgZmlsZSB0byB0aGUgcGVybWFuZW50IGxvY2F0aW9uIHVzaW5nIE5JTyAobW9yZSByZWxpYWJsZSlcbiAgIDEyNlx0ICAgICAgICAgICAgICAgIHRyeSB7XG4gICAxMjdcdCAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHBlcm1hbmVudCBmaWxlIHBhdGhcbiAgIDEyOFx0ICAgICAgICAgICAgICAgICAgICBTdHJpbmcgcGVybWFuZW50RmlsZVBhdGggPSBwZXJtYW5lbnRQYXRoICsgXCIvXCIgKyBuZXdGaWxlTmFtZTtcbiAgIDEyOVx0XG4gICAxMzBcdCAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGlucHV0IHN0cmVhbSBmcm9tIHRoZSBkZXBsb3ltZW50IGZpbGVcbiAgIDEzMVx0ICAgICAgICAgICAgICAgICAgICBJbnB1dFN0cmVhbSBpbnB1dCA9IG5ldyBGaWxlSW5wdXRTdHJlYW0oZGVwbG95bWVudEZpbGUpO1xuICAgMTMyXHRcbiAgIDEzM1x0ICAgICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgb3V0cHV0IHN0cmVhbSB0byB0aGUgcGVybWFuZW50IGZpbGVcbiAgIDEzNFx0ICAgICAgICAgICAgICAgICAgICBPdXRwdXRTdHJlYW0gb3V0cHV0ID0gbmV3IEZpbGVPdXRwdXRTdHJlYW0ocGVybWFuZW50RmlsZVBhdGgpO1xuICAgMTM1XHRcbiAgIDEzNlx0ICAgICAgICAgICAgICAgICAgICAvLyBDb3B5IHRoZSBmaWxlIHVzaW5nIHRyYWRpdGlvbmFsIEkvT1xuICAgMTM3XHQgICAgICAgICAgICAgICAgICAgIGJ5dGVbXSBidWZmZXIgPSBuZXcgYnl0ZVsxMDI0XTtcbiAgIDEzOFx0ICAgICAgICAgICAgICAgICAgICBpbnQgbGVuZ3RoO1xuICAgMTM5XHQgICAgICAgICAgICAgICAgICAgIHdoaWxlICgobGVuZ3RoID0gaW5wdXQucmVhZChidWZmZXIpKSA+IDApIHtcbiAgIDE0MFx0ICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0LndyaXRlKGJ1ZmZlciwgMCwgbGVuZ3RoKTtcbiAgIDE0MVx0ICAgICAgICAgICAgICAgICAgICB9XG4gICAxNDJcdFxuICAgMTQzXHQgICAgICAgICAgICAgICAgICAgIC8vIENsb3NlIHN0cmVhbXNcbiAgIDE0NFx0ICAgICAgICAgICAgICAgICAgICBpbnB1dC5jbG9zZSgpO1xuICAgMTQ1XHQgICAgICAgICAgICAgICAgICAgIG91dHB1dC5jbG9zZSgpO1xuICAgMTQ2XHRcbiAgIDE0N1x0ICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJDYXRlZ29yeUltYWdlU2VydmxldCAtIEZpbGUgY29waWVkIHRvIHBlcm1hbmVudCBwYXRoOiBcIiArIHBlcm1hbmVudEZpbGVQYXRoKTtcbiAgIDE0OFx0XG4gICAxNDlcdCAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZ5IHRoZSBwZXJtYW5lbnQgZmlsZSB3YXMgd3JpdHRlbiBzdWNjZXNzZnVsbHlcbiAgIDE1MFx0ICAgICAgICAgICAgICAgICAgICBGaWxlIHBlcm1hbmVudEZpbGUgPSBuZXcgRmlsZShwZXJtYW5lbnRGaWxlUGF0aCk7XG4gICAxNTFcdCAgICAgICAgICAgICAgICAgICAgaWYgKHBlcm1hbmVudEZpbGUuZXhpc3RzKCkpIHtcbiAgIDE1Mlx0ICAgICAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQ2F0ZWdvcnlJbWFnZVNlcnZsZXQgLSBQZXJtYW5lbnQgZmlsZSBleGlzdHM6IFwiICsgcGVybWFuZW50RmlsZS5leGlzdHMoKSk7XG4gICAxNTNcdCAgICAgICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNhdGVnb3J5SW1hZ2VTZXJ2bGV0IC0gUGVybWFuZW50IGZpbGUgc2l6ZTogXCIgKyBwZXJtYW5lbnRGaWxlLmxlbmd0aCgpICsgXCIgYnl0ZXNcIik7XG4gICAxNTRcdCAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgIDE1NVx0ICAgICAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQ2F0ZWdvcnlJbWFnZVNlcnZsZXQgLSBXQVJOSU5HOiBQZXJtYW5lbnQgZmlsZSBkb2VzIG5vdCBleGlzdCBhZnRlciB3cml0aW5nIVwiKTtcbiAgIDE1Nlx0ICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgcGVybWFuZW50IGZpbGUgZG9lc24ndCBleGlzdCwgdHJ5IGRpcmVjdCB3cml0ZSBhcyBmYWxsYmFja1xuICAgMTU3XHQgICAgICAgICAgICAgICAgICAgICAgICBmaWxlUGFydC53cml0ZShwZXJtYW5lbnRGaWxlUGF0aCk7XG4gICAxNThcdCAgICAgICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNhdGVnb3J5SW1hZ2VTZXJ2bGV0IC0gQXR0ZW1wdGVkIGRpcmVjdCB3cml0ZSB0byBwZXJtYW5lbnQgcGF0aFwiKTtcbiAgIDE1OVx0ICAgICAgICAgICAgICAgICAgICB9XG4gICAxNjBcdCAgICAgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgMTYxXHQgICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNhdGVnb3J5SW1hZ2VTZXJ2bGV0IC0gRXJyb3IgY29weWluZyBmaWxlIHRvIHBlcm1hbmVudCBsb2NhdGlvbjogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAxNjJcdCAgICAgICAgICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgIDE2M1x0ICAgICAgICAgICAgICAgICAgICAvLyBDb250aW51ZSBldmVuIGlmIHBlcm1hbmVudCBjb3B5IGZhaWxzIC0gYXQgbGVhc3QgdGhlIGRlcGxveW1lbnQgY29weSB3b3JrZWRcbiAgIDE2NFx0ICAgICAgICAgICAgICAgIH1cbiAgIDE2NVx0ICAgICAgICAgICAgfSBlbHNlIHtcbiAgIDE2Nlx0ICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNhdGVnb3J5SW1hZ2VTZXJ2bGV0IC0gV0FSTklORzogRGVwbG95bWVudCBmaWxlIGRvZXMgbm90IGV4aXN0IGFmdGVyIHdyaXRpbmchXCIpO1xuICAgMTY3XHQgICAgICAgICAgICB9XG4gICAxNjhcdFxuICAgMTY5XHQgICAgICAgICAgICAvLyBVcGRhdGUgY2F0ZWdvcnkgaW1hZ2UgVVJMIGluIGRhdGFiYXNlXG4gICAxNzBcdCAgICAgICAgICAgIFN0cmluZyBpbWFnZVVybCA9IHJlbGF0aXZlUGF0aCArIFwiL1wiICsgbmV3RmlsZU5hbWU7XG4gICAxNzFcdCAgICAgICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IGNhdGVnb3J5REFPLnVwZGF0ZUNhdGVnb3J5SW1hZ2UoY2F0ZWdvcnlJZCwgaW1hZ2VVcmwpO1xuICAgMTcyXHRcbiAgIDE3M1x0ICAgICAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcbiAgIDE3NFx0ICAgICAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9hZG1pbi9jYXRlZ29yaWVzLmpzcD9zdWNjZXNzPXRydWUmbWVzc2FnZT1DYXRlZ29yeStpbWFnZSt1cGRhdGVkK3N1Y2Nlc3NmdWxseVwiKTtcbiAgIDE3NVx0ICAgICAgICAgICAgfSBlbHNlIHtcbiAgIDE3Nlx0ICAgICAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9hZG1pbi9jYXRlZ29yaWVzLmpzcD9lcnJvcj10cnVlJm1lc3NhZ2U9RmFpbGVkK3RvK3VwZGF0ZStjYXRlZ29yeStpbWFnZVwiKTtcbiAgIDE3N1x0ICAgICAgICAgICAgfVxuICAgMTc4XHRcbiAgIDE3OVx0ICAgICAgICB9IGNhdGNoIChOdW1iZXJGb3JtYXRFeGNlcHRpb24gZSkge1xuICAgMTgwXHQgICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvYWRtaW4vY2F0ZWdvcmllcy5qc3A/ZXJyb3I9dHJ1ZSZtZXNzYWdlPUludmFsaWQrY2F0ZWdvcnkrSURcIik7XG4gICAxODFcdCAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgIDE4Mlx0ICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL2FkbWluL2NhdGVnb3JpZXMuanNwP2Vycm9yPXRydWUmbWVzc2FnZT1FcnJvcit1cGxvYWRpbmcraW1hZ2U6K1wiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgMTgzXHQgICAgICAgIH1cbiAgIDE4NFx0ICAgIH1cbiAgIDE4NVx0XG4gICAxODZcdCAgICAvKipcbiAgIDE4N1x0ICAgICAqIEhlbHBlciBtZXRob2QgdG8gZ2V0IHRoZSBzdWJtaXR0ZWQgZmlsZSBuYW1lIGZyb20gYSBQYXJ0XG4gICAxODhcdCAgICAgKi9cbiAgIDE4OVx0ICAgIHByaXZhdGUgU3RyaW5nIGdldFN1Ym1pdHRlZEZpbGVOYW1lKFBhcnQgcGFydCkge1xuICAgMTkwXHQgICAgICAgIGZvciAoU3RyaW5nIGNvbnRlbnQgOiBwYXJ0LmdldEhlYWRlcihcImNvbnRlbnQtZGlzcG9zaXRpb25cIikuc3BsaXQoXCI7XCIpKSB7XG4gICAxOTFcdCAgICAgICAgICAgIGlmIChjb250ZW50LnRyaW0oKS5zdGFydHNXaXRoKFwiZmlsZW5hbWVcIikpIHtcbiAgIDE5Mlx0ICAgICAgICAgICAgICAgIHJldHVybiBjb250ZW50LnN1YnN0cmluZyhjb250ZW50LmluZGV4T2YoJz0nKSArIDEpLnRyaW0oKS5yZXBsYWNlKFwiXFxcIlwiLCBcIlwiKTtcbiAgIDE5M1x0ICAgICAgICAgICAgfVxuICAgMTk0XHQgICAgICAgIH1cbiAgIDE5NVx0ICAgICAgICByZXR1cm4gbnVsbDtcbiAgIDE5Nlx0ICAgIH1cbiAgIDE5N1x0XG4gICAxOThcdCAgICAvKipcbiAgIDE5OVx0ICAgICAqIEdldCB0aGUgcGVybWFuZW50IHBhdGggZm9yIHN0b3JpbmcgaW1hZ2VzXG4gICAyMDBcdCAgICAgKiBAcGFyYW0gd2ViYXBwUm9vdCBUaGUgd2ViYXBwIHJvb3QgcGF0aFxuICAgMjAxXHQgICAgICogQHBhcmFtIHJlbGF0aXZlUGF0aCBUaGUgcmVsYXRpdmUgcGF0aCB3aXRoaW4gdGhlIHdlYmFwcFxuICAgMjAyXHQgICAgICogQHJldHVybiBUaGUgcGVybWFuZW50IHBhdGhcbiAgIDIwM1x0ICAgICAqL1xuICAgMjA0XHQgICAgcHJpdmF0ZSBTdHJpbmcgZ2V0UGVybWFuZW50UGF0aChTdHJpbmcgd2ViYXBwUm9vdCwgU3RyaW5nIHJlbGF0aXZlUGF0aCkge1xuICAgMjA1XHQgICAgICAgIHRyeSB7XG4gICAyMDZcdCAgICAgICAgICAgIC8vIEZpcnN0LCB0cnkgdG8gdXNlIGEgZml4ZWQsIGFic29sdXRlIHBhdGggdGhhdCB3aWxsIGRlZmluaXRlbHkgcGVyc2lzdFxuICAgMjA3XHQgICAgICAgICAgICAvLyBUaGlzIHBhdGggc2hvdWxkIGJlIG91dHNpZGUgdGhlIGRlcGxveW1lbnQgZGlyZWN0b3J5IGJ1dCBhY2Nlc3NpYmxlIGJ5IHRoZSB3ZWIgc2VydmVyXG4gICAyMDhcdCAgICAgICAgICAgIC8vIFVzZSB0aGUgdXNlcidzIGhvbWUgZGlyZWN0b3J5XG4gICAyMDlcdCAgICAgICAgICAgIFN0cmluZyB1c2VySG9tZSA9IFN5c3RlbS5nZXRQcm9wZXJ0eShcInVzZXIuaG9tZVwiKTtcbiAgIDIxMFx0ICAgICAgICAgICAgU3RyaW5nIGZpeGVkUGF0aCA9IHVzZXJIb21lICsgRmlsZS5zZXBhcmF0b3IgKyBcIkNsb3RoZWVJbWFnZXNcIiArIEZpbGUuc2VwYXJhdG9yICsgcmVsYXRpdmVQYXRoO1xuICAgMjExXHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJDYXRlZ29yeUltYWdlU2VydmxldCAtIFVzaW5nIGZpeGVkIHBhdGggaW4gdXNlciBob21lOiBcIiArIGZpeGVkUGF0aCk7XG4gICAyMTJcdCAgICAgICAgICAgIEZpbGUgZml4ZWREaXIgPSBuZXcgRmlsZShmaXhlZFBhdGgpO1xuICAgMjEzXHRcbiAgIDIxNFx0ICAgICAgICAgICAgLy8gRW5zdXJlIHRoZSBmaXhlZCBkaXJlY3RvcnkgZXhpc3RzXG4gICAyMTVcdCAgICAgICAgICAgIGlmICghZml4ZWREaXIuZXhpc3RzKCkpIHtcbiAgIDIxNlx0ICAgICAgICAgICAgICAgIGJvb2xlYW4gY3JlYXRlZCA9IGZpeGVkRGlyLm1rZGlycygpO1xuICAgMjE3XHQgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQ2F0ZWdvcnlJbWFnZVNlcnZsZXQgLSBDcmVhdGVkIGZpeGVkIGRpcmVjdG9yeTogXCIgKyBjcmVhdGVkICsgXCIgYXQgXCIgKyBmaXhlZFBhdGgpO1xuICAgMjE4XHQgICAgICAgICAgICAgICAgaWYgKGNyZWF0ZWQpIHtcbiAgIDIxOVx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gZml4ZWRQYXRoO1xuICAgMjIwXHQgICAgICAgICAgICAgICAgfVxuICAgMjIxXHQgICAgICAgICAgICB9IGVsc2Uge1xuICAgMjIyXHQgICAgICAgICAgICAgICAgcmV0dXJuIGZpeGVkUGF0aDtcbiAgIDIyM1x0ICAgICAgICAgICAgfVxuICAgMjI0XHRcbiAgIDIyNVx0ICAgICAgICAgICAgLy8gSWYgdGhlIGZpeGVkIHBhdGggZG9lc24ndCB3b3JrLCB0cnkgdG8gZmluZCB0aGUgcHJvamVjdCByb290IGRpcmVjdG9yeVxuICAgMjI2XHQgICAgICAgICAgICBGaWxlIGRlcGxveW1lbnREaXIgPSBuZXcgRmlsZSh3ZWJhcHBSb290KTtcbiAgIDIyN1x0ICAgICAgICAgICAgRmlsZSBwcm9qZWN0Um9vdCA9IGRlcGxveW1lbnREaXI7XG4gICAyMjhcdFxuICAgMjI5XHQgICAgICAgICAgICAvLyBUcnkgdG8gbmF2aWdhdGUgdXAgdG8gZmluZCB0aGUgcHJvamVjdCByb290XG4gICAyMzBcdCAgICAgICAgICAgIGlmIChkZXBsb3ltZW50RGlyLmdldFBhcmVudEZpbGUoKSAhPSBudWxsKSB7XG4gICAyMzFcdCAgICAgICAgICAgICAgICBwcm9qZWN0Um9vdCA9IGRlcGxveW1lbnREaXIuZ2V0UGFyZW50RmlsZSgpO1xuICAgMjMyXHQgICAgICAgICAgICAgICAgaWYgKHByb2plY3RSb290LmdldFBhcmVudEZpbGUoKSAhPSBudWxsKSB7XG4gICAyMzNcdCAgICAgICAgICAgICAgICAgICAgcHJvamVjdFJvb3QgPSBwcm9qZWN0Um9vdC5nZXRQYXJlbnRGaWxlKCk7XG4gICAyMzRcdCAgICAgICAgICAgICAgICAgICAgaWYgKHByb2plY3RSb290LmdldFBhcmVudEZpbGUoKSAhPSBudWxsKSB7XG4gICAyMzVcdCAgICAgICAgICAgICAgICAgICAgICAgIHByb2plY3RSb290ID0gcHJvamVjdFJvb3QuZ2V0UGFyZW50RmlsZSgpO1xuICAgMjM2XHQgICAgICAgICAgICAgICAgICAgIH1cbiAgIDIzN1x0ICAgICAgICAgICAgICAgIH1cbiAgIDIzOFx0ICAgICAgICAgICAgfVxuICAgMjM5XHRcbiAgIDI0MFx0ICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBwZXJtYW5lbnQgcGF0aFxuICAgMjQxXHQgICAgICAgICAgICBTdHJpbmcgcGVybWFuZW50UGF0aCA9IHByb2plY3RSb290LmdldEFic29sdXRlUGF0aCgpICsgRmlsZS5zZXBhcmF0b3IgKyBcInNyY1wiICsgRmlsZS5zZXBhcmF0b3IgKyBcIm1haW5cIiArIEZpbGUuc2VwYXJhdG9yICsgXCJ3ZWJhcHBcIiArIEZpbGUuc2VwYXJhdG9yICsgcmVsYXRpdmVQYXRoO1xuICAgMjQyXHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJDYXRlZ29yeUltYWdlU2VydmxldCAtIFByb2plY3Qgcm9vdDogXCIgKyBwcm9qZWN0Um9vdC5nZXRBYnNvbHV0ZVBhdGgoKSk7XG4gICAyNDNcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNhdGVnb3J5SW1hZ2VTZXJ2bGV0IC0gUGVybWFuZW50IHBhdGg6IFwiICsgcGVybWFuZW50UGF0aCk7XG4gICAyNDRcdFxuICAgMjQ1XHQgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgcGVybWFuZW50IHBhdGggZXhpc3RzIG9yIGNhbiBiZSBjcmVhdGVkXG4gICAyNDZcdCAgICAgICAgICAgIEZpbGUgcGVybWFuZW50RGlyID0gbmV3IEZpbGUocGVybWFuZW50UGF0aCk7XG4gICAyNDdcdCAgICAgICAgICAgIGlmICghcGVybWFuZW50RGlyLmV4aXN0cygpKSB7XG4gICAyNDhcdCAgICAgICAgICAgICAgICBib29sZWFuIGNyZWF0ZWQgPSBwZXJtYW5lbnREaXIubWtkaXJzKCk7XG4gICAyNDlcdCAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJDYXRlZ29yeUltYWdlU2VydmxldCAtIENyZWF0ZWQgcGVybWFuZW50IGRpcmVjdG9yeTogXCIgKyBjcmVhdGVkKTtcbiAgIDI1MFx0ICAgICAgICAgICAgICAgIGlmICghY3JlYXRlZCkge1xuICAgMjUxXHQgICAgICAgICAgICAgICAgICAgIC8vIElmIHdlIGNhbid0IGNyZWF0ZSB0aGUgcGVybWFuZW50IGRpcmVjdG9yeSwgdXNlIHRoZSBkZXBsb3ltZW50IHBhdGggYXMgZmFsbGJhY2tcbiAgIDI1Mlx0ICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJDYXRlZ29yeUltYWdlU2VydmxldCAtIENvdWxkIG5vdCBjcmVhdGUgcGVybWFuZW50IGRpcmVjdG9yeSwgdXNpbmcgZGVwbG95bWVudCBwYXRoIGFzIGZhbGxiYWNrXCIpO1xuICAgMjUzXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiB3ZWJhcHBSb290ICsgcmVsYXRpdmVQYXRoO1xuICAgMjU0XHQgICAgICAgICAgICAgICAgfVxuICAgMjU1XHQgICAgICAgICAgICB9XG4gICAyNTZcdFxuICAgMjU3XHQgICAgICAgICAgICByZXR1cm4gcGVybWFuZW50UGF0aDtcbiAgIDI1OFx0ICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgMjU5XHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJDYXRlZ29yeUltYWdlU2VydmxldCAtIEVycm9yIGdldHRpbmcgcGVybWFuZW50IHBhdGg6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgMjYwXHQgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgMjYxXHQgICAgICAgICAgICByZXR1cm4gd2ViYXBwUm9vdCArIHJlbGF0aXZlUGF0aDtcbiAgIDI2Mlx0ICAgICAgICB9XG4gICAyNjNcdCAgICB9XG4gICAyNjRcdFxuICAgMjY1XHQgICAgLyoqXG4gICAyNjZcdCAgICAgKiBFbnN1cmUgdGhlIGRpcmVjdG9yeSBleGlzdHNcbiAgIDI2N1x0ICAgICAqIEBwYXJhbSBwYXRoIFRoZSBkaXJlY3RvcnkgcGF0aFxuICAgMjY4XHQgICAgICogQHJldHVybiB0cnVlIGlmIHRoZSBkaXJlY3RvcnkgZXhpc3RzIG9yIHdhcyBjcmVhdGVkLCBmYWxzZSBvdGhlcndpc2VcbiAgIDI2OVx0ICAgICAqL1xuICAgMjcwXHQgICAgcHJpdmF0ZSBib29sZWFuIGVuc3VyZURpcmVjdG9yeUV4aXN0cyhTdHJpbmcgcGF0aCkge1xuICAgMjcxXHQgICAgICAgIHRyeSB7XG4gICAyNzJcdCAgICAgICAgICAgIGlmIChwYXRoID09IG51bGwgfHwgcGF0aC5pc0VtcHR5KCkpIHtcbiAgIDI3M1x0ICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNhdGVnb3J5SW1hZ2VTZXJ2bGV0IC0gRXJyb3I6IERpcmVjdG9yeSBwYXRoIGlzIG51bGwgb3IgZW1wdHlcIik7XG4gICAyNzRcdCAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAyNzVcdCAgICAgICAgICAgIH1cbiAgIDI3Nlx0XG4gICAyNzdcdCAgICAgICAgICAgIEZpbGUgZGlyID0gbmV3IEZpbGUocGF0aCk7XG4gICAyNzhcdCAgICAgICAgICAgIGlmIChkaXIuZXhpc3RzKCkpIHtcbiAgIDI3OVx0ICAgICAgICAgICAgICAgIGlmICghZGlyLmlzRGlyZWN0b3J5KCkpIHtcbiAgIDI4MFx0ICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJDYXRlZ29yeUltYWdlU2VydmxldCAtIEVycm9yOiBQYXRoIGV4aXN0cyBidXQgaXMgbm90IGEgZGlyZWN0b3J5OiBcIiArIHBhdGgpO1xuICAgMjgxXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgIDI4Mlx0ICAgICAgICAgICAgICAgIH1cbiAgIDI4M1x0ICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgMjg0XHQgICAgICAgICAgICB9XG4gICAyODVcdFxuICAgMjg2XHQgICAgICAgICAgICBib29sZWFuIGNyZWF0ZWQgPSBkaXIubWtkaXJzKCk7XG4gICAyODdcdCAgICAgICAgICAgIGlmICghY3JlYXRlZCkge1xuICAgMjg4XHQgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQ2F0ZWdvcnlJbWFnZVNlcnZsZXQgLSBFcnJvcjogRmFpbGVkIHRvIGNyZWF0ZSBkaXJlY3Rvcnk6IFwiICsgcGF0aCk7XG4gICAyODlcdCAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAyOTBcdCAgICAgICAgICAgIH1cbiAgIDI5MVx0XG4gICAyOTJcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNhdGVnb3J5SW1hZ2VTZXJ2bGV0IC0gQ3JlYXRlZCBkaXJlY3Rvcnk6IFwiICsgcGF0aCk7XG4gICAyOTNcdCAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgMjk0XHQgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAyOTVcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNhdGVnb3J5SW1hZ2VTZXJ2bGV0IC0gRXJyb3IgY3JlYXRpbmcgZGlyZWN0b3J5OiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgIDI5Nlx0ICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgIDI5N1x0ICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgMjk4XHQgICAgICAgIH1cbiAgIDI5OVx0ICAgIH1cbiAgIDMwMFx0fVxuICAgMzAxXHRcblRvdGFsIGxpbmVzIGluIGZpbGU6IDMwMVxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxUkZoRXEyZlZjNWdOakNhU1JraVZydiJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkM6L1VzZXJzL1VTRVIvTXVzaWMvY2xvdGhlZSBmaW5hbC9oeS9DbG90aGVlIiwiZm9sZGVyUm9vdCI6IkM6L1VzZXJzL1VTRVIvTXVzaWMvY2xvdGhlZSBmaW5hbC9oeS9DbG90aGVlIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0wOFQwOToyNToxNi4xMDJaIiwicmVzcG9uc2VfdGV4dCI6Ik5vdyBsZXQncyBjaGVjayB0aGUgaW5kZXguanNwIGZpbGUgdG8gc2VlIGhvdyBpdCdzIGxvYWRpbmcgdGhlIGltYWdlczpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiJlYzg3MDdlMC1hZjYyLTQ0YTQtOThlMC0yODE4NDVmODMzZDgiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFQamNVbVFQM0xZZnZDSG5qaWE2dlp6IiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJ2aWV3XCIsIFwicGF0aFwiOiBcIkNsb3RoZWUvc3JjL21haW4vd2ViYXBwL2luZGV4LmpzcFwiLCBcInZpZXdfcmFuZ2VcIjogWzEwMCwgMjAwXX0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiIifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIENsb3RoZWUvc3JjL21haW4vd2ViYXBwL2luZGV4LmpzcDpcbiAgICAgMVx0PCVAIHBhZ2UgbGFuZ3VhZ2U9XCJqYXZhXCIgY29udGVudFR5cGU9XCJ0ZXh0L2h0bWw7IGNoYXJzZXQ9VVRGLThcIiBwYWdlRW5jb2Rpbmc9XCJVVEYtOFwiJT5cbiAgICAgMlx0PCVAIHBhZ2UgaW1wb3J0PVwiamF2YS51dGlsLkxpc3RcIiAlPlxuICAgICAzXHQ8JUAgcGFnZSBpbXBvcnQ9XCJqYXZhLnV0aWwuQXJyYXlMaXN0XCIgJT5cbiAgICAgNFx0PCVAIHBhZ2UgaW1wb3J0PVwibW9kZWwuU2xpZGVcIiAlPlxuICAgICA1XHQ8JUAgcGFnZSBpbXBvcnQ9XCJtb2RlbC5DYXRlZ29yeVwiICU+XG4gICAgIDZcdDwlQCBwYWdlIGltcG9ydD1cImRhby5DYXRlZ29yeURBT1wiICU+XG4gICAgIDdcdDwlQCBwYWdlIGltcG9ydD1cImphdmEudXRpbC5DYWxlbmRhclwiICU+XG4gICAgIDhcdDwlQCBwYWdlIGltcG9ydD1cImphdmEudXRpbC5EYXRlXCIgJT5cbiAgICAgOVx0PCVAIGluY2x1ZGUgZmlsZT1cIi9pbmNsdWRlcy9oZWFkZXIuanNwXCIgJT5cbiAgICAxMFx0PGxpbmsgcmVsPVwic3R5bGVzaGVldFwiIHR5cGU9XCJ0ZXh0L2Nzc1wiIGhyZWY9XCJjc3Mvc3R5bGUuY3NzXCI+XG4gICAgMTFcdFxuICAgIDEyXHQ8JVxuICAgIDEzXHQvLyBEaXNwbGF5IHN1Y2Nlc3MgbWVzc2FnZSBpZiBhdmFpbGFibGVcbiAgICAxNFx0U3RyaW5nIG1lc3NhZ2UgPSByZXF1ZXN0LmdldFBhcmFtZXRlcihcIm1lc3NhZ2VcIik7XG4gICAgMTVcdGlmIChtZXNzYWdlICE9IG51bGwgJiYgIW1lc3NhZ2UuaXNFbXB0eSgpKSB7XG4gICAgMTZcdCU+XG4gICAgMTdcdDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1zdWNjZXNzXCIgc3R5bGU9XCJtYXJnaW46IDEwcHggYXV0bzsgbWF4LXdpZHRoOiA4MDBweDsgdGV4dC1hbGlnbjogY2VudGVyOyBwYWRkaW5nOiAxMHB4OyBiYWNrZ3JvdW5kLWNvbG9yOiAjZDRlZGRhOyBjb2xvcjogIzE1NTcyNDsgYm9yZGVyLXJhZGl1czogNXB4O1wiPlxuICAgIDE4XHQgICAgPCU9IG1lc3NhZ2UgJT5cbiAgICAxOVx0PC9kaXY+XG4gICAgMjBcdDwlIH0gJT5cbiAgICAyMVx0XG4gICAgMjJcdDwlXG4gICAgMjNcdCAgICAvLyBDcmVhdGUgc2xpZGVzIGRpcmVjdGx5IGluIHRoZSBKU1BcbiAgICAyNFx0ICAgIExpc3Q8U2xpZGU+IHNsaWRlcyA9IG5ldyBBcnJheUxpc3Q8PigpO1xuICAgIDI1XHRcbiAgICAyNlx0ICAgIC8vIEFkZCBzbGlkZXNcbiAgICAyN1x0ICAgIHNsaWRlcy5hZGQobmV3IFNsaWRlKFxuICAgIDI4XHQgICAgICAgIFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE0OTA0ODE2NTE4NzEtYWI2OGRlMjVkNDNkP2l4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTE3NzAmcT04MFwiLFxuICAgIDI5XHQgICAgICAgIFwiRWxldmF0ZSBZb3VyIFN0eWxlXCIsXG4gICAgMzBcdCAgICAgICAgXCJEaXNjb3ZlciB0aGUgbGF0ZXN0IHRyZW5kcyBpbiBmYXNoaW9uIGFuZCBleHByZXNzIHlvdXJzZWxmIHdpdGggb3VyIHByZW1pdW0gY29sbGVjdGlvbiBvZiBjbG90aGluZyBhbmQgYWNjZXNzb3JpZXMuXCIsXG4gICAgMzFcdCAgICAgICAgXCJQcm9kdWN0U2VydmxldD9jYXRlZ29yeT1uZXdcIixcbiAgICAzMlx0ICAgICAgICBcIlNob3AgTm93XCIsXG4gICAgMzNcdCAgICAgICAgXCJQcm9kdWN0U2VydmxldD9jYXRlZ29yeT1zYWxlXCIsXG4gICAgMzRcdCAgICAgICAgXCJWaWV3IFNhbGVcIlxuICAgIDM1XHQgICAgKSk7XG4gICAgMzZcdFxuICAgIDM3XHQgICAgc2xpZGVzLmFkZChuZXcgU2xpZGUoXG4gICAgMzhcdCAgICAgICAgXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTQ0NTIwNTE3MDIzMC0wNTNiODMwMTYwNTA/aXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9MTc3MSZxPTgwXCIsXG4gICAgMzlcdCAgICAgICAgXCJTdW1tZXIgQ29sbGVjdGlvbiAyMDIzXCIsXG4gICAgNDBcdCAgICAgICAgXCJCZWF0IHRoZSBoZWF0IHdpdGggb3VyIGNvb2wgYW5kIGNvbWZvcnRhYmxlIHN1bW1lciBjb2xsZWN0aW9uLlwiLFxuICAgIDQxXHQgICAgICAgIFwiUHJvZHVjdFNlcnZsZXQ/Y2F0ZWdvcnk9c3VtbWVyXCIsXG4gICAgNDJcdCAgICAgICAgXCJFeHBsb3JlIENvbGxlY3Rpb25cIixcbiAgICA0M1x0ICAgICAgICBudWxsLFxuICAgIDQ0XHQgICAgICAgIG51bGxcbiAgICA0NVx0ICAgICkpO1xuICAgIDQ2XHRcbiAgICA0N1x0ICAgIHNsaWRlcy5hZGQobmV3IFNsaWRlKFxuICAgIDQ4XHQgICAgICAgIFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE0NDE5ODQ5MDQ5OTYtZTBiNmJhNjg3ZTA0P2l4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTE3NzAmcT04MFwiLFxuICAgIDQ5XHQgICAgICAgIFwiRXhjbHVzaXZlIERpc2NvdW50c1wiLFxuICAgIDUwXHQgICAgICAgIFwiVXAgdG8gNTAlIG9mZiBvbiBzZWxlY3RlZCBpdGVtcy4gTGltaXRlZCB0aW1lIG9mZmVyIVwiLFxuICAgIDUxXHQgICAgICAgIFwiUHJvZHVjdFNlcnZsZXQ/Y2F0ZWdvcnk9c2FsZVwiLFxuICAgIDUyXHQgICAgICAgIFwiU2hvcCBTYWxlXCIsXG4gICAgNTNcdCAgICAgICAgbnVsbCxcbiAgICA1NFx0ICAgICAgICBudWxsXG4gICAgNTVcdCAgICApKTtcbiAgICA1Nlx0XG4gICAgNTdcdCAgICAvLyBHZXQgY3VycmVudCBzbGlkZSAoZGVmYXVsdCB0byAwKVxuICAgIDU4XHQgICAgaW50IGN1cnJlbnRTbGlkZSA9IDA7XG4gICAgNTlcdCAgICBTdHJpbmcgc2xpZGVQYXJhbSA9IHJlcXVlc3QuZ2V0UGFyYW1ldGVyKFwic2xpZGVcIik7XG4gICAgNjBcdCAgICBpZiAoc2xpZGVQYXJhbSAhPSBudWxsKSB7XG4gICAgNjFcdCAgICAgICAgaWYgKFwibmV4dFwiLmVxdWFscyhzbGlkZVBhcmFtKSkge1xuICAgIDYyXHQgICAgICAgICAgICBJbnRlZ2VyIHNlc3Npb25TbGlkZSA9IChJbnRlZ2VyKSBzZXNzaW9uLmdldEF0dHJpYnV0ZShcImN1cnJlbnRTbGlkZVwiKTtcbiAgICA2M1x0ICAgICAgICAgICAgaWYgKHNlc3Npb25TbGlkZSAhPSBudWxsKSB7XG4gICAgNjRcdCAgICAgICAgICAgICAgICBjdXJyZW50U2xpZGUgPSAoc2Vzc2lvblNsaWRlICsgMSkgJSBzbGlkZXMuc2l6ZSgpO1xuICAgIDY1XHQgICAgICAgICAgICB9XG4gICAgNjZcdCAgICAgICAgfSBlbHNlIGlmIChcInByZXZcIi5lcXVhbHMoc2xpZGVQYXJhbSkpIHtcbiAgICA2N1x0ICAgICAgICAgICAgSW50ZWdlciBzZXNzaW9uU2xpZGUgPSAoSW50ZWdlcikgc2Vzc2lvbi5nZXRBdHRyaWJ1dGUoXCJjdXJyZW50U2xpZGVcIik7XG4gICAgNjhcdCAgICAgICAgICAgIGlmIChzZXNzaW9uU2xpZGUgIT0gbnVsbCkge1xuICAgIDY5XHQgICAgICAgICAgICAgICAgY3VycmVudFNsaWRlID0gKHNlc3Npb25TbGlkZSAtIDEgKyBzbGlkZXMuc2l6ZSgpKSAlIHNsaWRlcy5zaXplKCk7XG4gICAgNzBcdCAgICAgICAgICAgIH1cbiAgICA3MVx0ICAgICAgICB9IGVsc2Uge1xuICAgIDcyXHQgICAgICAgICAgICB0cnkge1xuICAgIDczXHQgICAgICAgICAgICAgICAgY3VycmVudFNsaWRlID0gSW50ZWdlci5wYXJzZUludChzbGlkZVBhcmFtKTtcbiAgICA3NFx0ICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U2xpZGUgPCAwIHx8IGN1cnJlbnRTbGlkZSA+PSBzbGlkZXMuc2l6ZSgpKSB7XG4gICAgNzVcdCAgICAgICAgICAgICAgICAgICAgY3VycmVudFNsaWRlID0gMDtcbiAgICA3Nlx0ICAgICAgICAgICAgICAgIH1cbiAgICA3N1x0ICAgICAgICAgICAgfSBjYXRjaCAoTnVtYmVyRm9ybWF0RXhjZXB0aW9uIGUpIHtcbiAgICA3OFx0ICAgICAgICAgICAgICAgIGN1cnJlbnRTbGlkZSA9IDA7XG4gICAgNzlcdCAgICAgICAgICAgIH1cbiAgICA4MFx0ICAgICAgICB9XG4gICAgODFcdCAgICB9XG4gICAgODJcdFxuICAgIDgzXHQgICAgLy8gU3RvcmUgY3VycmVudCBzbGlkZSBpbiBzZXNzaW9uXG4gICAgODRcdCAgICBzZXNzaW9uLnNldEF0dHJpYnV0ZShcImN1cnJlbnRTbGlkZVwiLCBjdXJyZW50U2xpZGUpO1xuICAgIDg1XHRcbiAgICA4Nlx0ICAgIC8vIENvdW50ZG93biB0aW1lciBjYWxjdWxhdGlvbiByZW1vdmVkIGFzIHJlcXVlc3RlZFxuICAgIDg3XHQlPlxuICAgIDg4XHRcbiAgICA4OVx0PCEtLSBBZG1pbiBMb2dpbiBCYW5uZXIgLS0+XG4gICAgOTBcdDwlIGlmIChzZXNzaW9uLmdldEF0dHJpYnV0ZShcInVzZXJSb2xlXCIpID09IG51bGwpIHsgJT5cbiAgICA5MVx0PGRpdiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6ICM0YTZiZGY7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogMTBweCAwOyB0ZXh0LWFsaWduOiBjZW50ZXI7XCI+XG4gICAgOTJcdCAgICA8ZGl2IHN0eWxlPVwiZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGdhcDogMjBweDtcIj5cbiAgICA5M1x0ICAgICAgICA8ZGl2IHN0eWxlPVwiZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZ2FwOiAxMHB4O1wiPlxuICAgIDk0XHQgICAgICAgICAgICA8aSBjbGFzcz1cImZhcyBmYS11c2VyLXNoaWVsZFwiIHN0eWxlPVwiZm9udC1zaXplOiAxOHB4O1wiPjwvaT5cbiAgICA5NVx0ICAgICAgICAgICAgPHNwYW4+QWRtaW4/IDxhIGhyZWY9XCJkaXJlY3QtYWRtaW4tbG9naW4uanNwXCIgc3R5bGU9XCJjb2xvcjogd2hpdGU7IHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lOyBmb250LXdlaWdodDogYm9sZDtcIj5Mb2dpbiBoZXJlPC9hPjwvc3Bhbj5cbiAgICA5Nlx0ICAgICAgICA8L2Rpdj5cbiAgICA5N1x0ICAgICAgICA8ZGl2IHN0eWxlPVwiZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZ2FwOiAxMHB4O1wiPlxuICAgIDk4XHQgICAgICAgICAgICA8aSBjbGFzcz1cImZhcyBmYS11c2VyLXBsdXNcIiBzdHlsZT1cImZvbnQtc2l6ZTogMThweDtcIj48L2k+XG4gICAgOTlcdCAgICAgICAgICAgIDxzcGFuPk5ldyB1c2VyPyA8YSBocmVmPVwicmVnaXN0ZXIuanNwXCIgc3R5bGU9XCJjb2xvcjogd2hpdGU7IHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lOyBmb250LXdlaWdodDogYm9sZDtcIj5SZWdpc3RlciBoZXJlPC9hPjwvc3Bhbj5cbiAgIDEwMFx0ICAgICAgICA8L2Rpdj5cblRvdGFsIGxpbmVzIGluIGZpbGU6IDQxOVxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxRHl3Nm8zeXVkYmRVQ0Z0clhlZDRKYSJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkM6L1VzZXJzL1VTRVIvTXVzaWMvY2xvdGhlZSBmaW5hbC9oeS9DbG90aGVlIiwiZm9sZGVyUm9vdCI6IkM6L1VzZXJzL1VTRVIvTXVzaWMvY2xvdGhlZSBmaW5hbC9oeS9DbG90aGVlIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0wOFQwOToyNToyMC42MzBaIiwicmVzcG9uc2VfdGV4dCI6IiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiIyNTlkYmI0My00MDIyLTRjN2UtOWJjZC1jYjAwMDBkZDBlYWEiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFOTUhLdkpCNlNkb1gyN0E5dXo1ZUZhIiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJ2aWV3XCIsIFwicGF0aFwiOiBcIkNsb3RoZWUvc3JjL21haW4vd2ViYXBwL2luZGV4LmpzcFwiLCBcInZpZXdfcmFuZ2VcIjogWzIwMCwgMzAwXX0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiIifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIENsb3RoZWUvc3JjL21haW4vd2ViYXBwL2luZGV4LmpzcDpcbiAgIDEwMFx0ICAgICAgICA8L2Rpdj5cbiAgIDEwMVx0ICAgIDwvZGl2PlxuICAgMTAyXHQ8L2Rpdj5cbiAgIDEwM1x0PCUgfSAlPlxuICAgMTA0XHRcbiAgIDEwNVx0PCEtLSBIZXJvIFNlY3Rpb24gd2l0aCBNb2Rlcm4gU2xpZGVyIC0tPlxuICAgMTA2XHQ8c2VjdGlvbiBjbGFzcz1cImhlcm8tc2xpZGVyXCI+XG4gICAxMDdcdCAgICA8ZGl2IGNsYXNzPVwic2xpZGVyLWNvbnRhaW5lclwiPlxuICAgMTA4XHQgICAgICAgIDwlXG4gICAxMDlcdCAgICAgICAgaWYgKHNsaWRlcyAhPSBudWxsICYmICFzbGlkZXMuaXNFbXB0eSgpKSB7XG4gICAxMTBcdCAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgc2xpZGVzLnNpemUoKTsgaSsrKSB7XG4gICAxMTFcdCAgICAgICAgICAgICAgICBTbGlkZSBzbGlkZSA9IHNsaWRlcy5nZXQoaSk7XG4gICAxMTJcdCAgICAgICAgJT5cbiAgIDExM1x0ICAgICAgICA8ZGl2IGNsYXNzPVwic2xpZGUgPCU9IGkgPT0gY3VycmVudFNsaWRlID8gXCJhY3RpdmVcIiA6IFwiXCIgJT5cIj5cbiAgIDExNFx0ICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNsaWRlLWJnXCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJzwlPSBzbGlkZS5nZXRJbWFnZVVybCgpICU+Jyk7XCI+PC9kaXY+XG4gICAxMTVcdCAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzbGlkZS1vdmVybGF5XCI+PC9kaXY+XG4gICAxMTZcdCAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzbGlkZS1jb250ZW50XCI+XG4gICAxMTdcdCAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic2xpZGUtdGV4dC1jb250YWluZXJcIj5cbiAgIDExOFx0ICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3M9XCJzbGlkZS10aXRsZVwiPjwlPSBzbGlkZS5nZXRUaXRsZSgpICU+PC9oMT5cbiAgIDExOVx0ICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cInNsaWRlLXN1YnRpdGxlXCI+PCU9IHNsaWRlLmdldFN1YnRpdGxlKCkgJT48L3A+XG4gICAxMjBcdCAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNsaWRlLWJ1dHRvbnNcIj5cbiAgIDEyMVx0ICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIjwlPSBzbGlkZS5nZXRQcmltYXJ5QnV0dG9uVXJsKCkgJT5cIiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeVwiPjwlPSBzbGlkZS5nZXRQcmltYXJ5QnV0dG9uVGV4dCgpICU+PC9hPlxuICAgMTIyXHQgICAgICAgICAgICAgICAgICAgICAgICA8JSBpZiAoc2xpZGUuZ2V0U2Vjb25kYXJ5QnV0dG9uVXJsKCkgIT0gbnVsbCAmJiBzbGlkZS5nZXRTZWNvbmRhcnlCdXR0b25UZXh0KCkgIT0gbnVsbCkgeyAlPlxuICAgMTIzXHQgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiPCU9IHNsaWRlLmdldFNlY29uZGFyeUJ1dHRvblVybCgpICU+XCIgY2xhc3M9XCJidG4gYnRuLW91dGxpbmVcIj48JT0gc2xpZGUuZ2V0U2Vjb25kYXJ5QnV0dG9uVGV4dCgpICU+PC9hPlxuICAgMTI0XHQgICAgICAgICAgICAgICAgICAgICAgICA8JSB9ICU+XG4gICAxMjVcdCAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAxMjZcdCAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgIDEyN1x0ICAgICAgICAgICAgPC9kaXY+XG4gICAxMjhcdCAgICAgICAgPC9kaXY+XG4gICAxMjlcdCAgICAgICAgPCVcbiAgIDEzMFx0ICAgICAgICAgICAgfVxuICAgMTMxXHQgICAgICAgIH1cbiAgIDEzMlx0ICAgICAgICAlPlxuICAgMTMzXHQgICAgICAgIDxhIGhyZWY9XCJpbmRleC5qc3A/c2xpZGU9cHJldlwiIGNsYXNzPVwic2xpZGVyLWFycm93IHByZXZcIj48aSBjbGFzcz1cImZhcyBmYS1jaGV2cm9uLWxlZnRcIj48L2k+PC9hPlxuICAgMTM0XHQgICAgICAgIDxhIGhyZWY9XCJpbmRleC5qc3A/c2xpZGU9bmV4dFwiIGNsYXNzPVwic2xpZGVyLWFycm93IG5leHRcIj48aSBjbGFzcz1cImZhcyBmYS1jaGV2cm9uLXJpZ2h0XCI+PC9pPjwvYT5cbiAgIDEzNVx0ICAgICAgICA8ZGl2IGNsYXNzPVwic2xpZGVyLWRvdHNcIj5cbiAgIDEzNlx0ICAgICAgICAgICAgPCVcbiAgIDEzN1x0ICAgICAgICAgICAgaWYgKHNsaWRlcyAhPSBudWxsKSB7XG4gICAxMzhcdCAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHNsaWRlcy5zaXplKCk7IGkrKykge1xuICAgMTM5XHQgICAgICAgICAgICAlPlxuICAgMTQwXHQgICAgICAgICAgICA8YSBocmVmPVwiaW5kZXguanNwP3NsaWRlPTwlPSBpICU+XCIgY2xhc3M9XCJkb3QgPCU9IGkgPT0gY3VycmVudFNsaWRlID8gXCJhY3RpdmVcIiA6IFwiXCIgJT5cIiBkYXRhLXNsaWRlPVwiPCU9IGkgJT5cIj48L2E+XG4gICAxNDFcdCAgICAgICAgICAgIDwlXG4gICAxNDJcdCAgICAgICAgICAgICAgICB9XG4gICAxNDNcdCAgICAgICAgICAgIH1cbiAgIDE0NFx0ICAgICAgICAgICAgJT5cbiAgIDE0NVx0ICAgICAgICA8L2Rpdj5cbiAgIDE0Nlx0ICAgIDwvZGl2PlxuICAgMTQ3XHQ8L3NlY3Rpb24+XG4gICAxNDhcdFxuICAgMTQ5XHQ8IS0tIEZlYXR1cmVzIFNlY3Rpb24gd2l0aCBNb2Rlcm4gRGVzaWduIC0tPlxuICAgMTUwXHQ8c2VjdGlvbiBjbGFzcz1cImZlYXR1cmVzXCI+XG4gICAxNTFcdCAgICA8ZGl2IGNsYXNzPVwiY29udGFpbmVyXCI+XG4gICAxNTJcdCAgICAgICAgPGRpdiBjbGFzcz1cImZlYXR1cmVzLWdyaWRcIj5cbiAgIDE1M1x0ICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZlYXR1cmUtaXRlbVwiPlxuICAgMTU0XHQgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZlYXR1cmUtaWNvblwiPlxuICAgMTU1XHQgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpY29uLWNpcmNsZVwiPlxuICAgMTU2XHQgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImZhcyBmYS10cnVja1wiPjwvaT5cbiAgIDE1N1x0ICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgIDE1OFx0ICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgMTU5XHQgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZlYXR1cmUtY29udGVudFwiPlxuICAgMTYwXHQgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzcz1cImZlYXR1cmUtdGl0bGVcIj5GcmVlIFNoaXBwaW5nPC9oMz5cbiAgIDE2MVx0ICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImZlYXR1cmUtdGV4dFwiPk9uIGFsbCBvcmRlcnMgb3ZlciAkNTA8L3A+XG4gICAxNjJcdCAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgIDE2M1x0ICAgICAgICAgICAgPC9kaXY+XG4gICAxNjRcdCAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmZWF0dXJlLWl0ZW1cIj5cbiAgIDE2NVx0ICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmZWF0dXJlLWljb25cIj5cbiAgIDE2Nlx0ICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaWNvbi1jaXJjbGVcIj5cbiAgIDE2N1x0ICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYXMgZmEtdW5kb1wiPjwvaT5cbiAgIDE2OFx0ICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgIDE2OVx0ICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgMTcwXHQgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZlYXR1cmUtY29udGVudFwiPlxuICAgMTcxXHQgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzcz1cImZlYXR1cmUtdGl0bGVcIj5FYXN5IFJldHVybnM8L2gzPlxuICAgMTcyXHQgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwiZmVhdHVyZS10ZXh0XCI+MzAgZGF5cyByZXR1cm4gcG9saWN5PC9wPlxuICAgMTczXHQgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAxNzRcdCAgICAgICAgICAgIDwvZGl2PlxuICAgMTc1XHQgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmVhdHVyZS1pdGVtIHN1cHBvcnQtMjQ3XCI+XG4gICAxNzZcdCAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmVhdHVyZS1pY29uXCI+XG4gICAxNzdcdCAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImljb24tY2lyY2xlXCI+XG4gICAxNzhcdCAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwiZmFzIGZhLWhlYWRzZXRcIj48L2k+XG4gICAxNzlcdCAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAxODBcdCAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgIDE4MVx0ICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmZWF0dXJlLWNvbnRlbnRcIj5cbiAgIDE4Mlx0ICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3M9XCJmZWF0dXJlLXRpdGxlXCI+MjQvNyBTdXBwb3J0PC9oMz5cbiAgIDE4M1x0ICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImZlYXR1cmUtdGV4dFwiPkRlZGljYXRlZCBzdXBwb3J0IHRlYW08L3A+XG4gICAxODRcdCAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgIDE4NVx0ICAgICAgICAgICAgPC9kaXY+XG4gICAxODZcdCAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmZWF0dXJlLWl0ZW1cIj5cbiAgIDE4N1x0ICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmZWF0dXJlLWljb25cIj5cbiAgIDE4OFx0ICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaWNvbi1jaXJjbGVcIj5cbiAgIDE4OVx0ICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYXMgZmEtbG9ja1wiPjwvaT5cbiAgIDE5MFx0ICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgIDE5MVx0ICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgMTkyXHQgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZlYXR1cmUtY29udGVudFwiPlxuICAgMTkzXHQgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzcz1cImZlYXR1cmUtdGl0bGVcIj5TZWN1cmUgUGF5bWVudDwvaDM+XG4gICAxOTRcdCAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJmZWF0dXJlLXRleHRcIj4xMDAlIHNlY3VyZSBjaGVja291dDwvcD5cbiAgIDE5NVx0ICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgMTk2XHQgICAgICAgICAgICA8L2Rpdj5cbiAgIDE5N1x0ICAgICAgICA8L2Rpdj5cbiAgIDE5OFx0ICAgIDwvZGl2PlxuICAgMTk5XHQ8L3NlY3Rpb24+XG4gICAyMDBcdFxuVG90YWwgbGluZXMgaW4gZmlsZTogNDE5XG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFQamNVbVFQM0xZZnZDSG5qaWE2dlp6In19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiQzovVXNlcnMvVVNFUi9NdXNpYy9jbG90aGVlIGZpbmFsL2h5L0Nsb3RoZWUiLCJmb2xkZXJSb290IjoiQzovVXNlcnMvVVNFUi9NdXNpYy9jbG90aGVlIGZpbmFsL2h5L0Nsb3RoZWUifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTA4VDA5OjI1OjI0LjYxNVoiLCJyZXNwb25zZV90ZXh0IjoiIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6ImJkNTZlZWI4LTc4ZjgtNDM4MS1hMTQ4LTFiYjNlMjVlZGY3MyIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMUJDSHNyc2pxcEg3aW9jYzQ0aE03bnMiLCJ0b29sX25hbWUiOiJzdHItcmVwbGFjZS1lZGl0b3IiLCJpbnB1dF9qc29uIjoie1wiY29tbWFuZFwiOiBcInN0cl9yZXBsYWNlXCIsIFwicGF0aFwiOiBcIkNsb3RoZWUvc3JjL21haW4vd2ViYXBwL2luZGV4LmpzcFwiLCBcInN0cl9yZXBsYWNlX2VudHJpZXNcIjogW3tcIm9sZF9zdHJcIjogXCIgICAgICAgICAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICAgICAgICAgIC8vIFVzZSB0aGUgaW1hZ2UgZnJvbSB0aGUgZGF0YWJhc2VcXG4gICAgICAgICAgICAgICAgICAgIGltYWdlVXJsID0gcmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXFxcIi9cXFwiICsgaW1hZ2VVcmw7XFxuICAgICAgICAgICAgICAgIH1cIiwgXCJuZXdfc3RyXCI6IFwiICAgICAgICAgICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgICAgICAgICAvLyBVc2UgdGhlIGltYWdlIGZyb20gdGhlIGRhdGFiYXNlXFxuICAgICAgICAgICAgICAgICAgICAvLyBGaXJzdCBjaGVjayBpZiB0aGUgZmlsZSBleGlzdHMgaW4gdGhlIHdlYmFwcCBkaXJlY3RvcnlcXG4gICAgICAgICAgICAgICAgICAgIFN0cmluZyB3ZWJhcHBQYXRoID0gcmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXFxcIi9cXFwiICsgaW1hZ2VVcmw7XFxuICAgICAgICAgICAgICAgICAgICBcXG4gICAgICAgICAgICAgICAgICAgIC8vIEFsc28gY2hlY2sgaWYgaXQgZXhpc3RzIGluIHRoZSBwZXJtYW5lbnQgc3RvcmFnZSBsb2NhdGlvblxcbiAgICAgICAgICAgICAgICAgICAgU3RyaW5nIHVzZXJIb21lID0gU3lzdGVtLmdldFByb3BlcnR5KFxcXCJ1c2VyLmhvbWVcXFwiKTtcXG4gICAgICAgICAgICAgICAgICAgIFN0cmluZyBwZXJtYW5lbnRQYXRoID0gdXNlckhvbWUgKyBGaWxlLnNlcGFyYXRvciArIFxcXCJDbG90aGVlSW1hZ2VzXFxcIiArIEZpbGUuc2VwYXJhdG9yICsgaW1hZ2VVcmw7XFxuICAgICAgICAgICAgICAgICAgICBGaWxlIHBlcm1hbmVudEZpbGUgPSBuZXcgRmlsZShwZXJtYW5lbnRQYXRoKTtcXG4gICAgICAgICAgICAgICAgICAgIFxcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBlcm1hbmVudEZpbGUuZXhpc3RzKCkpIHtcXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgZmlsZSBleGlzdHMgaW4gcGVybWFuZW50IHN0b3JhZ2UsIGNyZWF0ZSBhIHNlcnZsZXQgdG8gc2VydmUgaXRcXG4gICAgICAgICAgICAgICAgICAgICAgICBpbWFnZVVybCA9IHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFxcXCIvQ2F0ZWdvcnlJbWFnZVNlcnZsZXQ/aWQ9XFxcIiArIGNhdGVnb3J5LmdldElkKCk7XFxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE90aGVyd2lzZSB1c2UgdGhlIHdlYmFwcCBwYXRoXFxuICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2VVcmwgPSB3ZWJhcHBQYXRoO1xcbiAgICAgICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICB9XCIsIFwib2xkX3N0cl9zdGFydF9saW5lX251bWJlclwiOiAyMzEsIFwib2xkX3N0cl9lbmRfbGluZV9udW1iZXJcIjogMjM0fV19IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiQmFzZWQgb24gbXkgYW5hbHlzaXMsIEkgY2FuIHNlZSB0aGF0IHlvdXIgYXBwbGljYXRpb24gaXMgYWxyZWFkeSBzZXQgdXAgdG8gaGFuZGxlIHBlcnNpc3RlbnQgaW1hZ2Ugc3RvcmFnZSwgYnV0IHRoZXJlIG1pZ2h0IGJlIHNvbWUgaXNzdWVzIHdpdGggdGhlIGltcGxlbWVudGF0aW9uLiBMZXQgbWUgZXhwbGFpbiB0aGUgcHJvYmxlbSBhbmQgcHJvdmlkZSBhIHNvbHV0aW9uLlxuXG4jIyBUaGUgUHJvYmxlbVxuXG4xLiAqKkltYWdlIFN0b3JhZ2UgTG9jYXRpb24qKjogWW91ciBgQ2F0ZWdvcnlJbWFnZVNlcnZsZXQuamF2YWAgaXMgdHJ5aW5nIHRvIHNhdmUgaW1hZ2VzIGluIHR3byBwbGFjZXM6XG4gICAtIEEgdGVtcG9yYXJ5IGRlcGxveW1lbnQgZGlyZWN0b3J5IHRoYXQgZ2V0cyB3aXBlZCB3aGVuIHRoZSBzZXJ2ZXIgcmVzdGFydHNcbiAgIC0gQSBwZXJtYW5lbnQgZGlyZWN0b3J5IGluIHRoZSB1c2VyJ3MgaG9tZSBmb2xkZXIgKGB+L0Nsb3RoZWVJbWFnZXMvaW1hZ2VzL2NhdGVnb3JpZXNgKVxuXG4yLiAqKlRoZSBJc3N1ZSoqOiBUaGUgcGVybWFuZW50IHN0b3JhZ2Ugc2VlbXMgdG8gYmUgd29ya2luZyAobGluZXMgMTA2LTE2NyBpbiBDYXRlZ29yeUltYWdlU2VydmxldC5qYXZhKSwgYnV0IHRoZXJlIG1pZ2h0IGJlIHBlcm1pc3Npb24gaXNzdWVzIG9yIHRoZSBkaXJlY3Rvcnkgc3RydWN0dXJlIGlzbid0IGJlaW5nIGNyZWF0ZWQgcHJvcGVybHkuXG5cbiMjIFNvbHV0aW9uXG5cbkhlcmUncyB3aGF0IHlvdSBuZWVkIHRvIGRvIHRvIGVuc3VyZSBjYXRlZ29yeSBpbWFnZXMgcGVyc2lzdCBhY3Jvc3Mgc2VydmVyIHJlc3RhcnRzOlxuXG4jIyMgMS4gTWFrZSBzdXJlIHRoZSBpbWFnZXMgZGlyZWN0b3J5IGV4aXN0cyBhbmQgaGFzIHByb3BlciBwZXJtaXNzaW9uc1xuXG5GaXJzdCwgY3JlYXRlIHRoZSBuZWNlc3NhcnkgZGlyZWN0b3J5IHN0cnVjdHVyZSBtYW51YWxseTpcblxuYGBgXG5DOlxcVXNlcnNcXFtZT1VSX1VTRVJOQU1FXVxcQ2xvdGhlZUltYWdlc1xcaW1hZ2VzXFxjYXRlZ29yaWVzXG5gYGBcblxuTWFrZSBzdXJlIHRoaXMgZGlyZWN0b3J5IGhhcyB3cml0ZSBwZXJtaXNzaW9ucyBmb3IgdGhlIHVzZXIgcnVubmluZyB0aGUgVG9tY2F0IHNlcnZlci5cblxuIyMjIDIuIFVwbG9hZCBjYXRlZ29yeSBpbWFnZXMgdGhyb3VnaCB0aGUgYWRtaW4gaW50ZXJmYWNlXG5cbjEuIExvZyBpbiBhcyBhbiBhZG1pbiB1c2VyIChsaWtlIFwic2l0YUBleGFtcGxlLmNvbVwiIHdpdGggcGFzc3dvcmQgXCJwYXNzd29yZDQ1NlwiKVxuMi4gR28gdG8gQWRtaW4gPiBDYXRlZ29yaWVzXG4zLiBGb3IgZWFjaCBjYXRlZ29yeSwgY2xpY2sgdGhlIFwiSW1hZ2VcIiBidXR0b25cbjQuIFVwbG9hZCBhbiBpbWFnZSBmb3IgZWFjaCBjYXRlZ29yeVxuXG4jIyMgMy4gVmVyaWZ5IHRoZSBpbWFnZXMgYXJlIGJlaW5nIHNhdmVkIGNvcnJlY3RseVxuXG5BZnRlciB1cGxvYWRpbmcsIGNoZWNrIGlmIHRoZSBpbWFnZXMgYXJlIHNhdmVkIGluOlxuYGBgXG5DOlxcVXNlcnNcXFtZT1VSX1VTRVJOQU1FXVxcQ2xvdGhlZUltYWdlc1xcaW1hZ2VzXFxjYXRlZ29yaWVzXG5gYGBcblxuWW91IHNob3VsZCBzZWUgZmlsZXMgbmFtZWQgbGlrZSBgY2F0ZWdvcnlfMS5qcGdgLCBgY2F0ZWdvcnlfMi5qcGdgLCBldGMuXG5cbiMjIyA0LiBNb2RpZnkgaW5kZXguanNwIHRvIGNoZWNrIGJvdGggbG9jYXRpb25zIGZvciBpbWFnZXNcblxuVG8gbWFrZSB5b3VyIGFwcGxpY2F0aW9uIG1vcmUgcm9idXN0LCB5b3UgY2FuIG1vZGlmeSB0aGUgaW5kZXguanNwIGZpbGUgdG8gY2hlY2sgYm90aCB0aGUgd2ViYXBwIGRpcmVjdG9yeSBhbmQgdGhlIHBlcm1hbmVudCBzdG9yYWdlIGxvY2F0aW9uIGZvciBpbWFnZXM6XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIENsb3RoZWUvc3JjL21haW4vd2ViYXBwL2luZGV4LmpzcDpcbiAgIDIwMFx0XG4gICAyMDFcdDwhLS0gQ2F0ZWdvcmllcyBTZWN0aW9uIC0tPlxuICAgMjAyXHQ8c2VjdGlvbiBjbGFzcz1cImNhdGVnb3JpZXNcIj5cbiAgIDIwM1x0ICAgIDxkaXYgY2xhc3M9XCJjb250YWluZXJcIj5cbiAgIDIwNFx0ICAgICAgICA8ZGl2IGNsYXNzPVwic2VjdGlvbi10aXRsZVwiPlxuICAgMjA1XHQgICAgICAgICAgICA8aDI+U2hvcCBCeSBDYXRlZ29yeTwvaDI+XG4gICAyMDZcdCAgICAgICAgPC9kaXY+XG4gICAyMDdcdFxuICAgMjA4XHQgICAgICAgIDxkaXYgY2xhc3M9XCJjYXRlZ29yaWVzLWdyaWRcIj5cbiAgIDIwOVx0ICAgICAgICAgICAgPCVcbiAgIDIxMFx0ICAgICAgICAgICAgLy8gR2V0IGNhdGVnb3JpZXMgZnJvbSBkYXRhYmFzZVxuICAgMjExXHQgICAgICAgICAgICBDYXRlZ29yeURBTyBjYXRlZ29yeURBTyA9IG5ldyBDYXRlZ29yeURBTygpO1xuICAgMjEyXHQgICAgICAgICAgICBMaXN0PENhdGVnb3J5PiBjYXRlZ29yaWVzID0gY2F0ZWdvcnlEQU8uZ2V0QWxsQ2F0ZWdvcmllcygpO1xuICAgMjEzXHRcbiAgIDIxNFx0ICAgICAgICAgICAgLy8gRGlzcGxheSB1cCB0byA2IGNhdGVnb3JpZXNcbiAgIDIxNVx0ICAgICAgICAgICAgaW50IG1heENhdGVnb3JpZXMgPSBNYXRoLm1pbihjYXRlZ29yaWVzLnNpemUoKSwgNik7XG4gICAyMTZcdCAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbWF4Q2F0ZWdvcmllczsgaSsrKSB7XG4gICAyMTdcdCAgICAgICAgICAgICAgICBDYXRlZ29yeSBjYXRlZ29yeSA9IGNhdGVnb3JpZXMuZ2V0KGkpO1xuICAgMjE4XHQgICAgICAgICAgICAgICAgU3RyaW5nIGltYWdlVXJsID0gY2F0ZWdvcnkuZ2V0SW1hZ2VVcmwoKTtcbiAgIDIxOVx0ICAgICAgICAgICAgICAgIC8vIFVzZSBkZWZhdWx0IGltYWdlIGlmIG5vIGltYWdlIGlzIHNldFxuICAgMjIwXHQgICAgICAgICAgICAgICAgaWYgKGltYWdlVXJsID09IG51bGwgfHwgaW1hZ2VVcmwuaXNFbXB0eSgpKSB7XG4gICAyMjFcdCAgICAgICAgICAgICAgICAgICAgLy8gRGVmYXVsdCBpbWFnZXMgYmFzZWQgb24gY2F0ZWdvcnkgaW5kZXhcbiAgIDIyMlx0ICAgICAgICAgICAgICAgICAgICBTdHJpbmdbXSBkZWZhdWx0SW1hZ2VzID0ge1xuICAgMjIzXHQgICAgICAgICAgICAgICAgICAgICAgICBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTgxMDQ0Nzc3NTUwLTRjZmE2MDcwN2MwMz9peGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0QmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz03NzImcT04MFwiLFxuICAgMjI0XHQgICAgICAgICAgICAgICAgICAgICAgICBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNjE3MTM3OTY4NDI3LTg1OTI0YzgwMGEyMj9peGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0QmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz03NzQmcT04MFwiLFxuICAgMjI1XHQgICAgICAgICAgICAgICAgICAgICAgICBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTg0OTE3ODY1NDQyLWRlODlkZjc2YWZkMz9peGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0QmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz04NzAmcT04MFwiLFxuICAgMjI2XHQgICAgICAgICAgICAgICAgICAgICAgICBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTc2NTY2NTg4MDI4LTQxNDdmMzg0MmYyNz9peGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0QmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz03NjQmcT04MFwiLFxuICAgMjI3XHQgICAgICAgICAgICAgICAgICAgICAgICBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTUxMjMyODY0LTNmMDg5MGU1ODBkOT9peGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0QmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz02ODcmcT04MFwiLFxuICAgMjI4XHQgICAgICAgICAgICAgICAgICAgICAgICBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTYyMTU3ODczLTgxOGJjMDcyNmY2OD9peGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0QmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz02NTQmcT04MFwiXG4gICAyMjlcdCAgICAgICAgICAgICAgICAgICAgfTtcbiAgIDIzMFx0ICAgICAgICAgICAgICAgICAgICBpbWFnZVVybCA9IGRlZmF1bHRJbWFnZXNbaSAlIGRlZmF1bHRJbWFnZXMubGVuZ3RoXTtcbiAgIDIzMVx0ICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAyMzJcdCAgICAgICAgICAgICAgICAgICAgLy8gVXNlIHRoZSBpbWFnZSBmcm9tIHRoZSBkYXRhYmFzZVxuICAgMjMzXHQgICAgICAgICAgICAgICAgICAgIGltYWdlVXJsID0gcmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvXCIgKyBpbWFnZVVybDtcbiAgIDIzNFx0ICAgICAgICAgICAgICAgIH1cbiAgIDIzNVx0ICAgICAgICAgICAgJT5cbiAgIDIzNlx0ICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhdGVnb3J5LWNhcmRcIj5cbiAgIDIzN1x0ICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiPCU9IGltYWdlVXJsICU+XCIgYWx0PVwiPCU9IGNhdGVnb3J5LmdldE5hbWUoKSAlPlwiPlxuICAgMjM4XHQgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhdGVnb3J5LWNvbnRlbnRcIj5cbiAgIDIzOVx0ICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3M9XCJjYXRlZ29yeS10aXRsZVwiPjwlPSBjYXRlZ29yeS5nZXROYW1lKCkgJT48L2gzPlxuICAgMjQwXHQgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCJQcm9kdWN0U2VydmxldD9jYXRlZ29yeT08JT0gY2F0ZWdvcnkuZ2V0SWQoKSAlPlwiIGNsYXNzPVwiY2F0ZWdvcnktbGlua1wiPlNob3AgTm93IDxpIGNsYXNzPVwiZmFzIGZhLWFycm93LXJpZ2h0XCI+PC9pPjwvYT5cbiAgIDI0MVx0ICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgMjQyXHQgICAgICAgICAgICA8L2Rpdj5cbiAgIDI0M1x0ICAgICAgICAgICAgPCUgfSAlPlxuICAgMjQ0XHRcbiAgIDI0NVx0ICAgICAgICAgICAgPCUgaWYgKGNhdGVnb3JpZXMuaXNFbXB0eSgpKSB7ICU+XG4gICAyNDZcdCAgICAgICAgICAgIDwhLS0gRGVmYXVsdCBjYXRlZ29yaWVzIGlmIG5vIGNhdGVnb3JpZXMgaW4gZGF0YWJhc2UgLS0+XG4gICAyNDdcdCAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXRlZ29yeS1jYXJkXCI+XG4gICAyNDhcdCAgICAgICAgICAgICAgICA8aW1nIHNyYz1cImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTgxMDQ0Nzc3NTUwLTRjZmE2MDcwN2MwMz9peGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0QmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz03NzImcT04MFwiIGFsdD1cIldvbWVuJ3MgRmFzaGlvblwiPlxuICAgMjQ5XHQgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhdGVnb3J5LWNvbnRlbnRcIj5cbiAgIDI1MFx0ICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3M9XCJjYXRlZ29yeS10aXRsZVwiPldvbWVuJ3MgRmFzaGlvbjwvaDM+XG4gICAyNTFcdCAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIlByb2R1Y3RTZXJ2bGV0P2NhdGVnb3J5PXdvbWVuXCIgY2xhc3M9XCJjYXRlZ29yeS1saW5rXCI+U2hvcCBOb3cgPGkgY2xhc3M9XCJmYXMgZmEtYXJyb3ctcmlnaHRcIj48L2k+PC9hPlxuICAgMjUyXHQgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAyNTNcdCAgICAgICAgICAgIDwvZGl2PlxuICAgMjU0XHRcbiAgIDI1NVx0ICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhdGVnb3J5LWNhcmRcIj5cbiAgIDI1Nlx0ICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE2MTcxMzc5Njg0MjctODU5MjRjODAwYTIyP2l4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTc3NCZxPTgwXCIgYWx0PVwiTWVuJ3MgRmFzaGlvblwiPlxuICAgMjU3XHQgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhdGVnb3J5LWNvbnRlbnRcIj5cbiAgIDI1OFx0ICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3M9XCJjYXRlZ29yeS10aXRsZVwiPk1lbidzIEZhc2hpb248L2gzPlxuICAgMjU5XHQgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCJQcm9kdWN0U2VydmxldD9jYXRlZ29yeT1tZW5cIiBjbGFzcz1cImNhdGVnb3J5LWxpbmtcIj5TaG9wIE5vdyA8aSBjbGFzcz1cImZhcyBmYS1hcnJvdy1yaWdodFwiPjwvaT48L2E+XG4gICAyNjBcdCAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgIDI2MVx0ICAgICAgICAgICAgPC9kaXY+XG4gICAyNjJcdFxuICAgMjYzXHQgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2F0ZWdvcnktY2FyZFwiPlxuICAgMjY0XHQgICAgICAgICAgICAgICAgPGltZyBzcmM9XCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTU4NDkxNzg2NTQ0Mi1kZTg5ZGY3NmFmZDM/aXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9ODcwJnE9ODBcIiBhbHQ9XCJBY2Nlc3Nvcmllc1wiPlxuICAgMjY1XHQgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhdGVnb3J5LWNvbnRlbnRcIj5cbiAgIDI2Nlx0ICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3M9XCJjYXRlZ29yeS10aXRsZVwiPkFjY2Vzc29yaWVzPC9oMz5cbiAgIDI2N1x0ICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiUHJvZHVjdFNlcnZsZXQ/Y2F0ZWdvcnk9YWNjZXNzb3JpZXNcIiBjbGFzcz1cImNhdGVnb3J5LWxpbmtcIj5TaG9wIE5vdyA8aSBjbGFzcz1cImZhcyBmYS1hcnJvdy1yaWdodFwiPjwvaT48L2E+XG4gICAyNjhcdCAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgIDI2OVx0ICAgICAgICAgICAgPC9kaXY+XG4gICAyNzBcdCAgICAgICAgICAgIDwlIH0gJT5cbiAgIDI3MVx0ICAgICAgICA8L2Rpdj5cbiAgIDI3Mlx0ICAgIDwvZGl2PlxuICAgMjczXHQ8L3NlY3Rpb24+XG4gICAyNzRcdFxuICAgMjc1XHQ8IS0tIEZlYXR1cmVkIFByb2R1Y3RzIC0tPlxuICAgMjc2XHQ8c2VjdGlvbiBjbGFzcz1cImZlYXR1cmVkLXByb2R1Y3RzXCI+XG4gICAyNzdcdCAgICA8ZGl2IGNsYXNzPVwiY29udGFpbmVyXCI+XG4gICAyNzhcdCAgICAgICAgPGRpdiBjbGFzcz1cInNlY3Rpb24tdGl0bGVcIj5cbiAgIDI3OVx0ICAgICAgICAgICAgPGgyPkZlYXR1cmVkIFByb2R1Y3RzPC9oMj5cbiAgIDI4MFx0ICAgICAgICA8L2Rpdj5cbiAgIDI4MVx0XG4gICAyODJcdCAgICAgICAgPGRpdiBjbGFzcz1cInByb2R1Y3RzLWdyaWRcIj5cbiAgIDI4M1x0ICAgICAgICAgICAgPCEtLSBQcm9kdWN0IDIgLS0+XG4gICAyODRcdCAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwcm9kdWN0LWNhcmRcIj5cbiAgIDI4NVx0ICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwcm9kdWN0LWltZ1wiPlxuICAgMjg2XHQgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE2MTEzMTI0NDk0MDgtZmNlY2UyN2NkYmI3P2l4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTg2OSZxPTgwXCIgYWx0PVwiRGVuaW0gSmFja2V0XCI+XG4gICAyODdcdCAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJwcm9kdWN0LXRhZyB0YWctc2FsZVwiPi0yNSU8L3NwYW4+XG4gICAyODhcdCAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInByb2R1Y3QtYWN0aW9uc1wiPlxuICAgMjg5XHQgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiQ2FydFNlcnZsZXQ/YWN0aW9uPWFkZCZwcm9kdWN0SWQ9MiZxdWFudGl0eT0xXCIgY2xhc3M9XCJwcm9kdWN0LWFjdGlvbi1idG5cIj5cbiAgIDI5MFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwiZmFzIGZhLXNob3BwaW5nLWNhcnRcIj48L2k+XG4gICAyOTFcdCAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgIDI5Mlx0ICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIlByb2R1Y3RTZXJ2bGV0P2FjdGlvbj12aWV3JmlkPTJcIiBjbGFzcz1cInByb2R1Y3QtYWN0aW9uLWJ0blwiPlxuICAgMjkzXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYXMgZmEtZXllXCI+PC9pPlxuICAgMjk0XHQgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAyOTVcdCAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAyOTZcdCAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgIDI5N1x0ICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwcm9kdWN0LWluZm9cIj5cbiAgIDI5OFx0ICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInByb2R1Y3QtY2F0ZWdvcnlcIj5KYWNrZXRzPC9zcGFuPlxuICAgMjk5XHQgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzcz1cInByb2R1Y3QtdGl0bGVcIj5DbGFzc2ljIERlbmltIEphY2tldDwvaDM+XG4gICAzMDBcdCAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInByb2R1Y3QtcmF0aW5nXCI+XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiA0MTlcbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMU5NSEt2SkI2U2RvWDI3QTl1ejVlRmEifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJDOi9Vc2Vycy9VU0VSL011c2ljL2Nsb3RoZWUgZmluYWwvaHkvQ2xvdGhlZSIsImZvbGRlclJvb3QiOiJDOi9Vc2Vycy9VU0VSL011c2ljL2Nsb3RoZWUgZmluYWwvaHkvQ2xvdGhlZSJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMDhUMDk6MjU6MjkuNDIzWiIsInJlc3BvbnNlX3RleHQiOiJCYXNlZCBvbiBteSBhbmFseXNpcywgSSBjYW4gc2VlIHRoYXQgeW91ciBhcHBsaWNhdGlvbiBpcyBhbHJlYWR5IHNldCB1cCB0byBoYW5kbGUgcGVyc2lzdGVudCBpbWFnZSBzdG9yYWdlLCBidXQgdGhlcmUgbWlnaHQgYmUgc29tZSBpc3N1ZXMgd2l0aCB0aGUgaW1wbGVtZW50YXRpb24uIExldCBtZSBleHBsYWluIHRoZSBwcm9ibGVtIGFuZCBwcm92aWRlIGEgc29sdXRpb24uXG5cbiMjIFRoZSBQcm9ibGVtXG5cbjEuICoqSW1hZ2UgU3RvcmFnZSBMb2NhdGlvbioqOiBZb3VyIGBDYXRlZ29yeUltYWdlU2VydmxldC5qYXZhYCBpcyB0cnlpbmcgdG8gc2F2ZSBpbWFnZXMgaW4gdHdvIHBsYWNlczpcbiAgIC0gQSB0ZW1wb3JhcnkgZGVwbG95bWVudCBkaXJlY3RvcnkgdGhhdCBnZXRzIHdpcGVkIHdoZW4gdGhlIHNlcnZlciByZXN0YXJ0c1xuICAgLSBBIHBlcm1hbmVudCBkaXJlY3RvcnkgaW4gdGhlIHVzZXIncyBob21lIGZvbGRlciAoYH4vQ2xvdGhlZUltYWdlcy9pbWFnZXMvY2F0ZWdvcmllc2ApXG5cbjIuICoqVGhlIElzc3VlKio6IFRoZSBwZXJtYW5lbnQgc3RvcmFnZSBzZWVtcyB0byBiZSB3b3JraW5nIChsaW5lcyAxMDYtMTY3IGluIENhdGVnb3J5SW1hZ2VTZXJ2bGV0LmphdmEpLCBidXQgdGhlcmUgbWlnaHQgYmUgcGVybWlzc2lvbiBpc3N1ZXMgb3IgdGhlIGRpcmVjdG9yeSBzdHJ1Y3R1cmUgaXNuJ3QgYmVpbmcgY3JlYXRlZCBwcm9wZXJseS5cblxuIyMgU29sdXRpb25cblxuSGVyZSdzIHdoYXQgeW91IG5lZWQgdG8gZG8gdG8gZW5zdXJlIGNhdGVnb3J5IGltYWdlcyBwZXJzaXN0IGFjcm9zcyBzZXJ2ZXIgcmVzdGFydHM6XG5cbiMjIyAxLiBNYWtlIHN1cmUgdGhlIGltYWdlcyBkaXJlY3RvcnkgZXhpc3RzIGFuZCBoYXMgcHJvcGVyIHBlcm1pc3Npb25zXG5cbkZpcnN0LCBjcmVhdGUgdGhlIG5lY2Vzc2FyeSBkaXJlY3Rvcnkgc3RydWN0dXJlIG1hbnVhbGx5OlxuXG5gYGBcbkM6XFxVc2Vyc1xcW1lPVVJfVVNFUk5BTUVdXFxDbG90aGVlSW1hZ2VzXFxpbWFnZXNcXGNhdGVnb3JpZXNcbmBgYFxuXG5NYWtlIHN1cmUgdGhpcyBkaXJlY3RvcnkgaGFzIHdyaXRlIHBlcm1pc3Npb25zIGZvciB0aGUgdXNlciBydW5uaW5nIHRoZSBUb21jYXQgc2VydmVyLlxuXG4jIyMgMi4gVXBsb2FkIGNhdGVnb3J5IGltYWdlcyB0aHJvdWdoIHRoZSBhZG1pbiBpbnRlcmZhY2VcblxuMS4gTG9nIGluIGFzIGFuIGFkbWluIHVzZXIgKGxpa2UgXCJzaXRhQGV4YW1wbGUuY29tXCIgd2l0aCBwYXNzd29yZCBcInBhc3N3b3JkNDU2XCIpXG4yLiBHbyB0byBBZG1pbiA+IENhdGVnb3JpZXNcbjMuIEZvciBlYWNoIGNhdGVnb3J5LCBjbGljayB0aGUgXCJJbWFnZVwiIGJ1dHRvblxuNC4gVXBsb2FkIGFuIGltYWdlIGZvciBlYWNoIGNhdGVnb3J5XG5cbiMjIyAzLiBWZXJpZnkgdGhlIGltYWdlcyBhcmUgYmVpbmcgc2F2ZWQgY29ycmVjdGx5XG5cbkFmdGVyIHVwbG9hZGluZywgY2hlY2sgaWYgdGhlIGltYWdlcyBhcmUgc2F2ZWQgaW46XG5gYGBcbkM6XFxVc2Vyc1xcW1lPVVJfVVNFUk5BTUVdXFxDbG90aGVlSW1hZ2VzXFxpbWFnZXNcXGNhdGVnb3JpZXNcbmBgYFxuXG5Zb3Ugc2hvdWxkIHNlZSBmaWxlcyBuYW1lZCBsaWtlIGBjYXRlZ29yeV8xLmpwZ2AsIGBjYXRlZ29yeV8yLmpwZ2AsIGV0Yy5cblxuIyMjIDQuIE1vZGlmeSBpbmRleC5qc3AgdG8gY2hlY2sgYm90aCBsb2NhdGlvbnMgZm9yIGltYWdlc1xuXG5UbyBtYWtlIHlvdXIgYXBwbGljYXRpb24gbW9yZSByb2J1c3QsIHlvdSBjYW4gbW9kaWZ5IHRoZSBpbmRleC5qc3AgZmlsZSB0byBjaGVjayBib3RoIHRoZSB3ZWJhcHAgZGlyZWN0b3J5IGFuZCB0aGUgcGVybWFuZW50IHN0b3JhZ2UgbG9jYXRpb24gZm9yIGltYWdlczpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiJlZGNlY2I2Ny03NWE0LTQ0YzktOWU0OS1mNWRmOWZjNTVlNmEiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDE2cXdwcXhwTFdNU1Rnam5pVmpheEZRIiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJzdHJfcmVwbGFjZVwiLCBcInBhdGhcIjogXCJDbG90aGVlL3NyYy9tYWluL2phdmEvY29udHJvbGxlci9DYXRlZ29yeUltYWdlU2VydmxldC5qYXZhXCIsIFwic3RyX3JlcGxhY2VfZW50cmllc1wiOiBbe1wib2xkX3N0clwiOiBcIiAgICBwcm90ZWN0ZWQgdm9pZCBkb1Bvc3QoSHR0cFNlcnZsZXRSZXF1ZXN0IHJlcXVlc3QsIEh0dHBTZXJ2bGV0UmVzcG9uc2UgcmVzcG9uc2UpXFxuICAgICAgICAgICAgdGhyb3dzIFNlcnZsZXRFeGNlcHRpb24sIElPRXhjZXB0aW9uIHtcIiwgXCJuZXdfc3RyXCI6IFwiICAgIHByb3RlY3RlZCB2b2lkIGRvR2V0KEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBIdHRwU2VydmxldFJlc3BvbnNlIHJlc3BvbnNlKVxcbiAgICAgICAgICAgIHRocm93cyBTZXJ2bGV0RXhjZXB0aW9uLCBJT0V4Y2VwdGlvbiB7XFxuICAgICAgICAvLyBHZXQgY2F0ZWdvcnkgSUQgZnJvbSByZXF1ZXN0XFxuICAgICAgICBTdHJpbmcgY2F0ZWdvcnlJZFN0ciA9IHJlcXVlc3QuZ2V0UGFyYW1ldGVyKFxcXCJpZFxcXCIpO1xcbiAgICAgICAgXFxuICAgICAgICBpZiAoY2F0ZWdvcnlJZFN0ciA9PSBudWxsIHx8IGNhdGVnb3J5SWRTdHIuaXNFbXB0eSgpKSB7XFxuICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZEVycm9yKEh0dHBTZXJ2bGV0UmVzcG9uc2UuU0NfQkFEX1JFUVVFU1QsIFxcXCJDYXRlZ29yeSBJRCBpcyByZXF1aXJlZFxcXCIpO1xcbiAgICAgICAgICAgIHJldHVybjtcXG4gICAgICAgIH1cXG4gICAgICAgIFxcbiAgICAgICAgdHJ5IHtcXG4gICAgICAgICAgICBpbnQgY2F0ZWdvcnlJZCA9IEludGVnZXIucGFyc2VJbnQoY2F0ZWdvcnlJZFN0cik7XFxuICAgICAgICAgICAgXFxuICAgICAgICAgICAgLy8gR2V0IGNhdGVnb3J5IGZyb20gZGF0YWJhc2VcXG4gICAgICAgICAgICBDYXRlZ29yeSBjYXRlZ29yeSA9IGNhdGVnb3J5REFPLmdldENhdGVnb3J5QnlJZChjYXRlZ29yeUlkKTtcXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICBpZiAoY2F0ZWdvcnkgPT0gbnVsbCkge1xcbiAgICAgICAgICAgICAgICByZXNwb25zZS5zZW5kRXJyb3IoSHR0cFNlcnZsZXRSZXNwb25zZS5TQ19OT1RfRk9VTkQsIFxcXCJDYXRlZ29yeSBub3QgZm91bmRcXFwiKTtcXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICBTdHJpbmcgaW1hZ2VVcmwgPSBjYXRlZ29yeS5nZXRJbWFnZVVybCgpO1xcbiAgICAgICAgICAgIGlmIChpbWFnZVVybCA9PSBudWxsIHx8IGltYWdlVXJsLmlzRW1wdHkoKSkge1xcbiAgICAgICAgICAgICAgICByZXNwb25zZS5zZW5kRXJyb3IoSHR0cFNlcnZsZXRSZXNwb25zZS5TQ19OT1RfRk9VTkQsIFxcXCJDYXRlZ29yeSBoYXMgbm8gaW1hZ2VcXFwiKTtcXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICAvLyBHZXQgdGhlIHBlcm1hbmVudCBwYXRoIHRvIHRoZSBpbWFnZVxcbiAgICAgICAgICAgIFN0cmluZyB1c2VySG9tZSA9IFN5c3RlbS5nZXRQcm9wZXJ0eShcXFwidXNlci5ob21lXFxcIik7XFxuICAgICAgICAgICAgU3RyaW5nIHBlcm1hbmVudFBhdGggPSB1c2VySG9tZSArIEZpbGUuc2VwYXJhdG9yICsgXFxcIkNsb3RoZWVJbWFnZXNcXFwiICsgRmlsZS5zZXBhcmF0b3IgKyBpbWFnZVVybDtcXG4gICAgICAgICAgICBGaWxlIGltYWdlRmlsZSA9IG5ldyBGaWxlKHBlcm1hbmVudFBhdGgpO1xcbiAgICAgICAgICAgIFxcbiAgICAgICAgICAgIGlmICghaW1hZ2VGaWxlLmV4aXN0cygpKSB7XFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRFcnJvcihIdHRwU2VydmxldFJlc3BvbnNlLlNDX05PVF9GT1VORCwgXFxcIkltYWdlIGZpbGUgbm90IGZvdW5kXFxcIik7XFxuICAgICAgICAgICAgICAgIHJldHVybjtcXG4gICAgICAgICAgICB9XFxuICAgICAgICAgICAgXFxuICAgICAgICAgICAgLy8gU2V0IGNvbnRlbnQgdHlwZSBiYXNlZCBvbiBmaWxlIGV4dGVuc2lvblxcbiAgICAgICAgICAgIFN0cmluZyBmaWxlTmFtZSA9IGltYWdlRmlsZS5nZXROYW1lKCk7XFxuICAgICAgICAgICAgU3RyaW5nIGNvbnRlbnRUeXBlID0gXFxcImltYWdlL2pwZWdcXFwiOyAvLyBEZWZhdWx0XFxuICAgICAgICAgICAgXFxuICAgICAgICAgICAgaWYgKGZpbGVOYW1lLmVuZHNXaXRoKFxcXCIucG5nXFxcIikpIHtcXG4gICAgICAgICAgICAgICAgY29udGVudFR5cGUgPSBcXFwiaW1hZ2UvcG5nXFxcIjtcXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGZpbGVOYW1lLmVuZHNXaXRoKFxcXCIuZ2lmXFxcIikpIHtcXG4gICAgICAgICAgICAgICAgY29udGVudFR5cGUgPSBcXFwiaW1hZ2UvZ2lmXFxcIjtcXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGZpbGVOYW1lLmVuZHNXaXRoKFxcXCIuanBnXFxcIikgfHwgZmlsZU5hbWUuZW5kc1dpdGgoXFxcIi5qcGVnXFxcIikpIHtcXG4gICAgICAgICAgICAgICAgY29udGVudFR5cGUgPSBcXFwiaW1hZ2UvanBlZ1xcXCI7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIFxcbiAgICAgICAgICAgIHJlc3BvbnNlLnNldENvbnRlbnRUeXBlKGNvbnRlbnRUeXBlKTtcXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICAvLyBDb3B5IHRoZSBmaWxlIHRvIHRoZSByZXNwb25zZSBvdXRwdXQgc3RyZWFtXFxuICAgICAgICAgICAgdHJ5IChGaWxlSW5wdXRTdHJlYW0gaW4gPSBuZXcgRmlsZUlucHV0U3RyZWFtKGltYWdlRmlsZSk7XFxuICAgICAgICAgICAgICAgICBPdXRwdXRTdHJlYW0gb3V0ID0gcmVzcG9uc2UuZ2V0T3V0cHV0U3RyZWFtKCkpIHtcXG4gICAgICAgICAgICAgICAgXFxuICAgICAgICAgICAgICAgIGJ5dGVbXSBidWZmZXIgPSBuZXcgYnl0ZVs0MDk2XTtcXG4gICAgICAgICAgICAgICAgaW50IGJ5dGVzUmVhZDtcXG4gICAgICAgICAgICAgICAgXFxuICAgICAgICAgICAgICAgIHdoaWxlICgoYnl0ZXNSZWFkID0gaW4ucmVhZChidWZmZXIpKSAhPSAtMSkge1xcbiAgICAgICAgICAgICAgICAgICAgb3V0LndyaXRlKGJ1ZmZlciwgMCwgYnl0ZXNSZWFkKTtcXG4gICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgICBcXG4gICAgICAgIH0gY2F0Y2ggKE51bWJlckZvcm1hdEV4Y2VwdGlvbiBlKSB7XFxuICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZEVycm9yKEh0dHBTZXJ2bGV0UmVzcG9uc2UuU0NfQkFEX1JFUVVFU1QsIFxcXCJJbnZhbGlkIGNhdGVnb3J5IElEXFxcIik7XFxuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xcbiAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRFcnJvcihIdHRwU2VydmxldFJlc3BvbnNlLlNDX0lOVEVSTkFMX1NFUlZFUl9FUlJPUiwgXFxcIkVycm9yIHNlcnZpbmcgaW1hZ2U6IFxcXCIgKyBlLmdldE1lc3NhZ2UoKSk7XFxuICAgICAgICB9XFxuICAgIH1cXG4gICAgXFxuICAgIHByb3RlY3RlZCB2b2lkIGRvUG9zdChIdHRwU2VydmxldFJlcXVlc3QgcmVxdWVzdCwgSHR0cFNlcnZsZXRSZXNwb25zZSByZXNwb25zZSlcXG4gICAgICAgICAgICB0aHJvd3MgU2VydmxldEV4Y2VwdGlvbiwgSU9FeGNlcHRpb24ge1wiLCBcIm9sZF9zdHJfc3RhcnRfbGluZV9udW1iZXJcIjogMzksIFwib2xkX3N0cl9lbmRfbGluZV9udW1iZXJcIjogNDB9XX0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJOb3cgd2UgbmVlZCB0byBtb2RpZnkgdGhlIENhdGVnb3J5SW1hZ2VTZXJ2bGV0IHRvIHNlcnZlIGltYWdlcyBmcm9tIHRoZSBwZXJtYW5lbnQgc3RvcmFnZSBsb2NhdGlvbiB3aGVuIHJlcXVlc3RlZDpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgQ2xvdGhlZS9zcmMvbWFpbi93ZWJhcHAvaW5kZXguanNwLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgIDIyN1x0ICAgICAgICAgICAgICAgICAgICAgICAgXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTU1MTIzMjg2NC0zZjA4OTBlNTgwZDk/aXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9Njg3JnE9ODBcIixcbiAgIDIyOFx0ICAgICAgICAgICAgICAgICAgICAgICAgXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTU2MjE1Nzg3My04MThiYzA3MjZmNjg/aXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9NjU0JnE9ODBcIlxuICAgMjI5XHQgICAgICAgICAgICAgICAgICAgIH07XG4gICAyMzBcdCAgICAgICAgICAgICAgICAgICAgaW1hZ2VVcmwgPSBkZWZhdWx0SW1hZ2VzW2kgJSBkZWZhdWx0SW1hZ2VzLmxlbmd0aF07XG4gICAyMzFcdCAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgMjMyXHQgICAgICAgICAgICAgICAgICAgIC8vIFVzZSB0aGUgaW1hZ2UgZnJvbSB0aGUgZGF0YWJhc2VcbiAgIDIzM1x0ICAgICAgICAgICAgICAgICAgICAvLyBGaXJzdCBjaGVjayBpZiB0aGUgZmlsZSBleGlzdHMgaW4gdGhlIHdlYmFwcCBkaXJlY3RvcnlcbiAgIDIzNFx0ICAgICAgICAgICAgICAgICAgICBTdHJpbmcgd2ViYXBwUGF0aCA9IHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL1wiICsgaW1hZ2VVcmw7XG4gICAyMzVcdFxuICAgMjM2XHQgICAgICAgICAgICAgICAgICAgIC8vIEFsc28gY2hlY2sgaWYgaXQgZXhpc3RzIGluIHRoZSBwZXJtYW5lbnQgc3RvcmFnZSBsb2NhdGlvblxuICAgMjM3XHQgICAgICAgICAgICAgICAgICAgIFN0cmluZyB1c2VySG9tZSA9IFN5c3RlbS5nZXRQcm9wZXJ0eShcInVzZXIuaG9tZVwiKTtcbiAgIDIzOFx0ICAgICAgICAgICAgICAgICAgICBTdHJpbmcgcGVybWFuZW50UGF0aCA9IHVzZXJIb21lICsgRmlsZS5zZXBhcmF0b3IgKyBcIkNsb3RoZWVJbWFnZXNcIiArIEZpbGUuc2VwYXJhdG9yICsgaW1hZ2VVcmw7XG4gICAyMzlcdCAgICAgICAgICAgICAgICAgICAgRmlsZSBwZXJtYW5lbnRGaWxlID0gbmV3IEZpbGUocGVybWFuZW50UGF0aCk7XG4gICAyNDBcdFxuICAgMjQxXHQgICAgICAgICAgICAgICAgICAgIGlmIChwZXJtYW5lbnRGaWxlLmV4aXN0cygpKSB7XG4gICAyNDJcdCAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBmaWxlIGV4aXN0cyBpbiBwZXJtYW5lbnQgc3RvcmFnZSwgY3JlYXRlIGEgc2VydmxldCB0byBzZXJ2ZSBpdFxuICAgMjQzXHQgICAgICAgICAgICAgICAgICAgICAgICBpbWFnZVVybCA9IHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL0NhdGVnb3J5SW1hZ2VTZXJ2bGV0P2lkPVwiICsgY2F0ZWdvcnkuZ2V0SWQoKTtcbiAgIDI0NFx0ICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgMjQ1XHQgICAgICAgICAgICAgICAgICAgICAgICAvLyBPdGhlcndpc2UgdXNlIHRoZSB3ZWJhcHAgcGF0aFxuICAgMjQ2XHQgICAgICAgICAgICAgICAgICAgICAgICBpbWFnZVVybCA9IHdlYmFwcFBhdGg7XG4gICAyNDdcdCAgICAgICAgICAgICAgICAgICAgfVxuICAgMjQ4XHQgICAgICAgICAgICAgICAgfVxuICAgMjQ5XHQgICAgICAgICAgICAlPlxuICAgMjUwXHQgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2F0ZWdvcnktY2FyZFwiPlxuICAgMjUxXHQgICAgICAgICAgICAgICAgPGltZyBzcmM9XCI8JT0gaW1hZ2VVcmwgJT5cIiBhbHQ9XCI8JT0gY2F0ZWdvcnkuZ2V0TmFtZSgpICU+XCI+XG4gICAyNTJcdCAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2F0ZWdvcnktY29udGVudFwiPlxuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFCQ0hzcnNqcXBIN2lvY2M0NGhNN25zIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiQzovVXNlcnMvVVNFUi9NdXNpYy9jbG90aGVlIGZpbmFsL2h5L0Nsb3RoZWUiLCJmb2xkZXJSb290IjoiQzovVXNlcnMvVVNFUi9NdXNpYy9jbG90aGVlIGZpbmFsL2h5L0Nsb3RoZWUifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTA4VDA5OjI1OjQ4LjM2MloiLCJyZXNwb25zZV90ZXh0IjoiTm93IHdlIG5lZWQgdG8gbW9kaWZ5IHRoZSBDYXRlZ29yeUltYWdlU2VydmxldCB0byBzZXJ2ZSBpbWFnZXMgZnJvbSB0aGUgcGVybWFuZW50IHN0b3JhZ2UgbG9jYXRpb24gd2hlbiByZXF1ZXN0ZWQ6XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiNzQ3ZTcxZDYtNzY4ZS00MzU0LWJlODMtN2I1YWUxZWViZmJmIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxUDlIZm01dDlTU2dKTTNzdWNnQ3lFZiIsInRvb2xfbmFtZSI6ImNvZGViYXNlLXJldHJpZXZhbCIsImlucHV0X2pzb24iOiJ7XCJpbmZvcm1hdGlvbl9yZXF1ZXN0XCI6IFwiRmluZCB0aGUgd2ViLnhtbCBmaWxlIHRvIGNoZWNrIGlmIENhdGVnb3J5SW1hZ2VTZXJ2bGV0IGlzIHByb3Blcmx5IG1hcHBlZFwifSIsIm1jcF9zZXJ2ZXJfbmFtZSI6IiIsIm1jcF90b29sX25hbWUiOiIifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6Ik5vdyB3ZSBuZWVkIHRvIG1ha2Ugc3VyZSB0aGUgd2ViLnhtbCBmaWxlIGhhcyB0aGUgY29ycmVjdCBtYXBwaW5nIGZvciB0aGUgQ2F0ZWdvcnlJbWFnZVNlcnZsZXQ6XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIENsb3RoZWUvc3JjL21haW4vamF2YS9jb250cm9sbGVyL0NhdGVnb3J5SW1hZ2VTZXJ2bGV0LmphdmEuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlIGZvciBlbnRyeSB3aXRoIGluZGV4IFswXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgIDM1XHQgICAgICAgIHN1cGVyKCk7XG4gICAgMzZcdCAgICAgICAgY2F0ZWdvcnlEQU8gPSBuZXcgQ2F0ZWdvcnlEQU8oKTtcbiAgICAzN1x0ICAgIH1cbiAgICAzOFx0XG4gICAgMzlcdCAgICBwcm90ZWN0ZWQgdm9pZCBkb0dldChIdHRwU2VydmxldFJlcXVlc3QgcmVxdWVzdCwgSHR0cFNlcnZsZXRSZXNwb25zZSByZXNwb25zZSlcbiAgICA0MFx0ICAgICAgICAgICAgdGhyb3dzIFNlcnZsZXRFeGNlcHRpb24sIElPRXhjZXB0aW9uIHtcbiAgICA0MVx0ICAgICAgICAvLyBHZXQgY2F0ZWdvcnkgSUQgZnJvbSByZXF1ZXN0XG4gICAgNDJcdCAgICAgICAgU3RyaW5nIGNhdGVnb3J5SWRTdHIgPSByZXF1ZXN0LmdldFBhcmFtZXRlcihcImlkXCIpO1xuICAgIDQzXHRcbiAgICA0NFx0ICAgICAgICBpZiAoY2F0ZWdvcnlJZFN0ciA9PSBudWxsIHx8IGNhdGVnb3J5SWRTdHIuaXNFbXB0eSgpKSB7XG4gICAgNDVcdCAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRFcnJvcihIdHRwU2VydmxldFJlc3BvbnNlLlNDX0JBRF9SRVFVRVNULCBcIkNhdGVnb3J5IElEIGlzIHJlcXVpcmVkXCIpO1xuICAgIDQ2XHQgICAgICAgICAgICByZXR1cm47XG4gICAgNDdcdCAgICAgICAgfVxuICAgIDQ4XHRcbiAgICA0OVx0ICAgICAgICB0cnkge1xuICAgIDUwXHQgICAgICAgICAgICBpbnQgY2F0ZWdvcnlJZCA9IEludGVnZXIucGFyc2VJbnQoY2F0ZWdvcnlJZFN0cik7XG4gICAgNTFcdFxuICAgIDUyXHQgICAgICAgICAgICAvLyBHZXQgY2F0ZWdvcnkgZnJvbSBkYXRhYmFzZVxuICAgIDUzXHQgICAgICAgICAgICBDYXRlZ29yeSBjYXRlZ29yeSA9IGNhdGVnb3J5REFPLmdldENhdGVnb3J5QnlJZChjYXRlZ29yeUlkKTtcbiAgICA1NFx0XG4gICAgNTVcdCAgICAgICAgICAgIGlmIChjYXRlZ29yeSA9PSBudWxsKSB7XG4gICAgNTZcdCAgICAgICAgICAgICAgICByZXNwb25zZS5zZW5kRXJyb3IoSHR0cFNlcnZsZXRSZXNwb25zZS5TQ19OT1RfRk9VTkQsIFwiQ2F0ZWdvcnkgbm90IGZvdW5kXCIpO1xuICAgIDU3XHQgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgIDU4XHQgICAgICAgICAgICB9XG4gICAgNTlcdFxuICAgIDYwXHQgICAgICAgICAgICBTdHJpbmcgaW1hZ2VVcmwgPSBjYXRlZ29yeS5nZXRJbWFnZVVybCgpO1xuICAgIDYxXHQgICAgICAgICAgICBpZiAoaW1hZ2VVcmwgPT0gbnVsbCB8fCBpbWFnZVVybC5pc0VtcHR5KCkpIHtcbiAgICA2Mlx0ICAgICAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRFcnJvcihIdHRwU2VydmxldFJlc3BvbnNlLlNDX05PVF9GT1VORCwgXCJDYXRlZ29yeSBoYXMgbm8gaW1hZ2VcIik7XG4gICAgNjNcdCAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgNjRcdCAgICAgICAgICAgIH1cbiAgICA2NVx0XG4gICAgNjZcdCAgICAgICAgICAgIC8vIEdldCB0aGUgcGVybWFuZW50IHBhdGggdG8gdGhlIGltYWdlXG4gICAgNjdcdCAgICAgICAgICAgIFN0cmluZyB1c2VySG9tZSA9IFN5c3RlbS5nZXRQcm9wZXJ0eShcInVzZXIuaG9tZVwiKTtcbiAgICA2OFx0ICAgICAgICAgICAgU3RyaW5nIHBlcm1hbmVudFBhdGggPSB1c2VySG9tZSArIEZpbGUuc2VwYXJhdG9yICsgXCJDbG90aGVlSW1hZ2VzXCIgKyBGaWxlLnNlcGFyYXRvciArIGltYWdlVXJsO1xuICAgIDY5XHQgICAgICAgICAgICBGaWxlIGltYWdlRmlsZSA9IG5ldyBGaWxlKHBlcm1hbmVudFBhdGgpO1xuICAgIDcwXHRcbiAgICA3MVx0ICAgICAgICAgICAgaWYgKCFpbWFnZUZpbGUuZXhpc3RzKCkpIHtcbiAgICA3Mlx0ICAgICAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRFcnJvcihIdHRwU2VydmxldFJlc3BvbnNlLlNDX05PVF9GT1VORCwgXCJJbWFnZSBmaWxlIG5vdCBmb3VuZFwiKTtcbiAgICA3M1x0ICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICA3NFx0ICAgICAgICAgICAgfVxuICAgIDc1XHRcbiAgICA3Nlx0ICAgICAgICAgICAgLy8gU2V0IGNvbnRlbnQgdHlwZSBiYXNlZCBvbiBmaWxlIGV4dGVuc2lvblxuICAgIDc3XHQgICAgICAgICAgICBTdHJpbmcgZmlsZU5hbWUgPSBpbWFnZUZpbGUuZ2V0TmFtZSgpO1xuICAgIDc4XHQgICAgICAgICAgICBTdHJpbmcgY29udGVudFR5cGUgPSBcImltYWdlL2pwZWdcIjsgLy8gRGVmYXVsdFxuICAgIDc5XHRcbiAgICA4MFx0ICAgICAgICAgICAgaWYgKGZpbGVOYW1lLmVuZHNXaXRoKFwiLnBuZ1wiKSkge1xuICAgIDgxXHQgICAgICAgICAgICAgICAgY29udGVudFR5cGUgPSBcImltYWdlL3BuZ1wiO1xuICAgIDgyXHQgICAgICAgICAgICB9IGVsc2UgaWYgKGZpbGVOYW1lLmVuZHNXaXRoKFwiLmdpZlwiKSkge1xuICAgIDgzXHQgICAgICAgICAgICAgICAgY29udGVudFR5cGUgPSBcImltYWdlL2dpZlwiO1xuICAgIDg0XHQgICAgICAgICAgICB9IGVsc2UgaWYgKGZpbGVOYW1lLmVuZHNXaXRoKFwiLmpwZ1wiKSB8fCBmaWxlTmFtZS5lbmRzV2l0aChcIi5qcGVnXCIpKSB7XG4gICAgODVcdCAgICAgICAgICAgICAgICBjb250ZW50VHlwZSA9IFwiaW1hZ2UvanBlZ1wiO1xuICAgIDg2XHQgICAgICAgICAgICB9XG4gICAgODdcdFxuICAgIDg4XHQgICAgICAgICAgICByZXNwb25zZS5zZXRDb250ZW50VHlwZShjb250ZW50VHlwZSk7XG4gICAgODlcdFxuICAgIDkwXHQgICAgICAgICAgICAvLyBDb3B5IHRoZSBmaWxlIHRvIHRoZSByZXNwb25zZSBvdXRwdXQgc3RyZWFtXG4gICAgOTFcdCAgICAgICAgICAgIHRyeSAoRmlsZUlucHV0U3RyZWFtIGluID0gbmV3IEZpbGVJbnB1dFN0cmVhbShpbWFnZUZpbGUpO1xuICAgIDkyXHQgICAgICAgICAgICAgICAgIE91dHB1dFN0cmVhbSBvdXQgPSByZXNwb25zZS5nZXRPdXRwdXRTdHJlYW0oKSkge1xuICAgIDkzXHRcbiAgICA5NFx0ICAgICAgICAgICAgICAgIGJ5dGVbXSBidWZmZXIgPSBuZXcgYnl0ZVs0MDk2XTtcbiAgICA5NVx0ICAgICAgICAgICAgICAgIGludCBieXRlc1JlYWQ7XG4gICAgOTZcdFxuICAgIDk3XHQgICAgICAgICAgICAgICAgd2hpbGUgKChieXRlc1JlYWQgPSBpbi5yZWFkKGJ1ZmZlcikpICE9IC0xKSB7XG4gICAgOThcdCAgICAgICAgICAgICAgICAgICAgb3V0LndyaXRlKGJ1ZmZlciwgMCwgYnl0ZXNSZWFkKTtcbiAgICA5OVx0ICAgICAgICAgICAgICAgIH1cbiAgIDEwMFx0ICAgICAgICAgICAgfVxuICAgMTAxXHRcbiAgIDEwMlx0ICAgICAgICB9IGNhdGNoIChOdW1iZXJGb3JtYXRFeGNlcHRpb24gZSkge1xuICAgMTAzXHQgICAgICAgICAgICByZXNwb25zZS5zZW5kRXJyb3IoSHR0cFNlcnZsZXRSZXNwb25zZS5TQ19CQURfUkVRVUVTVCwgXCJJbnZhbGlkIGNhdGVnb3J5IElEXCIpO1xuICAgMTA0XHQgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAxMDVcdCAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRFcnJvcihIdHRwU2VydmxldFJlc3BvbnNlLlNDX0lOVEVSTkFMX1NFUlZFUl9FUlJPUiwgXCJFcnJvciBzZXJ2aW5nIGltYWdlOiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgIDEwNlx0ICAgICAgICB9XG4gICAxMDdcdCAgICB9XG4gICAxMDhcdFxuICAgMTA5XHQgICAgcHJvdGVjdGVkIHZvaWQgZG9Qb3N0KEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBIdHRwU2VydmxldFJlc3BvbnNlIHJlc3BvbnNlKVxuICAgMTEwXHQgICAgICAgICAgICB0aHJvd3MgU2VydmxldEV4Y2VwdGlvbiwgSU9FeGNlcHRpb24ge1xuICAgMTExXHRcbiAgIDExMlx0ICAgICAgICAvLyBDaGVjayBpZiB1c2VyIGlzIGxvZ2dlZCBpbiBhbmQgaXMgYW4gYWRtaW5cbiAgIDExM1x0ICAgICAgICBqYWthcnRhLnNlcnZsZXQuaHR0cC5IdHRwU2Vzc2lvbiBzZXNzaW9uID0gcmVxdWVzdC5nZXRTZXNzaW9uKCk7XG4gICAxMTRcdCAgICAgICAgbW9kZWwuVXNlciB1c2VyID0gKG1vZGVsLlVzZXIpIHNlc3Npb24uZ2V0QXR0cmlidXRlKFwidXNlclwiKTtcblxuUmV2aWV3IHRoZSBjaGFuZ2VzIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgYXMgZXhwZWN0ZWQgKGNvcnJlY3QgaW5kZW50YXRpb24sIG5vIGR1cGxpY2F0ZSBsaW5lcywgZXRjKS5cbkVkaXQgdGhlIGZpbGUgYWdhaW4gaWYgbmVjZXNzYXJ5LlxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxNnF3cHF4cExXTVNUZ2puaVZqYXhGUSJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkM6L1VzZXJzL1VTRVIvTXVzaWMvY2xvdGhlZSBmaW5hbC9oeS9DbG90aGVlIiwiZm9sZGVyUm9vdCI6IkM6L1VzZXJzL1VTRVIvTXVzaWMvY2xvdGhlZSBmaW5hbC9oeS9DbG90aGVlIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0wOFQwOToyNjowNS4zODZaIiwicmVzcG9uc2VfdGV4dCI6Ik5vdyB3ZSBuZWVkIHRvIG1ha2Ugc3VyZSB0aGUgd2ViLnhtbCBmaWxlIGhhcyB0aGUgY29ycmVjdCBtYXBwaW5nIGZvciB0aGUgQ2F0ZWdvcnlJbWFnZVNlcnZsZXQ6XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiODRjMDgyOGQtOTJhNy00ZDMyLTg0OGQtYWM5YTIwNGQ0MmRjIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxUE1rb3FLdEVUeW1hVXRIMVBhNUZvaCIsInRvb2xfbmFtZSI6ImNvZGViYXNlLXJldHJpZXZhbCIsImlucHV0X2pzb24iOiJ7XCJpbmZvcm1hdGlvbl9yZXF1ZXN0XCI6IFwiRmluZCB0aGUgQXV0aGVudGljYXRpb25GaWx0ZXIgY2xhc3MgdG8gc2VlIGhvdyBpdCdzIGZpbHRlcmluZyByZXF1ZXN0c1wifSIsIm1jcF9zZXJ2ZXJfbmFtZSI6IiIsIm1jcF90b29sX25hbWUiOiIifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6Ikkgc2VlIHRoYXQgdGhlIENhdGVnb3J5SW1hZ2VTZXJ2bGV0IGlzIGFscmVhZHkgbWFwcGVkIGluIHRoZSB3ZWIueG1sIGZpbGUsIGJ1dCB3ZSBuZWVkIHRvIG1vZGlmeSB0aGUgQXV0aGVudGljYXRpb25GaWx0ZXIgdG8gYWxsb3cgR0VUIHJlcXVlc3RzIHRvIHRoZSBDYXRlZ29yeUltYWdlU2VydmxldCB3aXRob3V0IHJlcXVpcmluZyBhdXRoZW50aWNhdGlvbjpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IENsb3RoZWUvc3JjL21haW4vd2ViYXBwL1dFQi1JTkYvd2ViLnhtbFxuLi4uXG5cbiAgICA8IS0tIFNlcnZsZXQgTWFwcGluZ3MgLS0+XG4gICAgPHNlcnZsZXQ+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+Q3VzdG9tZXJSZXZpZXdTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDxzZXJ2bGV0LWNsYXNzPmNvbnRyb2xsZXIuQ3VzdG9tZXJSZXZpZXdTZXJ2bGV0PC9zZXJ2bGV0LWNsYXNzPlxuICAgIDwvc2VydmxldD5cbiAgICA8c2VydmxldC1tYXBwaW5nPlxuICAgICAgICA8c2VydmxldC1uYW1lPkN1c3RvbWVyUmV2aWV3U2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L0N1c3RvbWVyUmV2aWV3U2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgPC9zZXJ2bGV0LW1hcHBpbmc+XG4gICAgPHNlcnZsZXQ+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+UHJvZmlsZVNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHNlcnZsZXQtY2xhc3M+Y29udHJvbGxlci5Qcm9maWxlU2VydmxldDwvc2VydmxldC1jbGFzcz5cbiAgICAgICAgPG11bHRpcGFydC1jb25maWc+XG4gICAgICAgICAgICA8bWF4LWZpbGUtc2l6ZT41MjQyODgwPC9tYXgtZmlsZS1zaXplPjwhLS0gNU1CIC0tPlxuICAgICAgICAgICAgPG1heC1yZXF1ZXN0LXNpemU+MTA0ODU3NjA8L21heC1yZXF1ZXN0LXNpemU+PCEtLSAxME1CIC0tPlxuICAgICAgICAgICAgPGZpbGUtc2l6ZS10aHJlc2hvbGQ+MTA0ODU3NjwvZmlsZS1zaXplLXRocmVzaG9sZD48IS0tIDFNQiAtLT5cbiAgICAgICAgPC9tdWx0aXBhcnQtY29uZmlnPlxuICAgIDwvc2VydmxldD5cbiAgICA8c2VydmxldC1tYXBwaW5nPlxuICAgICAgICA8c2VydmxldC1uYW1lPlByb2ZpbGVTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vUHJvZmlsZVNlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgIDwvc2VydmxldC1tYXBwaW5nPlxuLi4uXG5cbiAgICA8IS0tIExvZ2luIFNlcnZsZXQgLS0+XG4gICAgPHNlcnZsZXQ+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+TG9naW5TZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDxzZXJ2bGV0LWNsYXNzPmNvbnRyb2xsZXIuTG9naW5TZXJ2bGV0PC9zZXJ2bGV0LWNsYXNzPlxuICAgIDwvc2VydmxldD5cbiAgICA8c2VydmxldC1tYXBwaW5nPlxuICAgICAgICA8c2VydmxldC1uYW1lPkxvZ2luU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L0xvZ2luU2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgPC9zZXJ2bGV0LW1hcHBpbmc+XG5cbiAgICA8IS0tIENhcnQgU2VydmxldCAtLT5cbiAgICA8c2VydmxldD5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5DYXJ0U2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8c2VydmxldC1jbGFzcz5jb250cm9sbGVyLkNhcnRTZXJ2bGV0PC9zZXJ2bGV0LWNsYXNzPlxuICAgIDwvc2VydmxldD5cbiAgICA8c2VydmxldC1tYXBwaW5nPlxuICAgICAgICA8c2VydmxldC1uYW1lPkNhcnRTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vQ2FydFNlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgIDwvc2VydmxldC1tYXBwaW5nPlxuXG4gICAgPCEtLSBBY3Rpb24gU2VydmxldCAtLT5cbiAgICA8c2VydmxldD5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5BY3Rpb25TZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDxzZXJ2bGV0LWNsYXNzPmNvbnRyb2xsZXIuQWN0aW9uU2VydmxldDwvc2VydmxldC1jbGFzcz5cbiAgICA8L3NlcnZsZXQ+XG4gICAgPHNlcnZsZXQtbWFwcGluZz5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5BY3Rpb25TZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vQWN0aW9uU2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgPC9zZXJ2bGV0LW1hcHBpbmc+XG5cbiAgICA8IS0tIEFib3V0IFNlcnZsZXQgLS0+XG4gICAgPHNlcnZsZXQ+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+QWJvdXRTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDxzZXJ2bGV0LWNsYXNzPmNvbnRyb2xsZXIuQWJvdXRTZXJ2bGV0PC9zZXJ2bGV0LWNsYXNzPlxuICAgIDwvc2VydmxldD5cbiAgICA8c2VydmxldC1tYXBwaW5nPlxuICAgICAgICA8c2VydmxldC1uYW1lPkFib3V0U2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L0Fib3V0U2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgPC9zZXJ2bGV0LW1hcHBpbmc+XG4uLi5cblxuICAgIDwhLS0gT3JkZXIgU2VydmxldCAtLT5cbiAgICA8c2VydmxldD5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5PcmRlclNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHNlcnZsZXQtY2xhc3M+Y29udHJvbGxlci5PcmRlclNlcnZsZXQ8L3NlcnZsZXQtY2xhc3M+XG4gICAgPC9zZXJ2bGV0PlxuICAgIDxzZXJ2bGV0LW1hcHBpbmc+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+T3JkZXJTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vT3JkZXJTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICA8L3NlcnZsZXQtbWFwcGluZz5cblxuICAgIDwhLS0gUHJvZHVjdCBTZXJ2bGV0IC0tPlxuICAgIDxzZXJ2bGV0PlxuICAgICAgICA8c2VydmxldC1uYW1lPlByb2R1Y3RTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDxzZXJ2bGV0LWNsYXNzPmNvbnRyb2xsZXIuUHJvZHVjdFNlcnZsZXQ8L3NlcnZsZXQtY2xhc3M+XG4gICAgPC9zZXJ2bGV0PlxuICAgIDxzZXJ2bGV0LW1hcHBpbmc+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+UHJvZHVjdFNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9Qcm9kdWN0U2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgPC9zZXJ2bGV0LW1hcHBpbmc+XG5cbiAgICA8IS0tIEltYWdlIFNlcnZsZXQgLS0+XG4gICAgPHNlcnZsZXQ+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+SW1hZ2VTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDxzZXJ2bGV0LWNsYXNzPmNvbnRyb2xsZXIuSW1hZ2VTZXJ2bGV0PC9zZXJ2bGV0LWNsYXNzPlxuICAgICAgICA8bXVsdGlwYXJ0LWNvbmZpZz5cbiAgICAgICAgICAgIDxtYXgtZmlsZS1zaXplPjUyNDI4ODA8L21heC1maWxlLXNpemU+PCEtLSA1TUIgLS0+XG4gICAgICAgICAgICA8bWF4LXJlcXVlc3Qtc2l6ZT4xMDQ4NTc2MDwvbWF4LXJlcXVlc3Qtc2l6ZT48IS0tIDEwTUIgLS0+XG4gICAgICAgICAgICA8ZmlsZS1zaXplLXRocmVzaG9sZD4xMDQ4NTc2PC9maWxlLXNpemUtdGhyZXNob2xkPjwhLS0gMU1CIC0tPlxuICAgICAgICA8L211bHRpcGFydC1jb25maWc+XG4gICAgPC9zZXJ2bGV0PlxuICAgIDxzZXJ2bGV0LW1hcHBpbmc+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+SW1hZ2VTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vSW1hZ2VTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICA8L3NlcnZsZXQtbWFwcGluZz5cblxuICAgIDwhLS0gSG9tZSBTZXJ2bGV0IC0tPlxuICAgIDxzZXJ2bGV0PlxuICAgICAgICA8c2VydmxldC1uYW1lPkhvbWVTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDxzZXJ2bGV0LWNsYXNzPmNvbnRyb2xsZXIuSG9tZVNlcnZsZXQ8L3NlcnZsZXQtY2xhc3M+XG4gICAgPC9zZXJ2bGV0PlxuICAgIDxzZXJ2bGV0LW1hcHBpbmc+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+SG9tZVNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9Ib21lU2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgPC9zZXJ2bGV0LW1hcHBpbmc+XG5cbiAgICA8IS0tIENvbnRhY3QgU2VydmxldCAtLT5cbiAgICA8c2VydmxldD5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5Db250YWN0U2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8c2VydmxldC1jbGFzcz5jb250cm9sbGVyLkNvbnRhY3RTZXJ2bGV0PC9zZXJ2bGV0LWNsYXNzPlxuICAgIDwvc2VydmxldD5cbiAgICA8c2VydmxldC1tYXBwaW5nPlxuICAgICAgICA8c2VydmxldC1uYW1lPkNvbnRhY3RTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vQ29udGFjdFNlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgIDwvc2VydmxldC1tYXBwaW5nPlxuXG4gICAgPCEtLSBDYXRlZ29yeSBTZXJ2bGV0IC0tPlxuICAgIDxzZXJ2bGV0PlxuICAgICAgICA8c2VydmxldC1uYW1lPkNhdGVnb3J5U2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8c2VydmxldC1jbGFzcz5jb250cm9sbGVyLkNhdGVnb3J5U2VydmxldDwvc2VydmxldC1jbGFzcz5cbiAgICA8L3NlcnZsZXQ+XG4gICAgPHNlcnZsZXQtbWFwcGluZz5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5DYXRlZ29yeVNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9hZG1pbi9DYXRlZ29yeVNlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgIDwvc2VydmxldC1tYXBwaW5nPlxuICAgIDxzZXJ2bGV0LW1hcHBpbmc+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+Q2F0ZWdvcnlTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vQ2F0ZWdvcnlTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICA8L3NlcnZsZXQtbWFwcGluZz5cblxuICAgIDwhLS0gU2V0dGluZ3MgU2VydmxldCAtLT5cbiAgICA8c2VydmxldD5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5TZXR0aW5nc1NlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHNlcnZsZXQtY2xhc3M+Y29udHJvbGxlci5TZXR0aW5nc1NlcnZsZXQ8L3NlcnZsZXQtY2xhc3M+XG4gICAgPC9zZXJ2bGV0PlxuICAgIDxzZXJ2bGV0LW1hcHBpbmc+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+U2V0dGluZ3NTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vYWRtaW4vU2V0dGluZ3NTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICA8L3NlcnZsZXQtbWFwcGluZz5cblxuICAgIDwhLS0gQWRtaW4gUHJvZHVjdCBTZXJ2bGV0IC0tPlxuICAgIDxzZXJ2bGV0PlxuICAgICAgICA8c2VydmxldC1uYW1lPkFkbWluUHJvZHVjdFNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHNlcnZsZXQtY2xhc3M+Y29udHJvbGxlci5BZG1pblByb2R1Y3RTZXJ2bGV0PC9zZXJ2bGV0LWNsYXNzPlxuICAgIDwvc2VydmxldD5cbiAgICA8c2VydmxldC1tYXBwaW5nPlxuICAgICAgICA8c2VydmxldC1uYW1lPkFkbWluUHJvZHVjdFNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9hZG1pbi9BZG1pblByb2R1Y3RTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICA8L3NlcnZsZXQtbWFwcGluZz5cblxuICAgIDwhLS0gQWRtaW4gQ2F0ZWdvcnkgU2VydmxldCAtLT5cbiAgICA8c2VydmxldD5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5BZG1pbkNhdGVnb3J5U2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8c2VydmxldC1jbGFzcz5jb250cm9sbGVyLkFkbWluQ2F0ZWdvcnlTZXJ2bGV0PC9zZXJ2bGV0LWNsYXNzPlxuICAgIDwvc2VydmxldD5cbiAgICA8c2VydmxldC1tYXBwaW5nPlxuICAgICAgICA8c2VydmxldC1uYW1lPkFkbWluQ2F0ZWdvcnlTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vYWRtaW4vQWRtaW5DYXRlZ29yeVNlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgIDwvc2VydmxldC1tYXBwaW5nPlxuXG4gICAgPCEtLSBSZWdpc3RlciBTZXJ2bGV0IC0tPlxuICAgIDxzZXJ2bGV0PlxuICAgICAgICA8c2VydmxldC1uYW1lPlJlZ2lzdGVyU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8c2VydmxldC1jbGFzcz5jb250cm9sbGVyLlJlZ2lzdGVyU2VydmxldDwvc2VydmxldC1jbGFzcz5cbiAgICA8L3NlcnZsZXQ+XG4gICAgPHNlcnZsZXQtbWFwcGluZz5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5SZWdpc3RlclNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9SZWdpc3RlclNlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgIDwvc2VydmxldC1tYXBwaW5nPlxuLi4uXG5cbiAgICA8IS0tIEFkbWluIE1lc3NhZ2UgU2VydmxldCAtLT5cbiAgICA8c2VydmxldD5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5BZG1pbk1lc3NhZ2VTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDxzZXJ2bGV0LWNsYXNzPmNvbnRyb2xsZXIuQWRtaW5NZXNzYWdlU2VydmxldDwvc2VydmxldC1jbGFzcz5cbiAgICA8L3NlcnZsZXQ+XG4gICAgPHNlcnZsZXQtbWFwcGluZz5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5BZG1pbk1lc3NhZ2VTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vYWRtaW4vQWRtaW5NZXNzYWdlU2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgPC9zZXJ2bGV0LW1hcHBpbmc+XG4gICAgPHNlcnZsZXQtbWFwcGluZz5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5BZG1pbk1lc3NhZ2VTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vQWRtaW5NZXNzYWdlU2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgPC9zZXJ2bGV0LW1hcHBpbmc+XG5cbiAgICA8IS0tIEFkbWluIFJldmlldyBTZXJ2bGV0IC0tPlxuICAgIDxzZXJ2bGV0PlxuICAgICAgICA8c2VydmxldC1uYW1lPkFkbWluUmV2aWV3U2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8c2VydmxldC1jbGFzcz5jb250cm9sbGVyLkFkbWluUmV2aWV3U2VydmxldDwvc2VydmxldC1jbGFzcz5cbiAgICA8L3NlcnZsZXQ+XG4gICAgPHNlcnZsZXQtbWFwcGluZz5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5BZG1pblJldmlld1NlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9hZG1pbi9BZG1pblJldmlld1NlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgIDwvc2VydmxldC1tYXBwaW5nPlxuXG4gICAgPCEtLSBDdXN0b21lciBNZXNzYWdlIFNlcnZsZXQgLS0+XG4gICAgPHNlcnZsZXQ+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+Q3VzdG9tZXJNZXNzYWdlU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8c2VydmxldC1jbGFzcz5jb250cm9sbGVyLkN1c3RvbWVyTWVzc2FnZVNlcnZsZXQ8L3NlcnZsZXQtY2xhc3M+XG4gICAgPC9zZXJ2bGV0PlxuICAgIDxzZXJ2bGV0LW1hcHBpbmc+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+Q3VzdG9tZXJNZXNzYWdlU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L0N1c3RvbWVyTWVzc2FnZVNlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgIDwvc2VydmxldC1tYXBwaW5nPlxuICAgIDxzZXJ2bGV0LW1hcHBpbmc+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+Q3VzdG9tZXJNZXNzYWdlU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L2N1c3RvbWVyLW1lc3NhZ2VzPC91cmwtcGF0dGVybj5cbiAgICA8L3NlcnZsZXQtbWFwcGluZz5cblxuICAgIDwhLS0gTWVzc2FnZSBGcm9udCBDb250cm9sbGVyIChNVkMgUGF0dGVybikgLS0+XG4gICAgPHNlcnZsZXQ+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+TWVzc2FnZUZyb250Q29udHJvbGxlcjwvc2VydmxldC1uYW1lPlxuICAgICAgICA8c2VydmxldC1jbGFzcz5jb250cm9sbGVyLk1lc3NhZ2VGcm9udENvbnRyb2xsZXI8L3NlcnZsZXQtY2xhc3M+XG4gICAgPC9zZXJ2bGV0PlxuICAgIDxzZXJ2bGV0LW1hcHBpbmc+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+TWVzc2FnZUZyb250Q29udHJvbGxlcjwvc2VydmxldC1uYW1lPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L21lc3NhZ2VzLyo8L3VybC1wYXR0ZXJuPlxuICAgIDwvc2VydmxldC1tYXBwaW5nPlxuXG4gICAgPCEtLSBNZXNzYWdlIENvbnRyb2xsZXIgLS0+XG4gICAgPHNlcnZsZXQ+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+TWVzc2FnZUNvbnRyb2xsZXI8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHNlcnZsZXQtY2xhc3M+Y29udHJvbGxlci5NZXNzYWdlQ29udHJvbGxlcjwvc2VydmxldC1jbGFzcz5cbiAgICA8L3NlcnZsZXQ+XG4gICAgPHNlcnZsZXQtbWFwcGluZz5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5NZXNzYWdlQ29udHJvbGxlcjwvc2VydmxldC1uYW1lPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L2FkbWluL21lc3NhZ2VzLyo8L3VybC1wYXR0ZXJuPlxuICAgIDwvc2VydmxldC1tYXBwaW5nPlxuXG4gICAgPCEtLSBNZXNzYWdlIFNlcnZsZXQgLS0+XG4gICAgPHNlcnZsZXQ+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+TWVzc2FnZVNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHNlcnZsZXQtY2xhc3M+Y29udHJvbGxlci5NZXNzYWdlU2VydmxldDwvc2VydmxldC1jbGFzcz5cbiAgICA8L3NlcnZsZXQ+XG4gICAgPHNlcnZsZXQtbWFwcGluZz5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5NZXNzYWdlU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L01lc3NhZ2VTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICA8L3NlcnZsZXQtbWFwcGluZz5cblxuICAgIDwhLS0gUHJvZmlsZSBJbWFnZSBTZXJ2bGV0IC0tPlxuICAgIDxzZXJ2bGV0PlxuICAgICAgICA8c2VydmxldC1uYW1lPlByb2ZpbGVJbWFnZVNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHNlcnZsZXQtY2xhc3M+Y29udHJvbGxlci5Qcm9maWxlSW1hZ2VTZXJ2bGV0PC9zZXJ2bGV0LWNsYXNzPlxuICAgICAgICA8bXVsdGlwYXJ0LWNvbmZpZz5cbiAgICAgICAgICAgIDxtYXgtZmlsZS1zaXplPjUyNDI4ODA8L21heC1maWxlLXNpemU+PCEtLSA1TUIgLS0+XG4gICAgICAgICAgICA8bWF4LXJlcXVlc3Qtc2l6ZT4xMDQ4NTc2MDwvbWF4LXJlcXVlc3Qtc2l6ZT48IS0tIDEwTUIgLS0+XG4gICAgICAgICAgICA8ZmlsZS1zaXplLXRocmVzaG9sZD4xMDQ4NTc2PC9maWxlLXNpemUtdGhyZXNob2xkPjwhLS0gMU1CIC0tPlxuICAgICAgICA8L211bHRpcGFydC1jb25maWc+XG4gICAgPC9zZXJ2bGV0PlxuICAgIDxzZXJ2bGV0LW1hcHBpbmc+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+UHJvZmlsZUltYWdlU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L1Byb2ZpbGVJbWFnZVNlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgIDwvc2VydmxldC1tYXBwaW5nPlxuXG4gICAgPCEtLSBQYXNzd29yZCBTZXJ2bGV0IC0tPlxuICAgIDxzZXJ2bGV0PlxuICAgICAgICA8c2VydmxldC1uYW1lPlBhc3N3b3JkU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8c2VydmxldC1jbGFzcz5jb250cm9sbGVyLlBhc3N3b3JkU2VydmxldDwvc2VydmxldC1jbGFzcz5cbiAgICA8L3NlcnZsZXQ+XG4gICAgPHNlcnZsZXQtbWFwcGluZz5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5QYXNzd29yZFNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9QYXNzd29yZFNlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgIDwvc2VydmxldC1tYXBwaW5nPlxuXG4gICAgPCEtLSBQcm9maWxlIFVwZGF0ZSBTZXJ2bGV0IC0tPlxuICAgIDxzZXJ2bGV0PlxuICAgICAgICA8c2VydmxldC1uYW1lPlByb2ZpbGVVcGRhdGVTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDxzZXJ2bGV0LWNsYXNzPmNvbnRyb2xsZXIuUHJvZmlsZVVwZGF0ZVNlcnZsZXQ8L3NlcnZsZXQtY2xhc3M+XG4gICAgPC9zZXJ2bGV0PlxuICAgIDxzZXJ2bGV0LW1hcHBpbmc+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+UHJvZmlsZVVwZGF0ZVNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9Qcm9maWxlVXBkYXRlU2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgPC9zZXJ2bGV0LW1hcHBpbmc+XG4gICAgPHNlcnZsZXQtbWFwcGluZz5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5Qcm9maWxlVXBkYXRlU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L2FkbWluL1Byb2ZpbGVVcGRhdGVTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICA8L3NlcnZsZXQtbWFwcGluZz5cbi4uLlxuXG4gICAgPCEtLSBObyBUYWIgU2VydmxldCBuZWVkZWQgLSB1c2luZyBtaW5pbWFsIEpTIGZvciBVSSBlbmhhbmNlbWVudCAtLT5cblxuICAgIDwhLS0gQ2F0ZWdvcnkgSW1hZ2UgU2VydmxldCAtLT5cbiAgICA8c2VydmxldD5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5DYXRlZ29yeUltYWdlU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8c2VydmxldC1jbGFzcz5jb250cm9sbGVyLkNhdGVnb3J5SW1hZ2VTZXJ2bGV0PC9zZXJ2bGV0LWNsYXNzPlxuICAgICAgICA8bXVsdGlwYXJ0LWNvbmZpZz5cbiAgICAgICAgICAgIDxtYXgtZmlsZS1zaXplPjEwNDg1NzYwPC9tYXgtZmlsZS1zaXplPjwhLS0gMTBNQiAtLT5cbiAgICAgICAgICAgIDxtYXgtcmVxdWVzdC1zaXplPjUyNDI4ODAwPC9tYXgtcmVxdWVzdC1zaXplPjwhLS0gNTBNQiAtLT5cbiAgICAgICAgICAgIDxmaWxlLXNpemUtdGhyZXNob2xkPjEwNDg1NzY8L2ZpbGUtc2l6ZS10aHJlc2hvbGQ+PCEtLSAxTUIgLS0+XG4gICAgICAgIDwvbXVsdGlwYXJ0LWNvbmZpZz5cbiAgICA8L3NlcnZsZXQ+XG4gICAgPHNlcnZsZXQtbWFwcGluZz5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5DYXRlZ29yeUltYWdlU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L0NhdGVnb3J5SW1hZ2VTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICA8L3NlcnZsZXQtbWFwcGluZz5cblxuICAgIDwhLS0gVGVzdCBDYXRlZ29yaWVzIFNlcnZsZXQgLS0+XG4gICAgPHNlcnZsZXQ+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+VGVzdENhdGVnb3JpZXNTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDxzZXJ2bGV0LWNsYXNzPmNvbnRyb2xsZXIuVGVzdENhdGVnb3JpZXNTZXJ2bGV0PC9zZXJ2bGV0LWNsYXNzPlxuICAgIDwvc2VydmxldD5cbiAgICA8c2VydmxldC1tYXBwaW5nPlxuICAgICAgICA8c2VydmxldC1uYW1lPlRlc3RDYXRlZ29yaWVzU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L1Rlc3RDYXRlZ29yaWVzU2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgPC9zZXJ2bGV0LW1hcHBpbmc+XG5cbiAgICA8IS0tIFRlc3QgU2VydmxldCAtLT5cbiAgICA8c2VydmxldD5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5UZXN0U2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8c2VydmxldC1jbGFzcz5jb250cm9sbGVyLlRlc3RTZXJ2bGV0PC9zZXJ2bGV0LWNsYXNzPlxuICAgIDwvc2VydmxldD5cbiAgICA8c2VydmxldC1tYXBwaW5nPlxuICAgICAgICA8c2VydmxldC1uYW1lPlRlc3RTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vVGVzdFNlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgIDwvc2VydmxldC1tYXBwaW5nPlxuLi4uXG5cblxuICAgIDwhLS0gRmlsdGVycyAtLT5cbiAgICA8ZmlsdGVyPlxuICAgICAgICA8ZmlsdGVyLW5hbWU+QXV0aGVudGljYXRpb25GaWx0ZXI8L2ZpbHRlci1uYW1lPlxuICAgICAgICA8ZmlsdGVyLWNsYXNzPmZpbHRlci5BdXRoZW50aWNhdGlvbkZpbHRlcjwvZmlsdGVyLWNsYXNzPlxuICAgIDwvZmlsdGVyPlxuICAgIDxmaWx0ZXItbWFwcGluZz5cbiAgICAgICAgPGZpbHRlci1uYW1lPkF1dGhlbnRpY2F0aW9uRmlsdGVyPC9maWx0ZXItbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9DYXJ0U2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vQ2hlY2tvdXRTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9QYXltZW50U2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vT3JkZXJTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9Qcm9maWxlSW1hZ2VTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9JbWFnZVNlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L0NhdGVnb3J5SW1hZ2VTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICA8L2ZpbHRlci1tYXBwaW5nPlxuXG4gICAgPGZpbHRlcj5cbiAgICAgICAgPGZpbHRlci1uYW1lPkNoZWNrb3V0RmlsdGVyPC9maWx0ZXItbmFtZT5cbiAgICAgICAgPGZpbHRlci1jbGFzcz5maWx0ZXIuQ2hlY2tvdXRGaWx0ZXI8L2ZpbHRlci1jbGFzcz5cbiAgICA8L2ZpbHRlcj5cbiAgICA8ZmlsdGVyLW1hcHBpbmc+XG4gICAgICAgIDxmaWx0ZXItbmFtZT5DaGVja291dEZpbHRlcjwvZmlsdGVyLW5hbWU+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vQ2FydFNlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgIDwvZmlsdGVyLW1hcHBpbmc+XG4uLi5cblBhdGg6IHNyYy9tYWluL3dlYmFwcC9XRUItSU5GL3dlYi54bWxcbi4uLlxuXG4gICAgPCEtLSBTZXJ2bGV0IE1hcHBpbmdzIC0tPlxuICAgIDxzZXJ2bGV0PlxuICAgICAgICA8c2VydmxldC1uYW1lPkN1c3RvbWVyUmV2aWV3U2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8c2VydmxldC1jbGFzcz5jb250cm9sbGVyLkN1c3RvbWVyUmV2aWV3U2VydmxldDwvc2VydmxldC1jbGFzcz5cbiAgICA8L3NlcnZsZXQ+XG4gICAgPHNlcnZsZXQtbWFwcGluZz5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5DdXN0b21lclJldmlld1NlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9DdXN0b21lclJldmlld1NlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgIDwvc2VydmxldC1tYXBwaW5nPlxuICAgIDxzZXJ2bGV0PlxuICAgICAgICA8c2VydmxldC1uYW1lPlByb2ZpbGVTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDxzZXJ2bGV0LWNsYXNzPmNvbnRyb2xsZXIuUHJvZmlsZVNlcnZsZXQ8L3NlcnZsZXQtY2xhc3M+XG4gICAgICAgIDxtdWx0aXBhcnQtY29uZmlnPlxuICAgICAgICAgICAgPG1heC1maWxlLXNpemU+NTI0Mjg4MDwvbWF4LWZpbGUtc2l6ZT48IS0tIDVNQiAtLT5cbiAgICAgICAgICAgIDxtYXgtcmVxdWVzdC1zaXplPjEwNDg1NzYwPC9tYXgtcmVxdWVzdC1zaXplPjwhLS0gMTBNQiAtLT5cbiAgICAgICAgICAgIDxmaWxlLXNpemUtdGhyZXNob2xkPjEwNDg1NzY8L2ZpbGUtc2l6ZS10aHJlc2hvbGQ+PCEtLSAxTUIgLS0+XG4gICAgICAgIDwvbXVsdGlwYXJ0LWNvbmZpZz5cbiAgICA8L3NlcnZsZXQ+XG4gICAgPHNlcnZsZXQtbWFwcGluZz5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5Qcm9maWxlU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L1Byb2ZpbGVTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICA8L3NlcnZsZXQtbWFwcGluZz5cbi4uLlxuXG4gICAgPCEtLSBMb2dpbiBTZXJ2bGV0IC0tPlxuICAgIDxzZXJ2bGV0PlxuICAgICAgICA8c2VydmxldC1uYW1lPkxvZ2luU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8c2VydmxldC1jbGFzcz5jb250cm9sbGVyLkxvZ2luU2VydmxldDwvc2VydmxldC1jbGFzcz5cbiAgICA8L3NlcnZsZXQ+XG4gICAgPHNlcnZsZXQtbWFwcGluZz5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5Mb2dpblNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9Mb2dpblNlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgIDwvc2VydmxldC1tYXBwaW5nPlxuXG4gICAgPCEtLSBDYXJ0IFNlcnZsZXQgLS0+XG4gICAgPHNlcnZsZXQ+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+Q2FydFNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHNlcnZsZXQtY2xhc3M+Y29udHJvbGxlci5DYXJ0U2VydmxldDwvc2VydmxldC1jbGFzcz5cbiAgICA8L3NlcnZsZXQ+XG4gICAgPHNlcnZsZXQtbWFwcGluZz5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5DYXJ0U2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L0NhcnRTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICA8L3NlcnZsZXQtbWFwcGluZz5cbi4uLlxuXG4gICAgPCEtLSBJbWFnZSBTZXJ2bGV0IC0tPlxuICAgIDxzZXJ2bGV0PlxuICAgICAgICA8c2VydmxldC1uYW1lPkltYWdlU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8c2VydmxldC1jbGFzcz5jb250cm9sbGVyLkltYWdlU2VydmxldDwvc2VydmxldC1jbGFzcz5cbiAgICAgICAgPG11bHRpcGFydC1jb25maWc+XG4gICAgICAgICAgICA8bWF4LWZpbGUtc2l6ZT41MjQyODgwPC9tYXgtZmlsZS1zaXplPjwhLS0gNU1CIC0tPlxuICAgICAgICAgICAgPG1heC1yZXF1ZXN0LXNpemU+MTA0ODU3NjA8L21heC1yZXF1ZXN0LXNpemU+PCEtLSAxME1CIC0tPlxuICAgICAgICAgICAgPGZpbGUtc2l6ZS10aHJlc2hvbGQ+MTA0ODU3NjwvZmlsZS1zaXplLXRocmVzaG9sZD48IS0tIDFNQiAtLT5cbiAgICAgICAgPC9tdWx0aXBhcnQtY29uZmlnPlxuICAgIDwvc2VydmxldD5cbiAgICA8c2VydmxldC1tYXBwaW5nPlxuICAgICAgICA8c2VydmxldC1uYW1lPkltYWdlU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L0ltYWdlU2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgPC9zZXJ2bGV0LW1hcHBpbmc+XG5cbiAgICA8IS0tIEhvbWUgU2VydmxldCAtLT5cbiAgICA8c2VydmxldD5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5Ib21lU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8c2VydmxldC1jbGFzcz5jb250cm9sbGVyLkhvbWVTZXJ2bGV0PC9zZXJ2bGV0LWNsYXNzPlxuICAgIDwvc2VydmxldD5cbiAgICA8c2VydmxldC1tYXBwaW5nPlxuICAgICAgICA8c2VydmxldC1uYW1lPkhvbWVTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vSG9tZVNlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgIDwvc2VydmxldC1tYXBwaW5nPlxuXG4gICAgPCEtLSBDb250YWN0IFNlcnZsZXQgLS0+XG4gICAgPHNlcnZsZXQ+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+Q29udGFjdFNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHNlcnZsZXQtY2xhc3M+Y29udHJvbGxlci5Db250YWN0U2VydmxldDwvc2VydmxldC1jbGFzcz5cbiAgICA8L3NlcnZsZXQ+XG4gICAgPHNlcnZsZXQtbWFwcGluZz5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5Db250YWN0U2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L0NvbnRhY3RTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICA8L3NlcnZsZXQtbWFwcGluZz5cblxuICAgIDwhLS0gQ2F0ZWdvcnkgU2VydmxldCAtLT5cbiAgICA8c2VydmxldD5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5DYXRlZ29yeVNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHNlcnZsZXQtY2xhc3M+Y29udHJvbGxlci5DYXRlZ29yeVNlcnZsZXQ8L3NlcnZsZXQtY2xhc3M+XG4gICAgPC9zZXJ2bGV0PlxuICAgIDxzZXJ2bGV0LW1hcHBpbmc+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+Q2F0ZWdvcnlTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vYWRtaW4vQ2F0ZWdvcnlTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICA8L3NlcnZsZXQtbWFwcGluZz5cbi4uLlxuXG4gICAgPCEtLSBBZG1pbiBDYXRlZ29yeSBTZXJ2bGV0IC0tPlxuICAgIDxzZXJ2bGV0PlxuICAgICAgICA8c2VydmxldC1uYW1lPkFkbWluQ2F0ZWdvcnlTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDxzZXJ2bGV0LWNsYXNzPmNvbnRyb2xsZXIuQWRtaW5DYXRlZ29yeVNlcnZsZXQ8L3NlcnZsZXQtY2xhc3M+XG4gICAgPC9zZXJ2bGV0PlxuICAgIDxzZXJ2bGV0LW1hcHBpbmc+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+QWRtaW5DYXRlZ29yeVNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9hZG1pbi9BZG1pbkNhdGVnb3J5U2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgPC9zZXJ2bGV0LW1hcHBpbmc+XG5cbiAgICA8IS0tIFJlZ2lzdGVyIFNlcnZsZXQgLS0+XG4gICAgPHNlcnZsZXQ+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+UmVnaXN0ZXJTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDxzZXJ2bGV0LWNsYXNzPmNvbnRyb2xsZXIuUmVnaXN0ZXJTZXJ2bGV0PC9zZXJ2bGV0LWNsYXNzPlxuICAgIDwvc2VydmxldD5cbiAgICA8c2VydmxldC1tYXBwaW5nPlxuICAgICAgICA8c2VydmxldC1uYW1lPlJlZ2lzdGVyU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L1JlZ2lzdGVyU2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgPC9zZXJ2bGV0LW1hcHBpbmc+XG4uLi5cblxuICAgIDwhLS0gQ3VzdG9tZXIgTWVzc2FnZSBTZXJ2bGV0IC0tPlxuICAgIDxzZXJ2bGV0PlxuICAgICAgICA8c2VydmxldC1uYW1lPkN1c3RvbWVyTWVzc2FnZVNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHNlcnZsZXQtY2xhc3M+Y29udHJvbGxlci5DdXN0b21lck1lc3NhZ2VTZXJ2bGV0PC9zZXJ2bGV0LWNsYXNzPlxuICAgIDwvc2VydmxldD5cbiAgICA8c2VydmxldC1tYXBwaW5nPlxuICAgICAgICA8c2VydmxldC1uYW1lPkN1c3RvbWVyTWVzc2FnZVNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9DdXN0b21lck1lc3NhZ2VTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICA8L3NlcnZsZXQtbWFwcGluZz5cbiAgICA8c2VydmxldC1tYXBwaW5nPlxuICAgICAgICA8c2VydmxldC1uYW1lPkN1c3RvbWVyTWVzc2FnZVNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9jdXN0b21lci1tZXNzYWdlczwvdXJsLXBhdHRlcm4+XG4gICAgPC9zZXJ2bGV0LW1hcHBpbmc+XG5cbiAgICA8IS0tIE1lc3NhZ2UgRnJvbnQgQ29udHJvbGxlciAoTVZDIFBhdHRlcm4pIC0tPlxuICAgIDxzZXJ2bGV0PlxuICAgICAgICA8c2VydmxldC1uYW1lPk1lc3NhZ2VGcm9udENvbnRyb2xsZXI8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHNlcnZsZXQtY2xhc3M+Y29udHJvbGxlci5NZXNzYWdlRnJvbnRDb250cm9sbGVyPC9zZXJ2bGV0LWNsYXNzPlxuICAgIDwvc2VydmxldD5cbiAgICA8c2VydmxldC1tYXBwaW5nPlxuICAgICAgICA8c2VydmxldC1uYW1lPk1lc3NhZ2VGcm9udENvbnRyb2xsZXI8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9tZXNzYWdlcy8qPC91cmwtcGF0dGVybj5cbiAgICA8L3NlcnZsZXQtbWFwcGluZz5cblxuICAgIDwhLS0gTWVzc2FnZSBDb250cm9sbGVyIC0tPlxuICAgIDxzZXJ2bGV0PlxuICAgICAgICA8c2VydmxldC1uYW1lPk1lc3NhZ2VDb250cm9sbGVyPC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDxzZXJ2bGV0LWNsYXNzPmNvbnRyb2xsZXIuTWVzc2FnZUNvbnRyb2xsZXI8L3NlcnZsZXQtY2xhc3M+XG4gICAgPC9zZXJ2bGV0PlxuICAgIDxzZXJ2bGV0LW1hcHBpbmc+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+TWVzc2FnZUNvbnRyb2xsZXI8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9hZG1pbi9tZXNzYWdlcy8qPC91cmwtcGF0dGVybj5cbiAgICA8L3NlcnZsZXQtbWFwcGluZz5cblxuICAgIDwhLS0gTWVzc2FnZSBTZXJ2bGV0IC0tPlxuICAgIDxzZXJ2bGV0PlxuICAgICAgICA8c2VydmxldC1uYW1lPk1lc3NhZ2VTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDxzZXJ2bGV0LWNsYXNzPmNvbnRyb2xsZXIuTWVzc2FnZVNlcnZsZXQ8L3NlcnZsZXQtY2xhc3M+XG4gICAgPC9zZXJ2bGV0PlxuICAgIDxzZXJ2bGV0LW1hcHBpbmc+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+TWVzc2FnZVNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9NZXNzYWdlU2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgPC9zZXJ2bGV0LW1hcHBpbmc+XG4uLi5cblxuICAgIDwhLS0gQ2F0ZWdvcnkgSW1hZ2UgU2VydmxldCAtLT5cbiAgICA8c2VydmxldD5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5DYXRlZ29yeUltYWdlU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8c2VydmxldC1jbGFzcz5jb250cm9sbGVyLkNhdGVnb3J5SW1hZ2VTZXJ2bGV0PC9zZXJ2bGV0LWNsYXNzPlxuICAgICAgICA8bXVsdGlwYXJ0LWNvbmZpZz5cbiAgICAgICAgICAgIDxtYXgtZmlsZS1zaXplPjEwNDg1NzYwPC9tYXgtZmlsZS1zaXplPjwhLS0gMTBNQiAtLT5cbiAgICAgICAgICAgIDxtYXgtcmVxdWVzdC1zaXplPjUyNDI4ODAwPC9tYXgtcmVxdWVzdC1zaXplPjwhLS0gNTBNQiAtLT5cbiAgICAgICAgICAgIDxmaWxlLXNpemUtdGhyZXNob2xkPjEwNDg1NzY8L2ZpbGUtc2l6ZS10aHJlc2hvbGQ+PCEtLSAxTUIgLS0+XG4gICAgICAgIDwvbXVsdGlwYXJ0LWNvbmZpZz5cbiAgICA8L3NlcnZsZXQ+XG4gICAgPHNlcnZsZXQtbWFwcGluZz5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5DYXRlZ29yeUltYWdlU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L0NhdGVnb3J5SW1hZ2VTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICA8L3NlcnZsZXQtbWFwcGluZz5cblxuICAgIDwhLS0gVGVzdCBDYXRlZ29yaWVzIFNlcnZsZXQgLS0+XG4gICAgPHNlcnZsZXQ+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+VGVzdENhdGVnb3JpZXNTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDxzZXJ2bGV0LWNsYXNzPmNvbnRyb2xsZXIuVGVzdENhdGVnb3JpZXNTZXJ2bGV0PC9zZXJ2bGV0LWNsYXNzPlxuICAgIDwvc2VydmxldD5cbiAgICA8c2VydmxldC1tYXBwaW5nPlxuICAgICAgICA8c2VydmxldC1uYW1lPlRlc3RDYXRlZ29yaWVzU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L1Rlc3RDYXRlZ29yaWVzU2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgPC9zZXJ2bGV0LW1hcHBpbmc+XG5cbiAgICA8IS0tIFRlc3QgU2VydmxldCAtLT5cbiAgICA8c2VydmxldD5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5UZXN0U2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8c2VydmxldC1jbGFzcz5jb250cm9sbGVyLlRlc3RTZXJ2bGV0PC9zZXJ2bGV0LWNsYXNzPlxuICAgIDwvc2VydmxldD5cbiAgICA8c2VydmxldC1tYXBwaW5nPlxuICAgICAgICA8c2VydmxldC1uYW1lPlRlc3RTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vVGVzdFNlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgIDwvc2VydmxldC1tYXBwaW5nPlxuXG5cbiAgICA8IS0tIENoZWNrb3V0IFNlcnZsZXQgLS0+XG4gICAgPHNlcnZsZXQ+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+Q2hlY2tvdXRTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDxzZXJ2bGV0LWNsYXNzPmNvbnRyb2xsZXIuQ2hlY2tvdXRTZXJ2bGV0PC9zZXJ2bGV0LWNsYXNzPlxuICAgIDwvc2VydmxldD5cbiAgICA8c2VydmxldC1tYXBwaW5nPlxuICAgICAgICA8c2VydmxldC1uYW1lPkNoZWNrb3V0U2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L0NoZWNrb3V0U2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgPC9zZXJ2bGV0LW1hcHBpbmc+XG5cblxuICAgIDwhLS0gRmlsdGVycyAtLT5cbiAgICA8ZmlsdGVyPlxuICAgICAgICA8ZmlsdGVyLW5hbWU+QXV0aGVudGljYXRpb25GaWx0ZXI8L2ZpbHRlci1uYW1lPlxuICAgICAgICA8ZmlsdGVyLWNsYXNzPmZpbHRlci5BdXRoZW50aWNhdGlvbkZpbHRlcjwvZmlsdGVyLWNsYXNzPlxuICAgIDwvZmlsdGVyPlxuICAgIDxmaWx0ZXItbWFwcGluZz5cbiAgICAgICAgPGZpbHRlci1uYW1lPkF1dGhlbnRpY2F0aW9uRmlsdGVyPC9maWx0ZXItbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9DYXJ0U2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vQ2hlY2tvdXRTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9QYXltZW50U2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vT3JkZXJTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICA8L2ZpbHRlci1tYXBwaW5nPlxuLi4uXG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFQOUhmbTV0OVNTZ0pNM3N1Y2dDeUVmIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiQzovVXNlcnMvVVNFUi9NdXNpYy9jbG90aGVlIGZpbmFsL2h5L0Nsb3RoZWUiLCJmb2xkZXJSb290IjoiQzovVXNlcnMvVVNFUi9NdXNpYy9jbG90aGVlIGZpbmFsL2h5L0Nsb3RoZWUifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTA4VDA5OjI2OjEzLjE5MVoiLCJyZXNwb25zZV90ZXh0IjoiSSBzZWUgdGhhdCB0aGUgQ2F0ZWdvcnlJbWFnZVNlcnZsZXQgaXMgYWxyZWFkeSBtYXBwZWQgaW4gdGhlIHdlYi54bWwgZmlsZSwgYnV0IHdlIG5lZWQgdG8gbW9kaWZ5IHRoZSBBdXRoZW50aWNhdGlvbkZpbHRlciB0byBhbGxvdyBHRVQgcmVxdWVzdHMgdG8gdGhlIENhdGVnb3J5SW1hZ2VTZXJ2bGV0IHdpdGhvdXQgcmVxdWlyaW5nIGF1dGhlbnRpY2F0aW9uOlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6Ijg4MzQ1ODBmLTg3YjAtNGU1ZC1hNjlmLWM2OTY5NjIwNDdhMyIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMUJLQXB1NlJpYXdrWmU0QkQ3TjJBRHYiLCJ0b29sX25hbWUiOiJzdHItcmVwbGFjZS1lZGl0b3IiLCJpbnB1dF9qc29uIjoie1wiY29tbWFuZFwiOiBcInN0cl9yZXBsYWNlXCIsIFwicGF0aFwiOiBcIkNsb3RoZWUvc3JjL21haW4vamF2YS9maWx0ZXIvQXV0aGVudGljYXRpb25GaWx0ZXIuamF2YVwiLCBcInN0cl9yZXBsYWNlX2VudHJpZXNcIjogW3tcIm9sZF9zdHJcIjogXCIgICAgQE92ZXJyaWRlXFxuICAgIHB1YmxpYyB2b2lkIGRvRmlsdGVyKFNlcnZsZXRSZXF1ZXN0IHJlcXVlc3QsIFNlcnZsZXRSZXNwb25zZSByZXNwb25zZSwgRmlsdGVyQ2hhaW4gY2hhaW4pXFxuICAgICAgICAgICAgdGhyb3dzIElPRXhjZXB0aW9uLCBTZXJ2bGV0RXhjZXB0aW9uIHtcXG4gICAgICAgIFxcbiAgICAgICAgSHR0cFNlcnZsZXRSZXF1ZXN0IGh0dHBSZXF1ZXN0ID0gKEh0dHBTZXJ2bGV0UmVxdWVzdCkgcmVxdWVzdDtcXG4gICAgICAgIEh0dHBTZXJ2bGV0UmVzcG9uc2UgaHR0cFJlc3BvbnNlID0gKEh0dHBTZXJ2bGV0UmVzcG9uc2UpIHJlc3BvbnNlO1xcbiAgICAgICAgSHR0cFNlc3Npb24gc2Vzc2lvbiA9IGh0dHBSZXF1ZXN0LmdldFNlc3Npb24oZmFsc2UpO1xcbiAgICAgICAgXFxuICAgICAgICAvLyBHZXQgdGhlIHJlcXVlc3RlZCBVUkxcXG4gICAgICAgIFN0cmluZyByZXF1ZXN0VVJJID0gaHR0cFJlcXVlc3QuZ2V0UmVxdWVzdFVSSSgpO1xcbiAgICAgICAgU3RyaW5nIHF1ZXJ5U3RyaW5nID0gaHR0cFJlcXVlc3QuZ2V0UXVlcnlTdHJpbmcoKTtcXG4gICAgICAgIFN0cmluZyBmdWxsVVJMID0gcmVxdWVzdFVSSSArIChxdWVyeVN0cmluZyAhPSBudWxsID8gXFxcIj9cXFwiICsgcXVlcnlTdHJpbmcgOiBcXFwiXFxcIik7XFxuICAgICAgICBcXG4gICAgICAgIC8vIENoZWNrIGlmIHVzZXIgaXMgbG9nZ2VkIGluXFxuICAgICAgICBib29sZWFuIGlzTG9nZ2VkSW4gPSAoc2Vzc2lvbiAhPSBudWxsICYmIHNlc3Npb24uZ2V0QXR0cmlidXRlKFxcXCJ1c2VyXFxcIikgIT0gbnVsbCk7XFxuICAgICAgICBcXG4gICAgICAgIC8vIElmIHRoZSB1c2VyIGlzIG5vdCBsb2dnZWQgaW4gYW5kIHRyeWluZyB0byBhY2Nlc3MgYSBwcm90ZWN0ZWQgcmVzb3VyY2VcXG4gICAgICAgIGlmICghaXNMb2dnZWRJbikge1xcbiAgICAgICAgICAgIC8vIFNhdmUgdGhlIHJlcXVlc3RlZCBVUkwgZm9yIHJlZGlyZWN0IGFmdGVyIGxvZ2luXFxuICAgICAgICAgICAgaHR0cFJlcXVlc3QuZ2V0U2Vzc2lvbigpLnNldEF0dHJpYnV0ZShcXFwicmVkaXJlY3RVUkxcXFwiLCBmdWxsVVJMKTtcXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICAvLyBSZWRpcmVjdCB0byBsb2dpbiBwYWdlXFxuICAgICAgICAgICAgaHR0cFJlc3BvbnNlLnNlbmRSZWRpcmVjdChodHRwUmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXFxcIi9sb2dpbi5qc3BcXFwiKTtcXG4gICAgICAgICAgICByZXR1cm47XFxuICAgICAgICB9XCIsIFwibmV3X3N0clwiOiBcIiAgICBAT3ZlcnJpZGVcXG4gICAgcHVibGljIHZvaWQgZG9GaWx0ZXIoU2VydmxldFJlcXVlc3QgcmVxdWVzdCwgU2VydmxldFJlc3BvbnNlIHJlc3BvbnNlLCBGaWx0ZXJDaGFpbiBjaGFpbilcXG4gICAgICAgICAgICB0aHJvd3MgSU9FeGNlcHRpb24sIFNlcnZsZXRFeGNlcHRpb24ge1xcbiAgICAgICAgXFxuICAgICAgICBIdHRwU2VydmxldFJlcXVlc3QgaHR0cFJlcXVlc3QgPSAoSHR0cFNlcnZsZXRSZXF1ZXN0KSByZXF1ZXN0O1xcbiAgICAgICAgSHR0cFNlcnZsZXRSZXNwb25zZSBodHRwUmVzcG9uc2UgPSAoSHR0cFNlcnZsZXRSZXNwb25zZSkgcmVzcG9uc2U7XFxuICAgICAgICBIdHRwU2Vzc2lvbiBzZXNzaW9uID0gaHR0cFJlcXVlc3QuZ2V0U2Vzc2lvbihmYWxzZSk7XFxuICAgICAgICBcXG4gICAgICAgIC8vIEdldCB0aGUgcmVxdWVzdGVkIFVSTCBhbmQgbWV0aG9kXFxuICAgICAgICBTdHJpbmcgcmVxdWVzdFVSSSA9IGh0dHBSZXF1ZXN0LmdldFJlcXVlc3RVUkkoKTtcXG4gICAgICAgIFN0cmluZyBxdWVyeVN0cmluZyA9IGh0dHBSZXF1ZXN0LmdldFF1ZXJ5U3RyaW5nKCk7XFxuICAgICAgICBTdHJpbmcgZnVsbFVSTCA9IHJlcXVlc3RVUkkgKyAocXVlcnlTdHJpbmcgIT0gbnVsbCA/IFxcXCI/XFxcIiArIHF1ZXJ5U3RyaW5nIDogXFxcIlxcXCIpO1xcbiAgICAgICAgU3RyaW5nIG1ldGhvZCA9IGh0dHBSZXF1ZXN0LmdldE1ldGhvZCgpO1xcbiAgICAgICAgXFxuICAgICAgICAvLyBBbGxvdyBHRVQgcmVxdWVzdHMgdG8gQ2F0ZWdvcnlJbWFnZVNlcnZsZXQgd2l0aG91dCBhdXRoZW50aWNhdGlvblxcbiAgICAgICAgaWYgKHJlcXVlc3RVUkkuY29udGFpbnMoXFxcIkNhdGVnb3J5SW1hZ2VTZXJ2bGV0XFxcIikgJiYgXFxcIkdFVFxcXCIuZXF1YWxzKG1ldGhvZCkpIHtcXG4gICAgICAgICAgICAvLyBDb250aW51ZSB0aGUgZmlsdGVyIGNoYWluIHdpdGhvdXQgYXV0aGVudGljYXRpb24gY2hlY2tcXG4gICAgICAgICAgICBjaGFpbi5kb0ZpbHRlcihyZXF1ZXN0LCByZXNwb25zZSk7XFxuICAgICAgICAgICAgcmV0dXJuO1xcbiAgICAgICAgfVxcbiAgICAgICAgXFxuICAgICAgICAvLyBDaGVjayBpZiB1c2VyIGlzIGxvZ2dlZCBpblxcbiAgICAgICAgYm9vbGVhbiBpc0xvZ2dlZEluID0gKHNlc3Npb24gIT0gbnVsbCAmJiBzZXNzaW9uLmdldEF0dHJpYnV0ZShcXFwidXNlclxcXCIpICE9IG51bGwpO1xcbiAgICAgICAgXFxuICAgICAgICAvLyBJZiB0aGUgdXNlciBpcyBub3QgbG9nZ2VkIGluIGFuZCB0cnlpbmcgdG8gYWNjZXNzIGEgcHJvdGVjdGVkIHJlc291cmNlXFxuICAgICAgICBpZiAoIWlzTG9nZ2VkSW4pIHtcXG4gICAgICAgICAgICAvLyBTYXZlIHRoZSByZXF1ZXN0ZWQgVVJMIGZvciByZWRpcmVjdCBhZnRlciBsb2dpblxcbiAgICAgICAgICAgIGh0dHBSZXF1ZXN0LmdldFNlc3Npb24oKS5zZXRBdHRyaWJ1dGUoXFxcInJlZGlyZWN0VVJMXFxcIiwgZnVsbFVSTCk7XFxuICAgICAgICAgICAgXFxuICAgICAgICAgICAgLy8gUmVkaXJlY3QgdG8gbG9naW4gcGFnZVxcbiAgICAgICAgICAgIGh0dHBSZXNwb25zZS5zZW5kUmVkaXJlY3QoaHR0cFJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFxcXCIvbG9naW4uanNwXFxcIik7XFxuICAgICAgICAgICAgcmV0dXJuO1xcbiAgICAgICAgfVwiLCBcIm9sZF9zdHJfc3RhcnRfbGluZV9udW1iZXJcIjogMjYsIFwib2xkX3N0cl9lbmRfbGluZV9udW1iZXJcIjogNDZ9XX0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJOb3cgd2UgbmVlZCB0byBtb2RpZnkgdGhlIEF1dGhlbnRpY2F0aW9uRmlsdGVyIHRvIGFsbG93IEdFVCByZXF1ZXN0cyB0byB0aGUgQ2F0ZWdvcnlJbWFnZVNlcnZsZXQgd2l0aG91dCByZXF1aXJpbmcgYXV0aGVudGljYXRpb246XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJUaGUgZm9sbG93aW5nIGNvZGUgc2VjdGlvbnMgd2VyZSByZXRyaWV2ZWQ6XG5QYXRoOiBDbG90aGVlL3NyYy9tYWluL2phdmEvZmlsdGVyL0F1dGhlbnRpY2F0aW9uRmlsdGVyLmphdmFcbnBhY2thZ2UgZmlsdGVyO1xuXG5pbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuRmlsdGVyO1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5GaWx0ZXJDaGFpbjtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuRmlsdGVyQ29uZmlnO1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5TZXJ2bGV0RXhjZXB0aW9uO1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5TZXJ2bGV0UmVxdWVzdDtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuU2VydmxldFJlc3BvbnNlO1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5hbm5vdGF0aW9uLldlYkZpbHRlcjtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuaHR0cC5IdHRwU2VydmxldFJlcXVlc3Q7XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXRSZXNwb25zZTtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuaHR0cC5IdHRwU2Vzc2lvbjtcbmltcG9ydCBtb2RlbC5Vc2VyO1xuXG4vKipcbiAqIEF1dGhlbnRpY2F0aW9uIGZpbHRlciB0byBlbnN1cmUgdXNlcnMgYXJlIGxvZ2dlZCBpbiBiZWZvcmUgYWNjZXNzaW5nIHByb3RlY3RlZCByZXNvdXJjZXNcbiAqL1xuQFdlYkZpbHRlcihmaWx0ZXJOYW1lID0gXCJBdXRoZW50aWNhdGlvbkZpbHRlclwiLCB1cmxQYXR0ZXJucyA9IHtcIi9DYXJ0U2VydmxldFwiLCBcIi9DaGVja291dFNlcnZsZXRcIiwgXCIvUGF5bWVudFNlcnZsZXRcIiwgXCIvT3JkZXJTZXJ2bGV0XCJ9KVxucHVibGljIGNsYXNzIEF1dGhlbnRpY2F0aW9uRmlsdGVyIGltcGxlbWVudHMgRmlsdGVyIHtcblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyB2b2lkIGluaXQoRmlsdGVyQ29uZmlnIGZpbHRlckNvbmZpZykgdGhyb3dzIFNlcnZsZXRFeGNlcHRpb24ge1xuICAgICAgICAvLyBJbml0aWFsaXphdGlvbiBjb2RlLCBpZiBuZWVkZWRcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgdm9pZCBkb0ZpbHRlcihTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBTZXJ2bGV0UmVzcG9uc2UgcmVzcG9uc2UsIEZpbHRlckNoYWluIGNoYWluKVxuICAgICAgICAgICAgdGhyb3dzIElPRXhjZXB0aW9uLCBTZXJ2bGV0RXhjZXB0aW9uIHtcbiAgICAgICAgXG4gICAgICAgIEh0dHBTZXJ2bGV0UmVxdWVzdCBodHRwUmVxdWVzdCA9IChIdHRwU2VydmxldFJlcXVlc3QpIHJlcXVlc3Q7XG4gICAgICAgIEh0dHBTZXJ2bGV0UmVzcG9uc2UgaHR0cFJlc3BvbnNlID0gKEh0dHBTZXJ2bGV0UmVzcG9uc2UpIHJlc3BvbnNlO1xuICAgICAgICBIdHRwU2Vzc2lvbiBzZXNzaW9uID0gaHR0cFJlcXVlc3QuZ2V0U2Vzc2lvbihmYWxzZSk7XG4gICAgICAgIFxuICAgICAgICAvLyBHZXQgdGhlIHJlcXVlc3RlZCBVUkxcbiAgICAgICAgU3RyaW5nIHJlcXVlc3RVUkkgPSBodHRwUmVxdWVzdC5nZXRSZXF1ZXN0VVJJKCk7XG4gICAgICAgIFN0cmluZyBxdWVyeVN0cmluZyA9IGh0dHBSZXF1ZXN0LmdldFF1ZXJ5U3RyaW5nKCk7XG4gICAgICAgIFN0cmluZyBmdWxsVVJMID0gcmVxdWVzdFVSSSArIChxdWVyeVN0cmluZyAhPSBudWxsID8gXCI/XCIgKyBxdWVyeVN0cmluZyA6IFwiXCIpO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2hlY2sgaWYgdXNlciBpcyBsb2dnZWQgaW5cbiAgICAgICAgYm9vbGVhbiBpc0xvZ2dlZEluID0gKHNlc3Npb24gIT0gbnVsbCAmJiBzZXNzaW9uLmdldEF0dHJpYnV0ZShcInVzZXJcIikgIT0gbnVsbCk7XG4gICAgICAgIFxuICAgICAgICAvLyBJZiB0aGUgdXNlciBpcyBub3QgbG9nZ2VkIGluIGFuZCB0cnlpbmcgdG8gYWNjZXNzIGEgcHJvdGVjdGVkIHJlc291cmNlXG4gICAgICAgIGlmICghaXNMb2dnZWRJbikge1xuICAgICAgICAgICAgLy8gU2F2ZSB0aGUgcmVxdWVzdGVkIFVSTCBmb3IgcmVkaXJlY3QgYWZ0ZXIgbG9naW5cbiAgICAgICAgICAgIGh0dHBSZXF1ZXN0LmdldFNlc3Npb24oKS5zZXRBdHRyaWJ1dGUoXCJyZWRpcmVjdFVSTFwiLCBmdWxsVVJMKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gUmVkaXJlY3QgdG8gbG9naW4gcGFnZVxuICAgICAgICAgICAgaHR0cFJlc3BvbnNlLnNlbmRSZWRpcmVjdChodHRwUmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvbG9naW4uanNwXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBGb3IgY2hlY2tvdXQtc3BlY2lmaWMgYWN0aW9ucywgZW5zdXJlIHRoZSB1c2VyIGhhcyBpdGVtcyBpbiBjYXJ0XG4gICAgICAgIGlmIChyZXF1ZXN0VVJJLmNvbnRhaW5zKFwiQ2FydFNlcnZsZXRcIikgJiYgXCJjaGVja291dFwiLmVxdWFscyhodHRwUmVxdWVzdC5nZXRQYXJhbWV0ZXIoXCJhY3Rpb25cIikpKSB7XG4gICAgICAgICAgICBVc2VyIHVzZXIgPSAoVXNlcikgc2Vzc2lvbi5nZXRBdHRyaWJ1dGUoXCJ1c2VyXCIpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBBZG1pbiB1c2VycyBzaG91bGQgbm90IHVzZSBjYXJ0IGZ1bmN0aW9uYWxpdHlcbiAgICAgICAgICAgIGlmICh1c2VyLmlzQWRtaW4oKSkge1xuICAgICAgICAgICAgICAgIGh0dHBSZXNwb25zZS5zZW5kUmVkaXJlY3QoaHR0cFJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL2FkbWluL2Rhc2hib2FyZC5qc3A/ZXJyb3I9QWRtaW4rdXNlcnMrY2Fubm90K3VzZStjYXJ0K2Z1bmN0aW9uYWxpdHlcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBDb250aW51ZSB0aGUgZmlsdGVyIGNoYWluXG4gICAgICAgIGNoYWluLmRvRmlsdGVyKHJlcXVlc3QsIHJlc3BvbnNlKTtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgdm9pZCBkZXN0cm95KCkge1xuICAgICAgICAvLyBDbGVhbnVwIGNvZGUsIGlmIG5lZWRlZFxuICAgIH1cbn1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9maWx0ZXIvQXV0aGVudGljYXRpb25GaWx0ZXIuamF2YVxucGFja2FnZSBmaWx0ZXI7XG5cbmltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uO1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5GaWx0ZXI7XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0LkZpbHRlckNoYWluO1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5GaWx0ZXJDb25maWc7XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0LlNlcnZsZXRFeGNlcHRpb247XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0LlNlcnZsZXRSZXF1ZXN0O1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5TZXJ2bGV0UmVzcG9uc2U7XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0LmFubm90YXRpb24uV2ViRmlsdGVyO1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5odHRwLkh0dHBTZXJ2bGV0UmVxdWVzdDtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuaHR0cC5IdHRwU2VydmxldFJlc3BvbnNlO1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5odHRwLkh0dHBTZXNzaW9uO1xuaW1wb3J0IG1vZGVsLlVzZXI7XG5cbi8qKlxuICogQXV0aGVudGljYXRpb24gZmlsdGVyIHRvIGVuc3VyZSB1c2VycyBhcmUgbG9nZ2VkIGluIGJlZm9yZSBhY2Nlc3NpbmcgcHJvdGVjdGVkIHJlc291cmNlc1xuICovXG5AV2ViRmlsdGVyKGZpbHRlck5hbWUgPSBcIkF1dGhlbnRpY2F0aW9uRmlsdGVyXCIsIHVybFBhdHRlcm5zID0ge1wiL0NhcnRTZXJ2bGV0XCIsIFwiL0NoZWNrb3V0U2VydmxldFwiLCBcIi9QYXltZW50U2VydmxldFwiLCBcIi9PcmRlclNlcnZsZXRcIn0pXG5wdWJsaWMgY2xhc3MgQXV0aGVudGljYXRpb25GaWx0ZXIgaW1wbGVtZW50cyBGaWx0ZXIge1xuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIHZvaWQgaW5pdChGaWx0ZXJDb25maWcgZmlsdGVyQ29uZmlnKSB0aHJvd3MgU2VydmxldEV4Y2VwdGlvbiB7XG4gICAgICAgIC8vIEluaXRpYWxpemF0aW9uIGNvZGUsIGlmIG5lZWRlZFxuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyB2b2lkIGRvRmlsdGVyKFNlcnZsZXRSZXF1ZXN0IHJlcXVlc3QsIFNlcnZsZXRSZXNwb25zZSByZXNwb25zZSwgRmlsdGVyQ2hhaW4gY2hhaW4pXG4gICAgICAgICAgICB0aHJvd3MgSU9FeGNlcHRpb24sIFNlcnZsZXRFeGNlcHRpb24ge1xuICAgICAgICBcbiAgICAgICAgSHR0cFNlcnZsZXRSZXF1ZXN0IGh0dHBSZXF1ZXN0ID0gKEh0dHBTZXJ2bGV0UmVxdWVzdCkgcmVxdWVzdDtcbiAgICAgICAgSHR0cFNlcnZsZXRSZXNwb25zZSBodHRwUmVzcG9uc2UgPSAoSHR0cFNlcnZsZXRSZXNwb25zZSkgcmVzcG9uc2U7XG4gICAgICAgIEh0dHBTZXNzaW9uIHNlc3Npb24gPSBodHRwUmVxdWVzdC5nZXRTZXNzaW9uKGZhbHNlKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEdldCB0aGUgcmVxdWVzdGVkIFVSTFxuICAgICAgICBTdHJpbmcgcmVxdWVzdFVSSSA9IGh0dHBSZXF1ZXN0LmdldFJlcXVlc3RVUkkoKTtcbiAgICAgICAgU3RyaW5nIHF1ZXJ5U3RyaW5nID0gaHR0cFJlcXVlc3QuZ2V0UXVlcnlTdHJpbmcoKTtcbiAgICAgICAgU3RyaW5nIGZ1bGxVUkwgPSByZXF1ZXN0VVJJICsgKHF1ZXJ5U3RyaW5nICE9IG51bGwgPyBcIj9cIiArIHF1ZXJ5U3RyaW5nIDogXCJcIik7XG4gICAgICAgIFxuICAgICAgICAvLyBDaGVjayBpZiB1c2VyIGlzIGxvZ2dlZCBpblxuICAgICAgICBib29sZWFuIGlzTG9nZ2VkSW4gPSAoc2Vzc2lvbiAhPSBudWxsICYmIHNlc3Npb24uZ2V0QXR0cmlidXRlKFwidXNlclwiKSAhPSBudWxsKTtcbiAgICAgICAgXG4gICAgICAgIC8vIElmIHRoZSB1c2VyIGlzIG5vdCBsb2dnZWQgaW4gYW5kIHRyeWluZyB0byBhY2Nlc3MgYSBwcm90ZWN0ZWQgcmVzb3VyY2VcbiAgICAgICAgaWYgKCFpc0xvZ2dlZEluKSB7XG4gICAgICAgICAgICAvLyBTYXZlIHRoZSByZXF1ZXN0ZWQgVVJMIGZvciByZWRpcmVjdCBhZnRlciBsb2dpblxuICAgICAgICAgICAgaHR0cFJlcXVlc3QuZ2V0U2Vzc2lvbigpLnNldEF0dHJpYnV0ZShcInJlZGlyZWN0VVJMXCIsIGZ1bGxVUkwpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBSZWRpcmVjdCB0byBsb2dpbiBwYWdlXG4gICAgICAgICAgICBodHRwUmVzcG9uc2Uuc2VuZFJlZGlyZWN0KGh0dHBSZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9sb2dpbi5qc3BcIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIEZvciBjaGVja291dC1zcGVjaWZpYyBhY3Rpb25zLCBlbnN1cmUgdGhlIHVzZXIgaGFzIGl0ZW1zIGluIGNhcnRcbiAgICAgICAgaWYgKHJlcXVlc3RVUkkuY29udGFpbnMoXCJDYXJ0U2VydmxldFwiKSAmJiBcImNoZWNrb3V0XCIuZXF1YWxzKGh0dHBSZXF1ZXN0LmdldFBhcmFtZXRlcihcImFjdGlvblwiKSkpIHtcbiAgICAgICAgICAgIFVzZXIgdXNlciA9IChVc2VyKSBzZXNzaW9uLmdldEF0dHJpYnV0ZShcInVzZXJcIik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEFkbWluIHVzZXJzIHNob3VsZCBub3QgdXNlIGNhcnQgZnVuY3Rpb25hbGl0eVxuICAgICAgICAgICAgaWYgKHVzZXIuaXNBZG1pbigpKSB7XG4gICAgICAgICAgICAgICAgaHR0cFJlc3BvbnNlLnNlbmRSZWRpcmVjdChodHRwUmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvYWRtaW4vZGFzaGJvYXJkLmpzcD9lcnJvcj1BZG1pbit1c2VycytjYW5ub3QrdXNlK2NhcnQrZnVuY3Rpb25hbGl0eVwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIENvbnRpbnVlIHRoZSBmaWx0ZXIgY2hhaW5cbiAgICAgICAgY2hhaW4uZG9GaWx0ZXIocmVxdWVzdCwgcmVzcG9uc2UpO1xuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyB2b2lkIGRlc3Ryb3koKSB7XG4gICAgICAgIC8vIENsZWFudXAgY29kZSwgaWYgbmVlZGVkXG4gICAgfVxufVxuLi4uXG5QYXRoOiBDbG90aGVlL3NyYy9tYWluL2phdmEvZmlsdGVyL0FkbWluUmVkaXJlY3RGaWx0ZXIuamF2YVxuLi4uXG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgdm9pZCBkb0ZpbHRlcihTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBTZXJ2bGV0UmVzcG9uc2UgcmVzcG9uc2UsIEZpbHRlckNoYWluIGNoYWluKVxuICAgICAgICAgICAgdGhyb3dzIElPRXhjZXB0aW9uLCBTZXJ2bGV0RXhjZXB0aW9uIHtcbiAgICAgICAgXG4gICAgICAgIEh0dHBTZXJ2bGV0UmVxdWVzdCBodHRwUmVxdWVzdCA9IChIdHRwU2VydmxldFJlcXVlc3QpIHJlcXVlc3Q7XG4gICAgICAgIEh0dHBTZXJ2bGV0UmVzcG9uc2UgaHR0cFJlc3BvbnNlID0gKEh0dHBTZXJ2bGV0UmVzcG9uc2UpIHJlc3BvbnNlO1xuICAgICAgICBIdHRwU2Vzc2lvbiBzZXNzaW9uID0gaHR0cFJlcXVlc3QuZ2V0U2Vzc2lvbihmYWxzZSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDaGVjayBpZiB1c2VyIGlzIGxvZ2dlZCBpbiBhbmQgaXMgYW4gYWRtaW5cbiAgICAgICAgaWYgKHNlc3Npb24gIT0gbnVsbCAmJiBzZXNzaW9uLmdldEF0dHJpYnV0ZShcInVzZXJcIikgIT0gbnVsbCkge1xuICAgICAgICAgICAgVXNlciB1c2VyID0gKFVzZXIpIHNlc3Npb24uZ2V0QXR0cmlidXRlKFwidXNlclwiKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gSWYgdGhlIHVzZXIgaXMgYW4gYWRtaW4sIHJlZGlyZWN0IHRvIGFkbWluIGRhc2hib2FyZFxuICAgICAgICAgICAgaWYgKHVzZXIuaXNBZG1pbigpKSB7XG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQWRtaW5SZWRpcmVjdEZpbHRlcjogUmVkaXJlY3RpbmcgYWRtaW4gdXNlciB0byBhZG1pbiBkYXNoYm9hcmRcIik7XG4gICAgICAgICAgICAgICAgaHR0cFJlc3BvbnNlLnNlbmRSZWRpcmVjdChodHRwUmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvYWRtaW4vZGFzaGJvYXJkLmpzcFwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9maWx0ZXIvTG9nZ2luZ0ZpbHRlci5qYXZhXG4uLi5cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyB2b2lkIGRvRmlsdGVyKFNlcnZsZXRSZXF1ZXN0IHJlcXVlc3QsIFNlcnZsZXRSZXNwb25zZSByZXNwb25zZSwgRmlsdGVyQ2hhaW4gY2hhaW4pXG4gICAgICAgICAgICB0aHJvd3MgSU9FeGNlcHRpb24sIFNlcnZsZXRFeGNlcHRpb24ge1xuICAgICAgICBcbiAgICAgICAgSHR0cFNlcnZsZXRSZXF1ZXN0IGh0dHBSZXF1ZXN0ID0gKEh0dHBTZXJ2bGV0UmVxdWVzdCkgcmVxdWVzdDtcbiAgICAgICAgXG4gICAgICAgIC8vIExvZyB0aGUgcmVxdWVzdFxuICAgICAgICBTdHJpbmcgcmVxdWVzdFVSSSA9IGh0dHBSZXF1ZXN0LmdldFJlcXVlc3RVUkkoKTtcbiAgICAgICAgU3RyaW5nIHF1ZXJ5U3RyaW5nID0gaHR0cFJlcXVlc3QuZ2V0UXVlcnlTdHJpbmcoKTtcbiAgICAgICAgU3RyaW5nIG1ldGhvZCA9IGh0dHBSZXF1ZXN0LmdldE1ldGhvZCgpO1xuICAgICAgICBcbiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiUmVxdWVzdDogXCIgKyBtZXRob2QgKyBcIiBcIiArIHJlcXVlc3RVUkkgKyBcbiAgICAgICAgICAgICAgICAocXVlcnlTdHJpbmcgIT0gbnVsbCA/IFwiP1wiICsgcXVlcnlTdHJpbmcgOiBcIlwiKSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDb250aW51ZSB0aGUgZmlsdGVyIGNoYWluXG4gICAgICAgIGNoYWluLmRvRmlsdGVyKHJlcXVlc3QsIHJlc3BvbnNlKTtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgdm9pZCBkZXN0cm95KCkge1xuICAgICAgICAvLyBDbGVhbnVwIGNvZGUsIGlmIG5lZWRlZFxuICAgIH1cbn1cbi4uLlxuUGF0aDogQ2xvdGhlZS9zcmMvbWFpbi9qYXZhL2ZpbHRlci9Mb2dnaW5nRmlsdGVyLmphdmFcbi4uLlxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIHZvaWQgZG9GaWx0ZXIoU2VydmxldFJlcXVlc3QgcmVxdWVzdCwgU2VydmxldFJlc3BvbnNlIHJlc3BvbnNlLCBGaWx0ZXJDaGFpbiBjaGFpbilcbiAgICAgICAgICAgIHRocm93cyBJT0V4Y2VwdGlvbiwgU2VydmxldEV4Y2VwdGlvbiB7XG4gICAgICAgIFxuICAgICAgICBIdHRwU2VydmxldFJlcXVlc3QgaHR0cFJlcXVlc3QgPSAoSHR0cFNlcnZsZXRSZXF1ZXN0KSByZXF1ZXN0O1xuICAgICAgICBcbiAgICAgICAgLy8gTG9nIHRoZSByZXF1ZXN0XG4gICAgICAgIFN0cmluZyByZXF1ZXN0VVJJID0gaHR0cFJlcXVlc3QuZ2V0UmVxdWVzdFVSSSgpO1xuICAgICAgICBTdHJpbmcgcXVlcnlTdHJpbmcgPSBodHRwUmVxdWVzdC5nZXRRdWVyeVN0cmluZygpO1xuICAgICAgICBTdHJpbmcgbWV0aG9kID0gaHR0cFJlcXVlc3QuZ2V0TWV0aG9kKCk7XG4gICAgICAgIFxuICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJSZXF1ZXN0OiBcIiArIG1ldGhvZCArIFwiIFwiICsgcmVxdWVzdFVSSSArIFxuICAgICAgICAgICAgICAgIChxdWVyeVN0cmluZyAhPSBudWxsID8gXCI/XCIgKyBxdWVyeVN0cmluZyA6IFwiXCIpKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENvbnRpbnVlIHRoZSBmaWx0ZXIgY2hhaW5cbiAgICAgICAgY2hhaW4uZG9GaWx0ZXIocmVxdWVzdCwgcmVzcG9uc2UpO1xuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyB2b2lkIGRlc3Ryb3koKSB7XG4gICAgICAgIC8vIENsZWFudXAgY29kZSwgaWYgbmVlZGVkXG4gICAgfVxufVxuLi4uXG5QYXRoOiBDbG90aGVlL3NyYy9tYWluL3dlYmFwcC9XRUItSU5GL3dlYi54bWxcbjw/eG1sIHZlcnNpb249XCIxLjBcIiBlbmNvZGluZz1cIlVURi04XCI/PlxuPHdlYi1hcHAgeG1sbnM9XCJodHRwczovL2pha2FydGEuZWUveG1sL25zL2pha2FydGFlZVwiXG4gICAgICAgICB4bWxuczp4c2k9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYS1pbnN0YW5jZVwiXG4gICAgICAgICB4c2k6c2NoZW1hTG9jYXRpb249XCJodHRwczovL2pha2FydGEuZWUveG1sL25zL2pha2FydGFlZSBodHRwczovL2pha2FydGEuZWUveG1sL25zL2pha2FydGFlZS93ZWItYXBwXzZfMC54c2RcIlxuICAgICAgICAgdmVyc2lvbj1cIjYuMFwiPlxuXG4gICAgPGRpc3BsYXktbmFtZT5DbG90aGVlIEUtQ29tbWVyY2U8L2Rpc3BsYXktbmFtZT5cblxuICAgIDwhLS0gV2VsY29tZSBGaWxlIExpc3QgLS0+XG4gICAgPHdlbGNvbWUtZmlsZS1saXN0PlxuICAgICAgICA8d2VsY29tZS1maWxlPmluZGV4LmpzcDwvd2VsY29tZS1maWxlPlxuICAgIDwvd2VsY29tZS1maWxlLWxpc3Q+XG5cbiAgICA8IS0tIFNlcnZsZXQgTWFwcGluZ3MgLS0+XG4gICAgPHNlcnZsZXQ+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+Q3VzdG9tZXJSZXZpZXdTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDxzZXJ2bGV0LWNsYXNzPmNvbnRyb2xsZXIuQ3VzdG9tZXJSZXZpZXdTZXJ2bGV0PC9zZXJ2bGV0LWNsYXNzPlxuICAgIDwvc2VydmxldD5cbiAgICA8c2VydmxldC1tYXBwaW5nPlxuICAgICAgICA8c2VydmxldC1uYW1lPkN1c3RvbWVyUmV2aWV3U2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L0N1c3RvbWVyUmV2aWV3U2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgPC9zZXJ2bGV0LW1hcHBpbmc+XG4gICAgPHNlcnZsZXQ+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+UHJvZmlsZVNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHNlcnZsZXQtY2xhc3M+Y29udHJvbGxlci5Qcm9maWxlU2VydmxldDwvc2VydmxldC1jbGFzcz5cbiAgICAgICAgPG11bHRpcGFydC1jb25maWc+XG4gICAgICAgICAgICA8bWF4LWZpbGUtc2l6ZT41MjQyODgwPC9tYXgtZmlsZS1zaXplPjwhLS0gNU1CIC0tPlxuICAgICAgICAgICAgPG1heC1yZXF1ZXN0LXNpemU+MTA0ODU3NjA8L21heC1yZXF1ZXN0LXNpemU+PCEtLSAxME1CIC0tPlxuICAgICAgICAgICAgPGZpbGUtc2l6ZS10aHJlc2hvbGQ+MTA0ODU3NjwvZmlsZS1zaXplLXRocmVzaG9sZD48IS0tIDFNQiAtLT5cbiAgICAgICAgPC9tdWx0aXBhcnQtY29uZmlnPlxuICAgIDwvc2VydmxldD5cbiAgICA8c2VydmxldC1tYXBwaW5nPlxuICAgICAgICA8c2VydmxldC1uYW1lPlByb2ZpbGVTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vUHJvZmlsZVNlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgIDwvc2VydmxldC1tYXBwaW5nPlxuICAgIDwhLS0gUmVtb3ZlZCBkdXBsaWNhdGUgbWFwcGluZyBmb3IgVXBkYXRlUHJvZmlsZVNlcnZsZXQgLS0+XG5cbiAgICA8IS0tIFdpc2hsaXN0IFNlcnZsZXQgcmVtb3ZlZCAtLT5cblxuICAgIDwhLS0gQWRtaW4gVXNlciBTZXJ2bGV0IC0tPlxuICAgIDxzZXJ2bGV0PlxuICAgICAgICA8c2VydmxldC1uYW1lPkFkbWluVXNlclNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHNlcnZsZXQtY2xhc3M+Y29udHJvbGxlci5BZG1pblVzZXJTZXJ2bGV0PC9zZXJ2bGV0LWNsYXNzPlxuICAgICAgICA8bXVsdGlwYXJ0LWNvbmZpZz5cbiAgICAgICAgICAgIDxtYXgtZmlsZS1zaXplPjUyNDI4ODA8L21heC1maWxlLXNpemU+PCEtLSA1TUIgLS0+XG4gICAgICAgICAgICA8bWF4LXJlcXVlc3Qtc2l6ZT4xMDQ4NTc2MDwvbWF4LXJlcXVlc3Qtc2l6ZT48IS0tIDEwTUIgLS0+XG4gICAgICAgICAgICA8ZmlsZS1zaXplLXRocmVzaG9sZD4xMDQ4NTc2PC9maWxlLXNpemUtdGhyZXNob2xkPjwhLS0gMU1CIC0tPlxuICAgICAgICA8L211bHRpcGFydC1jb25maWc+XG4gICAgPC9zZXJ2bGV0PlxuICAgIDxzZXJ2bGV0LW1hcHBpbmc+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+QWRtaW5Vc2VyU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L0FkbWluVXNlclNlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgIDwvc2VydmxldC1tYXBwaW5nPlxuICAgIDxzZXJ2bGV0LW1hcHBpbmc+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+QWRtaW5Vc2VyU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L2FkbWluL0FkbWluVXNlclNlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgIDwvc2VydmxldC1tYXBwaW5nPlxuXG4gICAgPCEtLSBEYXNoYm9hcmQgU2V0dGluZ3MgU2VydmxldCByZW1vdmVkIC0tPlxuXG4gICAgPCEtLSBVc2VyIFNlcnZsZXQgLS0+XG4gICAgPHNlcnZsZXQ+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+VXNlclNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHNlcnZsZXQtY2xhc3M+Y29udHJvbGxlci5Vc2VyU2VydmxldDwvc2VydmxldC1jbGFzcz5cbiAgICAgICAgPG11bHRpcGFydC1jb25maWc+XG4gICAgICAgICAgICA8bWF4LWZpbGUtc2l6ZT41MjQyODgwPC9tYXgtZmlsZS1zaXplPjwhLS0gNU1CIC0tPlxuICAgICAgICAgICAgPG1heC1yZXF1ZXN0LXNpemU+MTA0ODU3NjA8L21heC1yZXF1ZXN0LXNpemU+PCEtLSAxME1CIC0tPlxuICAgICAgICAgICAgPGZpbGUtc2l6ZS10aHJlc2hvbGQ+MTA0ODU3NjwvZmlsZS1zaXplLXRocmVzaG9sZD48IS0tIDFNQiAtLT5cbiAgICAgICAgPC9tdWx0aXBhcnQtY29uZmlnPlxuICAgIDwvc2VydmxldD5cbiAgICA8c2VydmxldC1tYXBwaW5nPlxuICAgICAgICA8c2VydmxldC1uYW1lPlVzZXJTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vVXNlclNlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgIDwvc2VydmxldC1tYXBwaW5nPlxuICAgIDxzZXJ2bGV0LW1hcHBpbmc+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+VXNlclNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi91c2VyLyo8L3VybC1wYXR0ZXJuPlxuICAgIDwvc2VydmxldC1tYXBwaW5nPlxuXG4gICAgPCEtLSBMb2dpbiBTZXJ2bGV0IC0tPlxuICAgIDxzZXJ2bGV0PlxuICAgICAgICA8c2VydmxldC1uYW1lPkxvZ2luU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8c2VydmxldC1jbGFzcz5jb250cm9sbGVyLkxvZ2luU2VydmxldDwvc2VydmxldC1jbGFzcz5cbiAgICA8L3NlcnZsZXQ+XG4gICAgPHNlcnZsZXQtbWFwcGluZz5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5Mb2dpblNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9Mb2dpblNlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgIDwvc2VydmxldC1tYXBwaW5nPlxuXG4gICAgPCEtLSBDYXJ0IFNlcnZsZXQgLS0+XG4gICAgPHNlcnZsZXQ+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+Q2FydFNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHNlcnZsZXQtY2xhc3M+Y29udHJvbGxlci5DYXJ0U2VydmxldDwvc2VydmxldC1jbGFzcz5cbiAgICA8L3NlcnZsZXQ+XG4gICAgPHNlcnZsZXQtbWFwcGluZz5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5DYXJ0U2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L0NhcnRTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICA8L3NlcnZsZXQtbWFwcGluZz5cblxuICAgIDwhLS0gQWN0aW9uIFNlcnZsZXQgLS0+XG4gICAgPHNlcnZsZXQ+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+QWN0aW9uU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8c2VydmxldC1jbGFzcz5jb250cm9sbGVyLkFjdGlvblNlcnZsZXQ8L3NlcnZsZXQtY2xhc3M+XG4gICAgPC9zZXJ2bGV0PlxuICAgIDxzZXJ2bGV0LW1hcHBpbmc+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+QWN0aW9uU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L0FjdGlvblNlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgIDwvc2VydmxldC1tYXBwaW5nPlxuXG4gICAgPCEtLSBBYm91dCBTZXJ2bGV0IC0tPlxuICAgIDxzZXJ2bGV0PlxuICAgICAgICA8c2VydmxldC1uYW1lPkFib3V0U2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8c2VydmxldC1jbGFzcz5jb250cm9sbGVyLkFib3V0U2VydmxldDwvc2VydmxldC1jbGFzcz5cbiAgICA8L3NlcnZsZXQ+XG4gICAgPHNlcnZsZXQtbWFwcGluZz5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5BYm91dFNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9BYm91dFNlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgIDwvc2VydmxldC1tYXBwaW5nPlxuLi4uXG5cbiAgICA8IS0tIEltYWdlIFNlcnZsZXQgLS0+XG4gICAgPHNlcnZsZXQ+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+SW1hZ2VTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDxzZXJ2bGV0LWNsYXNzPmNvbnRyb2xsZXIuSW1hZ2VTZXJ2bGV0PC9zZXJ2bGV0LWNsYXNzPlxuICAgICAgICA8bXVsdGlwYXJ0LWNvbmZpZz5cbiAgICAgICAgICAgIDxtYXgtZmlsZS1zaXplPjUyNDI4ODA8L21heC1maWxlLXNpemU+PCEtLSA1TUIgLS0+XG4gICAgICAgICAgICA8bWF4LXJlcXVlc3Qtc2l6ZT4xMDQ4NTc2MDwvbWF4LXJlcXVlc3Qtc2l6ZT48IS0tIDEwTUIgLS0+XG4gICAgICAgICAgICA8ZmlsZS1zaXplLXRocmVzaG9sZD4xMDQ4NTc2PC9maWxlLXNpemUtdGhyZXNob2xkPjwhLS0gMU1CIC0tPlxuICAgICAgICA8L211bHRpcGFydC1jb25maWc+XG4gICAgPC9zZXJ2bGV0PlxuICAgIDxzZXJ2bGV0LW1hcHBpbmc+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+SW1hZ2VTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vSW1hZ2VTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICA8L3NlcnZsZXQtbWFwcGluZz5cblxuICAgIDwhLS0gSG9tZSBTZXJ2bGV0IC0tPlxuICAgIDxzZXJ2bGV0PlxuICAgICAgICA8c2VydmxldC1uYW1lPkhvbWVTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDxzZXJ2bGV0LWNsYXNzPmNvbnRyb2xsZXIuSG9tZVNlcnZsZXQ8L3NlcnZsZXQtY2xhc3M+XG4gICAgPC9zZXJ2bGV0PlxuICAgIDxzZXJ2bGV0LW1hcHBpbmc+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+SG9tZVNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9Ib21lU2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgPC9zZXJ2bGV0LW1hcHBpbmc+XG4uLi5cblxuXG4gICAgPCEtLSBGaWx0ZXJzIC0tPlxuICAgIDxmaWx0ZXI+XG4gICAgICAgIDxmaWx0ZXItbmFtZT5BdXRoZW50aWNhdGlvbkZpbHRlcjwvZmlsdGVyLW5hbWU+XG4gICAgICAgIDxmaWx0ZXItY2xhc3M+ZmlsdGVyLkF1dGhlbnRpY2F0aW9uRmlsdGVyPC9maWx0ZXItY2xhc3M+XG4gICAgPC9maWx0ZXI+XG4gICAgPGZpbHRlci1tYXBwaW5nPlxuICAgICAgICA8ZmlsdGVyLW5hbWU+QXV0aGVudGljYXRpb25GaWx0ZXI8L2ZpbHRlci1uYW1lPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L0NhcnRTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9DaGVja291dFNlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L1BheW1lbnRTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9PcmRlclNlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L1Byb2ZpbGVJbWFnZVNlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L0ltYWdlU2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vQ2F0ZWdvcnlJbWFnZVNlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgIDwvZmlsdGVyLW1hcHBpbmc+XG5cbiAgICA8ZmlsdGVyPlxuICAgICAgICA8ZmlsdGVyLW5hbWU+Q2hlY2tvdXRGaWx0ZXI8L2ZpbHRlci1uYW1lPlxuICAgICAgICA8ZmlsdGVyLWNsYXNzPmZpbHRlci5DaGVja291dEZpbHRlcjwvZmlsdGVyLWNsYXNzPlxuICAgIDwvZmlsdGVyPlxuICAgIDxmaWx0ZXItbWFwcGluZz5cbiAgICAgICAgPGZpbHRlci1uYW1lPkNoZWNrb3V0RmlsdGVyPC9maWx0ZXItbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9DYXJ0U2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgPC9maWx0ZXItbWFwcGluZz5cblxuICAgIDxmaWx0ZXI+XG4gICAgICAgIDxmaWx0ZXItbmFtZT5Mb2dnaW5nRmlsdGVyPC9maWx0ZXItbmFtZT5cbiAgICAgICAgPGZpbHRlci1jbGFzcz5maWx0ZXIuTG9nZ2luZ0ZpbHRlcjwvZmlsdGVyLWNsYXNzPlxuICAgIDwvZmlsdGVyPlxuICAgIDxmaWx0ZXItbWFwcGluZz5cbiAgICAgICAgPGZpbHRlci1uYW1lPkxvZ2dpbmdGaWx0ZXI8L2ZpbHRlci1uYW1lPlxuICAgICAgICA8dXJsLXBhdHRlcm4+Lyo8L3VybC1wYXR0ZXJuPlxuICAgIDwvZmlsdGVyLW1hcHBpbmc+XG5cbiAgICA8ZmlsdGVyPlxuICAgICAgICA8ZmlsdGVyLW5hbWU+QWRtaW5SZWRpcmVjdEZpbHRlcjwvZmlsdGVyLW5hbWU+XG4gICAgICAgIDxmaWx0ZXItY2xhc3M+ZmlsdGVyLkFkbWluUmVkaXJlY3RGaWx0ZXI8L2ZpbHRlci1jbGFzcz5cbiAgICA8L2ZpbHRlcj5cbiAgICA8ZmlsdGVyLW1hcHBpbmc+XG4gICAgICAgIDxmaWx0ZXItbmFtZT5BZG1pblJlZGlyZWN0RmlsdGVyPC9maWx0ZXItbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9pbmRleC5qc3A8L3VybC1wYXR0ZXJuPlxuICAgICAgICA8dXJsLXBhdHRlcm4+LzwvdXJsLXBhdHRlcm4+XG4gICAgPC9maWx0ZXItbWFwcGluZz5cblxuICAgIDwhLS0gRXJyb3IgUGFnZXMgLS0+XG4gICAgPGVycm9yLXBhZ2U+XG4gICAgICAgIDxlcnJvci1jb2RlPjQwNDwvZXJyb3ItY29kZT5cbiAgICAgICAgPGxvY2F0aW9uPi9lcnJvci80MDQuanNwPC9sb2NhdGlvbj5cbiAgICA8L2Vycm9yLXBhZ2U+XG5cbiAgICA8ZXJyb3ItcGFnZT5cbiAgICAgICAgPGVycm9yLWNvZGU+NTAwPC9lcnJvci1jb2RlPlxuICAgICAgICA8bG9jYXRpb24+L2Vycm9yLzUwMC5qc3A8L2xvY2F0aW9uPlxuICAgIDwvZXJyb3ItcGFnZT5cblxuICAgIDxlcnJvci1wYWdlPlxuICAgICAgICA8ZXhjZXB0aW9uLXR5cGU+amF2YS5sYW5nLlRocm93YWJsZTwvZXhjZXB0aW9uLXR5cGU+XG4gICAgICAgIDxsb2NhdGlvbj4vZXJyb3IvNTAwLmpzcDwvbG9jYXRpb24+XG4gICAgPC9lcnJvci1wYWdlPlxuICAgIDwhLS0gU2Vzc2lvbiBDb25maWd1cmF0aW9uIC0tPlxuICAgIDxzZXNzaW9uLWNvbmZpZz5cbiAgICAgICAgPHNlc3Npb24tdGltZW91dD4zMDwvc2Vzc2lvbi10aW1lb3V0PlxuICAgIDwvc2Vzc2lvbi1jb25maWc+XG5cbiAgICA8IS0tIExvZ2dpbmcgQ29uZmlndXJhdGlvbiAtLT5cbiAgICA8Y29udGV4dC1wYXJhbT5cbiAgICAgICAgPHBhcmFtLW5hbWU+bG9nNGpDb25maWd1cmF0aW9uPC9wYXJhbS1uYW1lPlxuICAgICAgICA8cGFyYW0tdmFsdWU+V0VCLUlORi9sb2c0ajIueG1sPC9wYXJhbS12YWx1ZT5cbiAgICA8L2NvbnRleHQtcGFyYW0+XG5cbjwvd2ViLWFwcD5cbi4uLlxuUGF0aDogQ2xvdGhlZS9zcmMvbWFpbi9qYXZhL2ZpbHRlci9DaGVja291dEZpbHRlci5qYXZhXG4uLi5cblxuLyoqXG4gKiBGaWx0ZXIgdG8gZW5zdXJlIHVzZXJzIGhhdmUgaXRlbXMgaW4gdGhlaXIgY2FydCBhbmQgYSBzaGlwcGluZyBhZGRyZXNzIGJlZm9yZSBwcm9jZWVkaW5nIHRvIGNoZWNrb3V0XG4gKi9cbkBXZWJGaWx0ZXIoZmlsdGVyTmFtZSA9IFwiQ2hlY2tvdXRGaWx0ZXJcIiwgdXJsUGF0dGVybnMgPSB7XCIvQ2FydFNlcnZsZXRcIn0pXG5wdWJsaWMgY2xhc3MgQ2hlY2tvdXRGaWx0ZXIgaW1wbGVtZW50cyBGaWx0ZXIge1xuXG4gICAgcHJpdmF0ZSBDYXJ0U2VydmljZSBjYXJ0U2VydmljZTtcblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyB2b2lkIGluaXQoRmlsdGVyQ29uZmlnIGZpbHRlckNvbmZpZykgdGhyb3dzIFNlcnZsZXRFeGNlcHRpb24ge1xuICAgICAgICBjYXJ0U2VydmljZSA9IG5ldyBDYXJ0U2VydmljZSgpO1xuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyB2b2lkIGRvRmlsdGVyKFNlcnZsZXRSZXF1ZXN0IHJlcXVlc3QsIFNlcnZsZXRSZXNwb25zZSByZXNwb25zZSwgRmlsdGVyQ2hhaW4gY2hhaW4pXG4gICAgICAgICAgICB0aHJvd3MgSU9FeGNlcHRpb24sIFNlcnZsZXRFeGNlcHRpb24ge1xuXG4gICAgICAgIEh0dHBTZXJ2bGV0UmVxdWVzdCBodHRwUmVxdWVzdCA9IChIdHRwU2VydmxldFJlcXVlc3QpIHJlcXVlc3Q7XG4gICAgICAgIEh0dHBTZXJ2bGV0UmVzcG9uc2UgaHR0cFJlc3BvbnNlID0gKEh0dHBTZXJ2bGV0UmVzcG9uc2UpIHJlc3BvbnNlO1xuICAgICAgICBIdHRwU2Vzc2lvbiBzZXNzaW9uID0gaHR0cFJlcXVlc3QuZ2V0U2Vzc2lvbihmYWxzZSk7XG4uLi5cblBhdGg6IHNyYy9tYWluL3dlYmFwcC9XRUItSU5GL3dlYi54bWxcbi4uLlxuXG4gICAgPCEtLSBTZXJ2bGV0IE1hcHBpbmdzIC0tPlxuICAgIDxzZXJ2bGV0PlxuICAgICAgICA8c2VydmxldC1uYW1lPkN1c3RvbWVyUmV2aWV3U2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8c2VydmxldC1jbGFzcz5jb250cm9sbGVyLkN1c3RvbWVyUmV2aWV3U2VydmxldDwvc2VydmxldC1jbGFzcz5cbiAgICA8L3NlcnZsZXQ+XG4gICAgPHNlcnZsZXQtbWFwcGluZz5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5DdXN0b21lclJldmlld1NlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9DdXN0b21lclJldmlld1NlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgIDwvc2VydmxldC1tYXBwaW5nPlxuICAgIDxzZXJ2bGV0PlxuICAgICAgICA8c2VydmxldC1uYW1lPlByb2ZpbGVTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDxzZXJ2bGV0LWNsYXNzPmNvbnRyb2xsZXIuUHJvZmlsZVNlcnZsZXQ8L3NlcnZsZXQtY2xhc3M+XG4gICAgICAgIDxtdWx0aXBhcnQtY29uZmlnPlxuICAgICAgICAgICAgPG1heC1maWxlLXNpemU+NTI0Mjg4MDwvbWF4LWZpbGUtc2l6ZT48IS0tIDVNQiAtLT5cbiAgICAgICAgICAgIDxtYXgtcmVxdWVzdC1zaXplPjEwNDg1NzYwPC9tYXgtcmVxdWVzdC1zaXplPjwhLS0gMTBNQiAtLT5cbiAgICAgICAgICAgIDxmaWxlLXNpemUtdGhyZXNob2xkPjEwNDg1NzY8L2ZpbGUtc2l6ZS10aHJlc2hvbGQ+PCEtLSAxTUIgLS0+XG4gICAgICAgIDwvbXVsdGlwYXJ0LWNvbmZpZz5cbiAgICA8L3NlcnZsZXQ+XG4gICAgPHNlcnZsZXQtbWFwcGluZz5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5Qcm9maWxlU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L1Byb2ZpbGVTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICA8L3NlcnZsZXQtbWFwcGluZz5cbi4uLlxuXG4gICAgPCEtLSBEYXNoYm9hcmQgU2V0dGluZ3MgU2VydmxldCByZW1vdmVkIC0tPlxuXG4gICAgPCEtLSBVc2VyIFNlcnZsZXQgLS0+XG4gICAgPHNlcnZsZXQ+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+VXNlclNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHNlcnZsZXQtY2xhc3M+Y29udHJvbGxlci5Vc2VyU2VydmxldDwvc2VydmxldC1jbGFzcz5cbiAgICAgICAgPG11bHRpcGFydC1jb25maWc+XG4gICAgICAgICAgICA8bWF4LWZpbGUtc2l6ZT41MjQyODgwPC9tYXgtZmlsZS1zaXplPjwhLS0gNU1CIC0tPlxuICAgICAgICAgICAgPG1heC1yZXF1ZXN0LXNpemU+MTA0ODU3NjA8L21heC1yZXF1ZXN0LXNpemU+PCEtLSAxME1CIC0tPlxuICAgICAgICAgICAgPGZpbGUtc2l6ZS10aHJlc2hvbGQ+MTA0ODU3NjwvZmlsZS1zaXplLXRocmVzaG9sZD48IS0tIDFNQiAtLT5cbiAgICAgICAgPC9tdWx0aXBhcnQtY29uZmlnPlxuICAgIDwvc2VydmxldD5cbiAgICA8c2VydmxldC1tYXBwaW5nPlxuICAgICAgICA8c2VydmxldC1uYW1lPlVzZXJTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vVXNlclNlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgIDwvc2VydmxldC1tYXBwaW5nPlxuICAgIDxzZXJ2bGV0LW1hcHBpbmc+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+VXNlclNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi91c2VyLyo8L3VybC1wYXR0ZXJuPlxuICAgIDwvc2VydmxldC1tYXBwaW5nPlxuLi4uXG5cblxuICAgIDwhLS0gQ2hlY2tvdXQgU2VydmxldCAtLT5cbiAgICA8c2VydmxldD5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5DaGVja291dFNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHNlcnZsZXQtY2xhc3M+Y29udHJvbGxlci5DaGVja291dFNlcnZsZXQ8L3NlcnZsZXQtY2xhc3M+XG4gICAgPC9zZXJ2bGV0PlxuICAgIDxzZXJ2bGV0LW1hcHBpbmc+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+Q2hlY2tvdXRTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vQ2hlY2tvdXRTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICA8L3NlcnZsZXQtbWFwcGluZz5cblxuXG4gICAgPCEtLSBGaWx0ZXJzIC0tPlxuICAgIDxmaWx0ZXI+XG4gICAgICAgIDxmaWx0ZXItbmFtZT5BdXRoZW50aWNhdGlvbkZpbHRlcjwvZmlsdGVyLW5hbWU+XG4gICAgICAgIDxmaWx0ZXItY2xhc3M+ZmlsdGVyLkF1dGhlbnRpY2F0aW9uRmlsdGVyPC9maWx0ZXItY2xhc3M+XG4gICAgPC9maWx0ZXI+XG4gICAgPGZpbHRlci1tYXBwaW5nPlxuICAgICAgICA8ZmlsdGVyLW5hbWU+QXV0aGVudGljYXRpb25GaWx0ZXI8L2ZpbHRlci1uYW1lPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L0NhcnRTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9DaGVja291dFNlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L1BheW1lbnRTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9PcmRlclNlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgIDwvZmlsdGVyLW1hcHBpbmc+XG5cbiAgICA8ZmlsdGVyPlxuICAgICAgICA8ZmlsdGVyLW5hbWU+Q2hlY2tvdXRGaWx0ZXI8L2ZpbHRlci1uYW1lPlxuICAgICAgICA8ZmlsdGVyLWNsYXNzPmZpbHRlci5DaGVja291dEZpbHRlcjwvZmlsdGVyLWNsYXNzPlxuICAgIDwvZmlsdGVyPlxuICAgIDxmaWx0ZXItbWFwcGluZz5cbiAgICAgICAgPGZpbHRlci1uYW1lPkNoZWNrb3V0RmlsdGVyPC9maWx0ZXItbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9DYXJ0U2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgPC9maWx0ZXItbWFwcGluZz5cblxuICAgIDxmaWx0ZXI+XG4gICAgICAgIDxmaWx0ZXItbmFtZT5Mb2dnaW5nRmlsdGVyPC9maWx0ZXItbmFtZT5cbiAgICAgICAgPGZpbHRlci1jbGFzcz5maWx0ZXIuTG9nZ2luZ0ZpbHRlcjwvZmlsdGVyLWNsYXNzPlxuICAgIDwvZmlsdGVyPlxuICAgIDxmaWx0ZXItbWFwcGluZz5cbiAgICAgICAgPGZpbHRlci1uYW1lPkxvZ2dpbmdGaWx0ZXI8L2ZpbHRlci1uYW1lPlxuICAgICAgICA8dXJsLXBhdHRlcm4+Lyo8L3VybC1wYXR0ZXJuPlxuICAgIDwvZmlsdGVyLW1hcHBpbmc+XG5cbiAgICA8IS0tIEVycm9yIFBhZ2VzIC0tPlxuICAgIDxlcnJvci1wYWdlPlxuICAgICAgICA8ZXJyb3ItY29kZT40MDQ8L2Vycm9yLWNvZGU+XG4gICAgICAgIDxsb2NhdGlvbj4vZXJyb3IvNDA0LmpzcDwvbG9jYXRpb24+XG4gICAgPC9lcnJvci1wYWdlPlxuXG4gICAgPGVycm9yLXBhZ2U+XG4gICAgICAgIDxlcnJvci1jb2RlPjUwMDwvZXJyb3ItY29kZT5cbiAgICAgICAgPGxvY2F0aW9uPi9lcnJvci81MDAuLi4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFQTWtvcUt0RVR5bWFVdEgxUGE1Rm9oIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiQzovVXNlcnMvVVNFUi9NdXNpYy9jbG90aGVlIGZpbmFsL2h5L0Nsb3RoZWUiLCJmb2xkZXJSb290IjoiQzovVXNlcnMvVVNFUi9NdXNpYy9jbG90aGVlIGZpbmFsL2h5L0Nsb3RoZWUifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTA4VDA5OjI2OjI2LjEyMloiLCJyZXNwb25zZV90ZXh0IjoiTm93IHdlIG5lZWQgdG8gbW9kaWZ5IHRoZSBBdXRoZW50aWNhdGlvbkZpbHRlciB0byBhbGxvdyBHRVQgcmVxdWVzdHMgdG8gdGhlIENhdGVnb3J5SW1hZ2VTZXJ2bGV0IHdpdGhvdXQgcmVxdWlyaW5nIGF1dGhlbnRpY2F0aW9uOlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjBhN2E0MjYyLTM2MWItNGJhOS1iYzA1LTdkNDQyZDY0MTI1MyIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMTNNRXF6M0NaVjJ5VGQzVGc5YWdLWDQiLCJ0b29sX25hbWUiOiJzYXZlLWZpbGUiLCJpbnB1dF9qc29uIjoie1wiZmlsZV9wYXRoXCI6IFwiQ2xvdGhlZS9zZXR1cC1jYXRlZ29yeS1pbWFnZXMuYmF0XCIsIFwiZmlsZV9jb250ZW50XCI6IFwiQGVjaG8gb2ZmXFxuZWNobyBDcmVhdGluZyBkaXJlY3Rvcnkgc3RydWN0dXJlIGZvciBjYXRlZ29yeSBpbWFnZXMuLi5cXG5cXG5zZXQgVVNFUl9IT01FPSVVU0VSUFJPRklMRSVcXG5zZXQgSU1BR0VfRElSPSVVU0VSX0hPTUUlXFxcXENsb3RoZWVJbWFnZXNcXFxcaW1hZ2VzXFxcXGNhdGVnb3JpZXNcXG5cXG5lY2hvIENyZWF0aW5nIGRpcmVjdG9yeTogJUlNQUdFX0RJUiVcXG5ta2RpciBcXFwiJUlNQUdFX0RJUiVcXFwiXFxuXFxuZWNoby5cXG5lY2hvIERpcmVjdG9yeSBzdHJ1Y3R1cmUgY3JlYXRlZCBzdWNjZXNzZnVsbHkhXFxuZWNoby5cXG5lY2hvIFBsZWFzZSB1cGxvYWQgY2F0ZWdvcnkgaW1hZ2VzIHRocm91Z2ggdGhlIGFkbWluIGludGVyZmFjZSBhdDpcXG5lY2hvIGh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9DbG90aGVlL2FkbWluL2NhdGVnb3JpZXMuanNwXFxuZWNoby5cXG5lY2hvIE9yIG1hbnVhbGx5IHBsYWNlIGltYWdlcyBpbjogJUlNQUdFX0RJUiVcXG5lY2hvIChVc2UgbmFtaW5nIGNvbnZlbnRpb246IGNhdGVnb3J5XzEuanBnLCBjYXRlZ29yeV8yLmpwZywgZXRjLilcXG5lY2hvLlxcbmVjaG8gUHJlc3MgYW55IGtleSB0byBleGl0Li4uXFxucGF1c2UgPiBudWxcIn0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJOb3cgbGV0J3MgY3JlYXRlIGEgc2ltcGxlIHNjcmlwdCB0byBoZWxwIHlvdSBjcmVhdGUgdGhlIG5lY2Vzc2FyeSBkaXJlY3Rvcnkgc3RydWN0dXJlIGFuZCB0ZXN0IHRoZSBpbWFnZSB1cGxvYWQgZnVuY3Rpb25hbGl0eTpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgQ2xvdGhlZS9zcmMvbWFpbi9qYXZhL2ZpbHRlci9BdXRoZW50aWNhdGlvbkZpbHRlci5qYXZhLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICAyM1x0ICAgIHB1YmxpYyB2b2lkIGluaXQoRmlsdGVyQ29uZmlnIGZpbHRlckNvbmZpZykgdGhyb3dzIFNlcnZsZXRFeGNlcHRpb24ge1xuICAgIDI0XHQgICAgICAgIC8vIEluaXRpYWxpemF0aW9uIGNvZGUsIGlmIG5lZWRlZFxuICAgIDI1XHQgICAgfVxuICAgIDI2XHRcbiAgICAyN1x0ICAgIEBPdmVycmlkZVxuICAgIDI4XHQgICAgcHVibGljIHZvaWQgZG9GaWx0ZXIoU2VydmxldFJlcXVlc3QgcmVxdWVzdCwgU2VydmxldFJlc3BvbnNlIHJlc3BvbnNlLCBGaWx0ZXJDaGFpbiBjaGFpbilcbiAgICAyOVx0ICAgICAgICAgICAgdGhyb3dzIElPRXhjZXB0aW9uLCBTZXJ2bGV0RXhjZXB0aW9uIHtcbiAgICAzMFx0XG4gICAgMzFcdCAgICAgICAgSHR0cFNlcnZsZXRSZXF1ZXN0IGh0dHBSZXF1ZXN0ID0gKEh0dHBTZXJ2bGV0UmVxdWVzdCkgcmVxdWVzdDtcbiAgICAzMlx0ICAgICAgICBIdHRwU2VydmxldFJlc3BvbnNlIGh0dHBSZXNwb25zZSA9IChIdHRwU2VydmxldFJlc3BvbnNlKSByZXNwb25zZTtcbiAgICAzM1x0ICAgICAgICBIdHRwU2Vzc2lvbiBzZXNzaW9uID0gaHR0cFJlcXVlc3QuZ2V0U2Vzc2lvbihmYWxzZSk7XG4gICAgMzRcdFxuICAgIDM1XHQgICAgICAgIC8vIEdldCB0aGUgcmVxdWVzdGVkIFVSTCBhbmQgbWV0aG9kXG4gICAgMzZcdCAgICAgICAgU3RyaW5nIHJlcXVlc3RVUkkgPSBodHRwUmVxdWVzdC5nZXRSZXF1ZXN0VVJJKCk7XG4gICAgMzdcdCAgICAgICAgU3RyaW5nIHF1ZXJ5U3RyaW5nID0gaHR0cFJlcXVlc3QuZ2V0UXVlcnlTdHJpbmcoKTtcbiAgICAzOFx0ICAgICAgICBTdHJpbmcgZnVsbFVSTCA9IHJlcXVlc3RVUkkgKyAocXVlcnlTdHJpbmcgIT0gbnVsbCA/IFwiP1wiICsgcXVlcnlTdHJpbmcgOiBcIlwiKTtcbiAgICAzOVx0ICAgICAgICBTdHJpbmcgbWV0aG9kID0gaHR0cFJlcXVlc3QuZ2V0TWV0aG9kKCk7XG4gICAgNDBcdFxuICAgIDQxXHQgICAgICAgIC8vIEFsbG93IEdFVCByZXF1ZXN0cyB0byBDYXRlZ29yeUltYWdlU2VydmxldCB3aXRob3V0IGF1dGhlbnRpY2F0aW9uXG4gICAgNDJcdCAgICAgICAgaWYgKHJlcXVlc3RVUkkuY29udGFpbnMoXCJDYXRlZ29yeUltYWdlU2VydmxldFwiKSAmJiBcIkdFVFwiLmVxdWFscyhtZXRob2QpKSB7XG4gICAgNDNcdCAgICAgICAgICAgIC8vIENvbnRpbnVlIHRoZSBmaWx0ZXIgY2hhaW4gd2l0aG91dCBhdXRoZW50aWNhdGlvbiBjaGVja1xuICAgIDQ0XHQgICAgICAgICAgICBjaGFpbi5kb0ZpbHRlcihyZXF1ZXN0LCByZXNwb25zZSk7XG4gICAgNDVcdCAgICAgICAgICAgIHJldHVybjtcbiAgICA0Nlx0ICAgICAgICB9XG4gICAgNDdcdFxuICAgIDQ4XHQgICAgICAgIC8vIENoZWNrIGlmIHVzZXIgaXMgbG9nZ2VkIGluXG4gICAgNDlcdCAgICAgICAgYm9vbGVhbiBpc0xvZ2dlZEluID0gKHNlc3Npb24gIT0gbnVsbCAmJiBzZXNzaW9uLmdldEF0dHJpYnV0ZShcInVzZXJcIikgIT0gbnVsbCk7XG4gICAgNTBcdFxuICAgIDUxXHQgICAgICAgIC8vIElmIHRoZSB1c2VyIGlzIG5vdCBsb2dnZWQgaW4gYW5kIHRyeWluZyB0byBhY2Nlc3MgYSBwcm90ZWN0ZWQgcmVzb3VyY2VcbiAgICA1Mlx0ICAgICAgICBpZiAoIWlzTG9nZ2VkSW4pIHtcbiAgICA1M1x0ICAgICAgICAgICAgLy8gU2F2ZSB0aGUgcmVxdWVzdGVkIFVSTCBmb3IgcmVkaXJlY3QgYWZ0ZXIgbG9naW5cbiAgICA1NFx0ICAgICAgICAgICAgaHR0cFJlcXVlc3QuZ2V0U2Vzc2lvbigpLnNldEF0dHJpYnV0ZShcInJlZGlyZWN0VVJMXCIsIGZ1bGxVUkwpO1xuICAgIDU1XHRcbiAgICA1Nlx0ICAgICAgICAgICAgLy8gUmVkaXJlY3QgdG8gbG9naW4gcGFnZVxuICAgIDU3XHQgICAgICAgICAgICBodHRwUmVzcG9uc2Uuc2VuZFJlZGlyZWN0KGh0dHBSZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9sb2dpbi5qc3BcIik7XG4gICAgNThcdCAgICAgICAgICAgIHJldHVybjtcbiAgICA1OVx0ICAgICAgICB9XG4gICAgNjBcdFxuICAgIDYxXHQgICAgICAgIC8vIEZvciBjaGVja291dC1zcGVjaWZpYyBhY3Rpb25zLCBlbnN1cmUgdGhlIHVzZXIgaGFzIGl0ZW1zIGluIGNhcnRcbiAgICA2Mlx0ICAgICAgICBpZiAocmVxdWVzdFVSSS5jb250YWlucyhcIkNhcnRTZXJ2bGV0XCIpICYmIFwiY2hlY2tvdXRcIi5lcXVhbHMoaHR0cFJlcXVlc3QuZ2V0UGFyYW1ldGVyKFwiYWN0aW9uXCIpKSkge1xuICAgIDYzXHQgICAgICAgICAgICBVc2VyIHVzZXIgPSAoVXNlcikgc2Vzc2lvbi5nZXRBdHRyaWJ1dGUoXCJ1c2VyXCIpO1xuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFCS0FwdTZSaWF3a1plNEJEN04yQUR2In19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiQzovVXNlcnMvVVNFUi9NdXNpYy9jbG90aGVlIGZpbmFsL2h5L0Nsb3RoZWUiLCJmb2xkZXJSb290IjoiQzovVXNlcnMvVVNFUi9NdXNpYy9jbG90aGVlIGZpbmFsL2h5L0Nsb3RoZWUifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTA4VDA5OjI2OjQ5LjU4OFoiLCJyZXNwb25zZV90ZXh0IjoiTm93IGxldCdzIGNyZWF0ZSBhIHNpbXBsZSBzY3JpcHQgdG8gaGVscCB5b3UgY3JlYXRlIHRoZSBuZWNlc3NhcnkgZGlyZWN0b3J5IHN0cnVjdHVyZSBhbmQgdGVzdCB0aGUgaW1hZ2UgdXBsb2FkIGZ1bmN0aW9uYWxpdHk6XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiYmEyM2IzMjctY2IwOS00NTliLTliMjMtMjQ3OTk4ZjdmNjQ1IiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiIyMgU3VtbWFyeSBvZiBDaGFuZ2VzXG5cbkkndmUgbWFkZSBzZXZlcmFsIGNoYW5nZXMgdG8gZml4IHRoZSBpc3N1ZSB3aXRoIGNhdGVnb3J5IGltYWdlcyBub3Qgc2hvd2luZyBvbiB0aGUgaG9tZSBwYWdlOlxuXG4xLiAqKk1vZGlmaWVkIHRoZSBpbmRleC5qc3AgZmlsZSoqIHRvIGNoZWNrIGJvdGggdGhlIHdlYmFwcCBkaXJlY3RvcnkgYW5kIHRoZSBwZXJtYW5lbnQgc3RvcmFnZSBsb2NhdGlvbiBmb3IgaW1hZ2VzLlxuXG4yLiAqKkVuaGFuY2VkIHRoZSBDYXRlZ29yeUltYWdlU2VydmxldCoqIHRvOlxuICAgLSBIYW5kbGUgR0VUIHJlcXVlc3RzIHRvIHNlcnZlIGltYWdlcyBmcm9tIHRoZSBwZXJtYW5lbnQgc3RvcmFnZSBsb2NhdGlvblxuICAgLSBDb250aW51ZSB1c2luZyBQT1NUIHJlcXVlc3RzIGZvciB1cGxvYWRpbmcgaW1hZ2VzXG5cbjMuICoqVXBkYXRlZCB0aGUgQXV0aGVudGljYXRpb25GaWx0ZXIqKiB0byBhbGxvdyBHRVQgcmVxdWVzdHMgdG8gdGhlIENhdGVnb3J5SW1hZ2VTZXJ2bGV0IHdpdGhvdXQgcmVxdWlyaW5nIGF1dGhlbnRpY2F0aW9uLlxuXG40LiAqKkNyZWF0ZWQgYSBzZXR1cCBzY3JpcHQqKiAoc2V0dXAtY2F0ZWdvcnktaW1hZ2VzLmJhdCkgdG8gaGVscCB5b3UgY3JlYXRlIHRoZSBuZWNlc3NhcnkgZGlyZWN0b3J5IHN0cnVjdHVyZS5cblxuIyMgSG93IHRvIFVzZSB0aGUgU29sdXRpb25cblxuMS4gKipSdW4gdGhlIHNldHVwIHNjcmlwdCoqIHRvIGNyZWF0ZSB0aGUgbmVjZXNzYXJ5IGRpcmVjdG9yeSBzdHJ1Y3R1cmU6XG4gICBgYGBcbiAgIEM6XFxVc2Vyc1xcVVNFUlxcTXVzaWNcXGNsb3RoZWUgZmluYWxcXGh5XFxDbG90aGVlXFxzZXR1cC1jYXRlZ29yeS1pbWFnZXMuYmF0XG4gICBgYGBcblxuMi4gKipMb2cgaW4gYXMgYW4gYWRtaW4gdXNlcioqIChlLmcuLCBzaXRhQGV4YW1wbGUuY29tIHdpdGggcGFzc3dvcmQ0NTYpXG5cbjMuICoqVXBsb2FkIGNhdGVnb3J5IGltYWdlcyoqIHRocm91Z2ggdGhlIGFkbWluIGludGVyZmFjZTpcbiAgIC0gR28gdG8gQWRtaW4gPiBDYXRlZ29yaWVzXG4gICAtIEZvciBlYWNoIGNhdGVnb3J5LCBjbGljayB0aGUgXCJJbWFnZVwiIGJ1dHRvblxuICAgLSBVcGxvYWQgYW4gYXBwcm9wcmlhdGUgaW1hZ2VcblxuNC4gKipSZXN0YXJ0IHlvdXIgc2VydmVyKiogdG8gYXBwbHkgdGhlIGNoYW5nZXNcblxuNS4gKipWaXNpdCB0aGUgaG9tZSBwYWdlKiogLSB5b3Ugc2hvdWxkIG5vdyBzZWUgdGhlIGNhdGVnb3J5IGltYWdlcyBpbiB0aGUgXCJTaG9wIGJ5IENhdGVnb3J5XCIgc2VjdGlvblxuXG4jIyBXaHkgVGhpcyBTb2x1dGlvbiBXb3Jrc1xuXG5UaGlzIHNvbHV0aW9uIGVuc3VyZXMgdGhhdDpcblxuMS4gKipJbWFnZXMgcGVyc2lzdCBhY3Jvc3Mgc2VydmVyIHJlc3RhcnRzKiogYnkgc3RvcmluZyB0aGVtIGluIGEgcGVybWFuZW50IGxvY2F0aW9uIG91dHNpZGUgdGhlIGRlcGxveW1lbnQgZGlyZWN0b3J5LlxuXG4yLiAqKkltYWdlcyBhcmUgYWNjZXNzaWJsZSB0byBhbGwgdXNlcnMqKiBieSBhbGxvd2luZyBHRVQgcmVxdWVzdHMgdG8gdGhlIENhdGVnb3J5SW1hZ2VTZXJ2bGV0IHdpdGhvdXQgYXV0aGVudGljYXRpb24uXG5cbjMuICoqT25seSBhZG1pbnMgY2FuIHVwbG9hZCBpbWFnZXMqKiBieSBrZWVwaW5nIHRoZSBhdXRoZW50aWNhdGlvbiByZXF1aXJlbWVudCBmb3IgUE9TVCByZXF1ZXN0cy5cblxuVGhlIGtleSBpbXByb3ZlbWVudCBpcyB0aGF0IHdlJ3JlIG5vdyBzdG9yaW5nIGltYWdlcyBpbiB0aGUgdXNlcidzIGhvbWUgZGlyZWN0b3J5IChgfi9DbG90aGVlSW1hZ2VzL2ltYWdlcy9jYXRlZ29yaWVzYCksIHdoaWNoIGRvZXNuJ3QgZ2V0IHdpcGVkIHdoZW4gdGhlIHNlcnZlciByZXN0YXJ0cywgYW5kIHdlJ3ZlIGFkZGVkIGEgc2VydmxldCB0byBzZXJ2ZSB0aGVzZSBpbWFnZXMgZGlyZWN0bHkgZnJvbSB0aGF0IGxvY2F0aW9uLlxuXG5Xb3VsZCB5b3UgbGlrZSBtZSB0byBleHBsYWluIGFueSBwYXJ0IG9mIHRoZSBzb2x1dGlvbiBpbiBtb3JlIGRldGFpbD9cbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IkZpbGUgc2F2ZWQgc3VjY2Vzc2Z1bGx5LiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMTNNRXF6M0NaVjJ5VGQzVGc5YWdLWDQifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJDOi9Vc2Vycy9VU0VSL011c2ljL2Nsb3RoZWUgZmluYWwvaHkvQ2xvdGhlZSIsImZvbGRlclJvb3QiOiJDOi9Vc2Vycy9VU0VSL011c2ljL2Nsb3RoZWUgZmluYWwvaHkvQ2xvdGhlZSJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMDhUMDk6Mjc6MDIuNDI1WiIsInJlc3BvbnNlX3RleHQiOiIjIyBTdW1tYXJ5IG9mIENoYW5nZXNcblxuSSd2ZSBtYWRlIHNldmVyYWwgY2hhbmdlcyB0byBmaXggdGhlIGlzc3VlIHdpdGggY2F0ZWdvcnkgaW1hZ2VzIG5vdCBzaG93aW5nIG9uIHRoZSBob21lIHBhZ2U6XG5cbjEuICoqTW9kaWZpZWQgdGhlIGluZGV4LmpzcCBmaWxlKiogdG8gY2hlY2sgYm90aCB0aGUgd2ViYXBwIGRpcmVjdG9yeSBhbmQgdGhlIHBlcm1hbmVudCBzdG9yYWdlIGxvY2F0aW9uIGZvciBpbWFnZXMuXG5cbjIuICoqRW5oYW5jZWQgdGhlIENhdGVnb3J5SW1hZ2VTZXJ2bGV0KiogdG86XG4gICAtIEhhbmRsZSBHRVQgcmVxdWVzdHMgdG8gc2VydmUgaW1hZ2VzIGZyb20gdGhlIHBlcm1hbmVudCBzdG9yYWdlIGxvY2F0aW9uXG4gICAtIENvbnRpbnVlIHVzaW5nIFBPU1QgcmVxdWVzdHMgZm9yIHVwbG9hZGluZyBpbWFnZXNcblxuMy4gKipVcGRhdGVkIHRoZSBBdXRoZW50aWNhdGlvbkZpbHRlcioqIHRvIGFsbG93IEdFVCByZXF1ZXN0cyB0byB0aGUgQ2F0ZWdvcnlJbWFnZVNlcnZsZXQgd2l0aG91dCByZXF1aXJpbmcgYXV0aGVudGljYXRpb24uXG5cbjQuICoqQ3JlYXRlZCBhIHNldHVwIHNjcmlwdCoqIChzZXR1cC1jYXRlZ29yeS1pbWFnZXMuYmF0KSB0byBoZWxwIHlvdSBjcmVhdGUgdGhlIG5lY2Vzc2FyeSBkaXJlY3Rvcnkgc3RydWN0dXJlLlxuXG4jIyBIb3cgdG8gVXNlIHRoZSBTb2x1dGlvblxuXG4xLiAqKlJ1biB0aGUgc2V0dXAgc2NyaXB0KiogdG8gY3JlYXRlIHRoZSBuZWNlc3NhcnkgZGlyZWN0b3J5IHN0cnVjdHVyZTpcbiAgIGBgYFxuICAgQzpcXFVzZXJzXFxVU0VSXFxNdXNpY1xcY2xvdGhlZSBmaW5hbFxcaHlcXENsb3RoZWVcXHNldHVwLWNhdGVnb3J5LWltYWdlcy5iYXRcbiAgIGBgYFxuXG4yLiAqKkxvZyBpbiBhcyBhbiBhZG1pbiB1c2VyKiogKGUuZy4sIHNpdGFAZXhhbXBsZS5jb20gd2l0aCBwYXNzd29yZDQ1NilcblxuMy4gKipVcGxvYWQgY2F0ZWdvcnkgaW1hZ2VzKiogdGhyb3VnaCB0aGUgYWRtaW4gaW50ZXJmYWNlOlxuICAgLSBHbyB0byBBZG1pbiA+IENhdGVnb3JpZXNcbiAgIC0gRm9yIGVhY2ggY2F0ZWdvcnksIGNsaWNrIHRoZSBcIkltYWdlXCIgYnV0dG9uXG4gICAtIFVwbG9hZCBhbiBhcHByb3ByaWF0ZSBpbWFnZVxuXG40LiAqKlJlc3RhcnQgeW91ciBzZXJ2ZXIqKiB0byBhcHBseSB0aGUgY2hhbmdlc1xuXG41LiAqKlZpc2l0IHRoZSBob21lIHBhZ2UqKiAtIHlvdSBzaG91bGQgbm93IHNlZSB0aGUgY2F0ZWdvcnkgaW1hZ2VzIGluIHRoZSBcIlNob3AgYnkgQ2F0ZWdvcnlcIiBzZWN0aW9uXG5cbiMjIFdoeSBUaGlzIFNvbHV0aW9uIFdvcmtzXG5cblRoaXMgc29sdXRpb24gZW5zdXJlcyB0aGF0OlxuXG4xLiAqKkltYWdlcyBwZXJzaXN0IGFjcm9zcyBzZXJ2ZXIgcmVzdGFydHMqKiBieSBzdG9yaW5nIHRoZW0gaW4gYSBwZXJtYW5lbnQgbG9jYXRpb24gb3V0c2lkZSB0aGUgZGVwbG95bWVudCBkaXJlY3RvcnkuXG5cbjIuICoqSW1hZ2VzIGFyZSBhY2Nlc3NpYmxlIHRvIGFsbCB1c2VycyoqIGJ5IGFsbG93aW5nIEdFVCByZXF1ZXN0cyB0byB0aGUgQ2F0ZWdvcnlJbWFnZVNlcnZsZXQgd2l0aG91dCBhdXRoZW50aWNhdGlvbi5cblxuMy4gKipPbmx5IGFkbWlucyBjYW4gdXBsb2FkIGltYWdlcyoqIGJ5IGtlZXBpbmcgdGhlIGF1dGhlbnRpY2F0aW9uIHJlcXVpcmVtZW50IGZvciBQT1NUIHJlcXVlc3RzLlxuXG5UaGUga2V5IGltcHJvdmVtZW50IGlzIHRoYXQgd2UncmUgbm93IHN0b3JpbmcgaW1hZ2VzIGluIHRoZSB1c2VyJ3MgaG9tZSBkaXJlY3RvcnkgKGB+L0Nsb3RoZWVJbWFnZXMvaW1hZ2VzL2NhdGVnb3JpZXNgKSwgd2hpY2ggZG9lc24ndCBnZXQgd2lwZWQgd2hlbiB0aGUgc2VydmVyIHJlc3RhcnRzLCBhbmQgd2UndmUgYWRkZWQgYSBzZXJ2bGV0IHRvIHNlcnZlIHRoZXNlIGltYWdlcyBkaXJlY3RseSBmcm9tIHRoYXQgbG9jYXRpb24uXG5cbldvdWxkIHlvdSBsaWtlIG1lIHRvIGV4cGxhaW4gYW55IHBhcnQgb2YgdGhlIHNvbHV0aW9uIGluIG1vcmUgZGV0YWlsP1xuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJyZXF1ZXN0X2lkIjoiYzRjODIzMzMtMDVkYi00ODBlLTgxNzUtMGRkOWE5YjExZjhiIiwidXVpZCI6IjJiNGE2NGUyLWRmNGItNDEzYi1iMDY2LTIzNzgyYjgwYjMwZSIsImNoYXRJdGVtVHlwZSI6ImFnZW50aWMtY2hlY2twb2ludC1kZWxpbWl0ZXIiLCJzdGF0dXMiOiJzdWNjZXNzIiwiZnJvbVRpbWVzdGFtcCI6MTc0NjY5NjE1NTc0OCwidG9UaW1lc3RhbXAiOjE3NDY2OTY0MzM4ODcsInNlZW5fc3RhdGUiOiJzZWVuIn0seyJyZXF1ZXN0X2lkIjoiODZhN2ZkZmYtMjM2YS00YjU4LWFmMTMtM2FjYTVmOTExZDczIiwic3RhdHVzIjoiY2FuY2VsbGVkIiwiY2hhdEl0ZW1UeXBlIjoiYWdlbnRpYy10dXJuLWRlbGltaXRlciJ9LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiJmOGMzYzgyMC1hMThkLTRjYmQtODY1OS00ZmE5ZDU1MThkNjgiLCJyZXF1ZXN0X21lc3NhZ2UiOiJkb250IHB1dCBieSB5b3V5cnNlbGYgYXMgaSBoYXZlIGFscmVkeSBhZG1pbiBpbiBteSBvd24gZGF0YWJhc2UgIiwicmljaF90ZXh0X2pzb25fcmVwciI6eyJ0eXBlIjoiZG9jIiwiY29udGVudCI6W3sidHlwZSI6InBhcmFncmFwaCIsImNvbnRlbnQiOlt7InR5cGUiOiJ0ZXh0IiwidGV4dCI6ImRvbnQgcHV0IGJ5IHlvdXlyc2VsZiBhcyBpIGhhdmUgYWxyZWR5IGFkbWluIGluIG15IG93biBkYXRhYmFzZSAifV19XX0sIm1lbnRpb25lZF9pdGVtcyI6W10sInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IkkgdW5kZXJzdGFuZC4gWW91IGFscmVhZHkgaGF2ZSBhZG1pbiB1c2VycyBpbiB5b3VyIGRhdGFiYXNlLCBzbyB5b3UgZG9uJ3QgbmVlZCB0byBjcmVhdGUgbmV3IG9uZXMuIExldCBtZSBjbGFyaWZ5IHRoZSBzb2x1dGlvbiB3aXRob3V0IGFzc3VtaW5nIHlvdSBuZWVkIHRvIGNyZWF0ZSBhZG1pbiB1c2VyczpcblxuIyMgSG93IHRvIEZpeCB0aGUgQ2F0ZWdvcnkgSW1hZ2VzIElzc3VlXG5cblRoZSBjaGFuZ2VzIEkgbWFkZSB3aWxsIGFsbG93IGNhdGVnb3J5IGltYWdlcyB0byBwZXJzaXN0IGFjcm9zcyBzZXJ2ZXIgcmVzdGFydHMuIEhlcmUncyBob3cgdG8gdXNlIHRoZSBzb2x1dGlvbiB3aXRoIHlvdXIgZXhpc3RpbmcgYWRtaW4gYWNjb3VudDpcblxuMS4gKipSdW4gdGhlIHNldHVwIHNjcmlwdCoqIHRvIGNyZWF0ZSB0aGUgbmVjZXNzYXJ5IGRpcmVjdG9yeSBzdHJ1Y3R1cmU6XG4gICBgYGBcbiAgIEM6XFxVc2Vyc1xcVVNFUlxcTXVzaWNcXGNsb3RoZWUgZmluYWxcXGh5XFxDbG90aGVlXFxzZXR1cC1jYXRlZ29yeS1pbWFnZXMuYmF0XG4gICBgYGBcbiAgIFRoaXMgY3JlYXRlcyB0aGUgYENsb3RoZWVJbWFnZXMvaW1hZ2VzL2NhdGVnb3JpZXNgIGZvbGRlciBpbiB5b3VyIHVzZXIgaG9tZSBkaXJlY3RvcnkuXG5cbjIuICoqTG9nIGluIHdpdGggeW91ciBleGlzdGluZyBhZG1pbiBhY2NvdW50KiogdGhhdCB5b3UgYWxyZWFkeSBoYXZlIGluIHlvdXIgZGF0YWJhc2VcblxuMy4gKipVcGxvYWQgY2F0ZWdvcnkgaW1hZ2VzKiogdGhyb3VnaCB0aGUgYWRtaW4gaW50ZXJmYWNlOlxuICAgLSBHbyB0byBBZG1pbiA+IENhdGVnb3JpZXNcbiAgIC0gRm9yIGVhY2ggY2F0ZWdvcnksIGNsaWNrIHRoZSBcIkltYWdlXCIgYnV0dG9uXG4gICAtIFVwbG9hZCBhbiBhcHByb3ByaWF0ZSBpbWFnZSBmb3IgZWFjaCBjYXRlZ29yeVxuXG40LiAqKlJlc3RhcnQgeW91ciBzZXJ2ZXIqKiB0byBhcHBseSBhbGwgdGhlIGNvZGUgY2hhbmdlc1xuXG41LiAqKlZpc2l0IHRoZSBob21lIHBhZ2UqKiAtIHlvdSBzaG91bGQgbm93IHNlZSB0aGUgY2F0ZWdvcnkgaW1hZ2VzIGluIHRoZSBcIlNob3AgYnkgQ2F0ZWdvcnlcIiBzZWN0aW9uXG5cblRoZSBpbWFnZXMgd2lsbCBub3cgYmUgc3RvcmVkIGluIGEgcGVybWFuZW50IGxvY2F0aW9uIChgQzpcXFVzZXJzXFxbWU9VUl9VU0VSTkFNRV1cXENsb3RoZWVJbWFnZXNcXGltYWdlc1xcY2F0ZWdvcmllc2ApIGFuZCB3aWxsIHBlcnNpc3QgZXZlbiB3aGVuIHlvdSByZXN0YXJ0IHRoZSBzZXJ2ZXIuXG5cbklzIHRoZXJlIGFueXRoaW5nIGVsc2UgeW91J2QgbGlrZSBtZSB0byBjbGFyaWZ5IGFib3V0IHRoZSBzb2x1dGlvbj9cbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjAsInRleHRfbm9kZSI6eyJjb250ZW50IjoiZG9udCBwdXQgYnkgeW91eXJzZWxmIGFzIGkgaGF2ZSBhbHJlZHkgYWRtaW4gaW4gbXkgb3duIGRhdGFiYXNlICJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkM6L1VzZXJzL1VTRVIvTXVzaWMvY2xvdGhlZSBmaW5hbC9oeS9DbG90aGVlIiwiZm9sZGVyUm9vdCI6IkM6L1VzZXJzL1VTRVIvTXVzaWMvY2xvdGhlZSBmaW5hbC9oeS9DbG90aGVlIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0wOFQwOToyOTo0Ni41MzFaIiwicmVzcG9uc2VfdGV4dCI6IkkgdW5kZXJzdGFuZC4gWW91IGFscmVhZHkgaGF2ZSBhZG1pbiB1c2VycyBpbiB5b3VyIGRhdGFiYXNlLCBzbyB5b3UgZG9uJ3QgbmVlZCB0byBjcmVhdGUgbmV3IG9uZXMuIExldCBtZSBjbGFyaWZ5IHRoZSBzb2x1dGlvbiB3aXRob3V0IGFzc3VtaW5nIHlvdSBuZWVkIHRvIGNyZWF0ZSBhZG1pbiB1c2VyczpcblxuIyMgSG93IHRvIEZpeCB0aGUgQ2F0ZWdvcnkgSW1hZ2VzIElzc3VlXG5cblRoZSBjaGFuZ2VzIEkgbWFkZSB3aWxsIGFsbG93IGNhdGVnb3J5IGltYWdlcyB0byBwZXJzaXN0IGFjcm9zcyBzZXJ2ZXIgcmVzdGFydHMuIEhlcmUncyBob3cgdG8gdXNlIHRoZSBzb2x1dGlvbiB3aXRoIHlvdXIgZXhpc3RpbmcgYWRtaW4gYWNjb3VudDpcblxuMS4gKipSdW4gdGhlIHNldHVwIHNjcmlwdCoqIHRvIGNyZWF0ZSB0aGUgbmVjZXNzYXJ5IGRpcmVjdG9yeSBzdHJ1Y3R1cmU6XG4gICBgYGBcbiAgIEM6XFxVc2Vyc1xcVVNFUlxcTXVzaWNcXGNsb3RoZWUgZmluYWxcXGh5XFxDbG90aGVlXFxzZXR1cC1jYXRlZ29yeS1pbWFnZXMuYmF0XG4gICBgYGBcbiAgIFRoaXMgY3JlYXRlcyB0aGUgYENsb3RoZWVJbWFnZXMvaW1hZ2VzL2NhdGVnb3JpZXNgIGZvbGRlciBpbiB5b3VyIHVzZXIgaG9tZSBkaXJlY3RvcnkuXG5cbjIuICoqTG9nIGluIHdpdGggeW91ciBleGlzdGluZyBhZG1pbiBhY2NvdW50KiogdGhhdCB5b3UgYWxyZWFkeSBoYXZlIGluIHlvdXIgZGF0YWJhc2VcblxuMy4gKipVcGxvYWQgY2F0ZWdvcnkgaW1hZ2VzKiogdGhyb3VnaCB0aGUgYWRtaW4gaW50ZXJmYWNlOlxuICAgLSBHbyB0byBBZG1pbiA+IENhdGVnb3JpZXNcbiAgIC0gRm9yIGVhY2ggY2F0ZWdvcnksIGNsaWNrIHRoZSBcIkltYWdlXCIgYnV0dG9uXG4gICAtIFVwbG9hZCBhbiBhcHByb3ByaWF0ZSBpbWFnZSBmb3IgZWFjaCBjYXRlZ29yeVxuXG40LiAqKlJlc3RhcnQgeW91ciBzZXJ2ZXIqKiB0byBhcHBseSBhbGwgdGhlIGNvZGUgY2hhbmdlc1xuXG41LiAqKlZpc2l0IHRoZSBob21lIHBhZ2UqKiAtIHlvdSBzaG91bGQgbm93IHNlZSB0aGUgY2F0ZWdvcnkgaW1hZ2VzIGluIHRoZSBcIlNob3AgYnkgQ2F0ZWdvcnlcIiBzZWN0aW9uXG5cblRoZSBpbWFnZXMgd2lsbCBub3cgYmUgc3RvcmVkIGluIGEgcGVybWFuZW50IGxvY2F0aW9uIChgQzpcXFVzZXJzXFxbWU9VUl9VU0VSTkFNRV1cXENsb3RoZWVJbWFnZXNcXGltYWdlc1xcY2F0ZWdvcmllc2ApIGFuZCB3aWxsIHBlcnNpc3QgZXZlbiB3aGVuIHlvdSByZXN0YXJ0IHRoZSBzZXJ2ZXIuXG5cbklzIHRoZXJlIGFueXRoaW5nIGVsc2UgeW91J2QgbGlrZSBtZSB0byBjbGFyaWZ5IGFib3V0IHRoZSBzb2x1dGlvbj9cbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsicmVxdWVzdF9pZCI6ImRmOWRlMDY5LWJmMGQtNGM0My1iZmFiLTA5NGIxMDVkYWJjYSIsInN0YXR1cyI6ImNhbmNlbGxlZCIsImNoYXRJdGVtVHlwZSI6ImFnZW50aWMtdHVybi1kZWxpbWl0ZXIifSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiZWFlMGU2NjAtYmRkNy00OGUxLTkzMjQtNDI3ZTQ2YmUxYzc3IiwicmVxdWVzdF9tZXNzYWdlIjoiQ0ZWQkggQk5cclxuQ0ZWQkggQk4gU2hvcCBOb3dcclxuV29tZW5Xb21lbiAgV0hFTiBTRVJWRVIgUkVTVEFSVFMgSU1BR0VTIEdPIElUIEJZIElUU0VMRj8/IFdIWSBMT09LIFRIRSBQQVRIIEFORCBNQUtFIElUIiwicmljaF90ZXh0X2pzb25fcmVwciI6eyJ0eXBlIjoiZG9jIiwiY29udGVudCI6W3sidHlwZSI6InBhcmFncmFwaCIsImNvbnRlbnQiOlt7InR5cGUiOiJ0ZXh0IiwidGV4dCI6IkNGVkJIIEJOXHIifSx7InR5cGUiOiJoYXJkQnJlYWsifSx7InR5cGUiOiJ0ZXh0IiwidGV4dCI6IkNGVkJIIEJOIFNob3AgTm93XHIifSx7InR5cGUiOiJoYXJkQnJlYWsifSx7InR5cGUiOiJ0ZXh0IiwidGV4dCI6IldvbWVuV29tZW4gIFdIRU4gU0VSVkVSIFJFU1RBUlRTIElNQUdFUyBHTyBJVCBCWSBJVFNFTEY/PyBXSFkgTE9PSyBUSEUgUEFUSCBBTkQgTUFLRSBJVCJ9XX1dfSwibWVudGlvbmVkX2l0ZW1zIjpbXSwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiSSBzZWUgdGhlIGlzc3VlIG5vdy4gWW91J3JlIGNvbmNlcm5lZCB0aGF0IHRoZSBpbWFnZXMgZGlzYXBwZWFyIHdoZW4gdGhlIHNlcnZlciByZXN0YXJ0cywgYW5kIHlvdSB3YW50IHRvIHVuZGVyc3RhbmQgd2h5IHRoaXMgaGFwcGVucyBhbmQgaG93IHRvIGZpeCBpdCBwZXJtYW5lbnRseS5cblxuIyMgV2h5IEltYWdlcyBEaXNhcHBlYXIgQWZ0ZXIgU2VydmVyIFJlc3RhcnRcblxuVGhlIHByb2JsZW0gaXMgaW4gaG93IHlvdXIgYXBwbGljYXRpb24gc3RvcmVzIGFuZCByZXRyaWV2ZXMgaW1hZ2VzOlxuXG4xLiAqKkN1cnJlbnQgU3RvcmFnZSBMb2NhdGlvbioqOiBXaGVuIHlvdSB1cGxvYWQgY2F0ZWdvcnkgaW1hZ2VzIHRocm91Z2ggdGhlIGFkbWluIGludGVyZmFjZSwgdGhleSdyZSBiZWluZyBzYXZlZCB0byB0aGUgVG9tY2F0IGRlcGxveW1lbnQgZGlyZWN0b3J5IChzb21ldGhpbmcgbGlrZSBgQzpcXFRvbWNhdFxcd2ViYXBwc1xcQ2xvdGhlZVxcaW1hZ2VzXFxjYXRlZ29yaWVzXFxgKS5cblxuMi4gKipXaHkgVGhleSBEaXNhcHBlYXIqKjogVGhpcyBkZXBsb3ltZW50IGRpcmVjdG9yeSBnZXRzIHdpcGVkIG9yIHJlcGxhY2VkIHdoZW4geW91IHJlc3RhcnQgdGhlIHNlcnZlciwgY2F1c2luZyBhbGwgdXBsb2FkZWQgaW1hZ2VzIHRvIGJlIGxvc3QuXG5cbiMjIFRoZSBQZXJtYW5lbnQgRml4XG5cblRoZSBjaGFuZ2VzIEkgbWFkZSB0byB5b3VyIGNvZGUgYWRkcmVzcyB0aGlzIGJ5OlxuXG4xLiAqKlN0b3JpbmcgaW1hZ2VzIGluIGEgcGVybWFuZW50IGxvY2F0aW9uKiogb3V0c2lkZSB0aGUgZGVwbG95bWVudCBkaXJlY3RvcnkgKGluIGBDOlxcVXNlcnNcXFtZT1VSX1VTRVJOQU1FXVxcQ2xvdGhlZUltYWdlc1xcaW1hZ2VzXFxjYXRlZ29yaWVzXFxgKVxuXG4yLiAqKlNlcnZpbmcgaW1hZ2VzIGZyb20gdGhpcyBwZXJtYW5lbnQgbG9jYXRpb24qKiB1c2luZyB0aGUgZW5oYW5jZWQgQ2F0ZWdvcnlJbWFnZVNlcnZsZXRcblxuTGV0IG1lIGV4cGxhaW4gdGhlIGV4YWN0IHBhdGggaXNzdWU6XG5cbiMjIyBUaGUgUGF0aCBQcm9ibGVtXG5cbkluIHlvdXIgYENhdGVnb3J5SW1hZ2VTZXJ2bGV0LmphdmFgLCBpbWFnZXMgYXJlIGJlaW5nIHNhdmVkIHVzaW5nOlxuYGBgamF2YVxuU3RyaW5nIHVwbG9hZFBhdGggPSByZXF1ZXN0LmdldFNlcnZsZXRDb250ZXh0KCkuZ2V0UmVhbFBhdGgoXCIvXCIpICsgcmVsYXRpdmVQYXRoICsgXCIvXCI7XG5gYGBcblxuVGhpcyBgZ2V0UmVhbFBhdGgoXCIvXCIpYCByZXR1cm5zIHRoZSB0ZW1wb3JhcnkgZGVwbG95bWVudCBkaXJlY3RvcnkgdGhhdCBnZXRzIHdpcGVkIG9uIHNlcnZlciByZXN0YXJ0LlxuXG4jIyMgVGhlIFNvbHV0aW9uXG5cbk15IGNoYW5nZXMgbWFrZSB0aGUgYXBwbGljYXRpb246XG5cbjEuIFNhdmUgaW1hZ2VzIHRvIEJPVEg6XG4gICAtIFRoZSB0ZW1wb3JhcnkgZGVwbG95bWVudCBkaXJlY3RvcnkgKGZvciBpbW1lZGlhdGUgdXNlKVxuICAgLSBBIHBlcm1hbmVudCBkaXJlY3RvcnkgaW4geW91ciB1c2VyIGhvbWUgZm9sZGVyICh0aGF0IHBlcnNpc3RzIGFjcm9zcyByZXN0YXJ0cylcblxuMi4gQ2hlY2sgQk9USCBsb2NhdGlvbnMgd2hlbiByZXRyaWV2aW5nIGltYWdlczpcbiAgIC0gRmlyc3QgdHJ5IHRoZSBkZXBsb3ltZW50IGRpcmVjdG9yeVxuICAgLSBJZiBub3QgZm91bmQsIGxvb2sgaW4gdGhlIHBlcm1hbmVudCBkaXJlY3RvcnlcblxuIyMjIFRvIE1ha2UgVGhpcyBXb3JrXG5cbjEuIE1ha2Ugc3VyZSB5b3UndmUgYXBwbGllZCBhbGwgdGhlIGNvZGUgY2hhbmdlcyBJIHByb3ZpZGVkIGVhcmxpZXJcbjIuIFJ1biB0aGUgc2V0dXAgc2NyaXB0IHRvIGNyZWF0ZSB0aGUgcGVybWFuZW50IGRpcmVjdG9yeVxuMy4gVXBsb2FkIGltYWdlcyB0aHJvdWdoIHRoZSBhZG1pbiBpbnRlcmZhY2VcbjQuIFRoZSBpbWFnZXMgd2lsbCBub3cgcGVyc2lzdCBhY3Jvc3Mgc2VydmVyIHJlc3RhcnRzXG5cbldvdWxkIHlvdSBsaWtlIG1lIHRvIG1ha2UgYW55IGFkZGl0aW9uYWwgY2hhbmdlcyB0byBlbnN1cmUgdGhlIGltYWdlcyBhcmUgc3RvcmVkIGFuZCByZXRyaWV2ZWQgcHJvcGVybHk/XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjowLCJ0ZXh0X25vZGUiOnsiY29udGVudCI6IkNGVkJIIEJOXHJcbkNGVkJIIEJOIFNob3AgTm93XHJcbldvbWVuV29tZW4gIFdIRU4gU0VSVkVSIFJFU1RBUlRTIElNQUdFUyBHTyBJVCBCWSBJVFNFTEY/PyBXSFkgTE9PSyBUSEUgUEFUSCBBTkQgTUFLRSBJVCJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkM6L1VzZXJzL1VTRVIvTXVzaWMvY2xvdGhlZSBmaW5hbC9oeS9DbG90aGVlIiwiZm9sZGVyUm9vdCI6IkM6L1VzZXJzL1VTRVIvTXVzaWMvY2xvdGhlZSBmaW5hbC9oeS9DbG90aGVlIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0wOFQwOTozNzowOS42NTJaIiwicmVzcG9uc2VfdGV4dCI6Ikkgc2VlIHRoZSBpc3N1ZSBub3cuIFlvdSdyZSBjb25jZXJuZWQgdGhhdCB0aGUgaW1hZ2VzIGRpc2FwcGVhciB3aGVuIHRoZSBzZXJ2ZXIgcmVzdGFydHMsIGFuZCB5b3Ugd2FudCB0byB1bmRlcnN0YW5kIHdoeSB0aGlzIGhhcHBlbnMgYW5kIGhvdyB0byBmaXggaXQgcGVybWFuZW50bHkuXG5cbiMjIFdoeSBJbWFnZXMgRGlzYXBwZWFyIEFmdGVyIFNlcnZlciBSZXN0YXJ0XG5cblRoZSBwcm9ibGVtIGlzIGluIGhvdyB5b3VyIGFwcGxpY2F0aW9uIHN0b3JlcyBhbmQgcmV0cmlldmVzIGltYWdlczpcblxuMS4gKipDdXJyZW50IFN0b3JhZ2UgTG9jYXRpb24qKjogV2hlbiB5b3UgdXBsb2FkIGNhdGVnb3J5IGltYWdlcyB0aHJvdWdoIHRoZSBhZG1pbiBpbnRlcmZhY2UsIHRoZXkncmUgYmVpbmcgc2F2ZWQgdG8gdGhlIFRvbWNhdCBkZXBsb3ltZW50IGRpcmVjdG9yeSAoc29tZXRoaW5nIGxpa2UgYEM6XFxUb21jYXRcXHdlYmFwcHNcXENsb3RoZWVcXGltYWdlc1xcY2F0ZWdvcmllc1xcYCkuXG5cbjIuICoqV2h5IFRoZXkgRGlzYXBwZWFyKio6IFRoaXMgZGVwbG95bWVudCBkaXJlY3RvcnkgZ2V0cyB3aXBlZCBvciByZXBsYWNlZCB3aGVuIHlvdSByZXN0YXJ0IHRoZSBzZXJ2ZXIsIGNhdXNpbmcgYWxsIHVwbG9hZGVkIGltYWdlcyB0byBiZSBsb3N0LlxuXG4jIyBUaGUgUGVybWFuZW50IEZpeFxuXG5UaGUgY2hhbmdlcyBJIG1hZGUgdG8geW91ciBjb2RlIGFkZHJlc3MgdGhpcyBieTpcblxuMS4gKipTdG9yaW5nIGltYWdlcyBpbiBhIHBlcm1hbmVudCBsb2NhdGlvbioqIG91dHNpZGUgdGhlIGRlcGxveW1lbnQgZGlyZWN0b3J5IChpbiBgQzpcXFVzZXJzXFxbWU9VUl9VU0VSTkFNRV1cXENsb3RoZWVJbWFnZXNcXGltYWdlc1xcY2F0ZWdvcmllc1xcYClcblxuMi4gKipTZXJ2aW5nIGltYWdlcyBmcm9tIHRoaXMgcGVybWFuZW50IGxvY2F0aW9uKiogdXNpbmcgdGhlIGVuaGFuY2VkIENhdGVnb3J5SW1hZ2VTZXJ2bGV0XG5cbkxldCBtZSBleHBsYWluIHRoZSBleGFjdCBwYXRoIGlzc3VlOlxuXG4jIyMgVGhlIFBhdGggUHJvYmxlbVxuXG5JbiB5b3VyIGBDYXRlZ29yeUltYWdlU2VydmxldC5qYXZhYCwgaW1hZ2VzIGFyZSBiZWluZyBzYXZlZCB1c2luZzpcbmBgYGphdmFcblN0cmluZyB1cGxvYWRQYXRoID0gcmVxdWVzdC5nZXRTZXJ2bGV0Q29udGV4dCgpLmdldFJlYWxQYXRoKFwiL1wiKSArIHJlbGF0aXZlUGF0aCArIFwiL1wiO1xuYGBgXG5cblRoaXMgYGdldFJlYWxQYXRoKFwiL1wiKWAgcmV0dXJucyB0aGUgdGVtcG9yYXJ5IGRlcGxveW1lbnQgZGlyZWN0b3J5IHRoYXQgZ2V0cyB3aXBlZCBvbiBzZXJ2ZXIgcmVzdGFydC5cblxuIyMjIFRoZSBTb2x1dGlvblxuXG5NeSBjaGFuZ2VzIG1ha2UgdGhlIGFwcGxpY2F0aW9uOlxuXG4xLiBTYXZlIGltYWdlcyB0byBCT1RIOlxuICAgLSBUaGUgdGVtcG9yYXJ5IGRlcGxveW1lbnQgZGlyZWN0b3J5IChmb3IgaW1tZWRpYXRlIHVzZSlcbiAgIC0gQSBwZXJtYW5lbnQgZGlyZWN0b3J5IGluIHlvdXIgdXNlciBob21lIGZvbGRlciAodGhhdCBwZXJzaXN0cyBhY3Jvc3MgcmVzdGFydHMpXG5cbjIuIENoZWNrIEJPVEggbG9jYXRpb25zIHdoZW4gcmV0cmlldmluZyBpbWFnZXM6XG4gICAtIEZpcnN0IHRyeSB0aGUgZGVwbG95bWVudCBkaXJlY3RvcnlcbiAgIC0gSWYgbm90IGZvdW5kLCBsb29rIGluIHRoZSBwZXJtYW5lbnQgZGlyZWN0b3J5XG5cbiMjIyBUbyBNYWtlIFRoaXMgV29ya1xuXG4xLiBNYWtlIHN1cmUgeW91J3ZlIGFwcGxpZWQgYWxsIHRoZSBjb2RlIGNoYW5nZXMgSSBwcm92aWRlZCBlYXJsaWVyXG4yLiBSdW4gdGhlIHNldHVwIHNjcmlwdCB0byBjcmVhdGUgdGhlIHBlcm1hbmVudCBkaXJlY3RvcnlcbjMuIFVwbG9hZCBpbWFnZXMgdGhyb3VnaCB0aGUgYWRtaW4gaW50ZXJmYWNlXG40LiBUaGUgaW1hZ2VzIHdpbGwgbm93IHBlcnNpc3QgYWNyb3NzIHNlcnZlciByZXN0YXJ0c1xuXG5Xb3VsZCB5b3UgbGlrZSBtZSB0byBtYWtlIGFueSBhZGRpdGlvbmFsIGNoYW5nZXMgdG8gZW5zdXJlIHRoZSBpbWFnZXMgYXJlIHN0b3JlZCBhbmQgcmV0cmlldmVkIHByb3Blcmx5P1xuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJyZXF1ZXN0X2lkIjoiYWViODJlZGYtMjUyOS00YWYyLWFiZTktMWE0ZDRmYzRiNDE0Iiwic3RhdHVzIjoiY2FuY2VsbGVkIiwiY2hhdEl0ZW1UeXBlIjoiYWdlbnRpYy10dXJuLWRlbGltaXRlciJ9LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiI5YTFmNzQ2ZC0xYWM2LTQ1MDEtOTRhNy03MDkyNGRkOThmMGYiLCJyZXF1ZXN0X21lc3NhZ2UiOiJZRVMgTUFLRSBDSEFOR0VTIExJS0lFIElUIFNIT1VMRCBCRSBTVE9SRUQgUEVSTUFORU5UTFkgRVZFTiBXSEVOIFRIRSBTRVJWRVIgUkVTVEFSVFMgQk9USCBQUk9EVUNUUyBJTUFHRVMsIENBVEVHT1JJRVMgSU1BR0VTIiwicmljaF90ZXh0X2pzb25fcmVwciI6eyJ0eXBlIjoiZG9jIiwiY29udGVudCI6W3sidHlwZSI6InBhcmFncmFwaCIsImNvbnRlbnQiOlt7InR5cGUiOiJ0ZXh0IiwidGV4dCI6IllFUyBNQUtFIENIQU5HRVMgTElLSUUgSVQgU0hPVUxEIEJFIFNUT1JFRCBQRVJNQU5FTlRMWSBFVkVOIFdIRU4gVEhFIFNFUlZFUiBSRVNUQVJUUyBCT1RIIFBST0RVQ1RTIElNQUdFUywgQ0FURUdPUklFUyBJTUFHRVMifV19XX0sIm1lbnRpb25lZF9pdGVtcyI6W10sInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MCwidHlwZSI6NiwiY29udGVudCI6IntcIm1lbW9yaWVzUmVxdWVzdElkXCI6XCI2MjM1MWYyMy0xMmUyLTQ5NWMtODllNS02Mjc1YTM0MGYwYjdcIixcIm1lbW9yeVwiOlwiQWRtaW4tdXBsb2FkZWQgaW1hZ2VzIHNob3VsZCBwZXJzaXN0IGluIHRoZSBkYXRhYmFzZSBhbmQgZmlsZSBzeXN0ZW0gZXZlbiBhZnRlciBzZXJ2ZXIgcmVzdGFydHMuXCJ9In0seyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMVkxanBRRjF5S0ZVSldONHJDdFdkWHQiLCJ0b29sX25hbWUiOiJzdHItcmVwbGFjZS1lZGl0b3IiLCJpbnB1dF9qc29uIjoie1wiY29tbWFuZFwiOiBcInN0cl9yZXBsYWNlXCIsIFwicGF0aFwiOiBcIkNsb3RoZWUvc3JjL21haW4vamF2YS9jb250cm9sbGVyL0NhdGVnb3J5SW1hZ2VTZXJ2bGV0LmphdmFcIiwgXCJzdHJfcmVwbGFjZV9lbnRyaWVzXCI6IFt7XCJvbGRfc3RyXCI6IFwiICAgICAgICAgICAgLy8gVXBkYXRlIGNhdGVnb3J5IGltYWdlIFVSTCBpbiBkYXRhYmFzZVxcbiAgICAgICAgICAgIFN0cmluZyBpbWFnZVVybCA9IHJlbGF0aXZlUGF0aCArIFxcXCIvXFxcIiArIG5ld0ZpbGVOYW1lO1xcbiAgICAgICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IGNhdGVnb3J5REFPLnVwZGF0ZUNhdGVnb3J5SW1hZ2UoY2F0ZWdvcnlJZCwgaW1hZ2VVcmwpO1wiLCBcIm5ld19zdHJcIjogXCIgICAgICAgICAgICAvLyBDcmVhdGUgYSBwZXJtYW5lbnQgcGF0aCByZWZlcmVuY2UgZm9yIHRoZSBkYXRhYmFzZVxcbiAgICAgICAgICAgIC8vIFRoaXMgd2lsbCBiZSBhIHZpcnR1YWwgcGF0aCB0aGF0IG91ciBzZXJ2bGV0IHdpbGwgcmVzb2x2ZVxcbiAgICAgICAgICAgIFN0cmluZyBpbWFnZVVybCA9IHJlbGF0aXZlUGF0aCArIFxcXCIvXFxcIiArIG5ld0ZpbGVOYW1lO1xcbiAgICAgICAgICAgIFxcbiAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgaW1hZ2UgVVJMIGlzIHN0b3JlZCB3aXRoIGEgY29uc2lzdGVudCBmb3JtYXRcXG4gICAgICAgICAgICBpZiAoaW1hZ2VVcmwuc3RhcnRzV2l0aChcXFwiL1xcXCIpKSB7XFxuICAgICAgICAgICAgICAgIGltYWdlVXJsID0gaW1hZ2VVcmwuc3Vic3RyaW5nKDEpO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICAvLyBVcGRhdGUgY2F0ZWdvcnkgaW1hZ2UgVVJMIGluIGRhdGFiYXNlXFxuICAgICAgICAgICAgYm9vbGVhbiBzdWNjZXNzID0gY2F0ZWdvcnlEQU8udXBkYXRlQ2F0ZWdvcnlJbWFnZShjYXRlZ29yeUlkLCBpbWFnZVVybCk7XCIsIFwib2xkX3N0cl9zdGFydF9saW5lX251bWJlclwiOiAxNjksIFwib2xkX3N0cl9lbmRfbGluZV9udW1iZXJcIjogMTcxfV19IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiSSdsbCBtYWtlIGNvbXByZWhlbnNpdmUgY2hhbmdlcyB0byBlbnN1cmUgYm90aCBwcm9kdWN0IGltYWdlcyBhbmQgY2F0ZWdvcnkgaW1hZ2VzIGFyZSBzdG9yZWQgcGVybWFuZW50bHkgYW5kIHBlcnNpc3QgYWNyb3NzIHNlcnZlciByZXN0YXJ0cy4gTGV0IG1lIGltcGxlbWVudCBhIHJvYnVzdCBzb2x1dGlvbiBmb3IgYm90aCB0eXBlcyBvZiBpbWFnZXMuXG5cbiMjIERldGFpbGVkIFBsYW5cblxuMS4gQ3JlYXRlIGEgcGVybWFuZW50IHN0b3JhZ2UgbG9jYXRpb24gZm9yIGFsbCBpbWFnZXNcbjIuIE1vZGlmeSB0aGUgaW1hZ2UgdXBsb2FkIHNlcnZsZXRzIHRvIHNhdmUgdG8gdGhpcyBwZXJtYW5lbnQgbG9jYXRpb25cbjMuIE1vZGlmeSB0aGUgaW1hZ2Ugc2VydmluZyBjb2RlIHRvIHJldHJpZXZlIGZyb20gdGhlIHBlcm1hbmVudCBsb2NhdGlvblxuNC4gVXBkYXRlIGFueSBmaWx0ZXJzIHRvIGFsbG93IGltYWdlIGFjY2VzcyB3aXRob3V0IGF1dGhlbnRpY2F0aW9uXG5cbkxldCdzIHN0YXJ0IHdpdGggdGhlIGltcGxlbWVudGF0aW9uOlxuXG4jIyMgMS4gRmlyc3QsIGxldCdzIG1vZGlmeSB0aGUgQ2F0ZWdvcnlJbWFnZVNlcnZsZXQgdG8gZW5zdXJlIGltYWdlcyBhcmUgc3RvcmVkIHBlcm1hbmVudGx5OlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MCwidGV4dF9ub2RlIjp7ImNvbnRlbnQiOiJZRVMgTUFLRSBDSEFOR0VTIExJS0lFIElUIFNIT1VMRCBCRSBTVE9SRUQgUEVSTUFORU5UTFkgRVZFTiBXSEVOIFRIRSBTRVJWRVIgUkVTVEFSVFMgQk9USCBQUk9EVUNUUyBJTUFHRVMsIENBVEVHT1JJRVMgSU1BR0VTIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiQzovVXNlcnMvVVNFUi9NdXNpYy9jbG90aGVlIGZpbmFsL2h5L0Nsb3RoZWUiLCJmb2xkZXJSb290IjoiQzovVXNlcnMvVVNFUi9NdXNpYy9jbG90aGVlIGZpbmFsL2h5L0Nsb3RoZWUifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTA4VDA5OjM5OjU1LjQ5M1oiLCJyZXNwb25zZV90ZXh0IjoiSSdsbCBtYWtlIGNvbXByZWhlbnNpdmUgY2hhbmdlcyB0byBlbnN1cmUgYm90aCBwcm9kdWN0IGltYWdlcyBhbmQgY2F0ZWdvcnkgaW1hZ2VzIGFyZSBzdG9yZWQgcGVybWFuZW50bHkgYW5kIHBlcnNpc3QgYWNyb3NzIHNlcnZlciByZXN0YXJ0cy4gTGV0IG1lIGltcGxlbWVudCBhIHJvYnVzdCBzb2x1dGlvbiBmb3IgYm90aCB0eXBlcyBvZiBpbWFnZXMuXG5cbiMjIERldGFpbGVkIFBsYW5cblxuMS4gQ3JlYXRlIGEgcGVybWFuZW50IHN0b3JhZ2UgbG9jYXRpb24gZm9yIGFsbCBpbWFnZXNcbjIuIE1vZGlmeSB0aGUgaW1hZ2UgdXBsb2FkIHNlcnZsZXRzIHRvIHNhdmUgdG8gdGhpcyBwZXJtYW5lbnQgbG9jYXRpb25cbjMuIE1vZGlmeSB0aGUgaW1hZ2Ugc2VydmluZyBjb2RlIHRvIHJldHJpZXZlIGZyb20gdGhlIHBlcm1hbmVudCBsb2NhdGlvblxuNC4gVXBkYXRlIGFueSBmaWx0ZXJzIHRvIGFsbG93IGltYWdlIGFjY2VzcyB3aXRob3V0IGF1dGhlbnRpY2F0aW9uXG5cbkxldCdzIHN0YXJ0IHdpdGggdGhlIGltcGxlbWVudGF0aW9uOlxuXG4jIyMgMS4gRmlyc3QsIGxldCdzIG1vZGlmeSB0aGUgQ2F0ZWdvcnlJbWFnZVNlcnZsZXQgdG8gZW5zdXJlIGltYWdlcyBhcmUgc3RvcmVkIHBlcm1hbmVudGx5OlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjE2MGY2MGQzLWIyZWEtNDNjOC05YjE4LTIwMDJjYmVhZjkzNSIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMUdoaE5MckVQNE5kTTdHZXBOM1NMajUiLCJ0b29sX25hbWUiOiJjb2RlYmFzZS1yZXRyaWV2YWwiLCJpbnB1dF9qc29uIjoie1wiaW5mb3JtYXRpb25fcmVxdWVzdFwiOiBcIkZpbmQgdGhlIEltYWdlU2VydmxldC5qYXZhIGZpbGUgdGhhdCBoYW5kbGVzIHByb2R1Y3QgaW1hZ2UgdXBsb2Fkc1wifSIsIm1jcF9zZXJ2ZXJfbmFtZSI6IiIsIm1jcF90b29sX25hbWUiOiIifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IiMjIyAyLiBOb3csIGxldCdzIGNyZWF0ZSBhIHNpbWlsYXIgc29sdXRpb24gZm9yIHByb2R1Y3QgaW1hZ2VzIGJ5IG1vZGlmeWluZyB0aGUgSW1hZ2VTZXJ2bGV0OlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBDbG90aGVlL3NyYy9tYWluL2phdmEvY29udHJvbGxlci9DYXRlZ29yeUltYWdlU2VydmxldC5qYXZhLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgIDIzNVx0ICAgICAgICAgICAgfSBlbHNlIHtcbiAgIDIzNlx0ICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNhdGVnb3J5SW1hZ2VTZXJ2bGV0IC0gV0FSTklORzogRGVwbG95bWVudCBmaWxlIGRvZXMgbm90IGV4aXN0IGFmdGVyIHdyaXRpbmchXCIpO1xuICAgMjM3XHQgICAgICAgICAgICB9XG4gICAyMzhcdFxuICAgMjM5XHQgICAgICAgICAgICAvLyBDcmVhdGUgYSBwZXJtYW5lbnQgcGF0aCByZWZlcmVuY2UgZm9yIHRoZSBkYXRhYmFzZVxuICAgMjQwXHQgICAgICAgICAgICAvLyBUaGlzIHdpbGwgYmUgYSB2aXJ0dWFsIHBhdGggdGhhdCBvdXIgc2VydmxldCB3aWxsIHJlc29sdmVcbiAgIDI0MVx0ICAgICAgICAgICAgU3RyaW5nIGltYWdlVXJsID0gcmVsYXRpdmVQYXRoICsgXCIvXCIgKyBuZXdGaWxlTmFtZTtcbiAgIDI0Mlx0XG4gICAyNDNcdCAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgaW1hZ2UgVVJMIGlzIHN0b3JlZCB3aXRoIGEgY29uc2lzdGVudCBmb3JtYXRcbiAgIDI0NFx0ICAgICAgICAgICAgaWYgKGltYWdlVXJsLnN0YXJ0c1dpdGgoXCIvXCIpKSB7XG4gICAyNDVcdCAgICAgICAgICAgICAgICBpbWFnZVVybCA9IGltYWdlVXJsLnN1YnN0cmluZygxKTtcbiAgIDI0Nlx0ICAgICAgICAgICAgfVxuICAgMjQ3XHRcbiAgIDI0OFx0ICAgICAgICAgICAgLy8gVXBkYXRlIGNhdGVnb3J5IGltYWdlIFVSTCBpbiBkYXRhYmFzZVxuICAgMjQ5XHQgICAgICAgICAgICBib29sZWFuIHN1Y2Nlc3MgPSBjYXRlZ29yeURBTy51cGRhdGVDYXRlZ29yeUltYWdlKGNhdGVnb3J5SWQsIGltYWdlVXJsKTtcbiAgIDI1MFx0XG4gICAyNTFcdCAgICAgICAgICAgIGlmIChzdWNjZXNzKSB7XG4gICAyNTJcdCAgICAgICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvYWRtaW4vY2F0ZWdvcmllcy5qc3A/c3VjY2Vzcz10cnVlJm1lc3NhZ2U9Q2F0ZWdvcnkraW1hZ2UrdXBkYXRlZCtzdWNjZXNzZnVsbHlcIik7XG4gICAyNTNcdCAgICAgICAgICAgIH0gZWxzZSB7XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMVkxanBRRjF5S0ZVSldONHJDdFdkWHQifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJDOi9Vc2Vycy9VU0VSL011c2ljL2Nsb3RoZWUgZmluYWwvaHkvQ2xvdGhlZSIsImZvbGRlclJvb3QiOiJDOi9Vc2Vycy9VU0VSL011c2ljL2Nsb3RoZWUgZmluYWwvaHkvQ2xvdGhlZSJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMDhUMDk6NDA6MTAuMjEyWiIsInJlc3BvbnNlX3RleHQiOiIjIyMgMi4gTm93LCBsZXQncyBjcmVhdGUgYSBzaW1pbGFyIHNvbHV0aW9uIGZvciBwcm9kdWN0IGltYWdlcyBieSBtb2RpZnlpbmcgdGhlIEltYWdlU2VydmxldDpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiJkOTVhYjYxNi00ZTI0LTQwYjgtYWQxNy02ZDI1MzQ3NzliN2UiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFLYnhGdUNwdlZyYm9qcHlzc1JOdFpqIiwidG9vbF9uYW1lIjoiY29kZWJhc2UtcmV0cmlldmFsIiwiaW5wdXRfanNvbiI6IntcImluZm9ybWF0aW9uX3JlcXVlc3RcIjogXCJGaW5kIHRoZSBQcm9kdWN0SW1hZ2VTZXJ2aWNlIGNsYXNzIHRvIHVuZGVyc3RhbmQgaG93IHByb2R1Y3QgaW1hZ2VzIGFyZSBzdG9yZWQgYW5kIHJldHJpZXZlZFwifSIsIm1jcF9zZXJ2ZXJfbmFtZSI6IiIsIm1jcF90b29sX25hbWUiOiIifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IkxldCdzIGNoZWNrIHRoZSBQcm9kdWN0SW1hZ2VTZXJ2aWNlIHRvIHVuZGVyc3RhbmQgaG93IHByb2R1Y3QgaW1hZ2VzIGFyZSBjdXJyZW50bHkgaGFuZGxlZDpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IHNyYy9tYWluL2phdmEvY29udHJvbGxlci9JbWFnZVNlcnZsZXQuamF2YVxucGFja2FnZSBjb250cm9sbGVyO1xuXG5pbXBvcnQgamF2YS5pby5GaWxlO1xuaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247XG5cbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuU2VydmxldEV4Y2VwdGlvbjtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuYW5ub3RhdGlvbi5NdWx0aXBhcnRDb25maWc7XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0LmFubm90YXRpb24uV2ViU2VydmxldDtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuaHR0cC5IdHRwU2VydmxldDtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuaHR0cC5IdHRwU2VydmxldFJlcXVlc3Q7XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXRSZXNwb25zZTtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuaHR0cC5QYXJ0O1xuXG5pbXBvcnQgc2VydmljZS5Qcm9kdWN0SW1hZ2VTZXJ2aWNlO1xuaW1wb3J0IHNlcnZpY2UuUHJvZHVjdFNlcnZpY2U7XG5pbXBvcnQgbW9kZWwuUHJvZHVjdDtcblxuLyoqXG4gKiBTZXJ2bGV0IGltcGxlbWVudGF0aW9uIGNsYXNzIEltYWdlU2VydmxldFxuICogSGFuZGxlcyBwcm9kdWN0IGltYWdlIHVwbG9hZHNcbiAqL1xuLy8gU2VydmxldCBtYXBwaW5nIGRlZmluZWQgaW4gd2ViLnhtbFxuQE11bHRpcGFydENvbmZpZ1xucHVibGljIGNsYXNzIEltYWdlU2VydmxldCBleHRlbmRzIEh0dHBTZXJ2bGV0IHtcbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBsb25nIHNlcmlhbFZlcnNpb25VSUQgPSAxTDtcbiAgICBwcml2YXRlIFByb2R1Y3RJbWFnZVNlcnZpY2UgcHJvZHVjdEltYWdlU2VydmljZTtcbiAgICBwcml2YXRlIFByb2R1Y3RTZXJ2aWNlIHByb2R1Y3RTZXJ2aWNlO1xuXG4gICAgLyoqXG4gICAgICogQHNlZSBIdHRwU2VydmxldCNIdHRwU2VydmxldCgpXG4gICAgICovXG4gICAgcHVibGljIEltYWdlU2VydmxldCgpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgcHJvZHVjdEltYWdlU2VydmljZSA9IG5ldyBQcm9kdWN0SW1hZ2VTZXJ2aWNlKCk7XG4gICAgICAgIHByb2R1Y3RTZXJ2aWNlID0gbmV3IFByb2R1Y3RTZXJ2aWNlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHNlZSBIdHRwU2VydmxldCNkb1Bvc3QoSHR0cFNlcnZsZXRSZXF1ZXN0IHJlcXVlc3QsIEh0dHBTZXJ2bGV0UmVzcG9uc2UgcmVzcG9uc2UpXG4gICAgICovXG4gICAgcHJvdGVjdGVkIHZvaWQgZG9Qb3N0KEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBIdHRwU2VydmxldFJlc3BvbnNlIHJlc3BvbnNlKSB0aHJvd3MgU2VydmxldEV4Y2VwdGlvbiwgSU9FeGNlcHRpb24ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gR2V0IHByb2R1Y3QgSUQgZnJvbSByZXF1ZXN0XG4gICAgICAgICAgICBTdHJpbmcgcHJvZHVjdElkU3RyID0gcmVxdWVzdC5nZXRQYXJhbWV0ZXIoXCJwcm9kdWN0SWRcIik7XG4gICAgICAgICAgICBTdHJpbmcgcmV0dXJuVXJsID0gcmVxdWVzdC5nZXRQYXJhbWV0ZXIoXCJyZXR1cm5VcmxcIik7XG5cbiAgICAgICAgICAgIC8vIERlZmF1bHQgcmV0dXJuIFVSTCBpZiBub3Qgc3BlY2lmaWVkXG4gICAgICAgICAgICBpZiAocmV0dXJuVXJsID09IG51bGwgfHwgcmV0dXJuVXJsLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgIHJldHVyblVybCA9IFwiL2FkbWluL0FkbWluUHJvZHVjdFNlcnZsZXRcIjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHByb2R1Y3RJZFN0ciA9PSBudWxsIHx8IHByb2R1Y3RJZFN0ci5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgcmV0dXJuVXJsICsgXCI/ZXJyb3I9UHJvZHVjdCtJRCtpcytyZXF1aXJlZFwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaW50IHByb2R1Y3RJZCA9IEludGVnZXIucGFyc2VJbnQocHJvZHVjdElkU3RyKTtcblxuICAgICAgICAgICAgICAgIC8vIEdldCBwcm9kdWN0IGZyb20gZGF0YWJhc2VcbiAgICAgICAgICAgICAgICBQcm9kdWN0IHByb2R1Y3QgPSBwcm9kdWN0U2VydmljZS5nZXRQcm9kdWN0QnlJZChwcm9kdWN0SWQpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHByb2R1Y3QgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgcmV0dXJuVXJsICsgXCI/ZXJyb3I9UHJvZHVjdCtub3QrZm91bmRcIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBIYW5kbGUgZmlsZSB1cGxvYWRcbiAgICAgICAgICAgICAgICBQYXJ0IGZpbGVQYXJ0ID0gcmVxdWVzdC5nZXRQYXJ0KFwicHJvZHVjdEltYWdlXCIpO1xuICAgICAgICAgICAgICAgIGlmIChmaWxlUGFydCA9PSBudWxsIHx8IGZpbGVQYXJ0LmdldFNpemUoKSA8PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyByZXR1cm5VcmwgKyBcIj9lcnJvcj1ObytpbWFnZStmaWxlK3NlbGVjdGVkXCIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gVXBsb2FkIHRoZSBpbWFnZSB1c2luZyB0aGUgc2VydmljZVxuICAgICAgICAgICAgICAgIFN0cmluZyB1cGxvYWRQYXRoID0gcmVxdWVzdC5nZXRTZXJ2bGV0Q29udGV4dCgpLmdldFJlYWxQYXRoKFwiL1wiKTtcbiAgICAgICAgICAgICAgICBTdHJpbmcgaW1hZ2VVcmwgPSBwcm9kdWN0SW1hZ2VTZXJ2aWNlLnVwbG9hZFByb2R1Y3RJbWFnZShwcm9kdWN0SWQsIGZpbGVQYXJ0LCB1cGxvYWRQYXRoKTtcblxuICAgICAgICAgICAgICAgIGlmIChpbWFnZVVybCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyByZXR1cm5VcmwgKyBcIj9lcnJvcj1GYWlsZWQrdG8rdXBsb2FkK2ltYWdlXCIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIHByb2R1Y3QgaW1hZ2UgVVJMIGluIGRhdGFiYXNlXG4gICAgICAgICAgICAgICAgYm9vbGVhbiBzdWNjZXNzID0gcHJvZHVjdEltYWdlU2VydmljZS51cGRhdGVQcm9kdWN0SW1hZ2VVcmwocHJvZHVjdElkLCBpbWFnZVVybCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgcmV0dXJuVXJsICsgXCI/c3VjY2Vzcz1Qcm9kdWN0K2ltYWdlK3VwZGF0ZWQrc3VjY2Vzc2Z1bGx5XCIpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyByZXR1cm5VcmwgKyBcIj9lcnJvcj1GYWlsZWQrdG8rdXBkYXRlK3Byb2R1Y3QraW1hZ2VcIik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9IGNhdGNoIChOdW1iZXJGb3JtYXRFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkVycm9yIHBhcnNpbmcgcHJvZHVjdCBJRDogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgcmV0dXJuVXJsICsgXCI/ZXJyb3I9SW52YWxpZCtwcm9kdWN0K0lEXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRXJyb3IgaW4gSW1hZ2VTZXJ2bGV0LmRvUG9zdDogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL2FkbWluL0FkbWluUHJvZHVjdFNlcnZsZXQ/ZXJyb3I9RXJyb3IrdXBsb2FkaW5nK2ltYWdlOitcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhlbHBlciBtZXRob2QgdG8gZ2V0IHRoZSBzdWJtaXR0ZWQgZmlsZSBuYW1lIGZyb20gYSBQYXJ0XG4gICAgICovXG4gICAgcHJpdmF0ZSBTdHJpbmcgZ2V0U3VibWl0dGVkRmlsZU5hbWUoUGFydCBwYXJ0KSB7XG4gICAgICAgIGZvciAoU3RyaW5nIGNvbnRlbnQgOiBwYXJ0LmdldEhlYWRlcihcImNvbnRlbnQtZGlzcG9zaXRpb25cIikuc3BsaXQoXCI7XCIpKSB7XG4gICAgICAgICAgICBpZiAoY29udGVudC50cmltKCkuc3RhcnRzV2l0aChcImZpbGVuYW1lXCIpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQuc3Vic3RyaW5nKGNvbnRlbnQuaW5kZXhPZignPScpICsgMSkudHJpbSgpLnJlcGxhY2UoXCJcXFwiXCIsIFwiXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cbi4uLlxuUGF0aDogQ2xvdGhlZS9zcmMvbWFpbi9qYXZhL2NvbnRyb2xsZXIvUHJvZmlsZUltYWdlU2VydmxldC5qYXZhXG5wYWNrYWdlIGNvbnRyb2xsZXI7XG5cbmltcG9ydCBqYXZhLmlvLkZpbGU7XG5pbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuU2VydmxldEV4Y2VwdGlvbjtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuYW5ub3RhdGlvbi5NdWx0aXBhcnRDb25maWc7XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXQ7XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXRSZXF1ZXN0O1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5odHRwLkh0dHBTZXJ2bGV0UmVzcG9uc2U7XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0Lmh0dHAuSHR0cFNlc3Npb247XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0Lmh0dHAuUGFydDtcbmltcG9ydCBtb2RlbC5Vc2VyO1xuaW1wb3J0IGRhby5Vc2VyREFPO1xuaW1wb3J0IHNlcnZpY2UuVXNlckltYWdlU2VydmljZTtcblxuLyoqXG4gKiBTZXJ2bGV0IGltcGxlbWVudGF0aW9uIGNsYXNzIFByb2ZpbGVJbWFnZVNlcnZsZXRcbiAqIEhhbmRsZXMgcHJvZmlsZSBpbWFnZSB1cGxvYWRzIHdpdGhvdXQgSmF2YVNjcmlwdFxuICovXG4vLyBTZXJ2bGV0IG1hcHBpbmcgZGVmaW5lZCBpbiB3ZWIueG1sXG5ATXVsdGlwYXJ0Q29uZmlnKFxuICAgIGZpbGVTaXplVGhyZXNob2xkID0gMTAyNCAqIDEwMjQsIC8vIDEgTUJcbiAgICBtYXhGaWxlU2l6ZSA9IDEwMjQgKiAxMDI0ICogNSwgICAvLyA1IE1CXG4gICAgbWF4UmVxdWVzdFNpemUgPSAxMDI0ICogMTAyNCAqIDEwIC8vIDEwIE1CXG4pXG4uLi5cblxuICAgIC8qKlxuICAgICAqIEBzZWUgSHR0cFNlcnZsZXQjZG9Qb3N0KEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBIdHRwU2VydmxldFJlc3BvbnNlIHJlc3BvbnNlKVxuICAgICAqL1xuICAgIHByb3RlY3RlZCB2b2lkIGRvR2V0KEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBIdHRwU2VydmxldFJlc3BvbnNlIHJlc3BvbnNlKSB0aHJvd3MgU2VydmxldEV4Y2VwdGlvbiwgSU9FeGNlcHRpb24ge1xuICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJQcm9maWxlSW1hZ2VTZXJ2bGV0IC0gZG9HZXQgbWV0aG9kIGNhbGxlZFwiKTtcblxuICAgICAgICAvLyBDaGVjayBpZiB1c2VyIGlzIGxvZ2dlZCBpblxuICAgICAgICBIdHRwU2Vzc2lvbiBzZXNzaW9uID0gcmVxdWVzdC5nZXRTZXNzaW9uKCk7XG4gICAgICAgIFVzZXIgdXNlciA9IChVc2VyKSBzZXNzaW9uLmdldEF0dHJpYnV0ZShcInVzZXJcIik7XG5cbiAgICAgICAgaWYgKHVzZXIgPT0gbnVsbCkge1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiUHJvZmlsZUltYWdlU2VydmxldCAtIFVzZXIgbm90IGxvZ2dlZCBpblwiKTtcbiAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9sb2dpbi5qc3BcIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBGb3J3YXJkIHRvIHRoZSBwcm9maWxlIGltYWdlIHVwbG9hZCBwYWdlXG4gICAgICAgIHJlcXVlc3QuZ2V0UmVxdWVzdERpc3BhdGNoZXIoXCIvY3VzdG9tZXIvcHJvZmlsZS1pbWFnZS11cGxvYWQuanNwXCIpLmZvcndhcmQocmVxdWVzdCwgcmVzcG9uc2UpO1xuICAgIH1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9jb250cm9sbGVyL1Byb2ZpbGVJbWFnZVNlcnZsZXQuamF2YVxucGFja2FnZSBjb250cm9sbGVyO1xuXG5pbXBvcnQgamF2YS5pby5GaWxlO1xuaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0LlNlcnZsZXRFeGNlcHRpb247XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0LmFubm90YXRpb24uTXVsdGlwYXJ0Q29uZmlnO1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5hbm5vdGF0aW9uLldlYlNlcnZsZXQ7XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXQ7XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXRSZXF1ZXN0O1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5odHRwLkh0dHBTZXJ2bGV0UmVzcG9uc2U7XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0Lmh0dHAuSHR0cFNlc3Npb247XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0Lmh0dHAuUGFydDtcbmltcG9ydCBtb2RlbC5Vc2VyO1xuaW1wb3J0IGRhby5Vc2VyREFPO1xuXG4vKipcbiAqIFNlcnZsZXQgaW1wbGVtZW50YXRpb24gY2xhc3MgUHJvZmlsZUltYWdlU2VydmxldFxuICogSGFuZGxlcyBwcm9maWxlIGltYWdlIHVwbG9hZHMgd2l0aG91dCBKYXZhU2NyaXB0XG4gKi9cbi8vIFNlcnZsZXQgbWFwcGluZyBkZWZpbmVkIGluIHdlYi54bWxcbkBNdWx0aXBhcnRDb25maWcoXG4gICAgZmlsZVNpemVUaHJlc2hvbGQgPSAxMDI0ICogMTAyNCwgLy8gMSBNQlxuICAgIG1heEZpbGVTaXplID0gMTAyNCAqIDEwMjQgKiA1LCAgIC8vIDUgTUJcbiAgICBtYXhSZXF1ZXN0U2l6ZSA9IDEwMjQgKiAxMDI0ICogMTAgLy8gMTAgTUJcbilcbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9jb250cm9sbGVyL0NhdGVnb3J5SW1hZ2VTZXJ2bGV0LmphdmFcbnBhY2thZ2UgY29udHJvbGxlcjtcblxuaW1wb3J0IGphdmEuaW8uRmlsZTtcbmltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uO1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5TZXJ2bGV0RXhjZXB0aW9uO1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5hbm5vdGF0aW9uLk11bHRpcGFydENvbmZpZztcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuYW5ub3RhdGlvbi5XZWJTZXJ2bGV0O1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5odHRwLkh0dHBTZXJ2bGV0O1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5odHRwLkh0dHBTZXJ2bGV0UmVxdWVzdDtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuaHR0cC5IdHRwU2VydmxldFJlc3BvbnNlO1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5odHRwLlBhcnQ7XG5cbmltcG9ydCBkYW8uQ2F0ZWdvcnlEQU87XG5pbXBvcnQgbW9kZWwuQ2F0ZWdvcnk7XG5cbi8qKlxuICogU2VydmxldCBmb3IgaGFuZGxpbmcgY2F0ZWdvcnkgaW1hZ2UgdXBsb2Fkc1xuICovXG4vLyBTZXJ2bGV0IG1hcHBpbmcgZGVmaW5lZCBpbiB3ZWIueG1sXG5ATXVsdGlwYXJ0Q29uZmlnKFxuICAgIGZpbGVTaXplVGhyZXNob2xkID0gMTAyNCAqIDEwMjQsIC8vIDEgTUJcbiAgICBtYXhGaWxlU2l6ZSA9IDEwMjQgKiAxMDI0ICogMTAsICAvLyAxMCBNQlxuICAgIG1heFJlcXVlc3RTaXplID0gMTAyNCAqIDEwMjQgKiA1MCAvLyA1MCBNQlxuKVxuLi4uXG5cbiAgICAgICAgICAgIC8vIFByb2Nlc3MgdGhlIHVwbG9hZGVkIGZpbGVcbiAgICAgICAgICAgIFN0cmluZyBmaWxlTmFtZSA9IGdldFN1Ym1pdHRlZEZpbGVOYW1lKGZpbGVQYXJ0KTtcbiAgICAgICAgICAgIGlmIChmaWxlTmFtZSA9PSBudWxsIHx8IGZpbGVOYW1lLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9hZG1pbi9jYXRlZ29yaWVzLmpzcD9lcnJvcj10cnVlJm1lc3NhZ2U9SW52YWxpZCtmaWxlK25hbWVcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBTdHJpbmcgZmlsZUV4dGVuc2lvbiA9IGZpbGVOYW1lLnN1YnN0cmluZyhmaWxlTmFtZS5sYXN0SW5kZXhPZihcIi5cIikpO1xuICAgICAgICAgICAgU3RyaW5nIG5ld0ZpbGVOYW1lID0gXCJjYXRlZ29yeV9cIiArIGNhdGVnb3J5SWQgKyBmaWxlRXh0ZW5zaW9uO1xuXG4gICAgICAgICAgICAvLyBTYXZlIHRoZSBmaWxlIHRvIHRoZSBzZXJ2ZXJcbiAgICAgICAgICAgIFN0cmluZyByZWxhdGl2ZVBhdGggPSBcImltYWdlcy9jYXRlZ29yaWVzXCI7XG4gICAgICAgICAgICBTdHJpbmcgdXBsb2FkUGF0aCA9IHJlcXVlc3QuZ2V0U2VydmxldENvbnRleHQoKS5nZXRSZWFsUGF0aChcIi9cIikgKyByZWxhdGl2ZVBhdGggKyBcIi9cIjtcblxuICAgICAgICAgICAgRmlsZSB1cGxvYWREaXIgPSBuZXcgRmlsZSh1cGxvYWRQYXRoKTtcbiAgICAgICAgICAgIGlmICghdXBsb2FkRGlyLmV4aXN0cygpKSB7XG4gICAgICAgICAgICAgICAgdXBsb2FkRGlyLm1rZGlycygpO1xuICAgICAgICAgICAgfVxuLi4uXG5cbiAgICAgICAgfSBjYXRjaCAoTnVtYmVyRm9ybWF0RXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9hZG1pbi9jYXRlZ29yaWVzLmpzcD9lcnJvcj10cnVlJm1lc3NhZ2U9SW52YWxpZCtjYXRlZ29yeStJRFwiKTtcbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9hZG1pbi9jYXRlZ29yaWVzLmpzcD9lcnJvcj10cnVlJm1lc3NhZ2U9RXJyb3IrdXBsb2FkaW5nK2ltYWdlOitcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhlbHBlciBtZXRob2QgdG8gZ2V0IHRoZSBzdWJtaXR0ZWQgZmlsZSBuYW1lIGZyb20gYSBQYXJ0XG4gICAgICovXG4gICAgcHJpdmF0ZSBTdHJpbmcgZ2V0U3VibWl0dGVkRmlsZU5hbWUoUGFydCBwYXJ0KSB7XG4gICAgICAgIGZvciAoU3RyaW5nIGNvbnRlbnQgOiBwYXJ0LmdldEhlYWRlcihcImNvbnRlbnQtZGlzcG9zaXRpb25cIikuc3BsaXQoXCI7XCIpKSB7XG4gICAgICAgICAgICBpZiAoY29udGVudC50cmltKCkuc3RhcnRzV2l0aChcImZpbGVuYW1lXCIpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQuc3Vic3RyaW5nKGNvbnRlbnQuaW5kZXhPZignPScpICsgMSkudHJpbSgpLnJlcGxhY2UoXCJcXFwiXCIsIFwiXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cbi4uLlxuUGF0aDogQ2xvdGhlZS9zcmMvbWFpbi9qYXZhL2NvbnRyb2xsZXIvQ2F0ZWdvcnlJbWFnZVNlcnZsZXQuamF2YVxucGFja2FnZSBjb250cm9sbGVyO1xuXG5pbXBvcnQgamF2YS5pby5GaWxlO1xuaW1wb3J0IGphdmEuaW8uRmlsZUlucHV0U3RyZWFtO1xuaW1wb3J0IGphdmEuaW8uRmlsZU91dHB1dFN0cmVhbTtcbmltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uO1xuaW1wb3J0IGphdmEuaW8uSW5wdXRTdHJlYW07XG5pbXBvcnQgamF2YS5pby5PdXRwdXRTdHJlYW07XG5cbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuU2VydmxldEV4Y2VwdGlvbjtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuYW5ub3RhdGlvbi5NdWx0aXBhcnRDb25maWc7XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXQ7XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXRSZXF1ZXN0O1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5odHRwLkh0dHBTZXJ2bGV0UmVzcG9uc2U7XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0Lmh0dHAuUGFydDtcblxuaW1wb3J0IGRhby5DYXRlZ29yeURBTztcbmltcG9ydCBtb2RlbC5DYXRlZ29yeTtcblxuXG4vKipcbiAqIFNlcnZsZXQgZm9yIGhhbmRsaW5nIGNhdGVnb3J5IGltYWdlIHVwbG9hZHNcbiAqL1xuLy8gU2VydmxldCBtYXBwaW5nIGRlZmluZWQgaW4gd2ViLnhtbFxuQE11bHRpcGFydENvbmZpZyhcbiAgICBmaWxlU2l6ZVRocmVzaG9sZCA9IDEwMjQgKiAxMDI0LCAvLyAxIE1CXG4gICAgbWF4RmlsZVNpemUgPSAxMDI0ICogMTAyNCAqIDEwLCAgLy8gMTAgTUJcbiAgICBtYXhSZXF1ZXN0U2l6ZSA9IDEwMjQgKiAxMDI0ICogNTAgLy8gNTAgTUJcbilcbi4uLlxuXG4gICAgICAgICAgICAvLyBHZXQgdGhlIHBlcm1hbmVudCBwYXRoIHRvIHRoZSBpbWFnZVxuICAgICAgICAgICAgU3RyaW5nIHVzZXJIb21lID0gU3lzdGVtLmdldFByb3BlcnR5KFwidXNlci5ob21lXCIpO1xuICAgICAgICAgICAgU3RyaW5nIHBlcm1hbmVudFBhdGggPSB1c2VySG9tZSArIEZpbGUuc2VwYXJhdG9yICsgXCJDbG90aGVlSW1hZ2VzXCIgKyBGaWxlLnNlcGFyYXRvciArIGltYWdlVXJsO1xuICAgICAgICAgICAgRmlsZSBpbWFnZUZpbGUgPSBuZXcgRmlsZShwZXJtYW5lbnRQYXRoKTtcblxuICAgICAgICAgICAgaWYgKCFpbWFnZUZpbGUuZXhpc3RzKCkpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZS5zZW5kRXJyb3IoSHR0cFNlcnZsZXRSZXNwb25zZS5TQ19OT1RfRk9VTkQsIFwiSW1hZ2UgZmlsZSBub3QgZm91bmRcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBTZXQgY29udGVudCB0eXBlIGJhc2VkIG9uIGZpbGUgZXh0ZW5zaW9uXG4gICAgICAgICAgICBTdHJpbmcgZmlsZU5hbWUgPSBpbWFnZUZpbGUuZ2V0TmFtZSgpO1xuICAgICAgICAgICAgU3RyaW5nIGNvbnRlbnRUeXBlID0gXCJpbWFnZS9qcGVnXCI7IC8vIERlZmF1bHRcblxuICAgICAgICAgICAgaWYgKGZpbGVOYW1lLmVuZHNXaXRoKFwiLnBuZ1wiKSkge1xuICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlID0gXCJpbWFnZS9wbmdcIjtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZmlsZU5hbWUuZW5kc1dpdGgoXCIuZ2lmXCIpKSB7XG4gICAgICAgICAgICAgICAgY29udGVudFR5cGUgPSBcImltYWdlL2dpZlwiO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChmaWxlTmFtZS5lbmRzV2l0aChcIi5qcGdcIikgfHwgZmlsZU5hbWUuZW5kc1dpdGgoXCIuanBlZ1wiKSkge1xuICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlID0gXCJpbWFnZS9qcGVnXCI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJlc3BvbnNlLnNldENvbnRlbnRUeXBlKGNvbnRlbnRUeXBlKTtcblxuICAgICAgICAgICAgLy8gQ29weSB0aGUgZmlsZSB0byB0aGUgcmVzcG9uc2Ugb3V0cHV0IHN0cmVhbVxuICAgICAgICAgICAgdHJ5IChGaWxlSW5wdXRTdHJlYW0gaW4gPSBuZXcgRmlsZUlucHV0U3RyZWFtKGltYWdlRmlsZSk7XG4gICAgICAgICAgICAgICAgIE91dHB1dFN0cmVhbSBvdXQgPSByZXNwb25zZS5nZXRPdXRwdXRTdHJlYW0oKSkge1xuXG4gICAgICAgICAgICAgICAgYnl0ZVtdIGJ1ZmZlciA9IG5ldyBieXRlWzQwOTZdO1xuICAgICAgICAgICAgICAgIGludCBieXRlc1JlYWQ7XG5cbiAgICAgICAgICAgICAgICB3aGlsZSAoKGJ5dGVzUmVhZCA9IGluLnJlYWQoYnVmZmVyKSkgIT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0LndyaXRlKGJ1ZmZlciwgMCwgYnl0ZXNSZWFkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSBjYXRjaCAoTnVtYmVyRm9ybWF0RXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRFcnJvcihIdHRwU2VydmxldFJlc3BvbnNlLlNDX0JBRF9SRVFVRVNULCBcIkludmFsaWQgY2F0ZWdvcnkgSURcIik7XG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICByZXNwb25zZS5zZW5kRXJyb3IoSHR0cFNlcnZsZXRSZXNwb25zZS5TQ19JTlRFUk5BTF9TRVJWRVJfRVJST1IsIFwiRXJyb3Igc2VydmluZyBpbWFnZTogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgIH1cbiAgICB9XG4uLi5cblxuICAgICAgICAgICAgU3RyaW5nIGZpbGVFeHRlbnNpb24gPSBmaWxlTmFtZS5zdWJzdHJpbmcoZmlsZU5hbWUubGFzdEluZGV4T2YoXCIuXCIpKTtcbiAgICAgICAgICAgIFN0cmluZyBuZXdGaWxlTmFtZSA9IFwiY2F0ZWdvcnlfXCIgKyBjYXRlZ29yeUlkICsgZmlsZUV4dGVuc2lvbjtcblxuICAgICAgICAgICAgLy8gU2F2ZSB0aGUgZmlsZSB0byBhIHBlcm1hbmVudCBsb2NhdGlvblxuICAgICAgICAgICAgU3RyaW5nIHJlbGF0aXZlUGF0aCA9IFwiaW1hZ2VzL2NhdGVnb3JpZXNcIjtcblxuICAgICAgICAgICAgLy8gR2V0IHRoZSByZWFsIHBhdGggdG8gdGhlIHdlYiBhcHBsaWNhdGlvbiByb290IGRpcmVjdG9yeVxuICAgICAgICAgICAgU3RyaW5nIHdlYmFwcFJvb3QgPSByZXF1ZXN0LmdldFNlcnZsZXRDb250ZXh0KCkuZ2V0UmVhbFBhdGgoXCIvXCIpO1xuXG4gICAgICAgICAgICAvLyBDcmVhdGUgdGhlIGRlcGxveW1lbnQgZGlyZWN0b3J5IHBhdGhcbiAgICAgICAgICAgIFN0cmluZyBkZXBsb3ltZW50UGF0aCA9IHdlYmFwcFJvb3QgKyByZWxhdGl2ZVBhdGg7XG5cbiAgICAgICAgICAgIC8vIEVuc3VyZSBkZXBsb3ltZW50IGRpcmVjdG9yeSBleGlzdHNcbiAgICAgICAgICAgIEZpbGUgZGVwbG95bWVudERpciA9IG5ldyBGaWxlKGRlcGxveW1lbnRQYXRoKTtcbiAgICAgICAgICAgIGlmICghZGVwbG95bWVudERpci5leGlzdHMoKSkge1xuICAgICAgICAgICAgICAgIGJvb2xlYW4gY3JlYXRlZCA9IGRlcGxveW1lbnREaXIubWtkaXJzKCk7XG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQ2F0ZWdvcnlJbWFnZVNlcnZsZXQgLSBDcmVhdGVkIGRlcGxveW1lbnQgZGlyZWN0b3J5OiBcIiArIGNyZWF0ZWQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBHZXQgdGhlIHBlcm1hbmVudCBwYXRoIChwZXJzaXN0cyBhY3Jvc3Mgc2VydmVyIHJlc3RhcnRzKVxuICAgICAgICAgICAgU3RyaW5nIHBlcm1hbmVudFBhdGggPSBnZXRQZXJtYW5lbnRQYXRoKHdlYmFwcFJvb3QsIHJlbGF0aXZlUGF0aCk7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJDYXRlZ29yeUltYWdlU2VydmxldCAtIFBlcm1hbmVudCBwYXRoOiBcIiArIHBlcm1hbmVudFBhdGgpO1xuXG4gICAgICAgICAgICAvLyBDcmVhdGUgdGhlIHBlcm1hbmVudCBkaXJlY3RvcnkgaWYgaXQgZG9lc24ndCBleGlzdFxuICAgICAgICAgICAgYm9vbGVhbiBkaXJDcmVhdGVkID0gZW5zdXJlRGlyZWN0b3J5RXhpc3RzKHBlcm1hbmVudFBhdGgpO1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQ2F0ZWdvcnlJbWFnZVNlcnZsZXQgLSBDcmVhdGVkIHBlcm1hbmVudCBkaXJlY3Rvcnk6IFwiICsgZGlyQ3JlYXRlZCk7XG5cbiAgICAgICAgICAgIC8vIFdyaXRlIHRoZSBmaWxlIHRvIGRlcGxveW1lbnQgcGF0aFxuICAgICAgICAgICAgU3RyaW5nIGRlcGxveW1lbnRGaWxlUGF0aCA9IGRlcGxveW1lbnRQYXRoICsgXCIvXCIgKyBuZXdGaWxlTmFtZTtcbiAgICAgICAgICAgIGZpbGVQYXJ0LndyaXRlKGRlcGxveW1lbnRGaWxlUGF0aCk7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJDYXRlZ29yeUltYWdlU2VydmxldCAtIEltYWdlIHNhdmVkIHRvIGRlcGxveW1lbnQgcGF0aDogXCIgKyBkZXBsb3ltZW50RmlsZVBhdGgpO1xuLi4uXG5cbiAgICAgICAgICAgIC8vIFVwZGF0ZSBjYXRlZ29yeSBpbWFnZSBVUkwgaW4gZGF0YWJhc2VcbiAgICAgICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IGNhdGVnb3J5REFPLnVwZGF0ZUNhdGVnb3J5SW1hZ2UoY2F0ZWdvcnlJZCwgaW1hZ2VVcmwpO1xuXG4gICAgICAgICAgICBpZiAoc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9hZG1pbi9jYXRlZ29yaWVzLmpzcD9zdWNjZXNzPXRydWUmbWVzc2FnZT1DYXRlZ29yeStpbWFnZSt1cGRhdGVkK3N1Y2Nlc3NmdWxseVwiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL2FkbWluL2NhdGVnb3JpZXMuanNwP2Vycm9yPXRydWUmbWVzc2FnZT1GYWlsZWQrdG8rdXBkYXRlK2NhdGVnb3J5K2ltYWdlXCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0gY2F0Y2ggKE51bWJlckZvcm1hdEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvYWRtaW4vY2F0ZWdvcmllcy5qc3A/ZXJyb3I9dHJ1ZSZtZXNzYWdlPUludmFsaWQrY2F0ZWdvcnkrSURcIik7XG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvYWRtaW4vY2F0ZWdvcmllcy5qc3A/ZXJyb3I9dHJ1ZSZtZXNzYWdlPUVycm9yK3VwbG9hZGluZytpbWFnZTorXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgIH1cbiAgICB9XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvY29udHJvbGxlci9JbWFnZURvd25sb2FkU2VydmxldC5qYXZhXG4uLi5cblxuLyoqXG4gKiBTZXJ2bGV0IGltcGxlbWVudGF0aW9uIGNsYXNzIEltYWdlRG93bmxvYWRTZXJ2bGV0XG4gKiBEb3dubG9hZHMgcHJvZHVjdCBpbWFnZXMgZnJvbSBVUkxzIGFuZCBzYXZlcyB0aGVtIHRvIHRoZSBhcHByb3ByaWF0ZSBkaXJlY3Rvcmllc1xuICovXG4vLyBTZXJ2bGV0IG1hcHBpbmcgZGVmaW5lZCBpbiB3ZWIueG1sXG5wdWJsaWMgY2xhc3MgSW1hZ2VEb3dubG9hZFNlcnZsZXQgZXh0ZW5kcyBIdHRwU2VydmxldCB7XG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgbG9uZyBzZXJpYWxWZXJzaW9uVUlEID0gMUw7XG5cbiAgICAvLyBJbWFnZSBVUkxzIGZvciBkaWZmZXJlbnQgY2F0ZWdvcmllc1xuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIE1hcDxTdHJpbmcsIExpc3Q8U3RyaW5nPj4gSU1BR0VfVVJMUyA9IG5ldyBIYXNoTWFwPD4oKTtcblxuICAgIHN0YXRpYyB7XG4gICAgICAgIC8vIE1lbidzIGNhdGVnb3J5IGltYWdlc1xuICAgICAgICBMaXN0PFN0cmluZz4gbWVuSW1hZ2VzID0gbmV3IEFycmF5TGlzdDw+KCk7XG4gICAgICAgIG1lbkltYWdlcy5hZGQoXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTYxNzEzNzk2ODQyNy04NTkyNGM4MDBhMjI/cT04MCZ3PTE5NzQmYXV0bz1mb3JtYXQmZml0PWNyb3BcIik7XG4gICAgICAgIG1lbkltYWdlcy5hZGQoXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTU3NjU2NjU4ODAyOC00MTQ3ZjM4NDJmMjc/cT04MCZ3PTE5NjQmYXV0bz1mb3JtYXQmZml0PWNyb3BcIik7XG4gICAgICAgIG1lbkltYWdlcy5hZGQoXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTYwMDI2OTQ1MjEyMS00ZjI0MTZlNTVjMjg/cT04MCZ3PTE5NjUmYXV0bz1mb3JtYXQmZml0PWNyb3BcIik7XG4gICAgICAgIG1lbkltYWdlcy5hZGQoXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTYxMTMxMjQ0OTQwOC1mY2VjZTI3Y2RiYjc/cT04MCZ3PTE5NjkmYXV0bz1mb3JtYXQmZml0PWNyb3BcIik7XG4gICAgICAgIG1lbkltYWdlcy5hZGQoXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTU5MzAzMDc2MTc1Ny03MWZhZTQ1ZmEwZTc/cT04MCZ3PTE5NzQmYXV0bz1mb3JtYXQmZml0PWNyb3BcIik7XG4gICAgICAgIElNQUdFX1VSTFMucHV0KFwibWVuXCIsIG1lbkltYWdlcyk7XG4uLi5cblxuICAgIC8qKlxuICAgICAqIEBzZWUgSHR0cFNlcnZsZXQjSHR0cFNlcnZsZXQoKVxuICAgICAqL1xuICAgIHB1YmxpYyBJbWFnZURvd25sb2FkU2VydmxldCgpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAc2VlIEh0dHBTZXJ2bGV0I2RvR2V0KEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBIdHRwU2VydmxldFJlc3BvbnNlIHJlc3BvbnNlKVxuICAgICAqL1xuICAgIHByb3RlY3RlZCB2b2lkIGRvR2V0KEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBIdHRwU2VydmxldFJlc3BvbnNlIHJlc3BvbnNlKSB0aHJvd3MgU2VydmxldEV4Y2VwdGlvbiwgSU9FeGNlcHRpb24ge1xuICAgICAgICBIdHRwU2Vzc2lvbiBzZXNzaW9uID0gcmVxdWVzdC5nZXRTZXNzaW9uKCk7XG4gICAgICAgIFVzZXIgdXNlciA9IChVc2VyKSBzZXNzaW9uLmdldEF0dHJpYnV0ZShcInVzZXJcIik7XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgdXNlciBpcyBsb2dnZWQgaW4gYW5kIGlzIGFkbWluXG4gICAgICAgIGlmICh1c2VyID09IG51bGwgfHwgIXVzZXIuaXNBZG1pbigpKSB7XG4gICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QoXCJMb2dpblNlcnZsZXRcIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBTdHJpbmcgYWN0aW9uID0gcmVxdWVzdC5nZXRQYXJhbWV0ZXIoXCJhY3Rpb25cIik7XG5cbiAgICAgICAgaWYgKGFjdGlvbiA9PSBudWxsKSB7XG4gICAgICAgICAgICAvLyBTaG93IGRvd25sb2FkIHBhZ2VcbiAgICAgICAgICAgIHJlcXVlc3QuZ2V0UmVxdWVzdERpc3BhdGNoZXIoXCIvYWRtaW4vZG93bmxvYWQtaW1hZ2VzLmpzcFwiKS5mb3J3YXJkKHJlcXVlc3QsIHJlc3BvbnNlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcImRvd25sb2FkXCIuZXF1YWxzKGFjdGlvbikpIHtcbiAgICAgICAgICAgIC8vIERvd25sb2FkIGltYWdlc1xuICAgICAgICAgICAgU3RyaW5nIGNhdGVnb3J5ID0gcmVxdWVzdC5nZXRQYXJhbWV0ZXIoXCJjYXRlZ29yeVwiKTtcblxuICAgICAgICAgICAgaWYgKGNhdGVnb3J5ID09IG51bGwgfHwgY2F0ZWdvcnkuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgLy8gRG93bmxvYWQgYWxsIGNhdGVnb3JpZXNcbiAgICAgICAgICAgICAgICBmb3IgKFN0cmluZyBjYXQgOiBJTUFHRV9VUkxTLmtleVNldCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGRvd25sb2FkSW1hZ2VzKGNhdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNlc3Npb24uc2V0QXR0cmlidXRlKFwic3VjY2Vzc01lc3NhZ2VcIiwgXCJBbGwgaW1hZ2VzIGRvd25sb2FkZWQgc3VjY2Vzc2Z1bGx5XCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBEb3dubG9hZCBzcGVjaWZpYyBjYXRlZ29yeVxuICAgICAgICAgICAgICAgIGlmIChJTUFHRV9VUkxTLmNvbnRhaW5zS2V5KGNhdGVnb3J5KSkge1xuICAgICAgICAgICAgICAgICAgICBkb3dubG9hZEltYWdlcyhjYXRlZ29yeSk7XG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb24uc2V0QXR0cmlidXRlKFwic3VjY2Vzc01lc3NhZ2VcIiwgY2F0ZWdvcnkgKyBcIiBpbWFnZXMgZG93bmxvYWRlZCBzdWNjZXNzZnVsbHlcIik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbi5zZXRBdHRyaWJ1dGUoXCJlcnJvck1lc3NhZ2VcIiwgXCJJbnZhbGlkIGNhdGVnb3J5OiBcIiArIGNhdGVnb3J5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChcIkltYWdlRG93bmxvYWRTZXJ2bGV0XCIpO1xuICAgICAgICB9XG4gICAgfVxuLi4uXG5cbiAgICAvKipcbiAgICAgKiBEb3dubG9hZCBpbWFnZXMgZm9yIGEgc3BlY2lmaWMgY2F0ZWdvcnlcbiAgICAgKiBAcGFyYW0gY2F0ZWdvcnkgQ2F0ZWdvcnkgdG8gZG93bmxvYWQgaW1hZ2VzIGZvclxuICAgICAqL1xuICAgIHByaXZhdGUgdm9pZCBkb3dubG9hZEltYWdlcyhTdHJpbmcgY2F0ZWdvcnkpIHtcbiAgICAgICAgTGlzdDxTdHJpbmc+IHVybHMgPSBJTUFHRV9VUkxTLmdldChjYXRlZ29yeSk7XG5cbiAgICAgICAgaWYgKHVybHMgPT0gbnVsbCB8fCB1cmxzLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgU3RyaW5nIGJhc2VQYXRoID0gZ2V0U2VydmxldENvbnRleHQoKS5nZXRSZWFsUGF0aChcIi9pbWFnZXMvcHJvZHVjdHMvXCIgKyBjYXRlZ29yeSk7XG4gICAgICAgIEZpbGUgYmFzZURpciA9IG5ldyBGaWxlKGJhc2VQYXRoKTtcblxuICAgICAgICBpZiAoIWJhc2VEaXIuZXhpc3RzKCkpIHtcbiAgICAgICAgICAgIGJhc2VEaXIubWtkaXJzKCk7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHVybHMuc2l6ZSgpOyBpKyspIHtcbiAgICAgICAgICAgIFN0cmluZyB1cmwgPSB1cmxzLmdldChpKTtcbiAgICAgICAgICAgIFN0cmluZyBmaWxlTmFtZSA9IGNhdGVnb3J5ICsgKGkgKyAxKSArIFwiLmpwZ1wiO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGRvd25sb2FkSW1hZ2UodXJsLCBuZXcgRmlsZShiYXNlRGlyLCBmaWxlTmFtZSkpO1xuICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkRvd25sb2FkZWQ6IFwiICsgZmlsZU5hbWUpO1xuICAgICAgICAgICAgfSBjYXRjaCAoSU9FeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgICAgIFN5c3RlbS5lcnIucHJpbnRsbihcIkVycm9yIGRvd25sb2FkaW5nIFwiICsgZmlsZU5hbWUgKyBcIjogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4uLi5cblBhdGg6IENsb3RoZWUvc3JjL21haW4vamF2YS9jb250cm9sbGVyL0ltYWdlRG93bmxvYWRTZXJ2bGV0LmphdmFcbi4uLlxuXG4vKipcbiAqIFNlcnZsZXQgaW1wbGVtZW50YXRpb24gY2xhc3MgSW1hZ2VEb3dubG9hZFNlcnZsZXRcbiAqIERvd25sb2FkcyBwcm9kdWN0IGltYWdlcyBmcm9tIFVSTHMgYW5kIHNhdmVzIHRoZW0gdG8gdGhlIGFwcHJvcHJpYXRlIGRpcmVjdG9yaWVzXG4gKi9cbi8vIFNlcnZsZXQgbWFwcGluZyBkZWZpbmVkIGluIHdlYi54bWxcbnB1YmxpYyBjbGFzcyBJbWFnZURvd25sb2FkU2VydmxldCBleHRlbmRzIEh0dHBTZXJ2bGV0IHtcbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBsb25nIHNlcmlhbFZlcnNpb25VSUQgPSAxTDtcblxuICAgIC8vIEltYWdlIFVSTHMgZm9yIGRpZmZlcmVudCBjYXRlZ29yaWVzXG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgTWFwPFN0cmluZywgTGlzdDxTdHJpbmc+PiBJTUFHRV9VUkxTID0gbmV3IEhhc2hNYXA8PigpO1xuLi4uXG5cbiAgICAvKipcbiAgICAgKiBEb3dubG9hZCBpbWFnZXMgZm9yIGEgc3BlY2lmaWMgY2F0ZWdvcnlcbiAgICAgKiBAcGFyYW0gY2F0ZWdvcnkgQ2F0ZWdvcnkgdG8gZG93bmxvYWQgaW1hZ2VzIGZvclxuICAgICAqL1xuICAgIHByaXZhdGUgdm9pZCBkb3dubG9hZEltYWdlcyhTdHJpbmcgY2F0ZWdvcnkpIHtcbiAgICAgICAgTGlzdDxTdHJpbmc+IHVybHMgPSBJTUFHRV9VUkxTLmdldChjYXRlZ29yeSk7XG5cbiAgICAgICAgaWYgKHVybHMgPT0gbnVsbCB8fCB1cmxzLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgU3RyaW5nIGJhc2VQYXRoID0gZ2V0U2VydmxldENvbnRleHQoKS5nZXRSZWFsUGF0aChcIi9pbWFnZXMvcHJvZHVjdHMvXCIgKyBjYXRlZ29yeSk7XG4gICAgICAgIEZpbGUgYmFzZURpciA9IG5ldyBGaWxlKGJhc2VQYXRoKTtcblxuICAgICAgICBpZiAoIWJhc2VEaXIuZXhpc3RzKCkpIHtcbiAgICAgICAgICAgIGJhc2VEaXIubWtkaXJzKCk7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHVybHMuc2l6ZSgpOyBpKyspIHtcbiAgICAgICAgICAgIFN0cmluZyB1cmwgPSB1cmxzLmdldChpKTtcbiAgICAgICAgICAgIFN0cmluZyBmaWxlTmFtZSA9IGNhdGVnb3J5ICsgKGkgKyAxKSArIFwiLmpwZ1wiO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGRvd25sb2FkSW1hZ2UodXJsLCBuZXcgRmlsZShiYXNlRGlyLCBmaWxlTmFtZSkpO1xuICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkRvd25sb2FkZWQ6IFwiICsgZmlsZU5hbWUpO1xuICAgICAgICAgICAgfSBjYXRjaCAoSU9FeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgICAgIFN5c3RlbS5lcnIucHJpbnRsbihcIkVycm9yIGRvd25sb2FkaW5nIFwiICsgZmlsZU5hbWUgKyBcIjogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4uLi5cbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMUdoaE5MckVQNE5kTTdHZXBOM1NMajUifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJDOi9Vc2Vycy9VU0VSL011c2ljL2Nsb3RoZWUgZmluYWwvaHkvQ2xvdGhlZSIsImZvbGRlclJvb3QiOiJDOi9Vc2Vycy9VU0VSL011c2ljL2Nsb3RoZWUgZmluYWwvaHkvQ2xvdGhlZSJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMDhUMDk6NDA6MjIuMDIyWiIsInJlc3BvbnNlX3RleHQiOiJMZXQncyBjaGVjayB0aGUgUHJvZHVjdEltYWdlU2VydmljZSB0byB1bmRlcnN0YW5kIGhvdyBwcm9kdWN0IGltYWdlcyBhcmUgY3VycmVudGx5IGhhbmRsZWQ6XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiYmI1NjllMzYtNzE5MC00YTUwLTk1ZTUtZDNjYzQxMThjMjI1IiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxMlhESDFNRnJRajJWV3VBMVFKRjNLUCIsInRvb2xfbmFtZSI6InNhdmUtZmlsZSIsImlucHV0X2pzb24iOiJ7XCJmaWxlX3BhdGhcIjogXCJDbG90aGVlL3NyYy9tYWluL2phdmEvY29udHJvbGxlci9Qcm9kdWN0SW1hZ2VTZXJ2bGV0LmphdmFcIiwgXCJmaWxlX2NvbnRlbnRcIjogXCJwYWNrYWdlIGNvbnRyb2xsZXI7XFxuXFxuaW1wb3J0IGphdmEuaW8uRmlsZTtcXG5pbXBvcnQgamF2YS5pby5GaWxlSW5wdXRTdHJlYW07XFxuaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247XFxuaW1wb3J0IGphdmEuaW8uT3V0cHV0U3RyZWFtO1xcblxcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuU2VydmxldEV4Y2VwdGlvbjtcXG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXQ7XFxuaW1wb3J0IGpha2FydGEuc2VydmxldC5odHRwLkh0dHBTZXJ2bGV0UmVxdWVzdDtcXG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXRSZXNwb25zZTtcXG5cXG5pbXBvcnQgZGFvLlByb2R1Y3REQU87XFxuaW1wb3J0IG1vZGVsLlByb2R1Y3Q7XFxuXFxuLyoqXFxuICogU2VydmxldCBmb3Igc2VydmluZyBwcm9kdWN0IGltYWdlcyBmcm9tIHBlcm1hbmVudCBzdG9yYWdlXFxuICovXFxucHVibGljIGNsYXNzIFByb2R1Y3RJbWFnZVNlcnZsZXQgZXh0ZW5kcyBIdHRwU2VydmxldCB7XFxuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIGxvbmcgc2VyaWFsVmVyc2lvblVJRCA9IDFMO1xcbiAgICBwcml2YXRlIGZpbmFsIFByb2R1Y3REQU8gcHJvZHVjdERBTztcXG5cXG4gICAgcHVibGljIFByb2R1Y3RJbWFnZVNlcnZsZXQoKSB7XFxuICAgICAgICBzdXBlcigpO1xcbiAgICAgICAgcHJvZHVjdERBTyA9IG5ldyBQcm9kdWN0REFPKCk7XFxuICAgIH1cXG5cXG4gICAgcHJvdGVjdGVkIHZvaWQgZG9HZXQoSHR0cFNlcnZsZXRSZXF1ZXN0IHJlcXVlc3QsIEh0dHBTZXJ2bGV0UmVzcG9uc2UgcmVzcG9uc2UpXFxuICAgICAgICAgICAgdGhyb3dzIFNlcnZsZXRFeGNlcHRpb24sIElPRXhjZXB0aW9uIHtcXG4gICAgICAgIC8vIEdldCBwcm9kdWN0IElEIGZyb20gcmVxdWVzdFxcbiAgICAgICAgU3RyaW5nIHByb2R1Y3RJZFN0ciA9IHJlcXVlc3QuZ2V0UGFyYW1ldGVyKFxcXCJpZFxcXCIpO1xcbiAgICAgICAgXFxuICAgICAgICBpZiAocHJvZHVjdElkU3RyID09IG51bGwgfHwgcHJvZHVjdElkU3RyLmlzRW1wdHkoKSkge1xcbiAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRFcnJvcihIdHRwU2VydmxldFJlc3BvbnNlLlNDX0JBRF9SRVFVRVNULCBcXFwiUHJvZHVjdCBJRCBpcyByZXF1aXJlZFxcXCIpO1xcbiAgICAgICAgICAgIHJldHVybjtcXG4gICAgICAgIH1cXG4gICAgICAgIFxcbiAgICAgICAgdHJ5IHtcXG4gICAgICAgICAgICBpbnQgcHJvZHVjdElkID0gSW50ZWdlci5wYXJzZUludChwcm9kdWN0SWRTdHIpO1xcbiAgICAgICAgICAgIFxcbiAgICAgICAgICAgIC8vIEdldCBwcm9kdWN0IGZyb20gZGF0YWJhc2VcXG4gICAgICAgICAgICBQcm9kdWN0IHByb2R1Y3QgPSBwcm9kdWN0REFPLmdldFByb2R1Y3RCeUlkKHByb2R1Y3RJZCk7XFxuICAgICAgICAgICAgXFxuICAgICAgICAgICAgaWYgKHByb2R1Y3QgPT0gbnVsbCkge1xcbiAgICAgICAgICAgICAgICByZXNwb25zZS5zZW5kRXJyb3IoSHR0cFNlcnZsZXRSZXNwb25zZS5TQ19OT1RfRk9VTkQsIFxcXCJQcm9kdWN0IG5vdCBmb3VuZFxcXCIpO1xcbiAgICAgICAgICAgICAgICByZXR1cm47XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIFxcbiAgICAgICAgICAgIFN0cmluZyBpbWFnZVVybCA9IHByb2R1Y3QuZ2V0SW1hZ2VVcmwoKTtcXG4gICAgICAgICAgICBpZiAoaW1hZ2VVcmwgPT0gbnVsbCB8fCBpbWFnZVVybC5pc0VtcHR5KCkpIHtcXG4gICAgICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZEVycm9yKEh0dHBTZXJ2bGV0UmVzcG9uc2UuU0NfTk9UX0ZPVU5ELCBcXFwiUHJvZHVjdCBoYXMgbm8gaW1hZ2VcXFwiKTtcXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICAvLyBHZXQgdGhlIHBlcm1hbmVudCBwYXRoIHRvIHRoZSBpbWFnZVxcbiAgICAgICAgICAgIFN0cmluZyB1c2VySG9tZSA9IFN5c3RlbS5nZXRQcm9wZXJ0eShcXFwidXNlci5ob21lXFxcIik7XFxuICAgICAgICAgICAgU3RyaW5nIHBlcm1hbmVudFBhdGggPSB1c2VySG9tZSArIEZpbGUuc2VwYXJhdG9yICsgXFxcIkNsb3RoZWVJbWFnZXNcXFwiICsgRmlsZS5zZXBhcmF0b3IgKyBpbWFnZVVybDtcXG4gICAgICAgICAgICBGaWxlIGltYWdlRmlsZSA9IG5ldyBGaWxlKHBlcm1hbmVudFBhdGgpO1xcbiAgICAgICAgICAgIFxcbiAgICAgICAgICAgIGlmICghaW1hZ2VGaWxlLmV4aXN0cygpKSB7XFxuICAgICAgICAgICAgICAgIC8vIFRyeSB0aGUgd2ViYXBwIHBhdGggYXMgZmFsbGJhY2tcXG4gICAgICAgICAgICAgICAgU3RyaW5nIHdlYmFwcFBhdGggPSBnZXRTZXJ2bGV0Q29udGV4dCgpLmdldFJlYWxQYXRoKFxcXCIvXFxcIikgKyBpbWFnZVVybDtcXG4gICAgICAgICAgICAgICAgaW1hZ2VGaWxlID0gbmV3IEZpbGUod2ViYXBwUGF0aCk7XFxuICAgICAgICAgICAgICAgIFxcbiAgICAgICAgICAgICAgICBpZiAoIWltYWdlRmlsZS5leGlzdHMoKSkge1xcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZEVycm9yKEh0dHBTZXJ2bGV0UmVzcG9uc2UuU0NfTk9UX0ZPVU5ELCBcXFwiSW1hZ2UgZmlsZSBub3QgZm91bmRcXFwiKTtcXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcXG4gICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICAvLyBTZXQgY29udGVudCB0eXBlIGJhc2VkIG9uIGZpbGUgZXh0ZW5zaW9uXFxuICAgICAgICAgICAgU3RyaW5nIGZpbGVOYW1lID0gaW1hZ2VGaWxlLmdldE5hbWUoKTtcXG4gICAgICAgICAgICBTdHJpbmcgY29udGVudFR5cGUgPSBcXFwiaW1hZ2UvanBlZ1xcXCI7IC8vIERlZmF1bHRcXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICBpZiAoZmlsZU5hbWUuZW5kc1dpdGgoXFxcIi5wbmdcXFwiKSkge1xcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZSA9IFxcXCJpbWFnZS9wbmdcXFwiO1xcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZmlsZU5hbWUuZW5kc1dpdGgoXFxcIi5naWZcXFwiKSkge1xcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZSA9IFxcXCJpbWFnZS9naWZcXFwiO1xcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZmlsZU5hbWUuZW5kc1dpdGgoXFxcIi5qcGdcXFwiKSB8fCBmaWxlTmFtZS5lbmRzV2l0aChcXFwiLmpwZWdcXFwiKSkge1xcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZSA9IFxcXCJpbWFnZS9qcGVnXFxcIjtcXG4gICAgICAgICAgICB9XFxuICAgICAgICAgICAgXFxuICAgICAgICAgICAgcmVzcG9uc2Uuc2V0Q29udGVudFR5cGUoY29udGVudFR5cGUpO1xcbiAgICAgICAgICAgIFxcbiAgICAgICAgICAgIC8vIENvcHkgdGhlIGZpbGUgdG8gdGhlIHJlc3BvbnNlIG91dHB1dCBzdHJlYW1cXG4gICAgICAgICAgICB0cnkgKEZpbGVJbnB1dFN0cmVhbSBpbiA9IG5ldyBGaWxlSW5wdXRTdHJlYW0oaW1hZ2VGaWxlKTtcXG4gICAgICAgICAgICAgICAgIE91dHB1dFN0cmVhbSBvdXQgPSByZXNwb25zZS5nZXRPdXRwdXRTdHJlYW0oKSkge1xcbiAgICAgICAgICAgICAgICBcXG4gICAgICAgICAgICAgICAgYnl0ZVtdIGJ1ZmZlciA9IG5ldyBieXRlWzQwOTZdO1xcbiAgICAgICAgICAgICAgICBpbnQgYnl0ZXNSZWFkO1xcbiAgICAgICAgICAgICAgICBcXG4gICAgICAgICAgICAgICAgd2hpbGUgKChieXRlc1JlYWQgPSBpbi5yZWFkKGJ1ZmZlcikpICE9IC0xKSB7XFxuICAgICAgICAgICAgICAgICAgICBvdXQud3JpdGUoYnVmZmVyLCAwLCBieXRlc1JlYWQpO1xcbiAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIFxcbiAgICAgICAgfSBjYXRjaCAoTnVtYmVyRm9ybWF0RXhjZXB0aW9uIGUpIHtcXG4gICAgICAgICAgICByZXNwb25zZS5zZW5kRXJyb3IoSHR0cFNlcnZsZXRSZXNwb25zZS5TQ19CQURfUkVRVUVTVCwgXFxcIkludmFsaWQgcHJvZHVjdCBJRFxcXCIpO1xcbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcXG4gICAgICAgICAgICByZXNwb25zZS5zZW5kRXJyb3IoSHR0cFNlcnZsZXRSZXNwb25zZS5TQ19JTlRFUk5BTF9TRVJWRVJfRVJST1IsIFxcXCJFcnJvciBzZXJ2aW5nIGltYWdlOiBcXFwiICsgZS5nZXRNZXNzYWdlKCkpO1xcbiAgICAgICAgfVxcbiAgICB9XFxufVwifSIsIm1jcF9zZXJ2ZXJfbmFtZSI6IiIsIm1jcF90b29sX25hbWUiOiIifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6Ik5vdywgbGV0J3MgY3JlYXRlIGEgUHJvZHVjdEltYWdlU2VydmxldCB0byBzZXJ2ZSBwcm9kdWN0IGltYWdlcyBmcm9tIHRoZSBwZXJtYW5lbnQgc3RvcmFnZSBsb2NhdGlvbjpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IHNyYy9tYWluL2phdmEvc2VydmljZS9Qcm9kdWN0SW1hZ2VTZXJ2aWNlLmphdmFcbnBhY2thZ2Ugc2VydmljZTtcblxuaW1wb3J0IGphdmEuaW8uRmlsZTtcbmltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uO1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5odHRwLlBhcnQ7XG5cbmltcG9ydCBkYW8uUHJvZHVjdERBTztcbmltcG9ydCBtb2RlbC5Qcm9kdWN0O1xuXG4vKipcbiAqIFNlcnZpY2UgY2xhc3MgZm9yIGhhbmRsaW5nIHByb2R1Y3QgaW1hZ2Ugb3BlcmF0aW9uc1xuICovXG5wdWJsaWMgY2xhc3MgUHJvZHVjdEltYWdlU2VydmljZSB7XG4gICAgcHJpdmF0ZSBQcm9kdWN0REFPIHByb2R1Y3REQU87XG4gICAgcHJpdmF0ZSBQcm9kdWN0U2VydmljZSBwcm9kdWN0U2VydmljZTtcblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdG9yXG4gICAgICovXG4gICAgcHVibGljIFByb2R1Y3RJbWFnZVNlcnZpY2UoKSB7XG4gICAgICAgIHRoaXMucHJvZHVjdERBTyA9IG5ldyBQcm9kdWN0REFPKCk7XG4gICAgICAgIHRoaXMucHJvZHVjdFNlcnZpY2UgPSBuZXcgUHJvZHVjdFNlcnZpY2UoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGxvYWQgYSBwcm9kdWN0IGltYWdlXG4gICAgICogQHBhcmFtIHByb2R1Y3RJZCBQcm9kdWN0IElEXG4gICAgICogQHBhcmFtIGZpbGVQYXJ0IEZpbGUgcGFydCBmcm9tIG11bHRpcGFydCByZXF1ZXN0XG4gICAgICogQHBhcmFtIHVwbG9hZFBhdGggQmFzZSB1cGxvYWQgcGF0aFxuICAgICAqIEByZXR1cm4gSW1hZ2UgVVJMIGlmIHN1Y2Nlc3NmdWwsIG51bGwgb3RoZXJ3aXNlXG4gICAgICogQHRocm93cyBJT0V4Y2VwdGlvbiBJZiBhbiBJL08gZXJyb3Igb2NjdXJzXG4gICAgICovXG4gICAgcHVibGljIFN0cmluZyB1cGxvYWRQcm9kdWN0SW1hZ2UoaW50IHByb2R1Y3RJZCwgUGFydCBmaWxlUGFydCwgU3RyaW5nIHVwbG9hZFBhdGgpIHRocm93cyBJT0V4Y2VwdGlvbiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBHZXQgcHJvZHVjdCBmcm9tIGRhdGFiYXNlXG4gICAgICAgICAgICBQcm9kdWN0IHByb2R1Y3QgPSBwcm9kdWN0U2VydmljZS5nZXRQcm9kdWN0QnlJZChwcm9kdWN0SWQpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAocHJvZHVjdCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFByb2Nlc3MgdGhlIHVwbG9hZGVkIGZpbGVcbiAgICAgICAgICAgIFN0cmluZyBmaWxlTmFtZSA9IGdldFN1Ym1pdHRlZEZpbGVOYW1lKGZpbGVQYXJ0KTtcbiAgICAgICAgICAgIGlmIChmaWxlTmFtZSA9PSBudWxsIHx8IGZpbGVOYW1lLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBTdHJpbmcgZmlsZUV4dGVuc2lvbiA9IGZpbGVOYW1lLnN1YnN0cmluZyhmaWxlTmFtZS5sYXN0SW5kZXhPZihcIi5cIikpO1xuICAgICAgICAgICAgU3RyaW5nIG5ld0ZpbGVOYW1lID0gXCJwcm9kdWN0X1wiICsgcHJvZHVjdElkICsgZmlsZUV4dGVuc2lvbjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQ3JlYXRlIGRpcmVjdG9yeSBzdHJ1Y3R1cmUgYmFzZWQgb24gcHJvZHVjdCBjYXRlZ29yeVxuICAgICAgICAgICAgU3RyaW5nIGNhdGVnb3J5UGF0aCA9IHByb2R1Y3QuZ2V0Q2F0ZWdvcnkoKS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoXCIgXCIsIFwiX1wiKTtcbiAgICAgICAgICAgIFN0cmluZyB0eXBlUGF0aCA9IHByb2R1Y3QuZ2V0VHlwZSgpICE9IG51bGwgPyBwcm9kdWN0LmdldFR5cGUoKS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoXCIgXCIsIFwiX1wiKSA6IFwiZ2VuZXJhbFwiO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDcmVhdGUgdGhlIGZ1bGwgcGF0aFxuICAgICAgICAgICAgU3RyaW5nIHJlbGF0aXZlUGF0aCA9IFwiaW1hZ2VzL3Byb2R1Y3RzL1wiICsgY2F0ZWdvcnlQYXRoICsgXCIvXCIgKyB0eXBlUGF0aDtcbiAgICAgICAgICAgIFN0cmluZyBmdWxsVXBsb2FkUGF0aCA9IHVwbG9hZFBhdGggKyByZWxhdGl2ZVBhdGggKyBcIi9cIjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQ3JlYXRlIGRpcmVjdG9yaWVzIGlmIHRoZXkgZG9uJ3QgZXhpc3RcbiAgICAgICAgICAgIEZpbGUgdXBsb2FkRGlyID0gbmV3IEZpbGUoZnVsbFVwbG9hZFBhdGgpO1xuICAgICAgICAgICAgaWYgKCF1cGxvYWREaXIuZXhpc3RzKCkpIHtcbiAgICAgICAgICAgICAgICB1cGxvYWREaXIubWtkaXJzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFdyaXRlIHRoZSBmaWxlXG4gICAgICAgICAgICBmaWxlUGFydC53cml0ZShmdWxsVXBsb2FkUGF0aCArIG5ld0ZpbGVOYW1lKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gUmV0dXJuIHRoZSByZWxhdGl2ZSBwYXRoIHRvIHRoZSBpbWFnZVxuICAgICAgICAgICAgcmV0dXJuIHJlbGF0aXZlUGF0aCArIFwiL1wiICsgbmV3RmlsZU5hbWU7XG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJFcnJvciBpbiB1cGxvYWRQcm9kdWN0SW1hZ2U6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBwcm9kdWN0IGltYWdlIFVSTCBpbiBkYXRhYmFzZVxuICAgICAqIEBwYXJhbSBwcm9kdWN0SWQgUHJvZHVjdCBJRFxuICAgICAqIEBwYXJhbSBpbWFnZVVybCBJbWFnZSBVUkxcbiAgICAgKiBAcmV0dXJuIHRydWUgaWYgc3VjY2Vzc2Z1bCwgZmFsc2Ugb3RoZXJ3aXNlXG4gICAgICovXG4gICAgcHVibGljIGJvb2xlYW4gdXBkYXRlUHJvZHVjdEltYWdlVXJsKGludCBwcm9kdWN0SWQsIFN0cmluZyBpbWFnZVVybCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIHByb2R1Y3REQU8udXBkYXRlUHJvZHVjdEltYWdlKHByb2R1Y3RJZCwgaW1hZ2VVcmwpO1xuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRXJyb3IgaW4gdXBkYXRlUHJvZHVjdEltYWdlVXJsOiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogSGVscGVyIG1ldGhvZCB0byBnZXQgdGhlIHN1Ym1pdHRlZCBmaWxlIG5hbWUgZnJvbSBhIFBhcnRcbiAgICAgKi9cbiAgICBwcml2YXRlIFN0cmluZyBnZXRTdWJtaXR0ZWRGaWxlTmFtZShQYXJ0IHBhcnQpIHtcbiAgICAgICAgZm9yIChTdHJpbmcgY29udGVudCA6IHBhcnQuZ2V0SGVhZGVyKFwiY29udGVudC1kaXNwb3NpdGlvblwiKS5zcGxpdChcIjtcIikpIHtcbiAgICAgICAgICAgIGlmIChjb250ZW50LnRyaW0oKS5zdGFydHNXaXRoKFwiZmlsZW5hbWVcIikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29udGVudC5zdWJzdHJpbmcoY29udGVudC5pbmRleE9mKCc9JykgKyAxKS50cmltKCkucmVwbGFjZShcIlxcXCJcIiwgXCJcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuLi4uXG5QYXRoOiBDbG90aGVlL3NyYy9tYWluL2phdmEvc2VydmljZS9Qcm9kdWN0SW1hZ2VTZXJ2aWNlLmphdmFcbi4uLlxuXG4gICAgLyoqXG4gICAgICogVXBsb2FkIGEgcHJvZHVjdCBpbWFnZVxuICAgICAqIEBwYXJhbSBwcm9kdWN0SWQgUHJvZHVjdCBJRFxuICAgICAqIEBwYXJhbSBmaWxlUGFydCBGaWxlIHBhcnQgZnJvbSBtdWx0aXBhcnQgcmVxdWVzdFxuICAgICAqIEBwYXJhbSB1cGxvYWRQYXRoIEJhc2UgdXBsb2FkIHBhdGhcbiAgICAgKiBAcmV0dXJuIEltYWdlIFVSTCBpZiBzdWNjZXNzZnVsLCBudWxsIG90aGVyd2lzZVxuICAgICAqIEB0aHJvd3MgSU9FeGNlcHRpb24gSWYgYW4gSS9PIGVycm9yIG9jY3Vyc1xuICAgICAqL1xuICAgIHB1YmxpYyBTdHJpbmcgdXBsb2FkUHJvZHVjdEltYWdlKGludCBwcm9kdWN0SWQsIGpha2FydGEuc2VydmxldC5odHRwLlBhcnQgZmlsZVBhcnQsIFN0cmluZyB1cGxvYWRQYXRoKSB0aHJvd3MgSU9FeGNlcHRpb24ge1xuICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJcXG5cXG5cXG5Qcm9kdWN0SW1hZ2VTZXJ2aWNlIC0gdXBsb2FkUHJvZHVjdEltYWdlIGNhbGxlZCBmb3IgcHJvZHVjdCBJRDogXCIgKyBwcm9kdWN0SWQgKyBcIlxcblxcblxcblwiKTtcbiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiUHJvZHVjdEltYWdlU2VydmljZSAtIEZpbGUgcGFydCBuYW1lOiBcIiArIGZpbGVQYXJ0LmdldE5hbWUoKSk7XG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlByb2R1Y3RJbWFnZVNlcnZpY2UgLSBGaWxlIHBhcnQgc2l6ZTogXCIgKyBmaWxlUGFydC5nZXRTaXplKCkpO1xuICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJQcm9kdWN0SW1hZ2VTZXJ2aWNlIC0gVXBsb2FkIHBhdGg6IFwiICsgdXBsb2FkUGF0aCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBHZXQgcHJvZHVjdCBmcm9tIGRhdGFiYXNlXG4uLi5cblxuICAgICAgICAgICAgU3RyaW5nIGZpbGVFeHRlbnNpb24gPSBmaWxlTmFtZS5zdWJzdHJpbmcoZmlsZU5hbWUubGFzdEluZGV4T2YoXCIuXCIpKTtcbiAgICAgICAgICAgIFN0cmluZyBuZXdGaWxlTmFtZSA9IFwicHJvZHVjdF9cIiArIHByb2R1Y3RJZCArIGZpbGVFeHRlbnNpb247XG5cbiAgICAgICAgICAgIC8vIENyZWF0ZSBhIHNpbXBsZXIgZGlyZWN0b3J5IHN0cnVjdHVyZVxuICAgICAgICAgICAgU3RyaW5nIHJlbGF0aXZlUGF0aCA9IFwiaW1hZ2VzL3Byb2R1Y3RzXCI7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJQcm9kdWN0SW1hZ2VTZXJ2aWNlIC0gUmVsYXRpdmUgcGF0aDogXCIgKyByZWxhdGl2ZVBhdGgpO1xuXG4gICAgICAgICAgICAvLyBFbnN1cmUgdGhlIGRpcmVjdG9yeSBleGlzdHNcbiAgICAgICAgICAgIFN0cmluZyBmdWxsUGF0aCA9IHVwbG9hZFBhdGggKyBGaWxlLnNlcGFyYXRvciArIHJlbGF0aXZlUGF0aDtcbiAgICAgICAgICAgIEZpbGUgZGlyID0gbmV3IEZpbGUoZnVsbFBhdGgpO1xuICAgICAgICAgICAgaWYgKCFkaXIuZXhpc3RzKCkpIHtcbiAgICAgICAgICAgICAgICBib29sZWFuIGNyZWF0ZWQgPSBkaXIubWtkaXJzKCk7XG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiUHJvZHVjdEltYWdlU2VydmljZSAtIENyZWF0ZWQgZGlyZWN0b3J5OiBcIiArIGNyZWF0ZWQgKyBcIiBhdCBcIiArIGZ1bGxQYXRoKTtcbiAgICAgICAgICAgIH1cbi4uLlxuXG4gICAgICAgICAgICAvLyBHZXQgdGhlIHBlcm1hbmVudCBwYXRoIChwZXJzaXN0cyBhY3Jvc3Mgc2VydmVyIHJlc3RhcnRzKVxuICAgICAgICAgICAgU3RyaW5nIHBlcm1hbmVudFBhdGggPSBnZXRQZXJtYW5lbnRQYXRoKHVwbG9hZFBhdGgsIHJlbGF0aXZlUGF0aCk7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJQcm9kdWN0SW1hZ2VTZXJ2aWNlIC0gUGVybWFuZW50IHBhdGg6IFwiICsgcGVybWFuZW50UGF0aCk7XG5cbiAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgcGVybWFuZW50IGRpcmVjdG9yeSBpZiBpdCBkb2Vzbid0IGV4aXN0XG4gICAgICAgICAgICBib29sZWFuIGRpckNyZWF0ZWQgPSBlbnN1cmVEaXJlY3RvcnlFeGlzdHMocGVybWFuZW50UGF0aCk7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJQcm9kdWN0SW1hZ2VTZXJ2aWNlIC0gQ3JlYXRlZCBwZXJtYW5lbnQgZGlyZWN0b3J5OiBcIiArIGRpckNyZWF0ZWQpO1xuXG4gICAgICAgICAgICAvLyBDcmVhdGUgYSBzaW1wbGVyIGZpbGUgcGF0aFxuICAgICAgICAgICAgU3RyaW5nIGRlcGxveW1lbnRGaWxlUGF0aCA9IGRlcGxveW1lbnRQYXRoICsgXCIvXCIgKyBuZXdGaWxlTmFtZTtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlByb2R1Y3RJbWFnZVNlcnZpY2UgLSBEZXBsb3ltZW50IGZpbGUgcGF0aDogXCIgKyBkZXBsb3ltZW50RmlsZVBhdGgpO1xuXG4gICAgICAgICAgICAvLyBEaXJlY3RvcnkgZXhpc3RlbmNlIHdhcyBhbHJlYWR5IGNoZWNrZWQgYWJvdmUsIG5vIG5lZWQgdG8gY2hlY2sgYWdhaW5cbi4uLlxuXG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJQcm9kdWN0SW1hZ2VTZXJ2aWNlIC0gRGVwbG95bWVudCBmaWxlIGV4aXN0czogXCIgKyBkZXBsb3ltZW50RmlsZS5leGlzdHMoKSk7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJQcm9kdWN0SW1hZ2VTZXJ2aWNlIC0gRGVwbG95bWVudCBmaWxlIHNpemU6IFwiICsgZGVwbG95bWVudEZpbGUubGVuZ3RoKCkgKyBcIiBieXRlc1wiKTtcblxuICAgICAgICAgICAgLy8gUmV0dXJuIHRoZSByZWxhdGl2ZSBwYXRoIHRvIHRoZSBpbWFnZVxuICAgICAgICAgICAgLy8gQWx3YXlzIHVzZSBmb3J3YXJkIHNsYXNoZXMgZm9yIFVSTHMsIHJlZ2FyZGxlc3Mgb2YgdGhlIG9wZXJhdGluZyBzeXN0ZW1cbiAgICAgICAgICAgIFN0cmluZyBpbWFnZVVybCA9IHJlbGF0aXZlUGF0aC5yZXBsYWNlKFwiXFxcXFwiLCBcIi9cIikgKyBcIi9cIiArIG5ld0ZpbGVOYW1lO1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiUHJvZHVjdEltYWdlU2VydmljZSAtIEZpbmFsIGltYWdlIFVSTDogXCIgKyBpbWFnZVVybCk7XG5cbiAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgcHJvZHVjdCB3aXRoIHRoZSBuZXcgaW1hZ2UgVVJMIGltbWVkaWF0ZWx5XG4gICAgICAgICAgICBib29sZWFuIHVwZGF0ZWQgPSB1cGRhdGVQcm9kdWN0SW1hZ2VVcmwocHJvZHVjdElkLCBpbWFnZVVybCk7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJQcm9kdWN0SW1hZ2VTZXJ2aWNlIC0gUHJvZHVjdCB1cGRhdGVkIHdpdGggbmV3IGltYWdlIFVSTDogXCIgKyB1cGRhdGVkKTtcblxuICAgICAgICAgICAgcmV0dXJuIGltYWdlVXJsO1xuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRXJyb3IgaW4gdXBsb2FkUHJvZHVjdEltYWdlOiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBwcm9kdWN0IGltYWdlIFVSTCBpbiBkYXRhYmFzZVxuICAgICAqIEBwYXJhbSBwcm9kdWN0SWQgUHJvZHVjdCBJRFxuICAgICAqIEBwYXJhbSBpbWFnZVVybCBJbWFnZSBVUkxcbiAgICAgKiBAcmV0dXJuIHRydWUgaWYgc3VjY2Vzc2Z1bCwgZmFsc2Ugb3RoZXJ3aXNlXG4gICAgICovXG4gICAgcHVibGljIGJvb2xlYW4gdXBkYXRlUHJvZHVjdEltYWdlVXJsKGludCBwcm9kdWN0SWQsIFN0cmluZyBpbWFnZVVybCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIHByb2R1Y3REQU8udXBkYXRlUHJvZHVjdEltYWdlKHByb2R1Y3RJZCwgaW1hZ2VVcmwpO1xuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRXJyb3IgaW4gdXBkYXRlUHJvZHVjdEltYWdlVXJsOiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4uLi5cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgcGVybWFuZW50IHBhdGggZm9yIHN0b3JpbmcgaW1hZ2VzXG4gICAgICogQHBhcmFtIHdlYmFwcFJvb3QgVGhlIHdlYmFwcCByb290IHBhdGhcbiAgICAgKiBAcGFyYW0gcmVsYXRpdmVQYXRoIFRoZSByZWxhdGl2ZSBwYXRoIHdpdGhpbiB0aGUgd2ViYXBwXG4gICAgICogQHJldHVybiBUaGUgcGVybWFuZW50IHBhdGhcbiAgICAgKi9cbiAgICBwcml2YXRlIFN0cmluZyBnZXRQZXJtYW5lbnRQYXRoKFN0cmluZyB3ZWJhcHBSb290LCBTdHJpbmcgcmVsYXRpdmVQYXRoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBVc2UgYSBmaXhlZCwgYWJzb2x1dGUgcGF0aCB0aGF0IHdpbGwgZGVmaW5pdGVseSBwZXJzaXN0XG4gICAgICAgICAgICAvLyBUaGlzIHBhdGggc2hvdWxkIGJlIG91dHNpZGUgdGhlIGRlcGxveW1lbnQgZGlyZWN0b3J5IGJ1dCBhY2Nlc3NpYmxlIGJ5IHRoZSB3ZWIgc2VydmVyXG4gICAgICAgICAgICAvLyBGaXJzdCB0cnkgdGhlIHVzZXIncyBob21lIGRpcmVjdG9yeVxuICAgICAgICAgICAgU3RyaW5nIHVzZXJIb21lID0gU3lzdGVtLmdldFByb3BlcnR5KFwidXNlci5ob21lXCIpO1xuICAgICAgICAgICAgU3RyaW5nIGZpeGVkUGF0aCA9IHVzZXJIb21lICsgRmlsZS5zZXBhcmF0b3IgKyBcIkNsb3RoZWVJbWFnZXNcIiArIEZpbGUuc2VwYXJhdG9yICsgcmVsYXRpdmVQYXRoO1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiUHJvZHVjdEltYWdlU2VydmljZSAtIFVzaW5nIGZpeGVkIHBhdGggaW4gdXNlciBob21lOiBcIiArIGZpeGVkUGF0aCk7XG4gICAgICAgICAgICBGaWxlIGZpeGVkRGlyID0gbmV3IEZpbGUoZml4ZWRQYXRoKTtcblxuICAgICAgICAgICAgLy8gRW5zdXJlIHRoZSBmaXhlZCBkaXJlY3RvcnkgZXhpc3RzXG4gICAgICAgICAgICBpZiAoIWZpeGVkRGlyLmV4aXN0cygpKSB7XG4gICAgICAgICAgICAgICAgYm9vbGVhbiBjcmVhdGVkID0gZml4ZWREaXIubWtkaXJzKCk7XG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiUHJvZHVjdEltYWdlU2VydmljZSAtIENyZWF0ZWQgZml4ZWQgZGlyZWN0b3J5OiBcIiArIGNyZWF0ZWQgKyBcIiBhdCBcIiArIGZpeGVkUGF0aCk7XG4gICAgICAgICAgICAgICAgaWYgKCFjcmVhdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHdlIGNhbid0IGNyZWF0ZSB0aGUgZGlyZWN0b3J5LCB0cnkgdXNpbmcgSmF2YSBOSU8gd2hpY2ggaGFzIGJldHRlciBlcnJvciBoYW5kbGluZ1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgamF2YS5uaW8uZmlsZS5QYXRoIHBhdGggPSBqYXZhLm5pby5maWxlLlBhdGhzLmdldChmaXhlZFBhdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgamF2YS5uaW8uZmlsZS5GaWxlcy5jcmVhdGVEaXJlY3RvcmllcyhwYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlByb2R1Y3RJbWFnZVNlcnZpY2UgLSBDcmVhdGVkIGRpcmVjdG9yeSB1c2luZyBOSU8gYXQgXCIgKyBmaXhlZFBhdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpeGVkUGF0aDtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJQcm9kdWN0SW1hZ2VTZXJ2aWNlIC0gRXJyb3IgY3JlYXRpbmcgZGlyZWN0b3J5IHVzaW5nIE5JTzogXCIgKyBleC5nZXRNZXNzYWdlKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29udGludWUgdG8gZmFsbGJhY2sgb3B0aW9uc1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpeGVkUGF0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBmaXhlZFBhdGg7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIElmIHRoZSBmaXhlZCBwYXRoIGRvZXNuJ3Qgd29yaywgdHJ5IHRvIHVzZSB0aGUgd2ViYXBwIGRpcmVjdG9yeVxuICAgICAgICAgICAgLy8gVGhpcyBpcyBsZXNzIHJlbGlhYmxlIGJ1dCBtaWdodCB3b3JrIGFzIGEgZmFsbGJhY2tcbiAgICAgICAgICAgIFN0cmluZyB3ZWJhcHBQYXRoID0gd2ViYXBwUm9vdCArIHJlbGF0aXZlUGF0aDtcbiAgICAgICAgICAgIEZpbGUgd2ViYXBwRGlyID0gbmV3IEZpbGUod2ViYXBwUGF0aCk7XG4gICAgICAgICAgICBpZiAoIXdlYmFwcERpci5leGlzdHMoKSkge1xuICAgICAgICAgICAgICAgIGJvb2xlYW4gY3JlYXRlZCA9IHdlYmFwcERpci5ta2RpcnMoKTtcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJQcm9kdWN0SW1hZ2VTZXJ2aWNlIC0gQ3JlYXRlZCB3ZWJhcHAgZGlyZWN0b3J5OiBcIiArIGNyZWF0ZWQgKyBcIiBhdCBcIiArIHdlYmFwcFBhdGgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gd2ViYXBwUGF0aDtcbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlByb2R1Y3RJbWFnZVNlcnZpY2UgLSBFcnJvciBnZXR0aW5nIHBlcm1hbmVudCBwYXRoOiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICByZXR1cm4gd2ViYXBwUm9vdCArIHJlbGF0aXZlUGF0aDtcbiAgICAgICAgfVxuICAgIH1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9kYW8vUHJvZHVjdERBTy5qYXZhXG4uLi5cblxuICAgIC8qKlxuICAgICAqIEFkZCBhIG5ldyBwcm9kdWN0IHRvIHRoZSBkYXRhYmFzZVxuICAgICAqIEBwYXJhbSBwcm9kdWN0IFByb2R1Y3Qgb2JqZWN0IHRvIGFkZFxuICAgICAqIEByZXR1cm4gdHJ1ZSBpZiBzdWNjZXNzZnVsLCBmYWxzZSBvdGhlcndpc2VcbiAgICAgKi9cbiAgICBwdWJsaWMgYm9vbGVhbiBhZGRQcm9kdWN0KFByb2R1Y3QgcHJvZHVjdCkge1xuICAgICAgICBTdHJpbmcgcXVlcnkgPSBcIklOU0VSVCBJTlRPIHByb2R1Y3RzIChuYW1lLCBkZXNjcmlwdGlvbiwgcHJpY2UsIHN0b2NrLCBjYXRlZ29yeSwgdHlwZSwgaW1hZ2VfdXJsLCBmZWF0dXJlZCkgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICBcIlZBTFVFUyAoPywgPywgPywgPywgPywgPywgPywgPylcIjtcblxuICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJQcm9kdWN0REFPIC0gQWRkaW5nIHByb2R1Y3Q6IFwiICsgcHJvZHVjdC5nZXROYW1lKCkpO1xuICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJQcm9kdWN0REFPIC0gRmVhdHVyZWQgZmxhZzogXCIgKyBwcm9kdWN0LmlzRmVhdHVyZWQoKSk7XG5cbiAgICAgICAgdHJ5IChDb25uZWN0aW9uIGNvbm4gPSBEQkNvbm5lY3Rpb24uZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQocXVlcnksIFN0YXRlbWVudC5SRVRVUk5fR0VORVJBVEVEX0tFWVMpKSB7XG4uLi5cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBhbiBleGlzdGluZyBwcm9kdWN0XG4gICAgICogQHBhcmFtIHByb2R1Y3QgUHJvZHVjdCBvYmplY3QgdG8gdXBkYXRlXG4gICAgICogQHJldHVybiB0cnVlIGlmIHN1Y2Nlc3NmdWwsIGZhbHNlIG90aGVyd2lzZVxuICAgICAqL1xuICAgIHB1YmxpYyBib29sZWFuIHVwZGF0ZVByb2R1Y3QoUHJvZHVjdCBwcm9kdWN0KSB7XG4gICAgICAgIFN0cmluZyBxdWVyeSA9IFwiVVBEQVRFIHByb2R1Y3RzIFNFVCBuYW1lID0gPywgZGVzY3JpcHRpb24gPSA/LCBwcmljZSA9ID8sIHN0b2NrID0gPywgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICBcImNhdGVnb3J5ID0gPywgdHlwZSA9ID8sIGltYWdlX3VybCA9ID8sIGZlYXR1cmVkID0gPywgdXBkYXRlZF9hdCA9IENVUlJFTlRfVElNRVNUQU1QIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgXCJXSEVSRSBpZCA9ID9cIjtcblxuICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJQcm9kdWN0REFPIC0gVXBkYXRpbmcgcHJvZHVjdDogXCIgKyBwcm9kdWN0LmdldE5hbWUoKSArIFwiIChJRDogXCIgKyBwcm9kdWN0LmdldElkKCkgKyBcIilcIik7XG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlByb2R1Y3REQU8gLSBGZWF0dXJlZCBmbGFnOiBcIiArIHByb2R1Y3QuaXNGZWF0dXJlZCgpKTtcblxuICAgICAgICB0cnkgKENvbm5lY3Rpb24gY29ubiA9IERCQ29ubmVjdGlvbi5nZXRDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChxdWVyeSkpIHtcblxuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgcHJvZHVjdC5nZXROYW1lKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMiwgcHJvZHVjdC5nZXREZXNjcmlwdGlvbigpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0RG91YmxlKDMsIHByb2R1Y3QuZ2V0UHJpY2UoKSk7XG4gICAgICAgICAgICBzdG10LnNldEludCg0LCBwcm9kdWN0LmdldFN0b2NrKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoNSwgcHJvZHVjdC5nZXRDYXRlZ29yeSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDYsIHByb2R1Y3QuZ2V0VHlwZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDcsIHByb2R1Y3QuZ2V0SW1hZ2VVcmwoKSk7XG4gICAgICAgICAgICBzdG10LnNldEJvb2xlYW4oOCwgcHJvZHVjdC5pc0ZlYXR1cmVkKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRJbnQoOSwgcHJvZHVjdC5nZXRJZCgpKTtcblxuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiUHJvZHVjdERBTyAtIEV4ZWN1dGluZyB1cGRhdGUgcXVlcnkgZm9yIHByb2R1Y3QgSUQ6IFwiICsgcHJvZHVjdC5nZXRJZCgpICsgXCIgd2l0aCBmZWF0dXJlZCA9IFwiICsgcHJvZHVjdC5pc0ZlYXR1cmVkKCkpO1xuICAgICAgICAgICAgaW50IHJvd3NBZmZlY3RlZCA9IHN0bXQuZXhlY3V0ZVVwZGF0ZSgpO1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiUHJvZHVjdERBTyAtIFVwZGF0ZSBhZmZlY3RlZCBcIiArIHJvd3NBZmZlY3RlZCArIFwiIHJvd3NcIik7XG5cbiAgICAgICAgICAgIC8vIFZlcmlmeSB0aGUgdXBkYXRlIGJ5IHJldHJpZXZpbmcgdGhlIHByb2R1Y3QgYWdhaW5cbiAgICAgICAgICAgIGlmIChyb3dzQWZmZWN0ZWQgPiAwKSB7XG4gICAgICAgICAgICAgICAgUHJvZHVjdCB1cGRhdGVkUHJvZHVjdCA9IGdldFByb2R1Y3RCeUlkKHByb2R1Y3QuZ2V0SWQoKSk7XG4gICAgICAgICAgICAgICAgaWYgKHVwZGF0ZWRQcm9kdWN0ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiUHJvZHVjdERBTyAtIFZlcmlmaWVkIHVwZGF0ZTogUHJvZHVjdCBJRCBcIiArIHVwZGF0ZWRQcm9kdWN0LmdldElkKCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiIGZlYXR1cmVkIGZsYWcgaXMgbm93IFwiICsgdXBkYXRlZFByb2R1Y3QuaXNGZWF0dXJlZCgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiByb3dzQWZmZWN0ZWQgPiAwO1xuXG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJQcm9kdWN0REFPIC0gRXJyb3IgdXBkYXRpbmcgcHJvZHVjdDogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gVGhpcyBtZXRob2QgaGFzIGJlZW4gbW92ZWQgdG8gdGhlIGVuZCBvZiB0aGUgZmlsZVxuLi4uXG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgcHJvZHVjdCBpbWFnZSBVUkxcbiAgICAgKiBAcGFyYW0gcHJvZHVjdElkIFByb2R1Y3QgSURcbiAgICAgKiBAcGFyYW0gaW1hZ2VVcmwgTmV3IGltYWdlIFVSTFxuICAgICAqIEByZXR1cm4gdHJ1ZSBpZiBzdWNjZXNzZnVsLCBmYWxzZSBvdGhlcndpc2VcbiAgICAgKi9cbiAgICBwdWJsaWMgYm9vbGVhbiB1cGRhdGVQcm9kdWN0SW1hZ2UoaW50IHByb2R1Y3RJZCwgU3RyaW5nIGltYWdlVXJsKSB7XG4gICAgICAgIFN0cmluZyBxdWVyeSA9IFwiVVBEQVRFIHByb2R1Y3RzIFNFVCBpbWFnZV91cmwgPSA/LCB1cGRhdGVkX2F0ID0gQ1VSUkVOVF9USU1FU1RBTVAgV0hFUkUgaWQgPSA/XCI7XG5cbiAgICAgICAgdHJ5IChDb25uZWN0aW9uIGNvbm4gPSBEQkNvbm5lY3Rpb24uZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQocXVlcnkpKSB7XG5cbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIGltYWdlVXJsKTtcbiAgICAgICAgICAgIHN0bXQuc2V0SW50KDIsIHByb2R1Y3RJZCk7XG5cbiAgICAgICAgICAgIGludCByb3dzQWZmZWN0ZWQgPSBzdG10LmV4ZWN1dGVVcGRhdGUoKTtcbiAgICAgICAgICAgIHJldHVybiByb3dzQWZmZWN0ZWQgPiAwO1xuXG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTG9hZCBhZGRpdGlvbmFsIGltYWdlcyBmb3IgYSBwcm9kdWN0XG4gICAgICogQHBhcmFtIHByb2R1Y3QgUHJvZHVjdCB0byBsb2FkIGltYWdlcyBmb3JcbiAgICAgKi9cbiAgICBwcml2YXRlIHZvaWQgbG9hZFByb2R1Y3RJbWFnZXMoUHJvZHVjdCBwcm9kdWN0KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBJbiB0aGlzIGltcGxlbWVudGF0aW9uLCB3ZSBkb24ndCBoYXZlIGEgc2VwYXJhdGUgcHJvZHVjdF9pbWFnZXMgdGFibGVcbiAgICAgICAgICAgIC8vIFRoZSBtYWluIGltYWdlIGlzIHN0b3JlZCBpbiB0aGUgcHJvZHVjdHMgdGFibGUncyBpbWFnZV91cmwgY29sdW1uXG4gICAgICAgICAgICAvLyBGb3Igbm93LCB3ZSdsbCBqdXN0IHVzZSB0aGUgbWFpbiBpbWFnZSBhcyB0aGUgb25seSBpbWFnZVxuICAgICAgICAgICAgLy8gVGhpcyBtZXRob2QgY2FuIGJlIGV4cGFuZGVkIGxhdGVyIGlmIHlvdSBhZGQgYSBwcm9kdWN0X2ltYWdlcyB0YWJsZVxuXG4gICAgICAgICAgICAvLyBBZGQgdGhlIG1haW4gaW1hZ2UgYXMgdGhlIG9ubHkgaW1hZ2UgaWYgaXQgZXhpc3RzXG4gICAgICAgICAgICBTdHJpbmcgaW1hZ2VVcmwgPSBwcm9kdWN0LmdldEltYWdlVXJsKCk7XG4gICAgICAgICAgICBpZiAoaW1hZ2VVcmwgIT0gbnVsbCAmJiAhaW1hZ2VVcmwuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgcHJvZHVjdC5hZGRBZGRpdGlvbmFsSW1hZ2UoaW1hZ2VVcmwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRXJyb3IgaW4gbG9hZFByb2R1Y3RJbWFnZXM6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIC8vIENvbnRpbnVlIHdpdGhvdXQgYWRkaXRpb25hbCBpbWFnZXNcbiAgICAgICAgfVxuICAgIH1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9tb2RlbC9Qcm9kdWN0LmphdmFcbnBhY2thZ2UgbW9kZWw7XG5cbmltcG9ydCBqYXZhLnNxbC5UaW1lc3RhbXA7XG5pbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDtcbmltcG9ydCBqYXZhLnV0aWwuTGlzdDtcblxuLyoqXG4gKiBQcm9kdWN0IG1vZGVsIGNsYXNzXG4gKi9cbnB1YmxpYyBjbGFzcyBQcm9kdWN0IHtcbiAgICBwcml2YXRlIGludCBpZDtcbiAgICBwcml2YXRlIFN0cmluZyBuYW1lO1xuICAgIHByaXZhdGUgU3RyaW5nIGRlc2NyaXB0aW9uO1xuICAgIHByaXZhdGUgZG91YmxlIHByaWNlO1xuICAgIHByaXZhdGUgaW50IHN0b2NrO1xuICAgIHByaXZhdGUgU3RyaW5nIGNhdGVnb3J5O1xuICAgIHByaXZhdGUgU3RyaW5nIHR5cGU7XG4gICAgcHJpdmF0ZSBTdHJpbmcgaW1hZ2VVcmw7XG4gICAgcHJpdmF0ZSBMaXN0PFN0cmluZz4gYWRkaXRpb25hbEltYWdlcztcblxuICAgIHByaXZhdGUgYm9vbGVhbiBmZWF0dXJlZDtcbiAgICBwcml2YXRlIFRpbWVzdGFtcCBjcmVhdGVkQXQ7XG4gICAgcHJpdmF0ZSBUaW1lc3RhbXAgdXBkYXRlZEF0O1xuXG4gICAgLy8gRGVmYXVsdCBjb25zdHJ1Y3RvclxuICAgIHB1YmxpYyBQcm9kdWN0KCkge1xuICAgICAgICB0aGlzLmFkZGl0aW9uYWxJbWFnZXMgPSBuZXcgQXJyYXlMaXN0PD4oKTtcbiAgICB9XG5cbiAgICAvLyBDb25zdHJ1Y3RvciB3aXRoIGZpZWxkc1xuICAgIHB1YmxpYyBQcm9kdWN0KGludCBpZCwgU3RyaW5nIG5hbWUsIFN0cmluZyBkZXNjcmlwdGlvbiwgZG91YmxlIHByaWNlLCBpbnQgc3RvY2ssIFN0cmluZyBjYXRlZ29yeSwgU3RyaW5nIHR5cGUsXG4gICAgICAgICAgICBTdHJpbmcgaW1hZ2VVcmwsIGJvb2xlYW4gZmVhdHVyZWQsIFRpbWVzdGFtcCBjcmVhdGVkQXQsIFRpbWVzdGFtcCB1cGRhdGVkQXQpIHtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgICAgIHRoaXMucHJpY2UgPSBwcmljZTtcbiAgICAgICAgdGhpcy5zdG9jayA9IHN0b2NrO1xuICAgICAgICB0aGlzLmNhdGVnb3J5ID0gY2F0ZWdvcnk7XG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgICAgIHRoaXMuaW1hZ2VVcmwgPSBpbWFnZVVybDtcbiAgICAgICAgdGhpcy5mZWF0dXJlZCA9IGZlYXR1cmVkO1xuICAgICAgICB0aGlzLmNyZWF0ZWRBdCA9IGNyZWF0ZWRBdDtcbiAgICAgICAgdGhpcy51cGRhdGVkQXQgPSB1cGRhdGVkQXQ7XG4gICAgICAgIHRoaXMuYWRkaXRpb25hbEltYWdlcyA9IG5ldyBBcnJheUxpc3Q8PigpO1xuICAgIH1cblxuICAgIC8vIEdldHRlcnMgYW5kIFNldHRlcnNcbiAgICBwdWJsaWMgaW50IGdldElkKCkge1xuICAgICAgICByZXR1cm4gaWQ7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0SWQoaW50IGlkKSB7XG4gICAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgU3RyaW5nIGdldE5hbWUoKSB7XG4gICAgICAgIHJldHVybiBuYW1lO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldE5hbWUoU3RyaW5nIG5hbWUpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgU3RyaW5nIGdldERlc2NyaXB0aW9uKCkge1xuICAgICAgICByZXR1cm4gZGVzY3JpcHRpb247XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0RGVzY3JpcHRpb24oU3RyaW5nIGRlc2NyaXB0aW9uKSB7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICB9XG5cbiAgICBwdWJsaWMgZG91YmxlIGdldFByaWNlKCkge1xuICAgICAgICByZXR1cm4gcHJpY2U7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0UHJpY2UoZG91YmxlIHByaWNlKSB7XG4gICAgICAgIHRoaXMucHJpY2UgPSBwcmljZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgaW50IGdldFN0b2NrKCkge1xuICAgICAgICByZXR1cm4gc3RvY2s7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0U3RvY2soaW50IHN0b2NrKSB7XG4gICAgICAgIHRoaXMuc3RvY2sgPSBzdG9jaztcbiAgICB9XG5cbiAgICBwdWJsaWMgU3RyaW5nIGdldENhdGVnb3J5KCkge1xuICAgICAgICByZXR1cm4gY2F0ZWdvcnk7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0Q2F0ZWdvcnkoU3RyaW5nIGNhdGVnb3J5KSB7XG4gICAgICAgIHRoaXMuY2F0ZWdvcnkgPSBjYXRlZ29yeTtcbiAgICB9XG5cbiAgICBwdWJsaWMgU3RyaW5nIGdldFR5cGUoKSB7XG4gICAgICAgIHJldHVybiB0eXBlO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldFR5cGUoU3RyaW5nIHR5cGUpIHtcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgU3RyaW5nIGdldEltYWdlVXJsKCkge1xuICAgICAgICByZXR1cm4gaW1hZ2VVcmw7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0SW1hZ2VVcmwoU3RyaW5nIGltYWdlVXJsKSB7XG4gICAgICAgIHRoaXMuaW1hZ2VVcmwgPSBpbWFnZVVybDtcbiAgICB9XG5cblxuXG4gICAgcHVibGljIGJvb2xlYW4gaXNGZWF0dXJlZCgpIHtcbiAgICAgICAgcmV0dXJuIGZlYXR1cmVkO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldEZlYXR1cmVkKGJvb2xlYW4gZmVhdHVyZWQpIHtcbiAgICAgICAgdGhpcy5mZWF0dXJlZCA9IGZlYXR1cmVkO1xuICAgIH1cblxuICAgIHB1YmxpYyBUaW1lc3RhbXAgZ2V0Q3JlYXRlZEF0KCkge1xuICAgICAgICByZXR1cm4gY3JlYXRlZEF0O1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldENyZWF0ZWRBdChUaW1lc3RhbXAgY3JlYXRlZEF0KSB7XG4gICAgICAgIHRoaXMuY3JlYXRlZEF0ID0gY3JlYXRlZEF0O1xuICAgIH1cblxuICAgIHB1YmxpYyBUaW1lc3RhbXAgZ2V0VXBkYXRlZEF0KCkge1xuICAgICAgICByZXR1cm4gdXBkYXRlZEF0O1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldFVwZGF0ZWRBdChUaW1lc3RhbXAgdXBkYXRlZEF0KSB7XG4gICAgICAgIHRoaXMudXBkYXRlZEF0ID0gdXBkYXRlZEF0O1xuICAgIH1cblxuICAgIC8vIEhlbHBlciBtZXRob2RzXG5cbiAgICBwdWJsaWMgU3RyaW5nIGdldEZvcm1hdHRlZFByaWNlKCkge1xuICAgICAgICByZXR1cm4gU3RyaW5nLmZvcm1hdChcIiQlLjJmXCIsIHByaWNlKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgU3RyaW5nIGdldERlZmF1bHRJbWFnZSgpIHtcbiAgICAgICAgaWYgKGltYWdlVXJsICE9IG51bGwgJiYgIWltYWdlVXJsLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgcmV0dXJuIGltYWdlVXJsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGdldFBsYWNlaG9sZGVySW1hZ2UoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBTdHJpbmcgZ2V0UGxhY2Vob2xkZXJJbWFnZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiaW1hZ2VzL3Byb2R1Y3RzL3BsYWNlaG9sZGVyLmpwZ1wiO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCBhbiBhZGRpdGlvbmFsIGltYWdlIFVSTCB0byB0aGUgcHJvZHVjdFxuICAgICAqIEBwYXJhbSBpbWFnZVVybCBJbWFnZSBVUkwgdG8gYWRkXG4gICAgICovXG4gICAgcHVibGljIHZvaWQgYWRkQWRkaXRpb25hbEltYWdlKFN0cmluZyBpbWFnZVVybCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKHRoaXMuYWRkaXRpb25hbEltYWdlcyA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRpdGlvbmFsSW1hZ2VzID0gbmV3IEFycmF5TGlzdDw+KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaW1hZ2VVcmwgIT0gbnVsbCAmJiAhaW1hZ2VVcmwuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRpdGlvbmFsSW1hZ2VzLmFkZChpbWFnZVVybCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJFcnJvciBpbiBhZGRBZGRpdGlvbmFsSW1hZ2U6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIC8vIEluaXRpYWxpemUgdGhlIGxpc3QgaWYgdGhlcmUgd2FzIGFuIGVycm9yXG4gICAgICAgICAgICB0aGlzLmFkZGl0aW9uYWxJbWFnZXMgPSBuZXcgQXJyYXlMaXN0PD4oKTtcbiAgICAgICAgfVxuICAgIH1cbi4uLlxuXG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgU3RyaW5nIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gXCJQcm9kdWN0e1wiICtcbiAgICAgICAgICAgICAgICBcImlkPVwiICsgaWQgK1xuICAgICAgICAgICAgICAgIFwiLCBuYW1lPSdcIiArIG5hbWUgKyAnXFwnJyArXG4gICAgICAgICAgICAgICAgXCIsIGRlc2NyaXB0aW9uPSdcIiArIGRlc2NyaXB0aW9uICsgJ1xcJycgK1xuICAgICAgICAgICAgICAgIFwiLCBwcmljZT1cIiArIHByaWNlICtcbiAgICAgICAgICAgICAgICBcIiwgc3RvY2s9XCIgKyBzdG9jayArXG4gICAgICAgICAgICAgICAgXCIsIGNhdGVnb3J5PSdcIiArIGNhdGVnb3J5ICsgJ1xcJycgK1xuICAgICAgICAgICAgICAgIFwiLCB0eXBlPSdcIiArIHR5cGUgKyAnXFwnJyArXG4gICAgICAgICAgICAgICAgXCIsIGltYWdlVXJsPSdcIiArIGltYWdlVXJsICsgJ1xcJycgK1xuICAgICAgICAgICAgICAgIFwiLCBhZGRpdGlvbmFsSW1hZ2VzPVwiICsgYWRkaXRpb25hbEltYWdlcyArXG4gICAgICAgICAgICAgICAgXCIsIGZlYXR1cmVkPVwiICsgZmVhdHVyZWQgK1xuICAgICAgICAgICAgICAgIFwiLCBjcmVhdGVkQXQ9XCIgKyBjcmVhdGVkQXQgK1xuICAgICAgICAgICAgICAgIFwiLCB1cGRhdGVkQXQ9XCIgKyB1cGRhdGVkQXQgK1xuICAgICAgICAgICAgICAgICd9JztcbiAgICB9XG59XG4uLi5cbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMUtieEZ1Q3B2VnJib2pweXNzUk50WmoifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJDOi9Vc2Vycy9VU0VSL011c2ljL2Nsb3RoZWUgZmluYWwvaHkvQ2xvdGhlZSIsImZvbGRlclJvb3QiOiJDOi9Vc2Vycy9VU0VSL011c2ljL2Nsb3RoZWUgZmluYWwvaHkvQ2xvdGhlZSJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMDhUMDk6NDA6MzcuMDc4WiIsInJlc3BvbnNlX3RleHQiOiJOb3csIGxldCdzIGNyZWF0ZSBhIFByb2R1Y3RJbWFnZVNlcnZsZXQgdG8gc2VydmUgcHJvZHVjdCBpbWFnZXMgZnJvbSB0aGUgcGVybWFuZW50IHN0b3JhZ2UgbG9jYXRpb246XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiZmQ0ZGVmZTQtNzgyNS00OGJlLWE4MjUtNTg3NTUxMjkzYTc2IiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxM3RlS2s1Q0oyM1JyaEZYcm9Lam0xUiIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwic3RyX3JlcGxhY2VcIiwgXCJwYXRoXCI6IFwiQ2xvdGhlZS9zcmMvbWFpbi93ZWJhcHAvV0VCLUlORi93ZWIueG1sXCIsIFwic3RyX3JlcGxhY2VfZW50cmllc1wiOiBbe1wib2xkX3N0clwiOiBcIiAgICA8IS0tIFRlc3QgU2VydmxldCAtLT5cXG4gICAgPHNlcnZsZXQ+XFxuICAgICAgICA8c2VydmxldC1uYW1lPlRlc3RTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XFxuICAgICAgICA8c2VydmxldC1jbGFzcz5jb250cm9sbGVyLlRlc3RTZXJ2bGV0PC9zZXJ2bGV0LWNsYXNzPlxcbiAgICA8L3NlcnZsZXQ+XFxuICAgIDxzZXJ2bGV0LW1hcHBpbmc+XFxuICAgICAgICA8c2VydmxldC1uYW1lPlRlc3RTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XFxuICAgICAgICA8dXJsLXBhdHRlcm4+L1Rlc3RTZXJ2bGV0PC91cmwtcGF0dGVybj5cXG4gICAgPC9zZXJ2bGV0LW1hcHBpbmc+XCIsIFwibmV3X3N0clwiOiBcIiAgICA8IS0tIFRlc3QgU2VydmxldCAtLT5cXG4gICAgPHNlcnZsZXQ+XFxuICAgICAgICA8c2VydmxldC1uYW1lPlRlc3RTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XFxuICAgICAgICA8c2VydmxldC1jbGFzcz5jb250cm9sbGVyLlRlc3RTZXJ2bGV0PC9zZXJ2bGV0LWNsYXNzPlxcbiAgICA8L3NlcnZsZXQ+XFxuICAgIDxzZXJ2bGV0LW1hcHBpbmc+XFxuICAgICAgICA8c2VydmxldC1uYW1lPlRlc3RTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XFxuICAgICAgICA8dXJsLXBhdHRlcm4+L1Rlc3RTZXJ2bGV0PC91cmwtcGF0dGVybj5cXG4gICAgPC9zZXJ2bGV0LW1hcHBpbmc+XFxuXFxuICAgIDwhLS0gUHJvZHVjdCBJbWFnZSBTZXJ2bGV0IC0tPlxcbiAgICA8c2VydmxldD5cXG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+UHJvZHVjdEltYWdlU2VydmxldDwvc2VydmxldC1uYW1lPlxcbiAgICAgICAgPHNlcnZsZXQtY2xhc3M+Y29udHJvbGxlci5Qcm9kdWN0SW1hZ2VTZXJ2bGV0PC9zZXJ2bGV0LWNsYXNzPlxcbiAgICA8L3NlcnZsZXQ+XFxuICAgIDxzZXJ2bGV0LW1hcHBpbmc+XFxuICAgICAgICA8c2VydmxldC1uYW1lPlByb2R1Y3RJbWFnZVNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cXG4gICAgICAgIDx1cmwtcGF0dGVybj4vUHJvZHVjdEltYWdlU2VydmxldDwvdXJsLXBhdHRlcm4+XFxuICAgIDwvc2VydmxldC1tYXBwaW5nPlwiLCBcIm9sZF9zdHJfc3RhcnRfbGluZV9udW1iZXJcIjogMSwgXCJvbGRfc3RyX2VuZF9saW5lX251bWJlclwiOiAxMDAwfV19IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiTm93LCBsZXQncyB1cGRhdGUgdGhlIHdlYi54bWwgZmlsZSB0byBpbmNsdWRlIHRoZSBQcm9kdWN0SW1hZ2VTZXJ2bGV0OlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiRmlsZSBzYXZlZCBzdWNjZXNzZnVsbHkuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxMlhESDFNRnJRajJWV3VBMVFKRjNLUCJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkM6L1VzZXJzL1VTRVIvTXVzaWMvY2xvdGhlZSBmaW5hbC9oeS9DbG90aGVlIiwiZm9sZGVyUm9vdCI6IkM6L1VzZXJzL1VTRVIvTXVzaWMvY2xvdGhlZSBmaW5hbC9oeS9DbG90aGVlIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0wOFQwOTo0MDo1My45NDlaIiwicmVzcG9uc2VfdGV4dCI6Ik5vdywgbGV0J3MgdXBkYXRlIHRoZSB3ZWIueG1sIGZpbGUgdG8gaW5jbHVkZSB0aGUgUHJvZHVjdEltYWdlU2VydmxldDpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsicmVxdWVzdF9pZCI6IjA3MzFmYmM5LTAyNGQtNDkxYy05Y2I1LTE1NzQ3Yzg3ZTM3NCIsInN0YXR1cyI6ImNhbmNlbGxlZCIsImNoYXRJdGVtVHlwZSI6ImFnZW50aWMtdHVybi1kZWxpbWl0ZXIifSx7InN0YXR1cyI6InNlbnQiLCJyZXF1ZXN0X2lkIjoidGVtcC1mZS04NzZlNjA2Mi02N2ZiLTQ2YTgtODdkMy1lY2YyMjhmZWEyNDQiLCJyZXF1ZXN0X21lc3NhZ2UiOiJDT05USU5VRSIsInJpY2hfdGV4dF9qc29uX3JlcHIiOnsidHlwZSI6ImRvYyIsImNvbnRlbnQiOlt7InR5cGUiOiJwYXJhZ3JhcGgiLCJjb250ZW50IjpbeyJ0eXBlIjoidGV4dCIsInRleHQiOiJDT05USU5VRSJ9XX1dfSwibWVudGlvbmVkX2l0ZW1zIjpbXSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjowLCJ0ZXh0X25vZGUiOnsiY29udGVudCI6IkNPTlRJTlVFIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiQzovVXNlcnMvVVNFUi9NdXNpYy9jbG90aGVlIGZpbmFsL2h5L0Nsb3RoZWUiLCJmb2xkZXJSb290IjoiQzovVXNlcnMvVVNFUi9NdXNpYy9jbG90aGVlIGZpbmFsL2h5L0Nsb3RoZWUifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTA4VDA5OjQ0OjE3LjU2OFoifV0sImZlZWRiYWNrU3RhdGVzIjp7InRlbXAtZmUtYWE2NmY5ZjctMjUxYy00YzE1LTgxNjMtN2YwODI5Yjg4OGQ3Ijp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS1hNzIwMWUxNS0yMTFkLTQ2YjItYjc2OS02ODI1NDkxNDU0MmQiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTFkNmNkMzk3LTIyYTEtNGQ1Zi1hMGExLWEyMzQ1ZjM4ZDAzNCI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtYTAzYWJkNzctN2IyYi00Mjg1LThhYzktZDFkMWFmNmJiMGNmIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS1iNWYzOWU0Yi1hY2IyLTQ3ZDMtODdlYy1kZTE4ZjJhMjE3MjIiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLWYxZWU1M2M4LTc4NjEtNDM2NS05MTMxLTYzZDc3ZjFmY2RkOCI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtZGE4MjcyZDQtOGU3Ni00ODI3LTgyMjAtNzU2YjBmNTY3MGU2Ijp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS1lOTEyMTQyNS1kOWFmLTQ2MTYtOGJjMy0zY2EyOGI5M2UxOTUiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTljYjYzYjNlLTVhNTUtNDdmNi1iYWMyLWE2ZTc5ZjYzNzlhYyI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtMzk2ZDQwZjktZWUzYS00NjA4LWI5ODktNWViMzFjYjc4OWY2Ijp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS03YjNjODRiMC04NWIyLTQ1OTgtODkxZC0wZjFlZDk3MzBlOTgiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTMxN2NhMjQ4LTcxNTktNGFhMi04N2RkLTU4Mjc4ZjZhOTdhOSI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtYzg1ZDc0MzItZDJlMy00NDAzLTg4NDgtNGFmOWJiMDk5ZjY4Ijp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS01YTBjNGQ0Yi05N2NiLTRmMTgtYjg5ZS1lMzA2ZWE2ZDMzYTYiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLWYxZDYwMTlhLTNiYTUtNGU0OS04OTVhLTZmZDYxOGY2NGQ5MSI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtOGQ4NGVkMjctNWZlNi00OTgxLWJjMmEtMjFhNThjZmI2OGEyIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS1lZjA2NzY1MS0xYWYwLTQxNzUtOTA3Ni0yZGE1MzM4YWJkZWMiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTdlMzI2ZjQ1LTNhYjUtNGIzNC05OGVkLWRlMTY5Zjc3ZTY2OSI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtNDQ0ZmIwYmQtYWU4MC00NjAzLWFhYjQtYTA3ZmI1OTlkMjY0Ijp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS05Mjg5YWM0My00NDg2LTQyOWYtODc2NS0zZTJhNWJiMTcyMDEiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTQ2MGZkZjY3LWUxNjEtNDAxMy04NGQ2LWI0ZmY4M2ViMzU4ZiI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtN2QxNzBiYjEtMjg3ZC00NjU3LTlmYWQtYzlhYTYzMzFjZmY5Ijp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS0yOGNlMzQ4ZS1kN2FkLTQzYTAtODI1YS0zNmQxNDMyY2RiYjEiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTdkZTUyNjFhLTBiYTktNGVkZi04YzQyLWU3MjNjZGU2ZDNkNyI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtODc2ZTYwNjItNjdmYi00NmE4LTg3ZDMtZWNmMjI4ZmVhMjQ0Ijp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifX0sInRvb2xVc2VTdGF0ZXMiOnsiYzgyZWZjNjEtYzhlNy00MzYyLTg3YTEtNGQ2ZmRjN2FjZTVmO3Rvb2x1X3ZydHhfMDFFTmpIdWFjNjM5VWlodXMzYlJRYjFqIjp7InJlcXVlc3RJZCI6ImM4MmVmYzYxLWM4ZTctNDM2Mi04N2ExLTRkNmZkYzdhY2U1ZiIsInRvb2xVc2VJZCI6InRvb2x1X3ZydHhfMDFFTmpIdWFjNjM5VWlodXMzYlJRYjFqIiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiVGhlIGZvbGxvd2luZyBjb2RlIHNlY3Rpb25zIHdlcmUgcmV0cmlldmVkOlxuUGF0aDogQ2xvdGhlZS9zcmMvbWFpbi93ZWJhcHAvaW5kZXguanNwXG4uLi5cblxuICAgICAgICAgICAgLy8gRGlzcGxheSB1cCB0byA2IGNhdGVnb3JpZXNcbiAgICAgICAgICAgIGludCBtYXhDYXRlZ29yaWVzID0gTWF0aC5taW4oY2F0ZWdvcmllcy5zaXplKCksIDYpO1xuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBtYXhDYXRlZ29yaWVzOyBpKyspIHtcbiAgICAgICAgICAgICAgICBDYXRlZ29yeSBjYXRlZ29yeSA9IGNhdGVnb3JpZXMuZ2V0KGkpO1xuICAgICAgICAgICAgICAgIFN0cmluZyBpbWFnZVVybCA9IGNhdGVnb3J5LmdldEltYWdlVXJsKCk7XG4gICAgICAgICAgICAgICAgLy8gVXNlIGRlZmF1bHQgaW1hZ2UgaWYgbm8gaW1hZ2UgaXMgc2V0XG4gICAgICAgICAgICAgICAgaWYgKGltYWdlVXJsID09IG51bGwgfHwgaW1hZ2VVcmwuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIERlZmF1bHQgaW1hZ2VzIGJhc2VkIG9uIGNhdGVnb3J5IGluZGV4XG4gICAgICAgICAgICAgICAgICAgIFN0cmluZ1tdIGRlZmF1bHRJbWFnZXMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTgxMDQ0Nzc3NTUwLTRjZmE2MDcwN2MwMz9peGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0QmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz03NzImcT04MFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTYxNzEzNzk2ODQyNy04NTkyNGM4MDBhMjI/aXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9Nzc0JnE9ODBcIixcbi4uLlxuICAgICAgICAgICAgICAgICAgICBpbWFnZVVybCA9IGRlZmF1bHRJbWFnZXNbaSAlIGRlZmF1bHRJbWFnZXMubGVuZ3RoXTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBVc2UgdGhlIGltYWdlIGZyb20gdGhlIGRhdGFiYXNlXG4gICAgICAgICAgICAgICAgICAgIGltYWdlVXJsID0gcmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvXCIgKyBpbWFnZVVybDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAlPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhdGVnb3J5LWNhcmRcIj5cbiAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIjwlPSBpbWFnZVVybCAlPlwiIGFsdD1cIjwlPSBjYXRlZ29yeS5nZXROYW1lKCkgJT5cIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2F0ZWdvcnktY29udGVudFwiPlxuICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3M9XCJjYXRlZ29yeS10aXRsZVwiPjwlPSBjYXRlZ29yeS5nZXROYW1lKCkgJT48L2gzPlxuICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiUHJvZHVjdFNlcnZsZXQ/Y2F0ZWdvcnk9PCU9IGNhdGVnb3J5LmdldElkKCkgJT5cIiBjbGFzcz1cImNhdGVnb3J5LWxpbmtcIj5TaG9wIE5vdyA8aSBjbGFzcz1cImZhcyBmYS1hcnJvdy1yaWdodFwiPjwvaT48L2E+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwlIH0gJT5cblxuICAgICAgICAgICAgPCUgaWYgKGNhdGVnb3JpZXMuaXNFbXB0eSgpKSB7ICU+XG4gICAgICAgICAgICA8IS0tIERlZmF1bHQgY2F0ZWdvcmllcyBpZiBubyBjYXRlZ29yaWVzIGluIGRhdGFiYXNlIC0tPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhdGVnb3J5LWNhcmRcIj5cbiAgICAgICAgICAgICAgICA8aW1nIHNyYz1cImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTgxMDQ0Nzc3NTUwLTRjZmE2MDcwN2MwMz9peGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0QmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz03NzImcT04MFwiIGFsdD1cIldvbWVuJ3MgRmFzaGlvblwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXRlZ29yeS1jb250ZW50XCI+XG4gICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzcz1cImNhdGVnb3J5LXRpdGxlXCI+V29tZW4ncyBGYXNoaW9uPC9oMz5cbiAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIlByb2R1Y3RTZXJ2bGV0P2NhdGVnb3J5PXdvbWVuXCIgY2xhc3M9XCJjYXRlZ29yeS1saW5rXCI+U2hvcCBOb3cgPGkgY2xhc3M9XCJmYXMgZmEtYXJyb3ctcmlnaHRcIj48L2k+PC9hPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXRlZ29yeS1jYXJkXCI+XG4gICAgICAgICAgICAgICAgPGltZyBzcmM9XCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTYxNzEzNzk2ODQyNy04NTkyNGM4MDBhMjI/aXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9Nzc0JnE9ODBcIiBhbHQ9XCJNZW4ncyBGYXNoaW9uXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhdGVnb3J5LWNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPVwiY2F0ZWdvcnktdGl0bGVcIj5NZW4ncyBGYXNoaW9uPC9oMz5cbiAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIlByb2R1Y3RTZXJ2bGV0P2NhdGVnb3J5PW1lblwiIGNsYXNzPVwiY2F0ZWdvcnktbGlua1wiPlNob3AgTm93IDxpIGNsYXNzPVwiZmFzIGZhLWFycm93LXJpZ2h0XCI+PC9pPjwvYT5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2F0ZWdvcnktY2FyZFwiPlxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1ODQ5MTc4NjU0NDItZGU4OWRmNzZhZmQzP2l4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTg3MCZxPTgwXCIgYWx0PVwiQWNjZXNzb3JpZXNcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2F0ZWdvcnktY29udGVudFwiPlxuICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3M9XCJjYXRlZ29yeS10aXRsZVwiPkFjY2Vzc29yaWVzPC9oMz5cbiAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIlByb2R1Y3RTZXJ2bGV0P2NhdGVnb3J5PWFjY2Vzc29yaWVzXCIgY2xhc3M9XCJjYXRlZ29yeS1saW5rXCI+U2hvcCBOb3cgPGkgY2xhc3M9XCJmYXMgZmEtYXJyb3ctcmlnaHRcIj48L2k+PC9hPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8JSB9ICU+XG4gICAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuPC9zZWN0aW9uPlxuXG48IS0tIEZlYXR1cmVkIFByb2R1Y3RzIC0tPlxuPHNlY3Rpb24gY2xhc3M9XCJmZWF0dXJlZC1wcm9kdWN0c1wiPlxuICAgIDxkaXYgY2xhc3M9XCJjb250YWluZXJcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInNlY3Rpb24tdGl0bGVcIj5cbiAgICAgICAgICAgIDxoMj5GZWF0dXJlZCBQcm9kdWN0czwvaDI+XG4gICAgICAgIDwvZGl2PlxuLi4uXG5cbjwhLS0gQ29sbGVjdGlvbiBTaG93Y2FzZSAtLT5cdGBcbjxzZWN0aW9uIGNsYXNzPVwiY29sbGVjdGlvbi1zaG93Y2FzZVwiPlxuICAgIDxkaXYgY2xhc3M9XCJjb250YWluZXJcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInNlY3Rpb24tdGl0bGVcIj5cbiAgICAgICAgICAgIDxoMj5PdXIgQ29sbGVjdGlvbnM8L2gyPlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8ZGl2IGNsYXNzPVwiY29sbGVjdGlvbnMtZ3JpZFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbGxlY3Rpb24taXRlbSBsYXJnZVwiPlxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1MzkxMDkxMzY4ODEtM2JlMDYxNmFjZjRiP2l4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTc3NCZxPTgwXCIgYWx0PVwiUHJlbWl1bSBDb2xsZWN0aW9uXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbGxlY3Rpb24tY29udGVudFwiPlxuICAgICAgICAgICAgICAgICAgICA8aDM+UHJlbWl1bSBDb2xsZWN0aW9uPC9oMz5cbiAgICAgICAgICAgICAgICAgICAgPHA+THV4dXJ5IGZhYnJpY3MgYW5kIGV4Y2x1c2l2ZSBkZXNpZ25zPC9wPlxuICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiUHJvZHVjdFNlcnZsZXQ/Y2F0ZWdvcnk9cHJlbWl1bVwiIGNsYXNzPVwiYnRuIGJ0bi1zbVwiPkV4cGxvcmU8L2E+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbGxlY3Rpb24taXRlbVwiPlxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1NTEyMzI4NjQtM2YwODkwZTU4MGQ5P2l4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTc3NCZxPTgwXCIgYWx0PVwiQ2FzdWFsIENvbGxlY3Rpb25cIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sbGVjdGlvbi1jb250ZW50XCI+XG4gICAgICAgICAgICAgICAgICAgIDxoMz5DYXN1YWwgV2VhcjwvaDM+XG4gICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCJQcm9kdWN0U2VydmxldD9jYXRlZ29yeT1jYXN1YWxcIiBjbGFzcz1cImJ0biBidG4tc21cIj5FeHBsb3JlPC9hPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2xsZWN0aW9uLWl0ZW1cIj5cbiAgICAgICAgICAgICAgICA8aW1nIHNyYz1cImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTk1Nzc3NDU3NTgzLTk1ZTA1OWQ1ODFiOD9peGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0QmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz03ODMmcT04MFwiIGFsdD1cIkZvcm1hbCBDb2xsZWN0aW9uXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbGxlY3Rpb24tY29udGVudFwiPlxuICAgICAgICAgICAgICAgICAgICA8aDM+Rm9ybWFsIFdlYXI8L2gzPlxuICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiUHJvZHVjdFNlcnZsZXQ/Y2F0ZWdvcnk9Zm9ybWFsXCIgY2xhc3M9XCJidG4gYnRuLXNtXCI+RXhwbG9yZTwvYT5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbjwvc2VjdGlvbj5cbi4uLlxuUGF0aDogc3JjL21haW4vd2ViYXBwL2luZGV4LmpzcFxuLi4uXG4gICAgICAgICAgICAgICAgICAgIGltYWdlVXJsID0gZGVmYXVsdEltYWdlc1tpICUgZGVmYXVsdEltYWdlcy5sZW5ndGhdO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFVzZSB0aGUgaW1hZ2UgZnJvbSB0aGUgZGF0YWJhc2VcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VVcmwgPSByZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9cIiArIGltYWdlVXJsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICU+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2F0ZWdvcnktY2FyZFwiPlxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiPCU9IGltYWdlVXJsICU+XCIgYWx0PVwiPCU9IGNhdGVnb3J5LmdldE5hbWUoKSAlPlwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXRlZ29yeS1jb250ZW50XCI+XG4gICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzcz1cImNhdGVnb3J5LXRpdGxlXCI+PCU9IGNhdGVnb3J5LmdldE5hbWUoKSAlPjwvaDM+XG4gICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCJQcm9kdWN0U2VydmxldD9jYXRlZ29yeT08JT0gY2F0ZWdvcnkuZ2V0SWQoKSAlPlwiIGNsYXNzPVwiY2F0ZWdvcnktbGlua1wiPlNob3AgTm93IDxpIGNsYXNzPVwiZmFzIGZhLWFycm93LXJpZ2h0XCI+PC9pPjwvYT5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPCUgfSAlPlxuXG4gICAgICAgICAgICA8JSBpZiAoY2F0ZWdvcmllcy5pc0VtcHR5KCkpIHsgJT5cbiAgICAgICAgICAgIDwhLS0gRGVmYXVsdCBjYXRlZ29yaWVzIGlmIG5vIGNhdGVnb3JpZXMgaW4gZGF0YWJhc2UgLS0+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2F0ZWdvcnktY2FyZFwiPlxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1ODEwNDQ3Nzc1NTAtNGNmYTYwNzA3YzAzP2l4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTc3MiZxPTgwXCIgYWx0PVwiV29tZW4ncyBGYXNoaW9uXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhdGVnb3J5LWNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPVwiY2F0ZWdvcnktdGl0bGVcIj5Xb21lbidzIEZhc2hpb248L2gzPlxuICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiUHJvZHVjdFNlcnZsZXQ/Y2F0ZWdvcnk9d29tZW5cIiBjbGFzcz1cImNhdGVnb3J5LWxpbmtcIj5TaG9wIE5vdyA8aSBjbGFzcz1cImZhcyBmYS1hcnJvdy1yaWdodFwiPjwvaT48L2E+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhdGVnb3J5LWNhcmRcIj5cbiAgICAgICAgICAgICAgICA8aW1nIHNyYz1cImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNjE3MTM3OTY4NDI3LTg1OTI0YzgwMGEyMj9peGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0QmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz03NzQmcT04MFwiIGFsdD1cIk1lbidzIEZhc2hpb25cIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2F0ZWdvcnktY29udGVudFwiPlxuICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3M9XCJjYXRlZ29yeS10aXRsZVwiPk1lbidzIEZhc2hpb248L2gzPlxuICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiUHJvZHVjdFNlcnZsZXQ/Y2F0ZWdvcnk9bWVuXCIgY2xhc3M9XCJjYXRlZ29yeS1saW5rXCI+U2hvcCBOb3cgPGkgY2xhc3M9XCJmYXMgZmEtYXJyb3ctcmlnaHRcIj48L2k+PC9hPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4uLi5cblBhdGg6IENsb3RoZWUvc3JjL21haW4vd2ViYXBwL1dFQi1JTkYvdmlld3MvdXNlci9kYXNoYm9hcmQuanNwXG4uLi5cblxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzaG9wLWNhdGVnb3JpZXMtc2VjdGlvblwiPlxuICAgICAgICAgICAgICAgICAgICA8aDM+U2hvcCBieSBDYXRlZ29yeTwvaDM+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXRlZ29yeS1jYXJkc1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIlByb2R1Y3RTZXJ2bGV0P2NhdGVnb3J5PU1lblwiIGNsYXNzPVwiY2F0ZWdvcnktY2FyZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXRlZ29yeS1pbWFnZVwiIHN0eWxlPVwiYmFja2dyb3VuZC1pbWFnZTogdXJsKCdodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTUxNjI1Nzk4NC1iMWI0ZDcwNzQxMmU/aXhsaWI9cmItMS4yLjEmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz0xMzUwJnE9ODAnKTtcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQ+TWVuPC9oND5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCJQcm9kdWN0U2VydmxldD9jYXRlZ29yeT1Xb21lblwiIGNsYXNzPVwiY2F0ZWdvcnktY2FyZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXRlZ29yeS1pbWFnZVwiIHN0eWxlPVwiYmFja2dyb3VuZC1pbWFnZTogdXJsKCdodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTQ4Mzk4NTk4ODM1NS03NjM3MjhlMTkzNWI/aXhsaWI9cmItMS4yLjEmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz0xMzUwJnE9ODAnKTtcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQ+V29tZW48L2g0PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIlByb2R1Y3RTZXJ2bGV0P2NhdGVnb3J5PUtpZHNcIiBjbGFzcz1cImNhdGVnb3J5LWNhcmRcIj5cbi4uLlxuUGF0aDogQ2xvdGhlZS9zcmMvbWFpbi93ZWJhcHAvY2F0ZWdvcmllcy5qc3Bcbi4uLlxuXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93XCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC0zXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXRlZ29yeS1jYXJkIGNsaWNrYWJsZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cInByb2R1Y3RzLmpzcD9jYXRlZ29yeT10cmFkaXRpb25hbCZ0eXBlPXdvbWVuXCIgY2xhc3M9XCJjYXJkLWxpbmtcIj48L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2F0ZWdvcnktaW1hZ2VcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTgzMzkxNzMzOTU2LTM3NTBlMGZmNGU4Yj9peGxpYj1yYi0xLjIuMSZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTc3MiZxPTgwXCIgYWx0PVwiV29tZW4ncyBUcmFkaXRpb25hbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2F0ZWdvcnktY29udGVudFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMz5Xb21lbidzIFRyYWRpdGlvbmFsPC9oMz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5FbGVnYW50IHNhcmVlcywgbGVoZW5nYXMsIGFuZCBldGhuaWMgd2VhciBmb3Igd29tZW4uPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY2F0ZWdvcnktYnRuXCI+RXhwbG9yZTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbi4uLlxuXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93XCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC0zXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXRlZ29yeS1jYXJkIGNsaWNrYWJsZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cInByb2R1Y3RzLmpzcD9jYXRlZ29yeT1hZXN0aGV0aWMmdHlwZT1jYXN1YWxcIiBjbGFzcz1cImNhcmQtbGlua1wiPjwvYT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXRlZ29yeS1pbWFnZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1ODEwNDQ3Nzc1NTAtNGNmYTYwNzA3YzAzP2l4bGliPXJiLTQuMC4zJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9NzcyJnE9ODBcIiBhbHQ9XCJDYXN1YWwgQWVzdGhldGljXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXRlZ29yeS1jb250ZW50XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzPkNhc3VhbCBBZXN0aGV0aWM8L2gzPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPkVmZm9ydGxlc3NseSBzdHlsaXNoIGV2ZXJ5ZGF5IHdlYXIgd2l0aCBhZXN0aGV0aWMgYXBwZWFsLjwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImNhdGVnb3J5LWJ0blwiPkV4cGxvcmU8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4uLi5cblxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInJvd1wiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtM1wiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2F0ZWdvcnktY2FyZCBjbGlja2FibGVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCJwcm9kdWN0cy5qc3A/Y2F0ZWdvcnk9Zm9ybWFsJnR5cGU9YnVzaW5lc3NcIiBjbGFzcz1cImNhcmQtbGlua1wiPjwvYT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXRlZ29yeS1pbWFnZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1ODA2NTcwMTg5NTAtYzdmN2Q2YTZkOTkwP2l4bGliPXJiLTEuMi4xJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9NzcyJnE9ODBcIiBhbHQ9XCJCdXNpbmVzcyBBdHRpcmVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhdGVnb3J5LWNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDM+QnVzaW5lc3MgQXR0aXJlPC9oMz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5Qcm9mZXNzaW9uYWwgc3VpdHMgYW5kIGJ1c2luZXNzIHdlYXIgZm9yIHRoZSB3b3JrcGxhY2UuPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY2F0ZWdvcnktYnRuXCI+RXhwbG9yZTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbi4uLlxuXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC0zXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXRlZ29yeS1jYXJkIGNsaWNrYWJsZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cInByb2R1Y3RzLmpzcD9jYXRlZ29yeT1mb3JtYWwmdHlwZT1hY2Nlc3Nvcmllc1wiIGNsYXNzPVwiY2FyZC1saW5rXCI+PC9hPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhdGVnb3J5LWltYWdlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTU4NDkxNzg2NTQ0Mi1kZTg5ZGY3NmFmZDM/aXhsaWI9cmItNC4wLjMmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz04NzAmcT04MFwiIGFsdD1cIkZvcm1hbCBBY2Nlc3Nvcmllc1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2F0ZWdvcnktY29udGVudFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMz5Gb3JtYWwgQWNjZXNzb3JpZXM8L2gzPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPlNvcGhpc3RpY2F0ZWQgYWNjZXNzb3JpZXMgdG8gY29tcGxldGUgeW91ciBmb3JtYWwgbG9vay48L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJjYXRlZ29yeS1idG5cIj5FeHBsb3JlPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuPC9zZWN0aW9uPlxuXG48IS0tIEphdmFTY3JpcHQgcmVtb3ZlZCBhcyByZXF1ZXN0ZWQgLS0+XG5cbjwlQCBpbmNsdWRlIGZpbGU9XCJpbmNsdWRlcy9mb290ZXIuanNwXCIgJT5cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9jb250cm9sbGVyL0NhdGVnb3J5U2VydmxldC5qYXZhXG4uLi5cblxuICAgIEBPdmVycmlkZVxuICAgIHByb3RlY3RlZCB2b2lkIGRvUG9zdChIdHRwU2VydmxldFJlcXVlc3QgcmVxdWVzdCwgSHR0cFNlcnZsZXRSZXNwb25zZSByZXNwb25zZSlcbiAgICAgICAgICAgIHRocm93cyBTZXJ2bGV0RXhjZXB0aW9uLCBJT0V4Y2VwdGlvbiB7XG4gICAgICAgIC8vIENoZWNrIGlmIHVzZXIgaXMgbG9nZ2VkIGluIGFuZCBpcyBhbiBhZG1pblxuICAgICAgICBIdHRwU2Vzc2lvbiBzZXNzaW9uID0gcmVxdWVzdC5nZXRTZXNzaW9uKGZhbHNlKTtcbiAgICAgICAgaWYgKHNlc3Npb24gPT0gbnVsbCB8fCBzZXNzaW9uLmdldEF0dHJpYnV0ZShcInVzZXJcIikgPT0gbnVsbCkge1xuICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL0xvZ2luU2VydmxldFwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIFVzZXIgdXNlciA9IChVc2VyKSBzZXNzaW9uLmdldEF0dHJpYnV0ZShcInVzZXJcIik7XG4gICAgICAgIGlmICghdXNlci5pc0FkbWluKCkpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9Mb2dpblNlcnZsZXRcIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBTdHJpbmcgYWN0aW9uID0gcmVxdWVzdC5nZXRQYXJhbWV0ZXIoXCJhY3Rpb25cIik7XG5cbiAgICAgICAgaWYgKGFjdGlvbiA9PSBudWxsKSB7XG4gICAgICAgICAgICBhY3Rpb24gPSBcImxpc3RcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIHN3aXRjaCAoYWN0aW9uKSB7XG4gICAgICAgICAgICBjYXNlIFwiYWRkXCI6XG4gICAgICAgICAgICAgICAgYWRkQ2F0ZWdvcnkocmVxdWVzdCwgcmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInVwZGF0ZVwiOlxuICAgICAgICAgICAgICAgIHVwZGF0ZUNhdGVnb3J5KHJlcXVlc3QsIHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgbGlzdENhdGVnb3JpZXMocmVxdWVzdCwgcmVzcG9uc2UpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB2b2lkIGxpc3RDYXRlZ29yaWVzKEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBIdHRwU2VydmxldFJlc3BvbnNlIHJlc3BvbnNlKSB0aHJvd3MgU2VydmxldEV4Y2VwdGlvbiwgSU9FeGNlcHRpb24ge1xuICAgICAgICByZXF1ZXN0LnNldEF0dHJpYnV0ZShcImNhdGVnb3JpZXNcIiwgY2F0ZWdvcnlEQU8uZ2V0QWxsQ2F0ZWdvcmllcygpKTtcbiAgICAgICAgcmVxdWVzdC5nZXRSZXF1ZXN0RGlzcGF0Y2hlcihcIi9hZG1pbi9jYXRlZ29yaWVzLmpzcFwiKS5mb3J3YXJkKHJlcXVlc3QsIHJlc3BvbnNlKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHZvaWQgdmlld0NhdGVnb3J5KEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBIdHRwU2VydmxldFJlc3BvbnNlIHJlc3BvbnNlKSB0aHJvd3MgU2VydmxldEV4Y2VwdGlvbiwgSU9FeGNlcHRpb24ge1xuICAgICAgICBpbnQgY2F0ZWdvcnlJZCA9IEludGVnZXIucGFyc2VJbnQocmVxdWVzdC5nZXRQYXJhbWV0ZXIoXCJpZFwiKSk7XG4gICAgICAgIENhdGVnb3J5IGNhdGVnb3J5ID0gY2F0ZWdvcnlEQU8uZ2V0Q2F0ZWdvcnlCeUlkKGNhdGVnb3J5SWQpO1xuXG4gICAgICAgIGlmIChjYXRlZ29yeSAhPSBudWxsKSB7XG4gICAgICAgICAgICAvLyBHZXQgcHJvZHVjdHMgaW4gdGhpcyBjYXRlZ29yeVxuICAgICAgICAgICAgUHJvZHVjdERBTyBwcm9kdWN0REFPID0gbmV3IFByb2R1Y3REQU8oKTtcbiAgICAgICAgICAgIExpc3Q8UHJvZHVjdD4gcHJvZHVjdHMgPSBwcm9kdWN0REFPLmdldFByb2R1Y3RzQnlDYXRlZ29yeShjYXRlZ29yeS5nZXROYW1lKCkpO1xuXG4gICAgICAgICAgICByZXF1ZXN0LnNldEF0dHJpYnV0ZShcImNhdGVnb3J5XCIsIGNhdGVnb3J5KTtcbiAgICAgICAgICAgIHJlcXVlc3Quc2V0QXR0cmlidXRlKFwicHJvZHVjdHNcIiwgcHJvZHVjdHMpO1xuICAgICAgICAgICAgcmVxdWVzdC5nZXRSZXF1ZXN0RGlzcGF0Y2hlcihcIi9hZG1pbi92aWV3LWNhdGVnb3J5LmpzcFwiKS5mb3J3YXJkKHJlcXVlc3QsIHJlc3BvbnNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9hZG1pbi9jYXRlZ29yaWVzLmpzcD9lcnJvcj1DYXRlZ29yeStub3QrZm91bmRcIik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHZvaWQgYWRkQ2F0ZWdvcnkoSHR0cFNlcnZsZXRSZXF1ZXN0IHJlcXVlc3QsIEh0dHBTZXJ2bGV0UmVzcG9uc2UgcmVzcG9uc2UpIHRocm93cyBTZXJ2bGV0RXhjZXB0aW9uLCBJT0V4Y2VwdGlvbiB7XG4gICAgICAgIFN0cmluZyBuYW1lID0gcmVxdWVzdC5nZXRQYXJhbWV0ZXIoXCJuYW1lXCIpO1xuICAgICAgICBTdHJpbmcgZGVzY3JpcHRpb24gPSByZXF1ZXN0LmdldFBhcmFtZXRlcihcImRlc2NyaXB0aW9uXCIpO1xuXG4gICAgICAgIENhdGVnb3J5IGNhdGVnb3J5ID0gbmV3IENhdGVnb3J5KCk7XG4gICAgICAgIGNhdGVnb3J5LnNldE5hbWUobmFtZSk7XG4gICAgICAgIGNhdGVnb3J5LnNldERlc2NyaXB0aW9uKGRlc2NyaXB0aW9uKTtcblxuICAgICAgICBib29sZWFuIHN1Y2Nlc3MgPSBjYXRlZ29yeURBTy5hZGRDYXRlZ29yeShjYXRlZ29yeSk7XG5cbiAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9hZG1pbi9jYXRlZ29yaWVzLmpzcD9tZXNzYWdlPUNhdGVnb3J5K2FkZGVkK3N1Y2Nlc3NmdWxseVwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9hZG1pbi9jYXRlZ29yaWVzLmpzcD9lcnJvcj1GYWlsZWQrdG8rYWRkK2NhdGVnb3J5XCIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB2b2lkIHVwZGF0ZUNhdGVnb3J5KEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBIdHRwU2VydmxldFJlc3BvbnNlIHJlc3BvbnNlKSB0aHJvd3MgU2VydmxldEV4Y2VwdGlvbiwgSU9FeGNlcHRpb24ge1xuICAgICAgICBpbnQgY2F0ZWdvcnlJZCA9IEludGVnZXIucGFyc2VJbnQocmVxdWVzdC5nZXRQYXJhbWV0ZXIoXCJpZFwiKSk7XG4gICAgICAgIFN0cmluZyBuYW1lID0gcmVxdWVzdC5nZXRQYXJhbWV0ZXIoXCJuYW1lXCIpO1xuICAgICAgICBTdHJpbmcgZGVzY3JpcHRpb24gPSByZXF1ZXN0LmdldFBhcmFtZXRlcihcImRlc2NyaXB0aW9uXCIpO1xuXG4gICAgICAgIENhdGVnb3J5IGNhdGVnb3J5ID0gbmV3IENhdGVnb3J5KCk7XG4gICAgICAgIGNhdGVnb3J5LnNldElkKGNhdGVnb3J5SWQpO1xuICAgICAgICBjYXRlZ29yeS5zZXROYW1lKG5hbWUpO1xuICAgICAgICBjYXRlZ29yeS5zZXREZXNjcmlwdGlvbihkZXNjcmlwdGlvbik7XG5cbiAgICAgICAgYm9vbGVhbiBzdWNjZXNzID0gY2F0ZWdvcnlEQU8udXBkYXRlQ2F0ZWdvcnkoY2F0ZWdvcnkpO1xuXG4gICAgICAgIGlmIChzdWNjZXNzKSB7XG4gICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvYWRtaW4vY2F0ZWdvcmllcy5qc3A/bWVzc2FnZT1DYXRlZ29yeSt1cGRhdGVkK3N1Y2Nlc3NmdWxseVwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9hZG1pbi9jYXRlZ29yaWVzLmpzcD9lcnJvcj1GYWlsZWQrdG8rdXBkYXRlK2NhdGVnb3J5XCIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB2b2lkIHNob3dBZGRGb3JtKEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBIdHRwU2VydmxldFJlc3BvbnNlIHJlc3BvbnNlKSB0aHJvd3MgU2VydmxldEV4Y2VwdGlvbiwgSU9FeGNlcHRpb24ge1xuICAgICAgICByZXF1ZXN0LmdldFJlcXVlc3REaXNwYXRjaGVyKFwiL2FkbWluL2FkZC1jYXRlZ29yeS5qc3BcIikuZm9yd2FyZChyZXF1ZXN0LCByZXNwb25zZSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB2b2lkIHNob3dFZGl0Rm9ybShIdHRwU2VydmxldFJlcXVlc3QgcmVxdWVzdCwgSHR0cFNlcnZsZXRSZXNwb25zZSByZXNwb25zZSkgdGhyb3dzIFNlcnZsZXRFeGNlcHRpb24sIElPRXhjZXB0aW9uIHtcbiAgICAgICAgaW50IGNhdGVnb3J5SWQgPSBJbnRlZ2VyLnBhcnNlSW50KHJlcXVlc3QuZ2V0UGFyYW1ldGVyKFwiaWRcIikpO1xuICAgICAgICBDYXRlZ29yeSBjYXRlZ29yeSA9IGNhdGVnb3J5REFPLmdldENhdGVnb3J5QnlJZChjYXRlZ29yeUlkKTtcblxuICAgICAgICBpZiAoY2F0ZWdvcnkgIT0gbnVsbCkge1xuICAgICAgICAgICAgcmVxdWVzdC5zZXRBdHRyaWJ1dGUoXCJjYXRlZ29yeVwiLCBjYXRlZ29yeSk7XG4gICAgICAgICAgICByZXF1ZXN0LmdldFJlcXVlc3REaXNwYXRjaGVyKFwiL2FkbWluL2VkaXQtY2F0ZWdvcnkuanNwXCIpLmZvcndhcmQocmVxdWVzdCwgcmVzcG9uc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL2FkbWluL2NhdGVnb3JpZXMuanNwP2Vycm9yPUNhdGVnb3J5K25vdCtmb3VuZFwiKTtcbiAgICAgICAgfVxuICAgIH1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9jb250cm9sbGVyL0hvbWVTZXJ2bGV0LmphdmFcbnBhY2thZ2UgY29udHJvbGxlcjtcblxuaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247XG5pbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDtcbmltcG9ydCBqYXZhLnV0aWwuRGF0ZTtcbmltcG9ydCBqYXZhLnV0aWwuTGlzdDtcblxuaW1wb3J0IGpha2FydGEuc2VydmxldC5TZXJ2bGV0RXhjZXB0aW9uO1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5hbm5vdGF0aW9uLldlYlNlcnZsZXQ7XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXQ7XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXRSZXF1ZXN0O1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5odHRwLkh0dHBTZXJ2bGV0UmVzcG9uc2U7XG5pbXBvcnQgbW9kZWwuU2xpZGU7XG5cblxuLyoqXG4gKiBTZXJ2bGV0IGltcGxlbWVudGF0aW9uIGNsYXNzIEhvbWVTZXJ2bGV0XG4gKi9cbi8vIFNlcnZsZXQgbWFwcGluZyBkZWZpbmVkIGluIHdlYi54bWxcbnB1YmxpYyBjbGFzcyBIb21lU2VydmxldCBleHRlbmRzIEh0dHBTZXJ2bGV0IHtcbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBsb25nIHNlcmlhbFZlcnNpb25VSUQgPSAxTDtcbiAgICBwcml2YXRlIExpc3Q8U2xpZGU+IHNsaWRlcztcblxuXG5cbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplIHRoZSBzbGlkZXNcbiAgICAgKi9cbiAgICBwcml2YXRlIHZvaWQgaW5pdGlhbGl6ZVNsaWRlcygpIHtcbiAgICAgICAgc2xpZGVzID0gbmV3IEFycmF5TGlzdDw+KCk7XG5cbiAgICAgICAgLy8gQWRkIHNsaWRlc1xuICAgICAgICBzbGlkZXMuYWRkKG5ldyBTbGlkZShcbiAgICAgICAgICAgIFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE0OTA0ODE2NTE4NzEtYWI2OGRlMjVkNDNkP2l4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTE3NzAmcT04MFwiLFxuICAgICAgICAgICAgXCJFbGV2YXRlIFlvdXIgU3R5bGVcIixcbiAgICAgICAgICAgIFwiRGlzY292ZXIgdGhlIGxhdGVzdCB0cmVuZHMgaW4gZmFzaGlvbiBhbmQgZXhwcmVzcyB5b3Vyc2VsZiB3aXRoIG91ciBwcmVtaXVtIGNvbGxlY3Rpb24gb2YgY2xvdGhpbmcgYW5kIGFjY2Vzc29yaWVzLlwiLFxuICAgICAgICAgICAgXCJQcm9kdWN0U2VydmxldD9jYXRlZ29yeT1uZXdcIixcbiAgICAgICAgICAgIFwiU2hvcCBOb3dcIixcbiAgICAgICAgICAgIFwiUHJvZHVjdFNlcnZsZXQ/Y2F0ZWdvcnk9c2FsZVwiLFxuICAgICAgICAgICAgXCJWaWV3IFNhbGVcIlxuICAgICAgICApKTtcblxuICAgICAgICBzbGlkZXMuYWRkKG5ldyBTbGlkZShcbiAgICAgICAgICAgIFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE0NDUyMDUxNzAyMzAtMDUzYjgzMDE2MDUwP2l4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTE3NzEmcT04MFwiLFxuICAgICAgICAgICAgXCJTdW1tZXIgQ29sbGVjdGlvbiAyMDIzXCIsXG4gICAgICAgICAgICBcIkJlYXQgdGhlIGhlYXQgd2l0aCBvdXIgY29vbCBhbmQgY29tZm9ydGFibGUgc3VtbWVyIGNvbGxlY3Rpb24uXCIsXG4gICAgICAgICAgICBcIlByb2R1Y3RTZXJ2bGV0P2NhdGVnb3J5PXN1bW1lclwiLFxuICAgICAgICAgICAgXCJFeHBsb3JlIENvbGxlY3Rpb25cIixcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICBudWxsXG4gICAgICAgICkpO1xuXG4gICAgICAgIHNsaWRlcy5hZGQobmV3IFNsaWRlKFxuICAgICAgICAgICAgXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTQ0MTk4NDkwNDk5Ni1lMGI2YmE2ODdlMDQ/aXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9MTc3MCZxPTgwXCIsXG4gICAgICAgICAgICBcIkV4Y2x1c2l2ZSBEaXNjb3VudHNcIixcbiAgICAgICAgICAgIFwiVXAgdG8gNTAlIG9mZiBvbiBzZWxlY3RlZCBpdGVtcy4gTGltaXRlZCB0aW1lIG9mZmVyIVwiLFxuICAgICAgICAgICAgXCJQcm9kdWN0U2VydmxldD9jYXRlZ29yeT1zYWxlXCIsXG4gICAgICAgICAgICBcIlNob3AgU2FsZVwiLFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIG51bGxcbiAgICAgICAgKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHNlZSBIdHRwU2VydmxldCNkb0dldChIdHRwU2VydmxldFJlcXVlc3QgcmVxdWVzdCwgSHR0cFNlcnZsZXRSZXNwb25zZSByZXNwb25zZSlcbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgdm9pZCBkb0dldChIdHRwU2VydmxldFJlcXVlc3QgcmVxdWVzdCwgSHR0cFNlcnZsZXRSZXNwb25zZSByZXNwb25zZSlcbiAgICAgICAgICAgIHRocm93cyBTZXJ2bGV0RXhjZXB0aW9uLCBJT0V4Y2VwdGlvbiB7XG4gICAgICAgIC8vIEhhbmRsZSBzbGlkZSBwYXJhbWV0ZXJcbiAgICAgICAgU3RyaW5nIHNsaWRlUGFyYW0gPSByZXF1ZXN0LmdldFBhcmFtZXRlcihcInNsaWRlXCIpO1xuICAgICAgICBpbnQgY3VycmVudFNsaWRlID0gMDtcbi4uLlxuXG4gICAgICAgIC8vIFN0b3JlIGN1cnJlbnQgc2xpZGUgaW4gc2Vzc2lvblxuICAgICAgICByZXF1ZXN0LmdldFNlc3Npb24oKS5zZXRBdHRyaWJ1dGUoXCJjdXJyZW50U2xpZGVcIiwgY3VycmVudFNsaWRlKTtcblxuICAgICAgICAvLyBTZXQgc2xpZGVzXG4gICAgICAgIHJlcXVlc3Quc2V0QXR0cmlidXRlKFwic2xpZGVzXCIsIHNsaWRlcyk7XG4gICAgICAgIHJlcXVlc3Quc2V0QXR0cmlidXRlKFwiY3VycmVudFNsaWRlXCIsIGN1cnJlbnRTbGlkZSk7XG4gICAgfVxufVxuLi4uXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCIwZWRlZDE3MS1iZGNmLTQ0YzYtOGVkNi0wYmZkNWEyZmM5Zjg7dG9vbHVfdnJ0eF8wMUJSeWViOHAyQURGeWJyOW1KdW01QXAiOnsicmVxdWVzdElkIjoiMGVkZWQxNzEtYmRjZi00NGM2LThlZDYtMGJmZDVhMmZjOWY4IiwidG9vbFVzZUlkIjoidG9vbHVfdnJ0eF8wMUJSeWViOHAyQURGeWJyOW1KdW01QXAiLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJUaGUgZm9sbG93aW5nIGNvZGUgc2VjdGlvbnMgd2VyZSByZXRyaWV2ZWQ6XG5QYXRoOiBDbG90aGVlL3NyYy9tYWluL2phdmEvY29udHJvbGxlci9DYXRlZ29yeUltYWdlU2VydmxldC5qYXZhXG4uLi5cblxuICAgICAgICAgICAgU3RyaW5nIGZpbGVFeHRlbnNpb24gPSBmaWxlTmFtZS5zdWJzdHJpbmcoZmlsZU5hbWUubGFzdEluZGV4T2YoXCIuXCIpKTtcbiAgICAgICAgICAgIFN0cmluZyBuZXdGaWxlTmFtZSA9IFwiY2F0ZWdvcnlfXCIgKyBjYXRlZ29yeUlkICsgZmlsZUV4dGVuc2lvbjtcblxuICAgICAgICAgICAgLy8gU2F2ZSB0aGUgZmlsZSB0byBhIHBlcm1hbmVudCBsb2NhdGlvblxuICAgICAgICAgICAgU3RyaW5nIHJlbGF0aXZlUGF0aCA9IFwiaW1hZ2VzL2NhdGVnb3JpZXNcIjtcblxuICAgICAgICAgICAgLy8gR2V0IHRoZSByZWFsIHBhdGggdG8gdGhlIHdlYiBhcHBsaWNhdGlvbiByb290IGRpcmVjdG9yeVxuICAgICAgICAgICAgU3RyaW5nIHdlYmFwcFJvb3QgPSByZXF1ZXN0LmdldFNlcnZsZXRDb250ZXh0KCkuZ2V0UmVhbFBhdGgoXCIvXCIpO1xuXG4gICAgICAgICAgICAvLyBDcmVhdGUgdGhlIGRlcGxveW1lbnQgZGlyZWN0b3J5IHBhdGhcbiAgICAgICAgICAgIFN0cmluZyBkZXBsb3ltZW50UGF0aCA9IHdlYmFwcFJvb3QgKyByZWxhdGl2ZVBhdGg7XG5cbiAgICAgICAgICAgIC8vIEVuc3VyZSBkZXBsb3ltZW50IGRpcmVjdG9yeSBleGlzdHNcbiAgICAgICAgICAgIEZpbGUgZGVwbG95bWVudERpciA9IG5ldyBGaWxlKGRlcGxveW1lbnRQYXRoKTtcbiAgICAgICAgICAgIGlmICghZGVwbG95bWVudERpci5leGlzdHMoKSkge1xuICAgICAgICAgICAgICAgIGJvb2xlYW4gY3JlYXRlZCA9IGRlcGxveW1lbnREaXIubWtkaXJzKCk7XG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQ2F0ZWdvcnlJbWFnZVNlcnZsZXQgLSBDcmVhdGVkIGRlcGxveW1lbnQgZGlyZWN0b3J5OiBcIiArIGNyZWF0ZWQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBHZXQgdGhlIHBlcm1hbmVudCBwYXRoIChwZXJzaXN0cyBhY3Jvc3Mgc2VydmVyIHJlc3RhcnRzKVxuICAgICAgICAgICAgU3RyaW5nIHBlcm1hbmVudFBhdGggPSBnZXRQZXJtYW5lbnRQYXRoKHdlYmFwcFJvb3QsIHJlbGF0aXZlUGF0aCk7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJDYXRlZ29yeUltYWdlU2VydmxldCAtIFBlcm1hbmVudCBwYXRoOiBcIiArIHBlcm1hbmVudFBhdGgpO1xuXG4gICAgICAgICAgICAvLyBDcmVhdGUgdGhlIHBlcm1hbmVudCBkaXJlY3RvcnkgaWYgaXQgZG9lc24ndCBleGlzdFxuICAgICAgICAgICAgYm9vbGVhbiBkaXJDcmVhdGVkID0gZW5zdXJlRGlyZWN0b3J5RXhpc3RzKHBlcm1hbmVudFBhdGgpO1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQ2F0ZWdvcnlJbWFnZVNlcnZsZXQgLSBDcmVhdGVkIHBlcm1hbmVudCBkaXJlY3Rvcnk6IFwiICsgZGlyQ3JlYXRlZCk7XG5cbiAgICAgICAgICAgIC8vIFdyaXRlIHRoZSBmaWxlIHRvIGRlcGxveW1lbnQgcGF0aFxuICAgICAgICAgICAgU3RyaW5nIGRlcGxveW1lbnRGaWxlUGF0aCA9IGRlcGxveW1lbnRQYXRoICsgXCIvXCIgKyBuZXdGaWxlTmFtZTtcbiAgICAgICAgICAgIGZpbGVQYXJ0LndyaXRlKGRlcGxveW1lbnRGaWxlUGF0aCk7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJDYXRlZ29yeUltYWdlU2VydmxldCAtIEltYWdlIHNhdmVkIHRvIGRlcGxveW1lbnQgcGF0aDogXCIgKyBkZXBsb3ltZW50RmlsZVBhdGgpO1xuLi4uXG5cbiAgICAgICAgICAgIC8vIFVwZGF0ZSBjYXRlZ29yeSBpbWFnZSBVUkwgaW4gZGF0YWJhc2VcbiAgICAgICAgICAgIFN0cmluZyBpbWFnZVVybCA9IHJlbGF0aXZlUGF0aCArIFwiL1wiICsgbmV3RmlsZU5hbWU7XG4gICAgICAgICAgICBib29sZWFuIHN1Y2Nlc3MgPSBjYXRlZ29yeURBTy51cGRhdGVDYXRlZ29yeUltYWdlKGNhdGVnb3J5SWQsIGltYWdlVXJsKTtcblxuICAgICAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvYWRtaW4vY2F0ZWdvcmllcy5qc3A/c3VjY2Vzcz10cnVlJm1lc3NhZ2U9Q2F0ZWdvcnkraW1hZ2UrdXBkYXRlZCtzdWNjZXNzZnVsbHlcIik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9hZG1pbi9jYXRlZ29yaWVzLmpzcD9lcnJvcj10cnVlJm1lc3NhZ2U9RmFpbGVkK3RvK3VwZGF0ZStjYXRlZ29yeStpbWFnZVwiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9IGNhdGNoIChOdW1iZXJGb3JtYXRFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL2FkbWluL2NhdGVnb3JpZXMuanNwP2Vycm9yPXRydWUmbWVzc2FnZT1JbnZhbGlkK2NhdGVnb3J5K0lEXCIpO1xuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL2FkbWluL2NhdGVnb3JpZXMuanNwP2Vycm9yPXRydWUmbWVzc2FnZT1FcnJvcit1cGxvYWRpbmcraW1hZ2U6K1wiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICB9XG4gICAgfVxuLi4uXG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHBlcm1hbmVudCBwYXRoIGZvciBzdG9yaW5nIGltYWdlc1xuICAgICAqIEBwYXJhbSB3ZWJhcHBSb290IFRoZSB3ZWJhcHAgcm9vdCBwYXRoXG4gICAgICogQHBhcmFtIHJlbGF0aXZlUGF0aCBUaGUgcmVsYXRpdmUgcGF0aCB3aXRoaW4gdGhlIHdlYmFwcFxuICAgICAqIEByZXR1cm4gVGhlIHBlcm1hbmVudCBwYXRoXG4gICAgICovXG4gICAgcHJpdmF0ZSBTdHJpbmcgZ2V0UGVybWFuZW50UGF0aChTdHJpbmcgd2ViYXBwUm9vdCwgU3RyaW5nIHJlbGF0aXZlUGF0aCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gRmlyc3QsIHRyeSB0byB1c2UgYSBmaXhlZCwgYWJzb2x1dGUgcGF0aCB0aGF0IHdpbGwgZGVmaW5pdGVseSBwZXJzaXN0XG4gICAgICAgICAgICAvLyBUaGlzIHBhdGggc2hvdWxkIGJlIG91dHNpZGUgdGhlIGRlcGxveW1lbnQgZGlyZWN0b3J5IGJ1dCBhY2Nlc3NpYmxlIGJ5IHRoZSB3ZWIgc2VydmVyXG4gICAgICAgICAgICAvLyBVc2UgdGhlIHVzZXIncyBob21lIGRpcmVjdG9yeVxuICAgICAgICAgICAgU3RyaW5nIHVzZXJIb21lID0gU3lzdGVtLmdldFByb3BlcnR5KFwidXNlci5ob21lXCIpO1xuICAgICAgICAgICAgU3RyaW5nIGZpeGVkUGF0aCA9IHVzZXJIb21lICsgRmlsZS5zZXBhcmF0b3IgKyBcIkNsb3RoZWVJbWFnZXNcIiArIEZpbGUuc2VwYXJhdG9yICsgcmVsYXRpdmVQYXRoO1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQ2F0ZWdvcnlJbWFnZVNlcnZsZXQgLSBVc2luZyBmaXhlZCBwYXRoIGluIHVzZXIgaG9tZTogXCIgKyBmaXhlZFBhdGgpO1xuICAgICAgICAgICAgRmlsZSBmaXhlZERpciA9IG5ldyBGaWxlKGZpeGVkUGF0aCk7XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvY29udHJvbGxlci9DYXRlZ29yeUltYWdlU2VydmxldC5qYXZhXG4uLi5cblxuICAgICAgICAgICAgLy8gUHJvY2VzcyB0aGUgdXBsb2FkZWQgZmlsZVxuICAgICAgICAgICAgU3RyaW5nIGZpbGVOYW1lID0gZ2V0U3VibWl0dGVkRmlsZU5hbWUoZmlsZVBhcnQpO1xuICAgICAgICAgICAgaWYgKGZpbGVOYW1lID09IG51bGwgfHwgZmlsZU5hbWUuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL2FkbWluL2NhdGVnb3JpZXMuanNwP2Vycm9yPXRydWUmbWVzc2FnZT1JbnZhbGlkK2ZpbGUrbmFtZVwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFN0cmluZyBmaWxlRXh0ZW5zaW9uID0gZmlsZU5hbWUuc3Vic3RyaW5nKGZpbGVOYW1lLmxhc3RJbmRleE9mKFwiLlwiKSk7XG4gICAgICAgICAgICBTdHJpbmcgbmV3RmlsZU5hbWUgPSBcImNhdGVnb3J5X1wiICsgY2F0ZWdvcnlJZCArIGZpbGVFeHRlbnNpb247XG5cbiAgICAgICAgICAgIC8vIFNhdmUgdGhlIGZpbGUgdG8gdGhlIHNlcnZlclxuICAgICAgICAgICAgU3RyaW5nIHJlbGF0aXZlUGF0aCA9IFwiaW1hZ2VzL2NhdGVnb3JpZXNcIjtcbiAgICAgICAgICAgIFN0cmluZyB1cGxvYWRQYXRoID0gcmVxdWVzdC5nZXRTZXJ2bGV0Q29udGV4dCgpLmdldFJlYWxQYXRoKFwiL1wiKSArIHJlbGF0aXZlUGF0aCArIFwiL1wiO1xuXG4gICAgICAgICAgICBGaWxlIHVwbG9hZERpciA9IG5ldyBGaWxlKHVwbG9hZFBhdGgpO1xuICAgICAgICAgICAgaWYgKCF1cGxvYWREaXIuZXhpc3RzKCkpIHtcbiAgICAgICAgICAgICAgICB1cGxvYWREaXIubWtkaXJzKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZpbGVQYXJ0LndyaXRlKHVwbG9hZFBhdGggKyBuZXdGaWxlTmFtZSk7XG5cbiAgICAgICAgICAgIC8vIFVwZGF0ZSBjYXRlZ29yeSBpbWFnZSBVUkwgaW4gZGF0YWJhc2VcbiAgICAgICAgICAgIFN0cmluZyBpbWFnZVVybCA9IHJlbGF0aXZlUGF0aCArIFwiL1wiICsgbmV3RmlsZU5hbWU7XG4gICAgICAgICAgICBib29sZWFuIHN1Y2Nlc3MgPSBjYXRlZ29yeURBTy51cGRhdGVDYXRlZ29yeUltYWdlKGNhdGVnb3J5SWQsIGltYWdlVXJsKTtcblxuICAgICAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvYWRtaW4vY2F0ZWdvcmllcy5qc3A/c3VjY2Vzcz10cnVlJm1lc3NhZ2U9Q2F0ZWdvcnkraW1hZ2UrdXBkYXRlZCtzdWNjZXNzZnVsbHlcIik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9hZG1pbi9jYXRlZ29yaWVzLmpzcD9lcnJvcj10cnVlJm1lc3NhZ2U9RmFpbGVkK3RvK3VwZGF0ZStjYXRlZ29yeStpbWFnZVwiKTtcbiAgICAgICAgICAgIH1cbi4uLlxuUGF0aDogQ2xvdGhlZS9zcmMvbWFpbi9qYXZhL2Rhby9DYXRlZ29yeURBTy5qYXZhXG4uLi5cblxuICAgIC8qKlxuICAgICAqIEFkZCBhIG5ldyBjYXRlZ29yeSB0byB0aGUgZGF0YWJhc2VcbiAgICAgKiBAcGFyYW0gY2F0ZWdvcnkgQ2F0ZWdvcnkgb2JqZWN0IHRvIGFkZFxuICAgICAqIEByZXR1cm4gdHJ1ZSBpZiBzdWNjZXNzZnVsLCBmYWxzZSBvdGhlcndpc2VcbiAgICAgKi9cbiAgICBwdWJsaWMgYm9vbGVhbiBhZGRDYXRlZ29yeShDYXRlZ29yeSBjYXRlZ29yeSkge1xuICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCI9PT09PSBBRERJTkcgQ0FURUdPUlkgPT09PT1cIik7XG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNhdGVnb3J5IG5hbWU6IFwiICsgY2F0ZWdvcnkuZ2V0TmFtZSgpKTtcbiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQ2F0ZWdvcnkgZGVzY3JpcHRpb246IFwiICsgY2F0ZWdvcnkuZ2V0RGVzY3JpcHRpb24oKSk7XG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNhdGVnb3J5IGltYWdlVXJsOiBcIiArIGNhdGVnb3J5LmdldEltYWdlVXJsKCkpO1xuXG4gICAgICAgIC8vIEZpcnN0IGNoZWNrIGlmIGEgY2F0ZWdvcnkgd2l0aCB0aGlzIG5hbWUgYWxyZWFkeSBleGlzdHNcbiAgICAgICAgaWYgKGNhdGVnb3J5RXhpc3RzKGNhdGVnb3J5LmdldE5hbWUoKSkpIHtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNhdGVnb3J5IGFscmVhZHkgZXhpc3RzOiBcIiArIGNhdGVnb3J5LmdldE5hbWUoKSk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUcnkgYSBzaW1wbGVyIHF1ZXJ5IHdpdGhvdXQgdGhlIGltYWdlX3VybCBmaWVsZFxuICAgICAgICBTdHJpbmcgcXVlcnkgPSBcIklOU0VSVCBJTlRPIGNhdGVnb3JpZXMgKG5hbWUsIGRlc2NyaXB0aW9uKSBWQUxVRVMgKD8sID8pXCI7XG4uLi5cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBjYXRlZ29yeSBpbWFnZSBVUkxcbiAgICAgKiBAcGFyYW0gY2F0ZWdvcnlJZCBDYXRlZ29yeSBJRFxuICAgICAqIEBwYXJhbSBpbWFnZVVybCBJbWFnZSBVUkxcbiAgICAgKiBAcmV0dXJuIHRydWUgaWYgc3VjY2Vzc2Z1bCwgZmFsc2Ugb3RoZXJ3aXNlXG4gICAgICovXG4gICAgcHVibGljIGJvb2xlYW4gdXBkYXRlQ2F0ZWdvcnlJbWFnZShpbnQgY2F0ZWdvcnlJZCwgU3RyaW5nIGltYWdlVXJsKSB7XG4gICAgICAgIFN0cmluZyBxdWVyeSA9IFwiVVBEQVRFIGNhdGVnb3JpZXMgU0VUIGltYWdlX3VybCA9ID8gV0hFUkUgaWQgPSA/XCI7XG5cbiAgICAgICAgdHJ5IChDb25uZWN0aW9uIGNvbm4gPSBEQkNvbm5lY3Rpb24uZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQocXVlcnkpKSB7XG5cbiAgICAgICAgICAgIGlmIChpbWFnZVVybCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgc3RtdC5zZXROdWxsKDEsIGphdmEuc3FsLlR5cGVzLlZBUkNIQVIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCBpbWFnZVVybCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdG10LnNldEludCgyLCBjYXRlZ29yeUlkKTtcblxuICAgICAgICAgICAgaW50IHJvd3NBZmZlY3RlZCA9IHN0bXQuZXhlY3V0ZVVwZGF0ZSgpO1xuICAgICAgICAgICAgcmV0dXJuIHJvd3NBZmZlY3RlZCA+IDA7XG5cbiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4uLi5cblxuICAgIC8qKlxuICAgICAqIEdldCBjYXRlZ29yeSBieSBJRFxuICAgICAqIEBwYXJhbSBjYXRlZ29yeUlkIENhdGVnb3J5IElEXG4gICAgICogQHJldHVybiBDYXRlZ29yeSBvYmplY3QgaWYgZm91bmQsIG51bGwgb3RoZXJ3aXNlXG4gICAgICovXG4gICAgcHVibGljIENhdGVnb3J5IGdldENhdGVnb3J5QnlJZChpbnQgY2F0ZWdvcnlJZCkge1xuICAgICAgICBTdHJpbmcgcXVlcnkgPSBcIlNFTEVDVCAqIEZST00gY2F0ZWdvcmllcyBXSEVSRSBpZCA9ID9cIjtcblxuICAgICAgICB0cnkgKENvbm5lY3Rpb24gY29ubiA9IERCQ29ubmVjdGlvbi5nZXRDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChxdWVyeSkpIHtcblxuICAgICAgICAgICAgc3RtdC5zZXRJbnQoMSwgY2F0ZWdvcnlJZCk7XG5cbiAgICAgICAgICAgIHRyeSAoUmVzdWx0U2V0IHJzID0gc3RtdC5leGVjdXRlUXVlcnkoKSkge1xuICAgICAgICAgICAgICAgIGlmIChycy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV4dHJhY3RDYXRlZ29yeUZyb21SZXN1bHRTZXQocnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbi4uLlxuXG4gICAgLyoqXG4gICAgICogR2V0IGFsbCBjYXRlZ29yaWVzXG4gICAgICogQHJldHVybiBMaXN0IG9mIGFsbCBjYXRlZ29yaWVzXG4gICAgICovXG4gICAgcHVibGljIExpc3Q8Q2F0ZWdvcnk+IGdldEFsbENhdGVnb3JpZXMoKSB7XG4gICAgICAgIExpc3Q8Q2F0ZWdvcnk+IGNhdGVnb3JpZXMgPSBuZXcgQXJyYXlMaXN0PD4oKTtcblxuICAgICAgICAvLyBTaW1wbGlmaWVkIHF1ZXJ5IHRvIGVuc3VyZSB3ZSBnZXQgYWxsIGNhdGVnb3JpZXMgcmVnYXJkbGVzcyBvZiBwcm9kdWN0c1xuICAgICAgICBTdHJpbmcgcXVlcnkgPSBcIlNFTEVDVCAqIEZST00gY2F0ZWdvcmllcyBPUkRFUiBCWSBuYW1lXCI7XG5cbiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRXhlY3V0aW5nIGdldEFsbENhdGVnb3JpZXMgcXVlcnk6IFwiICsgcXVlcnkpO1xuXG4gICAgICAgIHRyeSAoQ29ubmVjdGlvbiBjb25uID0gREJDb25uZWN0aW9uLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgICBTdGF0ZW1lbnQgc3RtdCA9IGNvbm4uY3JlYXRlU3RhdGVtZW50KCk7XG4gICAgICAgICAgICAgUmVzdWx0U2V0IHJzID0gc3RtdC5leGVjdXRlUXVlcnkocXVlcnkpKSB7XG5cbiAgICAgICAgICAgIGludCBjb3VudCA9IDA7XG4gICAgICAgICAgICB3aGlsZSAocnMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgY291bnQrKztcbiAgICAgICAgICAgICAgICBDYXRlZ29yeSBjYXRlZ29yeSA9IGV4dHJhY3RDYXRlZ29yeUZyb21SZXN1bHRTZXQocnMpO1xuICAgICAgICAgICAgICAgIC8vIFNldCBwcm9kdWN0IGNvdW50IHRvIDAgYnkgZGVmYXVsdFxuICAgICAgICAgICAgICAgIGNhdGVnb3J5LnNldFByb2R1Y3RDb3VudCgwKTtcbiAgICAgICAgICAgICAgICBjYXRlZ29yaWVzLmFkZChjYXRlZ29yeSk7XG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRm91bmQgY2F0ZWdvcnk6IFwiICsgY2F0ZWdvcnkuZ2V0TmFtZSgpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiVG90YWwgY2F0ZWdvcmllcyBmb3VuZDogXCIgKyBjb3VudCk7XG5cbiAgICAgICAgICAgIC8vIE5vdyBnZXQgcHJvZHVjdCBjb3VudHMgaW4gYSBzZXBhcmF0ZSBxdWVyeVxuICAgICAgICAgICAgaWYgKCFjYXRlZ29yaWVzLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgIFN0cmluZyBjb3VudFF1ZXJ5ID0gXCJTRUxFQ1QgY2F0ZWdvcnksIENPVU5UKCopIGFzIGNvdW50IEZST00gcHJvZHVjdHMgR1JPVVAgQlkgY2F0ZWdvcnlcIjtcbiAgICAgICAgICAgICAgICB0cnkgKFN0YXRlbWVudCBjb3VudFN0bXQgPSBjb25uLmNyZWF0ZVN0YXRlbWVudCgpO1xuICAgICAgICAgICAgICAgICAgICAgUmVzdWx0U2V0IGNvdW50UnMgPSBjb3VudFN0bXQuZXhlY3V0ZVF1ZXJ5KGNvdW50UXVlcnkpKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGNvdW50UnMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmcgY2F0ZWdvcnlOYW1lID0gY291bnRScy5nZXRTdHJpbmcoXCJjYXRlZ29yeVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGludCBwcm9kdWN0Q291bnQgPSBjb3VudFJzLmdldEludChcImNvdW50XCIpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdGhlIHByb2R1Y3QgY291bnQgZm9yIHRoZSBtYXRjaGluZyBjYXRlZ29yeVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChDYXRlZ29yeSBjYXRlZ29yeSA6IGNhdGVnb3JpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2F0ZWdvcnkuZ2V0TmFtZSgpLmVxdWFscyhjYXRlZ29yeU5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5LnNldFByb2R1Y3RDb3VudChwcm9kdWN0Q291bnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4uLi5cblBhdGg6IENsb3RoZWUvc3JjL21haW4vamF2YS9tb2RlbC9DYXRlZ29yeS5qYXZhXG5wYWNrYWdlIG1vZGVsO1xuXG5pbXBvcnQgamF2YS5zcWwuVGltZXN0YW1wO1xuaW1wb3J0IGphdmEudXRpbC5EYXRlO1xuXG4vKipcbiAqIENhdGVnb3J5IG1vZGVsIGNsYXNzXG4gKi9cbnB1YmxpYyBjbGFzcyBDYXRlZ29yeSB7XG4gICAgcHJpdmF0ZSBpbnQgaWQ7XG4gICAgcHJpdmF0ZSBTdHJpbmcgbmFtZTtcbiAgICBwcml2YXRlIFN0cmluZyBkZXNjcmlwdGlvbjtcbiAgICBwcml2YXRlIFN0cmluZyBpbWFnZVVybDsgLy8gQWRkZWQgZmllbGQgZm9yIGNhdGVnb3J5IGltYWdlXG4gICAgcHJpdmF0ZSBUaW1lc3RhbXAgY3JlYXRlZEF0O1xuICAgIHByaXZhdGUgaW50IHByb2R1Y3RDb3VudDsgLy8gTnVtYmVyIG9mIHByb2R1Y3RzIGluIHRoaXMgY2F0ZWdvcnlcblxuICAgIC8vIERlZmF1bHQgY29uc3RydWN0b3JcbiAgICBwdWJsaWMgQ2F0ZWdvcnkoKSB7XG4gICAgfVxuXG4gICAgLy8gQ29uc3RydWN0b3Igd2l0aCBmaWVsZHNcbiAgICBwdWJsaWMgQ2F0ZWdvcnkoaW50IGlkLCBTdHJpbmcgbmFtZSwgU3RyaW5nIGRlc2NyaXB0aW9uLCBTdHJpbmcgaW1hZ2VVcmwsIFRpbWVzdGFtcCBjcmVhdGVkQXQpIHtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgICAgIHRoaXMuaW1hZ2VVcmwgPSBpbWFnZVVybDtcbiAgICAgICAgdGhpcy5jcmVhdGVkQXQgPSBjcmVhdGVkQXQ7XG4gICAgfVxuXG4gICAgLy8gR2V0dGVycyBhbmQgU2V0dGVyc1xuICAgIHB1YmxpYyBpbnQgZ2V0SWQoKSB7XG4gICAgICAgIHJldHVybiBpZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRJZChpbnQgaWQpIHtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgIH1cblxuICAgIHB1YmxpYyBTdHJpbmcgZ2V0TmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIG5hbWU7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0TmFtZShTdHJpbmcgbmFtZSkge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIH1cblxuICAgIHB1YmxpYyBTdHJpbmcgZ2V0RGVzY3JpcHRpb24oKSB7XG4gICAgICAgIHJldHVybiBkZXNjcmlwdGlvbjtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXREZXNjcmlwdGlvbihTdHJpbmcgZGVzY3JpcHRpb24pIHtcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICAgIH1cblxuICAgIHB1YmxpYyBTdHJpbmcgZ2V0SW1hZ2VVcmwoKSB7XG4gICAgICAgIHJldHVybiBpbWFnZVVybDtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRJbWFnZVVybChTdHJpbmcgaW1hZ2VVcmwpIHtcbiAgICAgICAgdGhpcy5pbWFnZVVybCA9IGltYWdlVXJsO1xuICAgIH1cblxuICAgIHB1YmxpYyBUaW1lc3RhbXAgZ2V0Q3JlYXRlZEF0KCkge1xuICAgICAgICByZXR1cm4gY3JlYXRlZEF0O1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldENyZWF0ZWRBdChUaW1lc3RhbXAgY3JlYXRlZEF0KSB7XG4gICAgICAgIHRoaXMuY3JlYXRlZEF0ID0gY3JlYXRlZEF0O1xuICAgIH1cblxuICAgIHB1YmxpYyBpbnQgZ2V0UHJvZHVjdENvdW50KCkge1xuICAgICAgICByZXR1cm4gcHJvZHVjdENvdW50O1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldFByb2R1Y3RDb3VudChpbnQgcHJvZHVjdENvdW50KSB7XG4gICAgICAgIHRoaXMucHJvZHVjdENvdW50ID0gcHJvZHVjdENvdW50O1xuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBTdHJpbmcgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBcIkNhdGVnb3J5e1wiICtcbiAgICAgICAgICAgICAgICBcImlkPVwiICsgaWQgK1xuICAgICAgICAgICAgICAgIFwiLCBuYW1lPSdcIiArIG5hbWUgKyAnXFwnJyArXG4gICAgICAgICAgICAgICAgXCIsIGRlc2NyaXB0aW9uPSdcIiArIGRlc2NyaXB0aW9uICsgJ1xcJycgK1xuICAgICAgICAgICAgICAgIFwiLCBpbWFnZVVybD0nXCIgKyBpbWFnZVVybCArICdcXCcnICtcbiAgICAgICAgICAgICAgICBcIiwgY3JlYXRlZEF0PVwiICsgY3JlYXRlZEF0ICtcbiAgICAgICAgICAgICAgICBcIiwgcHJvZHVjdENvdW50PVwiICsgcHJvZHVjdENvdW50ICtcbiAgICAgICAgICAgICAgICAnfSc7XG4gICAgfVxufVxuLi4uXG5QYXRoOiBDbG90aGVlL3NyYy9tYWluL2phdmEvZGFvL1Byb2R1Y3REQU8uamF2YVxuLi4uXG5cbiAgICAvKipcbiAgICAgKiBMb2FkIGFkZGl0aW9uYWwgaW1hZ2VzIGZvciBhIHByb2R1Y3RcbiAgICAgKiBAcGFyYW0gcHJvZHVjdCBQcm9kdWN0IHRvIGxvYWQgaW1hZ2VzIGZvclxuICAgICAqL1xuICAgIHByaXZhdGUgdm9pZCBsb2FkUHJvZHVjdEltYWdlcyhQcm9kdWN0IHByb2R1Y3QpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIEluIHRoaXMgaW1wbGVtZW50YXRpb24sIHdlIGRvbid0IGhhdmUgYSBzZXBhcmF0ZSBwcm9kdWN0X2ltYWdlcyB0YWJsZVxuICAgICAgICAgICAgLy8gVGhlIG1haW4gaW1hZ2UgaXMgc3RvcmVkIGluIHRoZSBwcm9kdWN0cyB0YWJsZSdzIGltYWdlX3VybCBjb2x1bW5cbiAgICAgICAgICAgIC8vIEZvciBub3csIHdlJ2xsIGp1c3QgdXNlIHRoZSBtYWluIGltYWdlIGFzIHRoZSBvbmx5IGltYWdlXG4gICAgICAgICAgICAvLyBUaGlzIG1ldGhvZCBjYW4gYmUgZXhwYW5kZWQgbGF0ZXIgaWYgeW91IGFkZCBhIHByb2R1Y3RfaW1hZ2VzIHRhYmxlXG5cbiAgICAgICAgICAgIC8vIEFkZCB0aGUgbWFpbiBpbWFnZSBhcyB0aGUgb25seSBpbWFnZSBpZiBpdCBleGlzdHNcbiAgICAgICAgICAgIFN0cmluZyBpbWFnZVVybCA9IHByb2R1Y3QuZ2V0SW1hZ2VVcmwoKTtcbiAgICAgICAgICAgIGlmIChpbWFnZVVybCAhPSBudWxsICYmICFpbWFnZVVybC5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICBwcm9kdWN0LmFkZEFkZGl0aW9uYWxJbWFnZShpbWFnZVVybCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJFcnJvciBpbiBsb2FkUHJvZHVjdEltYWdlczogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgLy8gQ29udGludWUgd2l0aG91dCBhZGRpdGlvbmFsIGltYWdlc1xuICAgICAgICB9XG4gICAgfVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL21vZGVsL0NhdGVnb3J5LmphdmFcbi4uLlxuXG4vKipcbiAqIENhdGVnb3J5IG1vZGVsIGNsYXNzXG4gKi9cbnB1YmxpYyBjbGFzcyBDYXRlZ29yeSB7XG4gICAgcHJpdmF0ZSBpbnQgaWQ7XG4gICAgcHJpdmF0ZSBTdHJpbmcgbmFtZTtcbiAgICBwcml2YXRlIFN0cmluZyBkZXNjcmlwdGlvbjtcbiAgICBwcml2YXRlIFN0cmluZyBpbWFnZVVybDsgLy8gQWRkZWQgZmllbGQgZm9yIGNhdGVnb3J5IGltYWdlXG4gICAgcHJpdmF0ZSBUaW1lc3RhbXAgY3JlYXRlZEF0O1xuICAgIHByaXZhdGUgaW50IHByb2R1Y3RDb3VudDsgLy8gTnVtYmVyIG9mIHByb2R1Y3RzIGluIHRoaXMgY2F0ZWdvcnlcblxuICAgIC8vIERlZmF1bHQgY29uc3RydWN0b3JcbiAgICBwdWJsaWMgQ2F0ZWdvcnkoKSB7XG4gICAgfVxuXG4gICAgLy8gQ29uc3RydWN0b3Igd2l0aCBmaWVsZHNcbiAgICBwdWJsaWMgQ2F0ZWdvcnkoaW50IGlkLCBTdHJpbmcgbmFtZSwgU3RyaW5nIGRlc2NyaXB0aW9uLCBTdHJpbmcgaW1hZ2VVcmwsIFRpbWVzdGFtcCBjcmVhdGVkQXQpIHtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgICAgIHRoaXMuaW1hZ2VVcmwgPSBpbWFnZVVybDtcbiAgICAgICAgdGhpcy5jcmVhdGVkQXQgPSBjcmVhdGVkQXQ7XG4gICAgfVxuXG4gICAgLy8gR2V0dGVycyBhbmQgU2V0dGVyc1xuICAgIHB1YmxpYyBpbnQgZ2V0SWQoKSB7XG4gICAgICAgIHJldHVybiBpZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRJZChpbnQgaWQpIHtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgIH1cblxuICAgIHB1YmxpYyBTdHJpbmcgZ2V0TmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIG5hbWU7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0TmFtZShTdHJpbmcgbmFtZSkge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIH1cblxuICAgIHB1YmxpYyBTdHJpbmcgZ2V0RGVzY3JpcHRpb24oKSB7XG4gICAgICAgIHJldHVybiBkZXNjcmlwdGlvbjtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXREZXNjcmlwdGlvbihTdHJpbmcgZGVzY3JpcHRpb24pIHtcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICAgIH1cblxuICAgIHB1YmxpYyBTdHJpbmcgZ2V0SW1hZ2VVcmwoKSB7XG4gICAgICAgIHJldHVybiBpbWFnZVVybDtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRJbWFnZVVybChTdHJpbmcgaW1hZ2VVcmwpIHtcbiAgICAgICAgdGhpcy5pbWFnZVVybCA9IGltYWdlVXJsO1xuICAgIH1cblxuICAgIHB1YmxpYyBUaW1lc3RhbXAgZ2V0Q3JlYXRlZEF0KCkge1xuICAgICAgICByZXR1cm4gY3JlYXRlZEF0O1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldENyZWF0ZWRBdChUaW1lc3RhbXAgY3JlYXRlZEF0KSB7XG4gICAgICAgIHRoaXMuY3JlYXRlZEF0ID0gY3JlYXRlZEF0O1xuICAgIH1cblxuICAgIHB1YmxpYyBpbnQgZ2V0UHJvZHVjdENvdW50KCkge1xuICAgICAgICByZXR1cm4gcHJvZHVjdENvdW50O1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldFByb2R1Y3RDb3VudChpbnQgcHJvZHVjdENvdW50KSB7XG4gICAgICAgIHRoaXMucHJvZHVjdENvdW50ID0gcHJvZHVjdENvdW50O1xuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBTdHJpbmcgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBcIkNhdGVnb3J5e1wiICtcbiAgICAgICAgICAgICAgICBcImlkPVwiICsgaWQgK1xuICAgICAgICAgICAgICAgIFwiLCBuYW1lPSdcIiArIG5hbWUgKyAnXFwnJyArXG4gICAgICAgICAgICAgICAgXCIsIGRlc2NyaXB0aW9uPSdcIiArIGRlc2NyaXB0aW9uICsgJ1xcJycgK1xuICAgICAgICAgICAgICAgIFwiLCBpbWFnZVVybD0nXCIgKyBpbWFnZVVybCArICdcXCcnICtcbiAgICAgICAgICAgICAgICBcIiwgY3JlYXRlZEF0PVwiICsgY3JlYXRlZEF0ICtcbiAgICAgICAgICAgICAgICBcIiwgcHJvZHVjdENvdW50PVwiICsgcHJvZHVjdENvdW50ICtcbiAgICAgICAgICAgICAgICAnfSc7XG4gICAgfVxufVxuLi4uXG5QYXRoOiBDbG90aGVlL3NyYy9tYWluL3Jlc291cmNlcy9jbG90aGVlLnNxbFxuLS0gRHJvcCBleGlzdGluZyB0YWJsZXMgaWYgbmVlZGVkXG5EUk9QIFRBQkxFIElGIEVYSVNUUyBtZXNzYWdlcywgd2lzaGxpc3QsIGNhcnQsIHJldmlld3MsIHNoaXBwaW5nLCBwYXltZW50cywgb3JkZXJfaXRlbXMsIG9yZGVycywgcHJvZHVjdHMsIGNhdGVnb3JpZXMsIHVzZXJzO1xuXG4tLSBDcmVhdGUgdXNlcnMgdGFibGVcbkNSRUFURSBUQUJMRSB1c2VycyAoXG4gICAgaWQgSU5UIEFVVE9fSU5DUkVNRU5UIFBSSU1BUlkgS0VZLFxuICAgIGZpcnN0X25hbWUgVkFSQ0hBUig1MCkgTk9UIE5VTEwsXG4gICAgbGFzdF9uYW1lIFZBUkNIQVIoNTApIE5PVCBOVUxMLFxuICAgIGVtYWlsIFZBUkNIQVIoMTAwKSBOT1QgTlVMTCBVTklRVUUsXG4gICAgcGFzc3dvcmQgVkFSQ0hBUigyNTUpIE5PVCBOVUxMLFxuICAgIHBob25lIFZBUkNIQVIoMjApLFxuICAgIHJvbGUgVkFSQ0hBUigyMCkgTk9UIE5VTEwgREVGQVVMVCAndXNlcicsXG4gICAgaXNfYWRtaW4gQk9PTEVBTiBOT1QgTlVMTCBERUZBVUxUIEZBTFNFLFxuICAgIHByb2ZpbGVfaW1hZ2UgVkFSQ0hBUigyNTUpLFxuICAgIGNyZWF0ZWRfYXQgVElNRVNUQU1QIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAsXG4gICAgdXBkYXRlZF9hdCBUSU1FU1RBTVAgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCBPTiBVUERBVEUgQ1VSUkVOVF9USU1FU1RBTVBcbik7XG4uLi5cblxuLS0gQ3JlYXRlIGNhdGVnb3JpZXMgdGFibGVcbkNSRUFURSBUQUJMRSBjYXRlZ29yaWVzIChcbiAgICBpZCBJTlQgQVVUT19JTkNSRU1FTlQgUFJJTUFSWSBLRVksXG4gICAgbmFtZSBWQVJDSEFSKDUwKSBOT1QgTlVMTCBVTklRVUUsXG4gICAgZGVzY3JpcHRpb24gVEVYVCxcbiAgICBpbWFnZV91cmwgVkFSQ0hBUigyNTUpLFxuICAgIGNyZWF0ZWRfYXQgVElNRVNUQU1QIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVBcbik7XG5cbklOU0VSVCBJTlRPIGNhdGVnb3JpZXMgKG5hbWUsIGRlc2NyaXB0aW9uKSBWQUxVRVNcbignTWVuJywgJ01lbicncyBjbG90aGluZyBhbmQgYWNjZXNzb3JpZXMnKSxcbignV29tZW4nLCAnV29tZW4nJ3MgY2xvdGhpbmcgYW5kIGFjY2Vzc29yaWVzJyksXG4oJ0tpZHMnLCAnQ2hpbGRyZW4nJ3MgY2xvdGhpbmcgYW5kIGFjY2Vzc29yaWVzJyksXG4oJ0FjY2Vzc29yaWVzJywgJ0Zhc2hpb24gYWNjZXNzb3JpZXMgZm9yIGFsbCcpO1xuXG4tLSBDcmVhdGUgcHJvZHVjdHMgdGFibGVcbkNSRUFURSBUQUJMRSBwcm9kdWN0cyAoXG4gICAgaWQgSU5UIEFVVE9fSU5DUkVNRU5UIFBSSU1BUlkgS0VZLFxuICAgIG5hbWUgVkFSQ0hBUigxMDApIE5PVCBOVUxMLFxuICAgIGRlc2NyaXB0aW9uIFRFWFQsXG4gICAgcHJpY2UgREVDSU1BTCgxMCwgMikgTk9UIE5VTEwsXG4gICAgc3RvY2sgSU5UIE5PVCBOVUxMIERFRkFVTFQgMCxcbiAgICBjYXRlZ29yeSBWQVJDSEFSKDUwKSBOT1QgTlVMTCxcbiAgICB0eXBlIFZBUkNIQVIoNTApLFxuICAgIGltYWdlX3VybCBWQVJDSEFSKDI1NSksXG4gICAgZmVhdHVyZWQgQk9PTEVBTiBERUZBVUxUIEZBTFNFLFxuICAgIGNyZWF0ZWRfYXQgVElNRVNUQU1QIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAsXG4gICAgdXBkYXRlZF9hdCBUSU1FU1RBTVAgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCBPTiBVUERBVEUgQ1VSUkVOVF9USU1FU1RBTVBcbik7XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvZGFvL0NhdGVnb3J5REFPLmphdmFcbi4uLlxuXG4gICAgLyoqXG4gICAgICogR2V0IGFsbCBjYXRlZ29yaWVzXG4gICAgICogQHJldHVybiBMaXN0IG9mIGFsbCBjYXRlZ29yaWVzXG4gICAgICovXG4gICAgcHVibGljIExpc3Q8Q2F0ZWdvcnk+IGdldEFsbENhdGVnb3JpZXMoKSB7XG4gICAgICAgIExpc3Q8Q2F0ZWdvcnk+IGNhdGVnb3JpZXMgPSBuZXcgQXJyYXlMaXN0PD4oKTtcblxuICAgICAgICAvLyBTaW1wbGlmaWVkIHF1ZXJ5IHRvIGVuc3VyZSB3ZSBnZXQgYWxsIGNhdGVnb3JpZXMgcmVnYXJkbGVzcyBvZiBwcm9kdWN0c1xuICAgICAgICBTdHJpbmcgcXVlcnkgPSBcIlNFTEVDVCAqIEZST00gY2F0ZWdvcmllcyBPUkRFUiBCWSBuYW1lXCI7XG5cbiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRXhlY3V0aW5nIGdldEFsbENhdGVnb3JpZXMgcXVlcnk6IFwiICsgcXVlcnkpO1xuXG4gICAgICAgIHRyeSAoQ29ubmVjdGlvbiBjb25uID0gREJDb25uZWN0aW9uLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgICBTdGF0ZW1lbnQgc3RtdCA9IGNvbm4uY3JlYXRlU3RhdGVtZW50KCk7XG4gICAgICAgICAgICAgUmVzdWx0U2V0IHJzID0gc3RtdC5leGVjdXRlUXVlcnkocXVlcnkpKSB7XG5cbiAgICAgICAgICAgIGludCBjb3VudCA9IDA7XG4gICAgICAgICAgICB3aGlsZSAocnMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgY291bnQrKztcbiAgICAgICAgICAgICAgICBDYXRlZ29yeSBjYXRlZ29yeSA9IGV4dHJhY3RDYXRlZ29yeUZyb21SZXN1bHRTZXQocnMpO1xuICAgICAgICAgICAgICAgIC8vIFNldCBwcm9kdWN0IGNvdW50IHRvIDAgYnkgZGVmYXVsdFxuICAgICAgICAgICAgICAgIGNhdGVnb3J5LnNldFByb2R1Y3RDb3VudCgwKTtcbiAgICAgICAgICAgICAgICBjYXRlZ29yaWVzLmFkZChjYXRlZ29yeSk7XG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRm91bmQgY2F0ZWdvcnk6IFwiICsgY2F0ZWdvcnkuZ2V0TmFtZSgpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiVG90YWwgY2F0ZWdvcmllcyBmb3VuZDogXCIgKyBjb3VudCk7XG5cbiAgICAgICAgICAgIC8vIE5vdyBnZXQgcHJvZHVjdCBjb3VudHMgaW4gYSBzZXBhcmF0ZSBxdWVyeVxuICAgICAgICAgICAgaWYgKCFjYXRlZ29yaWVzLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgIFN0cmluZyBjb3VudFF1ZXJ5ID0gXCJTRUxFQ1QgY2F0ZWdvcnksIENPVU5UKCopIGFzIGNvdW50IEZST00gcHJvZHVjdHMgR1JPVVAgQlkgY2F0ZWdvcnlcIjtcbiAgICAgICAgICAgICAgICB0cnkgKFN0YXRlbWVudCBjb3VudFN0bXQgPSBjb25uLmNyZWF0ZVN0YXRlbWVudCgpO1xuICAgICAgICAgICAgICAgICAgICAgUmVzdWx0U2V0IGNvdW50UnMgPSBjb3VudFN0bXQuZXhlY3V0ZVF1ZXJ5KGNvdW50UXVlcnkpKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGNvdW50UnMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmcgY2F0ZWdvcnlOYW1lID0gY291bnRScy5nZXRTdHJpbmcoXCJjYXRlZ29yeVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGludCBwcm9kdWN0Q291bnQgPSBjb3VudFJzLmdldEludChcImNvdW50XCIpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdGhlIHByb2R1Y3QgY291bnQgZm9yIHRoZSBtYXRjaGluZyBjYXRlZ29yeVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChDYXRlZ29yeSBjYXRlZ29yeSA6IGNhdGVnb3JpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2F0ZWdvcnkuZ2V0TmFtZSgpLmVxdWFscyhjYXRlZ29yeU5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5LnNldFByb2R1Y3RDb3VudChwcm9kdWN0Q291bnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4uLi5cblBhdGg6IHNyYy9tYWluL3Jlc291cmNlcy9jbG90aGVlLnNxbFxuLS0gRHJvcCBleGlzdGluZyB0YWJsZXMgaWYgbmVlZGVkXG5EUk9QIFRBQkxFIElGIEVYSVNUUyBtZXNzYWdlcywgd2lzaGxpc3QsIGNhcnQsIHJldmlld3MsIHNoaXBwaW5nLCBwYXltZW50cywgb3JkZXJfaXRlbXMsIG9yZGVycywgcHJvZHVjdHMsIGNhdGVnb3JpZXMsIHVzZXJzO1xuXG4tLSBDcmVhdGUgdXNlcnMgdGFibGVcbkNSRUFURSBUQUJMRSB1c2VycyAoXG4gICAgaWQgSU5UIEFVVE9fSU5DUkVNRU5UIFBSSU1BUlkgS0VZLFxuICAgIGZpcnN0X25hbWUgVkFSQ0hBUig1MCkgTk9UIE5VTEwsXG4gICAgbGFzdF9uYW1lIFZBUkNIQVIoNTApIE5PVCBOVUxMLFxuICAgIGVtYWlsIFZBUkNIQVIoMTAwKSBOT1QgTlVMTCBVTklRVUUsXG4gICAgcGFzc3dvcmQgVkFSQ0hBUigyNTUpIE5PVCBOVUxMLFxuICAgIHBob25lIFZBUkNIQVIoMjApLFxuICAgIHJvbGUgVkFSQ0hBUigyMCkgTk9UIE5VTEwgREVGQVVMVCAndXNlcicsXG4gICAgaXNfYWRtaW4gQk9PTEVBTiBOT1QgTlVMTCBERUZBVUxUIEZBTFNFLFxuICAgIHByb2ZpbGVfaW1hZ2UgVkFSQ0hBUigyNTUpLFxuICAgIGNyZWF0ZWRfYXQgVElNRVNUQU1QIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAsXG4gICAgdXBkYXRlZF9hdCBUSU1FU1RBTVAgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCBPTiBVUERBVEUgQ1VSUkVOVF9USU1FU1RBTVBcbik7XG5cbklOU0VSVCBJTlRPIHVzZXJzIChmaXJzdF9uYW1lLCBsYXN0X25hbWUsIGVtYWlsLCBwYXNzd29yZCwgcGhvbmUsIHJvbGUsIGlzX2FkbWluLCBwcm9maWxlX2ltYWdlKSBWQUxVRVNcbignUmFtJywgJ0JhaGFkdXInLCAncmFtQGV4YW1wbGUuY29tJywgJ3Bhc3N3b3JkMTIzJywgJzk4MDAwMDAwMDEnLCAndXNlcicsIEZBTFNFLCAncHJvZmlsZXMvcmFtLmpwZycpLFxuKCdTaXRhJywgJ0RldmknLCAnc2l0YUBleGFtcGxlLmNvbScsICdwYXNzd29yZDQ1NicsICc5ODAwMDAwMDAyJywgJ2FkbWluJywgVFJVRSwgJ3Byb2ZpbGVzL3NpdGEuanBnJyksXG4oJ0dvcGFsJywgJ1RoYXBhJywgJ2dvcGFsQGV4YW1wbGUuY29tJywgJ3Bhc3N3b3JkNzg5JywgJzk4MDAwMDAwMDMnLCAndXNlcicsIEZBTFNFLCAncHJvZmlsZXMvZ29wYWwuanBnJyksXG5cblxuLS0gQ3JlYXRlIGNhdGVnb3JpZXMgdGFibGVcbkNSRUFURSBUQUJMRSBjYXRlZ29yaWVzIChcbiAgICBpZCBJTlQgQVVUT19JTkNSRU1FTlQgUFJJTUFSWSBLRVksXG4gICAgbmFtZSBWQVJDSEFSKDUwKSBOT1QgTlVMTCBVTklRVUUsXG4gICAgZGVzY3JpcHRpb24gVEVYVCxcbiAgICBpbWFnZV91cmwgVkFSQ0hBUigyNTUpLFxuICAgIGNyZWF0ZWRfYXQgVElNRVNUQU1QIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVBcbik7XG5cbklOU0VSVCBJTlRPIGNhdGVnb3JpZXMgKG5hbWUsIGRlc2NyaXB0aW9uKSBWQUxVRVNcbignTWVuJywgJ01lbicncyBjbG90aGluZyBhbmQgYWNjZXNzb3JpZXMnKSxcbignV29tZW4nLCAnV29tZW4nJ3MgY2xvdGhpbmcgYW5kIGFjY2Vzc29yaWVzJyksXG4oJ0tpZHMnLCAnQ2hpbGRyZW4nJ3MgY2xvdGhpbmcgYW5kIGFjY2Vzc29yaWVzJyksXG4oJ0FjY2Vzc29yaWVzJywgJ0Zhc2hpb24gLi4uIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiY2EwYmRhMjgtODQxZS00MWVjLThjNjItNTY1NDhlYzU3NGFiO3Rvb2x1X3ZydHhfMDFFQWl5NXRhNVEzMlBSMWRnaG1KaWQxIjp7InJlcXVlc3RJZCI6ImNhMGJkYTI4LTg0MWUtNDFlYy04YzYyLTU2NTQ4ZWM1NzRhYiIsInRvb2xVc2VJZCI6InRvb2x1X3ZydHhfMDFFQWl5NXRhNVEzMlBSMWRnaG1KaWQxIiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiVGhlIGZvbGxvd2luZyBjb2RlIHNlY3Rpb25zIHdlcmUgcmV0cmlldmVkOlxuUGF0aDogc3JjL21haW4vd2ViYXBwL2luZGV4LmpzcFxuLi4uXG5cbiAgICAgICAgPGRpdiBjbGFzcz1cImNhdGVnb3JpZXMtZ3JpZFwiPlxuICAgICAgICAgICAgPCVcbiAgICAgICAgICAgIC8vIEdldCBjYXRlZ29yaWVzIGZyb20gZGF0YWJhc2VcbiAgICAgICAgICAgIENhdGVnb3J5REFPIGNhdGVnb3J5REFPID0gbmV3IENhdGVnb3J5REFPKCk7XG4gICAgICAgICAgICBMaXN0PENhdGVnb3J5PiBjYXRlZ29yaWVzID0gY2F0ZWdvcnlEQU8uZ2V0QWxsQ2F0ZWdvcmllcygpO1xuXG4gICAgICAgICAgICAvLyBEaXNwbGF5IHVwIHRvIDYgY2F0ZWdvcmllc1xuICAgICAgICAgICAgaW50IG1heENhdGVnb3JpZXMgPSBNYXRoLm1pbihjYXRlZ29yaWVzLnNpemUoKSwgNik7XG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG1heENhdGVnb3JpZXM7IGkrKykge1xuICAgICAgICAgICAgICAgIENhdGVnb3J5IGNhdGVnb3J5ID0gY2F0ZWdvcmllcy5nZXQoaSk7XG4gICAgICAgICAgICAgICAgU3RyaW5nIGltYWdlVXJsID0gY2F0ZWdvcnkuZ2V0SW1hZ2VVcmwoKTtcbiAgICAgICAgICAgICAgICAvLyBVc2UgZGVmYXVsdCBpbWFnZSBpZiBubyBpbWFnZSBpcyBzZXRcbiAgICAgICAgICAgICAgICBpZiAoaW1hZ2VVcmwgPT0gbnVsbCB8fCBpbWFnZVVybC5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRGVmYXVsdCBpbWFnZXMgYmFzZWQgb24gY2F0ZWdvcnkgaW5kZXhcbiAgICAgICAgICAgICAgICAgICAgU3RyaW5nW10gZGVmYXVsdEltYWdlcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1ODEwNDQ3Nzc1NTAtNGNmYTYwNzA3YzAzP2l4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTc3MiZxPTgwXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNjE3MTM3OTY4NDI3LTg1OTI0YzgwMGEyMj9peGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0QmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz03NzQmcT04MFwiLFxuLi4uXG4gICAgICAgICAgICAgICAgICAgIGltYWdlVXJsID0gZGVmYXVsdEltYWdlc1tpICUgZGVmYXVsdEltYWdlcy5sZW5ndGhdO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFVzZSB0aGUgaW1hZ2UgZnJvbSB0aGUgZGF0YWJhc2VcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VVcmwgPSByZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9cIiArIGltYWdlVXJsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICU+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2F0ZWdvcnktY2FyZFwiPlxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiPCU9IGltYWdlVXJsICU+XCIgYWx0PVwiPCU9IGNhdGVnb3J5LmdldE5hbWUoKSAlPlwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXRlZ29yeS1jb250ZW50XCI+XG4gICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzcz1cImNhdGVnb3J5LXRpdGxlXCI+PCU9IGNhdGVnb3J5LmdldE5hbWUoKSAlPjwvaDM+XG4gICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCJQcm9kdWN0U2VydmxldD9jYXRlZ29yeT08JT0gY2F0ZWdvcnkuZ2V0SWQoKSAlPlwiIGNsYXNzPVwiY2F0ZWdvcnktbGlua1wiPlNob3AgTm93IDxpIGNsYXNzPVwiZmFzIGZhLWFycm93LXJpZ2h0XCI+PC9pPjwvYT5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPCUgfSAlPlxuXG4gICAgICAgICAgICA8JSBpZiAoY2F0ZWdvcmllcy5pc0VtcHR5KCkpIHsgJT5cbiAgICAgICAgICAgIDwhLS0gRGVmYXVsdCBjYXRlZ29yaWVzIGlmIG5vIGNhdGVnb3JpZXMgaW4gZGF0YWJhc2UgLS0+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2F0ZWdvcnktY2FyZFwiPlxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1ODEwNDQ3Nzc1NTAtNGNmYTYwNzA3YzAzP2l4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTc3MiZxPTgwXCIgYWx0PVwiV29tZW4ncyBGYXNoaW9uXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhdGVnb3J5LWNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPVwiY2F0ZWdvcnktdGl0bGVcIj5Xb21lbidzIEZhc2hpb248L2gzPlxuICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiUHJvZHVjdFNlcnZsZXQ/Y2F0ZWdvcnk9d29tZW5cIiBjbGFzcz1cImNhdGVnb3J5LWxpbmtcIj5TaG9wIE5vdyA8aSBjbGFzcz1cImZhcyBmYS1hcnJvdy1yaWdodFwiPjwvaT48L2E+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhdGVnb3J5LWNhcmRcIj5cbiAgICAgICAgICAgICAgICA8aW1nIHNyYz1cImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNjE3MTM3OTY4NDI3LTg1OTI0YzgwMGEyMj9peGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0QmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz03NzQmcT04MFwiIGFsdD1cIk1lbidzIEZhc2hpb25cIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2F0ZWdvcnktY29udGVudFwiPlxuICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3M9XCJjYXRlZ29yeS10aXRsZVwiPk1lbidzIEZhc2hpb248L2gzPlxuICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiUHJvZHVjdFNlcnZsZXQ/Y2F0ZWdvcnk9bWVuXCIgY2xhc3M9XCJjYXRlZ29yeS1saW5rXCI+U2hvcCBOb3cgPGkgY2xhc3M9XCJmYXMgZmEtYXJyb3ctcmlnaHRcIj48L2k+PC9hPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXRlZ29yeS1jYXJkXCI+XG4gICAgICAgICAgICAgICAgPGltZyBzcmM9XCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTU4NDkxNzg2NTQ0Mi1kZTg5ZGY3NmFmZDM/aXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9ODcwJnE9ODBcIiBhbHQ9XCJBY2Nlc3Nvcmllc1wiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXRlZ29yeS1jb250ZW50XCI+XG4gICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzcz1cImNhdGVnb3J5LXRpdGxlXCI+QWNjZXNzb3JpZXM8L2gzPlxuICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiUHJvZHVjdFNlcnZsZXQ/Y2F0ZWdvcnk9YWNjZXNzb3JpZXNcIiBjbGFzcz1cImNhdGVnb3J5LWxpbmtcIj5TaG9wIE5vdyA8aSBjbGFzcz1cImZhcyBmYS1hcnJvdy1yaWdodFwiPjwvaT48L2E+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwlIH0gJT5cbiAgICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG48L3NlY3Rpb24+XG5cbjwhLS0gRmVhdHVyZWQgUHJvZHVjdHMgLS0+XG48c2VjdGlvbiBjbGFzcz1cImZlYXR1cmVkLXByb2R1Y3RzXCI+XG4gICAgPGRpdiBjbGFzcz1cImNvbnRhaW5lclwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwic2VjdGlvbi10aXRsZVwiPlxuICAgICAgICAgICAgPGgyPkZlYXR1cmVkIFByb2R1Y3RzPC9oMj5cbiAgICAgICAgPC9kaXY+XG4uLi5cblBhdGg6IENsb3RoZWUvc3JjL21haW4vd2ViYXBwL2luZGV4LmpzcFxuLi4uXG5cbjwlXG4gICAgLy8gQ3JlYXRlIHNsaWRlcyBkaXJlY3RseSBpbiB0aGUgSlNQXG4gICAgTGlzdDxTbGlkZT4gc2xpZGVzID0gbmV3IEFycmF5TGlzdDw+KCk7XG5cbiAgICAvLyBBZGQgc2xpZGVzXG4gICAgc2xpZGVzLmFkZChuZXcgU2xpZGUoXG4gICAgICAgIFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE0OTA0ODE2NTE4NzEtYWI2OGRlMjVkNDNkP2l4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTE3NzAmcT04MFwiLFxuICAgICAgICBcIkVsZXZhdGUgWW91ciBTdHlsZVwiLFxuICAgICAgICBcIkRpc2NvdmVyIHRoZSBsYXRlc3QgdHJlbmRzIGluIGZhc2hpb24gYW5kIGV4cHJlc3MgeW91cnNlbGYgd2l0aCBvdXIgcHJlbWl1bSBjb2xsZWN0aW9uIG9mIGNsb3RoaW5nIGFuZCBhY2Nlc3Nvcmllcy5cIixcbiAgICAgICAgXCJQcm9kdWN0U2VydmxldD9jYXRlZ29yeT1uZXdcIixcbiAgICAgICAgXCJTaG9wIE5vd1wiLFxuICAgICAgICBcIlByb2R1Y3RTZXJ2bGV0P2NhdGVnb3J5PXNhbGVcIixcbiAgICAgICAgXCJWaWV3IFNhbGVcIlxuICAgICkpO1xuLi4uXG5cbiAgICAgICAgPGRpdiBjbGFzcz1cImNhdGVnb3JpZXMtZ3JpZFwiPlxuICAgICAgICAgICAgPCVcbiAgICAgICAgICAgIC8vIEdldCBjYXRlZ29yaWVzIGZyb20gZGF0YWJhc2VcbiAgICAgICAgICAgIENhdGVnb3J5REFPIGNhdGVnb3J5REFPID0gbmV3IENhdGVnb3J5REFPKCk7XG4gICAgICAgICAgICBMaXN0PENhdGVnb3J5PiBjYXRlZ29yaWVzID0gY2F0ZWdvcnlEQU8uZ2V0QWxsQ2F0ZWdvcmllcygpO1xuXG4gICAgICAgICAgICAvLyBEaXNwbGF5IHVwIHRvIDYgY2F0ZWdvcmllc1xuICAgICAgICAgICAgaW50IG1heENhdGVnb3JpZXMgPSBNYXRoLm1pbihjYXRlZ29yaWVzLnNpemUoKSwgNik7XG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG1heENhdGVnb3JpZXM7IGkrKykge1xuICAgICAgICAgICAgICAgIENhdGVnb3J5IGNhdGVnb3J5ID0gY2F0ZWdvcmllcy5nZXQoaSk7XG4gICAgICAgICAgICAgICAgU3RyaW5nIGltYWdlVXJsID0gY2F0ZWdvcnkuZ2V0SW1hZ2VVcmwoKTtcbiAgICAgICAgICAgICAgICAvLyBVc2UgZGVmYXVsdCBpbWFnZSBpZiBubyBpbWFnZSBpcyBzZXRcbiAgICAgICAgICAgICAgICBpZiAoaW1hZ2VVcmwgPT0gbnVsbCB8fCBpbWFnZVVybC5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRGVmYXVsdCBpbWFnZXMgYmFzZWQgb24gY2F0ZWdvcnkgaW5kZXhcbiAgICAgICAgICAgICAgICAgICAgU3RyaW5nW10gZGVmYXVsdEltYWdlcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1ODEwNDQ3Nzc1NTAtNGNmYTYwNzA3YzAzP2l4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTc3MiZxPTgwXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNjE3MTM3OTY4NDI3LTg1OTI0YzgwMGEyMj9peGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0QmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz03NzQmcT04MFwiLFxuLi4uXG4gICAgICAgICAgICAgICAgICAgIGltYWdlVXJsID0gZGVmYXVsdEltYWdlc1tpICUgZGVmYXVsdEltYWdlcy5sZW5ndGhdO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFVzZSB0aGUgaW1hZ2UgZnJvbSB0aGUgZGF0YWJhc2VcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VVcmwgPSByZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9cIiArIGltYWdlVXJsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICU+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2F0ZWdvcnktY2FyZFwiPlxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiPCU9IGltYWdlVXJsICU+XCIgYWx0PVwiPCU9IGNhdGVnb3J5LmdldE5hbWUoKSAlPlwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXRlZ29yeS1jb250ZW50XCI+XG4gICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzcz1cImNhdGVnb3J5LXRpdGxlXCI+PCU9IGNhdGVnb3J5LmdldE5hbWUoKSAlPjwvaDM+XG4gICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCJQcm9kdWN0U2VydmxldD9jYXRlZ29yeT08JT0gY2F0ZWdvcnkuZ2V0SWQoKSAlPlwiIGNsYXNzPVwiY2F0ZWdvcnktbGlua1wiPlNob3AgTm93IDxpIGNsYXNzPVwiZmFzIGZhLWFycm93LXJpZ2h0XCI+PC9pPjwvYT5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPCUgfSAlPlxuXG4gICAgICAgICAgICA8JSBpZiAoY2F0ZWdvcmllcy5pc0VtcHR5KCkpIHsgJT5cbiAgICAgICAgICAgIDwhLS0gRGVmYXVsdCBjYXRlZ29yaWVzIGlmIG5vIGNhdGVnb3JpZXMgaW4gZGF0YWJhc2UgLS0+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2F0ZWdvcnktY2FyZFwiPlxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1ODEwNDQ3Nzc1NTAtNGNmYTYwNzA3YzAzP2l4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTc3MiZxPTgwXCIgYWx0PVwiV29tZW4ncyBGYXNoaW9uXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhdGVnb3J5LWNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPVwiY2F0ZWdvcnktdGl0bGVcIj5Xb21lbidzIEZhc2hpb248L2gzPlxuICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiUHJvZHVjdFNlcnZsZXQ/Y2F0ZWdvcnk9d29tZW5cIiBjbGFzcz1cImNhdGVnb3J5LWxpbmtcIj5TaG9wIE5vdyA8aSBjbGFzcz1cImZhcyBmYS1hcnJvdy1yaWdodFwiPjwvaT48L2E+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhdGVnb3J5LWNhcmRcIj5cbiAgICAgICAgICAgICAgICA8aW1nIHNyYz1cImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNjE3MTM3OTY4NDI3LTg1OTI0YzgwMGEyMj9peGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0QmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz03NzQmcT04MFwiIGFsdD1cIk1lbidzIEZhc2hpb25cIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2F0ZWdvcnktY29udGVudFwiPlxuICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3M9XCJjYXRlZ29yeS10aXRsZVwiPk1lbidzIEZhc2hpb248L2gzPlxuICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiUHJvZHVjdFNlcnZsZXQ/Y2F0ZWdvcnk9bWVuXCIgY2xhc3M9XCJjYXRlZ29yeS1saW5rXCI+U2hvcCBOb3cgPGkgY2xhc3M9XCJmYXMgZmEtYXJyb3ctcmlnaHRcIj48L2k+PC9hPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXRlZ29yeS1jYXJkXCI+XG4gICAgICAgICAgICAgICAgPGltZyBzcmM9XCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTU4NDkxNzg2NTQ0Mi1kZTg5ZGY3NmFmZDM/aXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9ODcwJnE9ODBcIiBhbHQ9XCJBY2Nlc3Nvcmllc1wiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXRlZ29yeS1jb250ZW50XCI+XG4gICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzcz1cImNhdGVnb3J5LXRpdGxlXCI+QWNjZXNzb3JpZXM8L2gzPlxuICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiUHJvZHVjdFNlcnZsZXQ/Y2F0ZWdvcnk9YWNjZXNzb3JpZXNcIiBjbGFzcz1cImNhdGVnb3J5LWxpbmtcIj5TaG9wIE5vdyA8aSBjbGFzcz1cImZhcyBmYS1hcnJvdy1yaWdodFwiPjwvaT48L2E+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwlIH0gJT5cbiAgICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG48L3NlY3Rpb24+XG5cbjwhLS0gRmVhdHVyZWQgUHJvZHVjdHMgLS0+XG48c2VjdGlvbiBjbGFzcz1cImZlYXR1cmVkLXByb2R1Y3RzXCI+XG4gICAgPGRpdiBjbGFzcz1cImNvbnRhaW5lclwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwic2VjdGlvbi10aXRsZVwiPlxuICAgICAgICAgICAgPGgyPkZlYXR1cmVkIFByb2R1Y3RzPC9oMj5cbiAgICAgICAgPC9kaXY+XG4uLi5cblBhdGg6IENsb3RoZWUvc3JjL21haW4vd2ViYXBwL2NhdGVnb3JpZXMuanNwXG4uLi5cblxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInJvd1wiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtM1wiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2F0ZWdvcnktY2FyZCBjbGlja2FibGVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCJwcm9kdWN0cy5qc3A/Y2F0ZWdvcnk9YWVzdGhldGljJnR5cGU9Y2FzdWFsXCIgY2xhc3M9XCJjYXJkLWxpbmtcIj48L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2F0ZWdvcnktaW1hZ2VcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTgxMDQ0Nzc3NTUwLTRjZmE2MDcwN2MwMz9peGxpYj1yYi00LjAuMyZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTc3MiZxPTgwXCIgYWx0PVwiQ2FzdWFsIEFlc3RoZXRpY1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2F0ZWdvcnktY29udGVudFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMz5DYXN1YWwgQWVzdGhldGljPC9oMz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5FZmZvcnRsZXNzbHkgc3R5bGlzaCBldmVyeWRheSB3ZWFyIHdpdGggYWVzdGhldGljIGFwcGVhbC48L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJjYXRlZ29yeS1idG5cIj5FeHBsb3JlPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuLi4uXG5QYXRoOiBDbG90aGVlL3NyYy9tYWluL2phdmEvZGFvL0NhdGVnb3J5REFPLmphdmFcbi4uLlxuXG4gICAgLyoqXG4gICAgICogQWRkIGEgbmV3IGNhdGVnb3J5IHRvIHRoZSBkYXRhYmFzZVxuICAgICAqIEBwYXJhbSBjYXRlZ29yeSBDYXRlZ29yeSBvYmplY3QgdG8gYWRkXG4gICAgICogQHJldHVybiB0cnVlIGlmIHN1Y2Nlc3NmdWwsIGZhbHNlIG90aGVyd2lzZVxuICAgICAqL1xuICAgIHB1YmxpYyBib29sZWFuIGFkZENhdGVnb3J5KENhdGVnb3J5IGNhdGVnb3J5KSB7XG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIj09PT09IEFERElORyBDQVRFR09SWSA9PT09PVwiKTtcbiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQ2F0ZWdvcnkgbmFtZTogXCIgKyBjYXRlZ29yeS5nZXROYW1lKCkpO1xuICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJDYXRlZ29yeSBkZXNjcmlwdGlvbjogXCIgKyBjYXRlZ29yeS5nZXREZXNjcmlwdGlvbigpKTtcbiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQ2F0ZWdvcnkgaW1hZ2VVcmw6IFwiICsgY2F0ZWdvcnkuZ2V0SW1hZ2VVcmwoKSk7XG5cbiAgICAgICAgLy8gRmlyc3QgY2hlY2sgaWYgYSBjYXRlZ29yeSB3aXRoIHRoaXMgbmFtZSBhbHJlYWR5IGV4aXN0c1xuICAgICAgICBpZiAoY2F0ZWdvcnlFeGlzdHMoY2F0ZWdvcnkuZ2V0TmFtZSgpKSkge1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQ2F0ZWdvcnkgYWxyZWFkeSBleGlzdHM6IFwiICsgY2F0ZWdvcnkuZ2V0TmFtZSgpKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRyeSBhIHNpbXBsZXIgcXVlcnkgd2l0aG91dCB0aGUgaW1hZ2VfdXJsIGZpZWxkXG4gICAgICAgIFN0cmluZyBxdWVyeSA9IFwiSU5TRVJUIElOVE8gY2F0ZWdvcmllcyAobmFtZSwgZGVzY3JpcHRpb24pIFZBTFVFUyAoPywgPylcIjtcbi4uLlxuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIGNhdGVnb3J5LmdldE5hbWUoKSk7XG4gICAgICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMiwgY2F0ZWdvcnkuZ2V0RGVzY3JpcHRpb24oKSk7XG5cbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJFeGVjdXRpbmcgdXBkYXRlLi4uXCIpO1xuICAgICAgICAgICAgICAgIGludCByb3dzQWZmZWN0ZWQgPSBzdG10LmV4ZWN1dGVVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJSb3dzIGFmZmVjdGVkOiBcIiArIHJvd3NBZmZlY3RlZCk7XG5cbiAgICAgICAgICAgICAgICBpZiAocm93c0FmZmVjdGVkID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJHZXR0aW5nIGdlbmVyYXRlZCBrZXlzLi4uXCIpO1xuICAgICAgICAgICAgICAgICAgICBSZXN1bHRTZXQgcnMgPSBzdG10LmdldEdlbmVyYXRlZEtleXMoKTtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChycy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnQgaWQgPSBycy5nZXRJbnQoMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiR2VuZXJhdGVkIElEOiBcIiArIGlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeS5zZXRJZChpZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIk5vIGdlbmVyYXRlZCBrZXlzIHJldHVybmVkXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJzICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBycy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICBpZiAoc3RtdCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0bXQuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGNvbm4gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBjb25uLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuLi4uXG5cbiAgICAvKipcbiAgICAgKiBHZXQgYWxsIGNhdGVnb3JpZXNcbiAgICAgKiBAcmV0dXJuIExpc3Qgb2YgYWxsIGNhdGVnb3JpZXNcbiAgICAgKi9cbiAgICBwdWJsaWMgTGlzdDxDYXRlZ29yeT4gZ2V0QWxsQ2F0ZWdvcmllcygpIHtcbiAgICAgICAgTGlzdDxDYXRlZ29yeT4gY2F0ZWdvcmllcyA9IG5ldyBBcnJheUxpc3Q8PigpO1xuXG4gICAgICAgIC8vIFNpbXBsaWZpZWQgcXVlcnkgdG8gZW5zdXJlIHdlIGdldCBhbGwgY2F0ZWdvcmllcyByZWdhcmRsZXNzIG9mIHByb2R1Y3RzXG4gICAgICAgIFN0cmluZyBxdWVyeSA9IFwiU0VMRUNUICogRlJPTSBjYXRlZ29yaWVzIE9SREVSIEJZIG5hbWVcIjtcblxuICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJFeGVjdXRpbmcgZ2V0QWxsQ2F0ZWdvcmllcyBxdWVyeTogXCIgKyBxdWVyeSk7XG5cbiAgICAgICAgdHJ5IChDb25uZWN0aW9uIGNvbm4gPSBEQkNvbm5lY3Rpb24uZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgIFN0YXRlbWVudCBzdG10ID0gY29ubi5jcmVhdGVTdGF0ZW1lbnQoKTtcbiAgICAgICAgICAgICBSZXN1bHRTZXQgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeShxdWVyeSkpIHtcblxuICAgICAgICAgICAgaW50IGNvdW50ID0gMDtcbiAgICAgICAgICAgIHdoaWxlIChycy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICBjb3VudCsrO1xuICAgICAgICAgICAgICAgIENhdGVnb3J5IGNhdGVnb3J5ID0gZXh0cmFjdENhdGVnb3J5RnJvbVJlc3VsdFNldChycyk7XG4gICAgICAgICAgICAgICAgLy8gU2V0IHByb2R1Y3QgY291bnQgdG8gMCBieSBkZWZhdWx0XG4gICAgICAgICAgICAgICAgY2F0ZWdvcnkuc2V0UHJvZHVjdENvdW50KDApO1xuICAgICAgICAgICAgICAgIGNhdGVnb3JpZXMuYWRkKGNhdGVnb3J5KTtcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJGb3VuZCBjYXRlZ29yeTogXCIgKyBjYXRlZ29yeS5nZXROYW1lKCkpO1xuICAgICAgICAgICAgfVxuLi4uXG5QYXRoOiBDbG90aGVlL3NyYy9tYWluL2phdmEvbW9kZWwvQ2F0ZWdvcnkuamF2YVxucGFja2FnZSBtb2RlbDtcblxuaW1wb3J0IGphdmEuc3FsLlRpbWVzdGFtcDtcbmltcG9ydCBqYXZhLnV0aWwuRGF0ZTtcblxuLyoqXG4gKiBDYXRlZ29yeSBtb2RlbCBjbGFzc1xuICovXG5wdWJsaWMgY2xhc3MgQ2F0ZWdvcnkge1xuICAgIHByaXZhdGUgaW50IGlkO1xuICAgIHByaXZhdGUgU3RyaW5nIG5hbWU7XG4gICAgcHJpdmF0ZSBTdHJpbmcgZGVzY3JpcHRpb247XG4gICAgcHJpdmF0ZSBTdHJpbmcgaW1hZ2VVcmw7IC8vIEFkZGVkIGZpZWxkIGZvciBjYXRlZ29yeSBpbWFnZVxuICAgIHByaXZhdGUgVGltZXN0YW1wIGNyZWF0ZWRBdDtcbiAgICBwcml2YXRlIGludCBwcm9kdWN0Q291bnQ7IC8vIE51bWJlciBvZiBwcm9kdWN0cyBpbiB0aGlzIGNhdGVnb3J5XG5cbiAgICAvLyBEZWZhdWx0IGNvbnN0cnVjdG9yXG4gICAgcHVibGljIENhdGVnb3J5KCkge1xuICAgIH1cblxuICAgIC8vIENvbnN0cnVjdG9yIHdpdGggZmllbGRzXG4gICAgcHVibGljIENhdGVnb3J5KGludCBpZCwgU3RyaW5nIG5hbWUsIFN0cmluZyBkZXNjcmlwdGlvbiwgU3RyaW5nIGltYWdlVXJsLCBUaW1lc3RhbXAgY3JlYXRlZEF0KSB7XG4gICAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICAgICAgICB0aGlzLmltYWdlVXJsID0gaW1hZ2VVcmw7XG4gICAgICAgIHRoaXMuY3JlYXRlZEF0ID0gY3JlYXRlZEF0O1xuICAgIH1cblxuICAgIC8vIEdldHRlcnMgYW5kIFNldHRlcnNcbiAgICBwdWJsaWMgaW50IGdldElkKCkge1xuICAgICAgICByZXR1cm4gaWQ7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0SWQoaW50IGlkKSB7XG4gICAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgU3RyaW5nIGdldE5hbWUoKSB7XG4gICAgICAgIHJldHVybiBuYW1lO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldE5hbWUoU3RyaW5nIG5hbWUpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB9XG4uLi5cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBTdHJpbmcgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBcIkNhdGVnb3J5e1wiICtcbiAgICAgICAgICAgICAgICBcImlkPVwiICsgaWQgK1xuICAgICAgICAgICAgICAgIFwiLCBuYW1lPSdcIiArIG5hbWUgKyAnXFwnJyArXG4gICAgICAgICAgICAgICAgXCIsIGRlc2NyaXB0aW9uPSdcIiArIGRlc2NyaXB0aW9uICsgJ1xcJycgK1xuICAgICAgICAgICAgICAgIFwiLCBpbWFnZVVybD0nXCIgKyBpbWFnZVVybCArICdcXCcnICtcbiAgICAgICAgICAgICAgICBcIiwgY3JlYXRlZEF0PVwiICsgY3JlYXRlZEF0ICtcbiAgICAgICAgICAgICAgICBcIiwgcHJvZHVjdENvdW50PVwiICsgcHJvZHVjdENvdW50ICtcbiAgICAgICAgICAgICAgICAnfSc7XG4gICAgfVxufVxuLi4uXG5QYXRoOiBDbG90aGVlL3NyYy9tYWluL2phdmEvY29udHJvbGxlci9DYXRlZ29yeUltYWdlU2VydmxldC5qYXZhXG4uLi5cblxuICAgICAgICAgICAgLy8gVXBkYXRlIGNhdGVnb3J5IGltYWdlIFVSTCBpbiBkYXRhYmFzZVxuICAgICAgICAgICAgU3RyaW5nIGltYWdlVXJsID0gcmVsYXRpdmVQYXRoICsgXCIvXCIgKyBuZXdGaWxlTmFtZTtcbiAgICAgICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IGNhdGVnb3J5REFPLnVwZGF0ZUNhdGVnb3J5SW1hZ2UoY2F0ZWdvcnlJZCwgaW1hZ2VVcmwpO1xuXG4gICAgICAgICAgICBpZiAoc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9hZG1pbi9jYXRlZ29yaWVzLmpzcD9zdWNjZXNzPXRydWUmbWVzc2FnZT1DYXRlZ29yeStpbWFnZSt1cGRhdGVkK3N1Y2Nlc3NmdWxseVwiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL2FkbWluL2NhdGVnb3JpZXMuanNwP2Vycm9yPXRydWUmbWVzc2FnZT1GYWlsZWQrdG8rdXBkYXRlK2NhdGVnb3J5K2ltYWdlXCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0gY2F0Y2ggKE51bWJlckZvcm1hdEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvYWRtaW4vY2F0ZWdvcmllcy5qc3A/ZXJyb3I9dHJ1ZSZtZXNzYWdlPUludmFsaWQrY2F0ZWdvcnkrSURcIik7XG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvYWRtaW4vY2F0ZWdvcmllcy5qc3A/ZXJyb3I9dHJ1ZSZtZXNzYWdlPUVycm9yK3VwbG9hZGluZytpbWFnZTorXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgIH1cbiAgICB9XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvbW9kZWwvQ2F0ZWdvcnkuamF2YVxuLi4uXG5cbi8qKlxuICogQ2F0ZWdvcnkgbW9kZWwgY2xhc3NcbiAqL1xucHVibGljIGNsYXNzIENhdGVnb3J5IHtcbiAgICBwcml2YXRlIGludCBpZDtcbiAgICBwcml2YXRlIFN0cmluZyBuYW1lO1xuICAgIHByaXZhdGUgU3RyaW5nIGRlc2NyaXB0aW9uO1xuICAgIHByaXZhdGUgU3RyaW5nIGltYWdlVXJsOyAvLyBBZGRlZCBmaWVsZCBmb3IgY2F0ZWdvcnkgaW1hZ2VcbiAgICBwcml2YXRlIFRpbWVzdGFtcCBjcmVhdGVkQXQ7XG4gICAgcHJpdmF0ZSBpbnQgcHJvZHVjdENvdW50OyAvLyBOdW1iZXIgb2YgcHJvZHVjdHMgaW4gdGhpcyBjYXRlZ29yeVxuXG4gICAgLy8gRGVmYXVsdCBjb25zdHJ1Y3RvclxuICAgIHB1YmxpYyBDYXRlZ29yeSgpIHtcbiAgICB9XG5cbiAgICAvLyBDb25zdHJ1Y3RvciB3aXRoIGZpZWxkc1xuICAgIHB1YmxpYyBDYXRlZ29yeShpbnQgaWQsIFN0cmluZyBuYW1lLCBTdHJpbmcgZGVzY3JpcHRpb24sIFN0cmluZyBpbWFnZVVybCwgVGltZXN0YW1wIGNyZWF0ZWRBdCkge1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICAgICAgdGhpcy5pbWFnZVVybCA9IGltYWdlVXJsO1xuICAgICAgICB0aGlzLmNyZWF0ZWRBdCA9IGNyZWF0ZWRBdDtcbiAgICB9XG5cbiAgICAvLyBHZXR0ZXJzIGFuZCBTZXR0ZXJzXG4gICAgcHVibGljIGludCBnZXRJZCgpIHtcbiAgICAgICAgcmV0dXJuIGlkO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldElkKGludCBpZCkge1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgfVxuXG4gICAgcHVibGljIFN0cmluZyBnZXROYW1lKCkge1xuICAgICAgICByZXR1cm4gbmFtZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXROYW1lKFN0cmluZyBuYW1lKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgfVxuLi4uXG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgU3RyaW5nIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gXCJDYXRlZ29yeXtcIiArXG4gICAgICAgICAgICAgICAgXCJpZD1cIiArIGlkICtcbiAgICAgICAgICAgICAgICBcIiwgbmFtZT0nXCIgKyBuYW1lICsgJ1xcJycgK1xuICAgICAgICAgICAgICAgIFwiLCBkZXNjcmlwdGlvbj0nXCIgKyBkZXNjcmlwdGlvbiArICdcXCcnICtcbiAgICAgICAgICAgICAgICBcIiwgaW1hZ2VVcmw9J1wiICsgaW1hZ2VVcmwgKyAnXFwnJyArXG4gICAgICAgICAgICAgICAgXCIsIGNyZWF0ZWRBdD1cIiArIGNyZWF0ZWRBdCArXG4gICAgICAgICAgICAgICAgXCIsIHByb2R1Y3RDb3VudD1cIiArIHByb2R1Y3RDb3VudCArXG4gICAgICAgICAgICAgICAgJ30nO1xuICAgIH1cbn1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9jb250cm9sbGVyL0NhdGVnb3J5SW1hZ2VTZXJ2bGV0LmphdmFcbi4uLlxucHVibGljIGNsYXNzIENhdGVnb3J5SW1hZ2VTZXJ2bGV0IGV4dGVuZHMgSHR0cFNlcnZsZXQge1xuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIGxvbmcgc2VyaWFsVmVyc2lvblVJRCA9IDFMO1xuICAgIHByaXZhdGUgQ2F0ZWdvcnlEQU8gY2F0ZWdvcnlEQU87XG5cbiAgICBwdWJsaWMgQ2F0ZWdvcnlJbWFnZVNlcnZsZXQoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIGNhdGVnb3J5REFPID0gbmV3IENhdGVnb3J5REFPKCk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIHZvaWQgZG9Qb3N0KEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBIdHRwU2VydmxldFJlc3BvbnNlIHJlc3BvbnNlKVxuICAgICAgICAgICAgdGhyb3dzIFNlcnZsZXRFeGNlcHRpb24sIElPRXhjZXB0aW9uIHtcblxuICAgICAgICAvLyBHZXQgY2F0ZWdvcnkgSUQgZnJvbSByZXF1ZXN0XG4gICAgICAgIFN0cmluZyBjYXRlZ29yeUlkU3RyID0gcmVxdWVzdC5nZXRQYXJhbWV0ZXIoXCJjYXRlZ29yeUlkXCIpO1xuXG4gICAgICAgIGlmIChjYXRlZ29yeUlkU3RyID09IG51bGwgfHwgY2F0ZWdvcnlJZFN0ci5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9hZG1pbi9jYXRlZ29yaWVzLmpzcD9lcnJvcj10cnVlJm1lc3NhZ2U9Q2F0ZWdvcnkrSUQraXMrcmVxdWlyZWRcIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbi4uLlxuXG4gICAgICAgICAgICAvLyBQcm9jZXNzIHRoZSB1cGxvYWRlZCBmaWxlXG4gICAgICAgICAgICBTdHJpbmcgZmlsZU5hbWUgPSBnZXRTdWJtaXR0ZWRGaWxlTmFtZShmaWxlUGFydCk7XG4gICAgICAgICAgICBpZiAoZmlsZU5hbWUgPT0gbnVsbCB8fCBmaWxlTmFtZS5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvYWRtaW4vY2F0ZWdvcmllcy5qc3A/ZXJyb3I9dHJ1ZSZtZXNzYWdlPUludmFsaWQrZmlsZStuYW1lXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgU3RyaW5nIGZpbGVFeHRlbnNpb24gPSBmaWxlTmFtZS5zdWJzdHJpbmcoZmlsZU5hbWUubGFzdEluZGV4T2YoXCIuXCIpKTtcbiAgICAgICAgICAgIFN0cmluZyBuZXdGaWxlTmFtZSA9IFwiY2F0ZWdvcnlfXCIgKyBjYXRlZ29yeUlkICsgZmlsZUV4dGVuc2lvbjtcblxuICAgICAgICAgICAgLy8gU2F2ZSB0aGUgZmlsZSB0byB0aGUgc2VydmVyXG4gICAgICAgICAgICBTdHJpbmcgcmVsYXRpdmVQYXRoID0gXCJpbWFnZXMvY2F0ZWdvcmllc1wiO1xuICAgICAgICAgICAgU3RyaW5nIHVwbG9hZFBhdGggPSByZXF1ZXN0LmdldFNlcnZsZXRDb250ZXh0KCkuZ2V0UmVhbFBhdGgoXCIvXCIpICsgcmVsYXRpdmVQYXRoICsgXCIvXCI7XG5cbiAgICAgICAgICAgIEZpbGUgdXBsb2FkRGlyID0gbmV3IEZpbGUodXBsb2FkUGF0aCk7XG4gICAgICAgICAgICBpZiAoIXVwbG9hZERpci5leGlzdHMoKSkge1xuICAgICAgICAgICAgICAgIHVwbG9hZERpci5ta2RpcnMoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZmlsZVBhcnQud3JpdGUodXBsb2FkUGF0aCArIG5ld0ZpbGVOYW1lKTtcblxuICAgICAgICAgICAgLy8gVXBkYXRlIGNhdGVnb3J5IGltYWdlIFVSTCBpbiBkYXRhYmFzZVxuICAgICAgICAgICAgU3RyaW5nIGltYWdlVXJsID0gcmVsYXRpdmVQYXRoICsgXCIvXCIgKyBuZXdGaWxlTmFtZTtcbiAgICAgICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IGNhdGVnb3J5REFPLnVwZGF0ZUNhdGVnb3J5SW1hZ2UoY2F0ZWdvcnlJZCwgaW1hZ2VVcmwpO1xuXG4gICAgICAgICAgICBpZiAoc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9hZG1pbi9jYXRlZ29yaWVzLmpzcD9zdWNjZXNzPXRydWUmbWVzc2FnZT1DYXRlZ29yeStpbWFnZSt1cGRhdGVkK3N1Y2Nlc3NmdWxseVwiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL2FkbWluL2NhdGVnb3JpZXMuanNwP2Vycm9yPXRydWUmbWVzc2FnZT1GYWlsZWQrdG8rdXBkYXRlK2NhdGVnb3J5K2ltYWdlXCIpO1xuICAgICAgICAgICAgfVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2Rhby9DYXRlZ29yeURBTy5qYXZhXG4uLi5cblxuICAgIC8qKlxuICAgICAqIEFkZCBhIG5ldyBjYXRlZ29yeSB0byB0aGUgZGF0YWJhc2VcbiAgICAgKiBAcGFyYW0gY2F0ZWdvcnkgQ2F0ZWdvcnkgb2JqZWN0IHRvIGFkZFxuICAgICAqIEByZXR1cm4gdHJ1ZSBpZiBzdWNjZXNzZnVsLCBmYWxzZSBvdGhlcndpc2VcbiAgICAgKi9cbiAgICBwdWJsaWMgYm9vbGVhbiBhZGRDYXRlZ29yeShDYXRlZ29yeSBjYXRlZ29yeSkge1xuICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCI9PT09PSBBRERJTkcgQ0FURUdPUlkgPT09PT1cIik7XG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNhdGVnb3J5IG5hbWU6IFwiICsgY2F0ZWdvcnkuZ2V0TmFtZSgpKTtcbiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQ2F0ZWdvcnkgZGVzY3JpcHRpb246IFwiICsgY2F0ZWdvcnkuZ2V0RGVzY3JpcHRpb24oKSk7XG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNhdGVnb3J5IGltYWdlVXJsOiBcIiArIGNhdGVnb3J5LmdldEltYWdlVXJsKCkpO1xuXG4gICAgICAgIC8vIEZpcnN0IGNoZWNrIGlmIGEgY2F0ZWdvcnkgd2l0aCB0aGlzIG5hbWUgYWxyZWFkeSBleGlzdHNcbiAgICAgICAgaWYgKGNhdGVnb3J5RXhpc3RzKGNhdGVnb3J5LmdldE5hbWUoKSkpIHtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNhdGVnb3J5IGFscmVhZHkgZXhpc3RzOiBcIiArIGNhdGVnb3J5LmdldE5hbWUoKSk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUcnkgYSBzaW1wbGVyIHF1ZXJ5IHdpdGhvdXQgdGhlIGltYWdlX3VybCBmaWVsZFxuICAgICAgICBTdHJpbmcgcXVlcnkgPSBcIklOU0VSVCBJTlRPIGNhdGVnb3JpZXMgKG5hbWUsIGRlc2NyaXB0aW9uKSBWQUxVRVMgKD8sID8pXCI7XG4uLi5cblxuICAgIC8qKlxuICAgICAqIEdldCBhbGwgY2F0ZWdvcmllc1xuICAgICAqIEByZXR1cm4gTGlzdCBvZiBhbGwgY2F0ZWdvcmllc1xuICAgICAqL1xuICAgIHB1YmxpYyBMaXN0PENhdGVnb3J5PiBnZXRBbGxDYXRlZ29yaWVzKCkge1xuICAgICAgICBMaXN0PENhdGVnb3J5PiBjYXRlZ29yaWVzID0gbmV3IEFycmF5TGlzdDw+KCk7XG5cbiAgICAgICAgLy8gU2ltcGxpZmllZCBxdWVyeSB0byBlbnN1cmUgd2UgZ2V0IGFsbCBjYXRlZ29yaWVzIHJlZ2FyZGxlc3Mgb2YgcHJvZHVjdHNcbiAgICAgICAgU3RyaW5nIHF1ZXJ5ID0gXCJTRUxFQ1QgKiBGUk9NIGNhdGVnb3JpZXMgT1JERVIgQlkgbmFtZVwiO1xuXG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkV4ZWN1dGluZyBnZXRBbGxDYXRlZ29yaWVzIHF1ZXJ5OiBcIiArIHF1ZXJ5KTtcblxuICAgICAgICB0cnkgKENvbm5lY3Rpb24gY29ubiA9IERCQ29ubmVjdGlvbi5nZXRDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICAgU3RhdGVtZW50IHN0bXQgPSBjb25uLmNyZWF0ZVN0YXRlbWVudCgpO1xuICAgICAgICAgICAgIFJlc3VsdFNldCBycyA9IHN0bXQuZXhlY3V0ZVF1ZXJ5KHF1ZXJ5KSkge1xuXG4gICAgICAgICAgICBpbnQgY291bnQgPSAwO1xuICAgICAgIC4uLiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sImFlOTA1NmRmLTdmMTItNGVmMS1hYTRjLWViYTE5Zjg4MmQyYTt0b29sdV92cnR4XzAxWTlNV3M5a3VwS0hXem10b3hBQ3dYRyI6eyJyZXF1ZXN0SWQiOiJhZTkwNTZkZi03ZjEyLTRlZjEtYWE0Yy1lYmExOWY4ODJkMmEiLCJ0b29sVXNlSWQiOiJ0b29sdV92cnR4XzAxWTlNV3M5a3VwS0hXem10b3hBQ3dYRyIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IENsb3RoZWUvc3JjL21haW4vamF2YS91dGlsL0RCQ29ubmVjdGlvbi5qYXZhXG4uLi5cblxucHVibGljIGNsYXNzIERCQ29ubmVjdGlvbiB7XG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIEpEQkNfVVJMID0gXCJqZGJjOm15c3FsOi8vbG9jYWxob3N0OjMzMDYvY2xvdGhlZT91c2VTU0w9ZmFsc2Umc2VydmVyVGltZXpvbmU9VVRDXCI7XG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIEpEQkNfVVNFUiA9IFwicm9vdFwiO1xuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBKREJDX1BBU1NXT1JEID0gXCJcIjsgLy8gVXBkYXRlIHdpdGggeW91ciBNeVNRTCBwYXNzd29yZCBpZiBzZXRcblxuICAgIHN0YXRpYyB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBDbGFzcy5mb3JOYW1lKFwiY29tLm15c3FsLmNqLmpkYmMuRHJpdmVyXCIpO1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiTXlTUUwgSkRCQyBkcml2ZXIgbG9hZGVkIHN1Y2Nlc3NmdWxseVwiKTtcblxuICAgICAgICB9IGNhdGNoIChDbGFzc05vdEZvdW5kRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIFN5c3RlbS5lcnIucHJpbnRsbihcIkVycm9yIGxvYWRpbmcgTXlTUUwgSkRCQyBkcml2ZXI6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBSdW50aW1lRXhjZXB0aW9uKFwiRmFpbGVkIHRvIGxvYWQgTXlTUUwgSkRCQyBkcml2ZXJcIiwgZSk7XG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBTeXN0ZW0uZXJyLnByaW50bG4oXCJFcnJvciBpbml0aWFsaXppbmcgZGF0YWJhc2U6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbiAgICBwdWJsaWMgc3RhdGljIENvbm5lY3Rpb24gZ2V0Q29ubmVjdGlvbigpIHRocm93cyBTUUxFeGNlcHRpb24ge1xuICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJEQkNvbm5lY3Rpb246IGdldENvbm5lY3Rpb24gY2FsbGVkXCIpO1xuICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJEQkNvbm5lY3Rpb246IEpEQkNfVVJMID0gXCIgKyBKREJDX1VSTCk7XG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkRCQ29ubmVjdGlvbjogSkRCQ19VU0VSID0gXCIgKyBKREJDX1VTRVIpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJEQkNvbm5lY3Rpb246IEF0dGVtcHRpbmcgdG8gZXN0YWJsaXNoIGNvbm5lY3Rpb25cIik7XG4gICAgICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBEcml2ZXJNYW5hZ2VyLmdldENvbm5lY3Rpb24oSkRCQ19VUkwsIEpEQkNfVVNFUiwgSkRCQ19QQVNTV09SRCk7XG5cbiAgICAgICAgICAgIGlmIChjb25uID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJEQkNvbm5lY3Rpb246IENvbm5lY3Rpb24gaXMgbnVsbFwiKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU1FMRXhjZXB0aW9uKFwiQ29ubmVjdGlvbiBpcyBudWxsXCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoY29ubi5pc0Nsb3NlZCgpKSB7XG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiREJDb25uZWN0aW9uOiBDb25uZWN0aW9uIGlzIGNsb3NlZFwiKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU1FMRXhjZXB0aW9uKFwiQ29ubmVjdGlvbiBpcyBjbG9zZWRcIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkRCQ29ubmVjdGlvbjogRGF0YWJhc2UgY29ubmVjdGlvbiBlc3RhYmxpc2hlZCBzdWNjZXNzZnVsbHkgZm9yIGNsb3RoZWVcIik7XG4gICAgICAgICAgICByZXR1cm4gY29ubjtcbiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIFN5c3RlbS5lcnIucHJpbnRsbihcIkRCQ29ubmVjdGlvbjogRXJyb3IgZXN0YWJsaXNoaW5nIGRhdGFiYXNlIGNvbm5lY3Rpb246IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBTUUxFeGNlcHRpb24oXCJGYWlsZWQgdG8gY29ubmVjdCB0byBkYXRhYmFzZTogXCIgKyBlLmdldE1lc3NhZ2UoKSwgZSk7XG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBTeXN0ZW0uZXJyLnByaW50bG4oXCJEQkNvbm5lY3Rpb246IFVuZXhwZWN0ZWQgZXJyb3I6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBTUUxFeGNlcHRpb24oXCJVbmV4cGVjdGVkIGVycm9yOiBcIiArIGUuZ2V0TWVzc2FnZSgpLCBlKTtcbiAgICAgICAgfVxuICAgIH1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS91dGlsL0RCQ29ubmVjdGlvbi5qYXZhXG4uLi5cblxucHVibGljIGNsYXNzIERCQ29ubmVjdGlvbiB7XG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIEpEQkNfVVJMID0gXCJqZGJjOm15c3FsOi8vbG9jYWxob3N0OjMzMDYvY2xvdGhlZT91c2VTU0w9ZmFsc2Umc2VydmVyVGltZXpvbmU9VVRDXCI7XG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIEpEQkNfVVNFUiA9IFwicm9vdFwiO1xuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBKREJDX1BBU1NXT1JEID0gXCJcIjsgLy8gVXBkYXRlIHdpdGggeW91ciBNeVNRTCBwYXNzd29yZCBpZiBzZXRcblxuICAgIHN0YXRpYyB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBDbGFzcy5mb3JOYW1lKFwiY29tLm15c3FsLmNqLmpkYmMuRHJpdmVyXCIpO1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiTXlTUUwgSkRCQyBkcml2ZXIgbG9hZGVkIHN1Y2Nlc3NmdWxseVwiKTtcblxuICAgICAgICB9IGNhdGNoIChDbGFzc05vdEZvdW5kRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIFN5c3RlbS5lcnIucHJpbnRsbihcIkVycm9yIGxvYWRpbmcgTXlTUUwgSkRCQyBkcml2ZXI6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBSdW50aW1lRXhjZXB0aW9uKFwiRmFpbGVkIHRvIGxvYWQgTXlTUUwgSkRCQyBkcml2ZXJcIiwgZSk7XG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBTeXN0ZW0uZXJyLnByaW50bG4oXCJFcnJvciBpbml0aWFsaXppbmcgZGF0YWJhc2U6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbiAgICBwdWJsaWMgc3RhdGljIENvbm5lY3Rpb24gZ2V0Q29ubmVjdGlvbigpIHRocm93cyBTUUxFeGNlcHRpb24ge1xuICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJEQkNvbm5lY3Rpb246IGdldENvbm5lY3Rpb24gY2FsbGVkXCIpO1xuICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJEQkNvbm5lY3Rpb246IEpEQkNfVVJMID0gXCIgKyBKREJDX1VSTCk7XG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkRCQ29ubmVjdGlvbjogSkRCQ19VU0VSID0gXCIgKyBKREJDX1VTRVIpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJEQkNvbm5lY3Rpb246IEF0dGVtcHRpbmcgdG8gZXN0YWJsaXNoIGNvbm5lY3Rpb25cIik7XG4gICAgICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBEcml2ZXJNYW5hZ2VyLmdldENvbm5lY3Rpb24oSkRCQ19VUkwsIEpEQkNfVVNFUiwgSkRCQ19QQVNTV09SRCk7XG5cbiAgICAgICAgICAgIGlmIChjb25uID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJEQkNvbm5lY3Rpb246IENvbm5lY3Rpb24gaXMgbnVsbFwiKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU1FMRXhjZXB0aW9uKFwiQ29ubmVjdGlvbiBpcyBudWxsXCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoY29ubi5pc0Nsb3NlZCgpKSB7XG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiREJDb25uZWN0aW9uOiBDb25uZWN0aW9uIGlzIGNsb3NlZFwiKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU1FMRXhjZXB0aW9uKFwiQ29ubmVjdGlvbiBpcyBjbG9zZWRcIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkRCQ29ubmVjdGlvbjogRGF0YWJhc2UgY29ubmVjdGlvbiBlc3RhYmxpc2hlZCBzdWNjZXNzZnVsbHkgZm9yIGNsb3RoZWVcIik7XG4gICAgICAgICAgICByZXR1cm4gY29ubjtcbiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIFN5c3RlbS5lcnIucHJpbnRsbihcIkRCQ29ubmVjdGlvbjogRXJyb3IgZXN0YWJsaXNoaW5nIGRhdGFiYXNlIGNvbm5lY3Rpb246IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBTUUxFeGNlcHRpb24oXCJGYWlsZWQgdG8gY29ubmVjdCB0byBkYXRhYmFzZTogXCIgKyBlLmdldE1lc3NhZ2UoKSwgZSk7XG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBTeXN0ZW0uZXJyLnByaW50bG4oXCJEQkNvbm5lY3Rpb246IFVuZXhwZWN0ZWQgZXJyb3I6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBTUUxFeGNlcHRpb24oXCJVbmV4cGVjdGVkIGVycm9yOiBcIiArIGUuZ2V0TWVzc2FnZSgpLCBlKTtcbiAgICAgICAgfVxuICAgIH1cbi4uLlxuUGF0aDogQ2xvdGhlZS9zcmMvbWFpbi9qYXZhL3NlcnZpY2UvUHJvZHVjdEltYWdlU2VydmljZS5qYXZhXG4uLi5cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgcGVybWFuZW50IHBhdGggZm9yIHN0b3JpbmcgaW1hZ2VzXG4gICAgICogQHBhcmFtIHdlYmFwcFJvb3QgVGhlIHdlYmFwcCByb290IHBhdGhcbiAgICAgKiBAcGFyYW0gcmVsYXRpdmVQYXRoIFRoZSByZWxhdGl2ZSBwYXRoIHdpdGhpbiB0aGUgd2ViYXBwXG4gICAgICogQHJldHVybiBUaGUgcGVybWFuZW50IHBhdGhcbiAgICAgKi9cbiAgICBwcml2YXRlIFN0cmluZyBnZXRQZXJtYW5lbnRQYXRoKFN0cmluZyB3ZWJhcHBSb290LCBTdHJpbmcgcmVsYXRpdmVQYXRoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBVc2UgYSBmaXhlZCwgYWJzb2x1dGUgcGF0aCB0aGF0IHdpbGwgZGVmaW5pdGVseSBwZXJzaXN0XG4gICAgICAgICAgICAvLyBUaGlzIHBhdGggc2hvdWxkIGJlIG91dHNpZGUgdGhlIGRlcGxveW1lbnQgZGlyZWN0b3J5IGJ1dCBhY2Nlc3NpYmxlIGJ5IHRoZSB3ZWIgc2VydmVyXG4gICAgICAgICAgICAvLyBGaXJzdCB0cnkgdGhlIHVzZXIncyBob21lIGRpcmVjdG9yeVxuICAgICAgICAgICAgU3RyaW5nIHVzZXJIb21lID0gU3lzdGVtLmdldFByb3BlcnR5KFwidXNlci5ob21lXCIpO1xuICAgICAgICAgICAgU3RyaW5nIGZpeGVkUGF0aCA9IHVzZXJIb21lICsgRmlsZS5zZXBhcmF0b3IgKyBcIkNsb3RoZWVJbWFnZXNcIiArIEZpbGUuc2VwYXJhdG9yICsgcmVsYXRpdmVQYXRoO1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiUHJvZHVjdEltYWdlU2VydmljZSAtIFVzaW5nIGZpeGVkIHBhdGggaW4gdXNlciBob21lOiBcIiArIGZpeGVkUGF0aCk7XG4gICAgICAgICAgICBGaWxlIGZpeGVkRGlyID0gbmV3IEZpbGUoZml4ZWRQYXRoKTtcbi4uLlxuUGF0aDogQ2xvdGhlZS9zcmMvbWFpbi9qYXZhL2NvbnRyb2xsZXIvQ2F0ZWdvcnlJbWFnZVNlcnZsZXQuamF2YVxuLi4uXG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHBlcm1hbmVudCBwYXRoIGZvciBzdG9yaW5nIGltYWdlc1xuICAgICAqIEBwYXJhbSB3ZWJhcHBSb290IFRoZSB3ZWJhcHAgcm9vdCBwYXRoXG4gICAgICogQHBhcmFtIHJlbGF0aXZlUGF0aCBUaGUgcmVsYXRpdmUgcGF0aCB3aXRoaW4gdGhlIHdlYmFwcFxuICAgICAqIEByZXR1cm4gVGhlIHBlcm1hbmVudCBwYXRoXG4gICAgICovXG4gICAgcHJpdmF0ZSBTdHJpbmcgZ2V0UGVybWFuZW50UGF0aChTdHJpbmcgd2ViYXBwUm9vdCwgU3RyaW5nIHJlbGF0aXZlUGF0aCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gRmlyc3QsIHRyeSB0byB1c2UgYSBmaXhlZCwgYWJzb2x1dGUgcGF0aCB0aGF0IHdpbGwgZGVmaW5pdGVseSBwZXJzaXN0XG4gICAgICAgICAgICAvLyBUaGlzIHBhdGggc2hvdWxkIGJlIG91dHNpZGUgdGhlIGRlcGxveW1lbnQgZGlyZWN0b3J5IGJ1dCBhY2Nlc3NpYmxlIGJ5IHRoZSB3ZWIgc2VydmVyXG4gICAgICAgICAgICAvLyBVc2UgdGhlIHVzZXIncyBob21lIGRpcmVjdG9yeVxuICAgICAgICAgICAgU3RyaW5nIHVzZXJIb21lID0gU3lzdGVtLmdldFByb3BlcnR5KFwidXNlci5ob21lXCIpO1xuICAgICAgICAgICAgU3RyaW5nIGZpeGVkUGF0aCA9IHVzZXJIb21lICsgRmlsZS5zZXBhcmF0b3IgKyBcIkNsb3RoZWVJbWFnZXNcIiArIEZpbGUuc2VwYXJhdG9yICsgcmVsYXRpdmVQYXRoO1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQ2F0ZWdvcnlJbWFnZVNlcnZsZXQgLSBVc2luZyBmaXhlZCBwYXRoIGluIHVzZXIgaG9tZTogXCIgKyBmaXhlZFBhdGgpO1xuICAgICAgICAgICAgRmlsZSBmaXhlZERpciA9IG5ldyBGaWxlKGZpeGVkUGF0aCk7XG4uLi5cblxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHBlcm1hbmVudCBwYXRoIGV4aXN0cyBvciBjYW4gYmUgY3JlYXRlZFxuICAgICAgICAgICAgRmlsZSBwZXJtYW5lbnREaXIgPSBuZXcgRmlsZShwZXJtYW5lbnRQYXRoKTtcbiAgICAgICAgICAgIGlmICghcGVybWFuZW50RGlyLmV4aXN0cygpKSB7XG4gICAgICAgICAgICAgICAgYm9vbGVhbiBjcmVhdGVkID0gcGVybWFuZW50RGlyLm1rZGlycygpO1xuICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNhdGVnb3J5SW1hZ2VTZXJ2bGV0IC0gQ3JlYXRlZCBwZXJtYW5lbnQgZGlyZWN0b3J5OiBcIiArIGNyZWF0ZWQpO1xuICAgICAgICAgICAgICAgIGlmICghY3JlYXRlZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSBjYW4ndCBjcmVhdGUgdGhlIHBlcm1hbmVudCBkaXJlY3RvcnksIHVzZSB0aGUgZGVwbG95bWVudCBwYXRoIGFzIGZhbGxiYWNrXG4gICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNhdGVnb3J5SW1hZ2VTZXJ2bGV0IC0gQ291bGQgbm90IGNyZWF0ZSBwZXJtYW5lbnQgZGlyZWN0b3J5LCB1c2luZyBkZXBsb3ltZW50IHBhdGggYXMgZmFsbGJhY2tcIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3ZWJhcHBSb290ICsgcmVsYXRpdmVQYXRoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHBlcm1hbmVudFBhdGg7XG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJDYXRlZ29yeUltYWdlU2VydmxldCAtIEVycm9yIGdldHRpbmcgcGVybWFuZW50IHBhdGg6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIHJldHVybiB3ZWJhcHBSb290ICsgcmVsYXRpdmVQYXRoO1xuICAgICAgICB9XG4gICAgfVxuLi4uXG5QYXRoOiBDbG90aGVlL3NyYy9tYWluL2phdmEvc2VydmljZS9Vc2VySW1hZ2VTZXJ2aWNlLmphdmFcbi4uLlxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBwZXJtYW5lbnQgcGF0aCBmb3IgYSBmaWxlIChwZXJzaXN0cyBhY3Jvc3Mgc2VydmVyIHJlc3RhcnRzKVxuICAgICAqXG4gICAgICogQHBhcmFtIGRlcGxveW1lbnRSb290IFRoZSBkZXBsb3ltZW50IHJvb3QgcGF0aFxuICAgICAqIEBwYXJhbSByZWxhdGl2ZVBhdGggVGhlIHJlbGF0aXZlIHBhdGggd2l0aGluIHRoZSB3ZWJhcHBcbiAgICAgKiBAcmV0dXJuIFRoZSBwZXJtYW5lbnQgcGF0aFxuICAgICAqL1xuICAgIHByaXZhdGUgU3RyaW5nIGdldFBlcm1hbmVudFBhdGgoU3RyaW5nIGRlcGxveW1lbnRSb290LCBTdHJpbmcgcmVsYXRpdmVQYXRoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBGaXJzdCwgdHJ5IHRvIHVzZSBhIGZpeGVkLCBhYnNvbHV0ZSBwYXRoIHRoYXQgd2lsbCBkZWZpbml0ZWx5IHBlcnNpc3RcbiAgICAgICAgICAgIC8vIFRoaXMgcGF0aCBzaG91bGQgYmUgb3V0c2lkZSB0aGUgZGVwbG95bWVudCBkaXJlY3RvcnkgYnV0IGFjY2Vzc2libGUgYnkgdGhlIHdlYiBzZXJ2ZXJcbiAgICAgICAgICAgIC8vIFVzZSB0aGUgdXNlcidzIGhvbWUgZGlyZWN0b3J5XG4gICAgICAgICAgICBTdHJpbmcgdXNlckhvbWUgPSBTeXN0ZW0uZ2V0UHJvcGVydHkoXCJ1c2VyLmhvbWVcIik7XG4gICAgICAgICAgICBTdHJpbmcgZml4ZWRQYXRoID0gdXNlckhvbWUgKyBGaWxlLnNlcGFyYXRvciArIFwiQ2xvdGhlZUltYWdlc1wiICsgRmlsZS5zZXBhcmF0b3IgKyByZWxhdGl2ZVBhdGg7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJVc2VySW1hZ2VTZXJ2aWNlIC0gVXNpbmcgZml4ZWQgcGF0aCBpbiB1c2VyIGhvbWU6IFwiICsgZml4ZWRQYXRoKTtcbiAgICAgICAgICAgIEZpbGUgZml4ZWREaXIgPSBuZXcgRmlsZShmaXhlZFBhdGgpO1xuLi4uXG5QYXRoOiBDbG90aGVlL3NyYy9tYWluL2phdmEvdXRpbC9JbWFnZVBhdGhVdGlsLmphdmFcbi4uLlxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBwZXJtYW5lbnQgcGF0aCBmb3Igc3RvcmluZyBpbWFnZXNcbiAgICAgKiBAcGFyYW0gd2ViYXBwUm9vdCBUaGUgd2ViYXBwIHJvb3QgcGF0aFxuICAgICAqIEBwYXJhbSByZWxhdGl2ZVBhdGggVGhlIHJlbGF0aXZlIHBhdGggd2l0aGluIHRoZSB3ZWJhcHBcbiAgICAgKiBAcmV0dXJuIFRoZSBwZXJtYW5lbnQgcGF0aFxuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgU3RyaW5nIGdldFBlcm1hbmVudFBhdGgoU3RyaW5nIHdlYmFwcFJvb3QsIFN0cmluZyByZWxhdGl2ZVBhdGgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIEZpbmQgdGhlIHByb2plY3Qgcm9vdCBkaXJlY3RvcnkgKG91dHNpZGUgdGhlIGRlcGxveW1lbnQgZGlyZWN0b3J5KVxuICAgICAgICAgICAgRmlsZSBkZXBsb3ltZW50RGlyID0gbmV3IEZpbGUod2ViYXBwUm9vdCk7XG4gICAgICAgICAgICBGaWxlIHByb2plY3RSb290ID0gZGVwbG95bWVudERpci5nZXRQYXJlbnRGaWxlKCkuZ2V0UGFyZW50RmlsZSgpLmdldFBhcmVudEZpbGUoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBwZXJtYW5lbnQgcGF0aFxuICAgICAgICAgICAgU3RyaW5nIHBlcm1hbmVudFBhdGggPSBwcm9qZWN0Um9vdC5nZXRBYnNvbHV0ZVBhdGgoKSArIFwiL3NyYy9tYWluL3dlYmFwcC9cIiArIHJlbGF0aXZlUGF0aDtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkltYWdlUGF0aFV0aWwgLSBQcm9qZWN0IHJvb3Q6IFwiICsgcHJvamVjdFJvb3QuZ2V0QWJzb2x1dGVQYXRoKCkpO1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiSW1hZ2VQYXRoVXRpbCAtIFBlcm1hbmVudCBwYXRoOiBcIiArIHBlcm1hbmVudFBhdGgpO1xuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbnRyb2xsZXIvSW1hZ2VTZXJ2bGV0LmphdmFcbnBhY2thZ2UgY29udHJvbGxlcjtcblxuaW1wb3J0IGphdmEuaW8uRmlsZTtcbmltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uO1xuXG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0LlNlcnZsZXRFeGNlcHRpb247XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0LmFubm90YXRpb24uTXVsdGlwYXJ0Q29uZmlnO1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5hbm5vdGF0aW9uLldlYlNlcnZsZXQ7XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXQ7XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXRSZXF1ZXN0O1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5odHRwLkh0dHBTZXJ2bGV0UmVzcG9uc2U7XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0Lmh0dHAuUGFydDtcblxuaW1wb3J0IHNlcnZpY2UuUHJvZHVjdEltYWdlU2VydmljZTtcbmltcG9ydCBzZXJ2aWNlLlByb2R1Y3RTZXJ2aWNlO1xuaW1wb3J0IG1vZGVsLlByb2R1Y3Q7XG5cbi8qKlxuICogU2VydmxldCBpbXBsZW1lbnRhdGlvbiBjbGFzcyBJbWFnZVNlcnZsZXRcbiAqIEhhbmRsZXMgcHJvZHVjdCBpbWFnZSB1cGxvYWRzXG4gKi9cbi8vIFNlcnZsZXQgbWFwcGluZyBkZWZpbmVkIGluIHdlYi54bWxcbkBNdWx0aXBhcnRDb25maWdcbnB1YmxpYyBjbGFzcyBJbWFnZVNlcnZsZXQgZXh0ZW5kcyBIdHRwU2VydmxldCB7XG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgbG9uZyBzZXJpYWxWZXJzaW9uVUlEID0gMUw7XG4gICAgcHJpdmF0ZSBQcm9kdWN0SW1hZ2VTZXJ2aWNlIHByb2R1Y3RJbWFnZVNlcnZpY2U7XG4gICAgcHJpdmF0ZSBQcm9kdWN0U2VydmljZSBwcm9kdWN0U2VydmljZTtcblxuICAgIC8qKlxuICAgICAqIEBzZWUgSHR0cFNlcnZsZXQjSHR0cFNlcnZsZXQoKVxuICAgICAqL1xuICAgIHB1YmxpYyBJbWFnZVNlcnZsZXQoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHByb2R1Y3RJbWFnZVNlcnZpY2UgPSBuZXcgUHJvZHVjdEltYWdlU2VydmljZSgpO1xuICAgICAgICBwcm9kdWN0U2VydmljZSA9IG5ldyBQcm9kdWN0U2VydmljZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBzZWUgSHR0cFNlcnZsZXQjZG9Qb3N0KEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBIdHRwU2VydmxldFJlc3BvbnNlIHJlc3BvbnNlKVxuICAgICAqL1xuICAgIHByb3RlY3RlZCB2b2lkIGRvUG9zdChIdHRwU2VydmxldFJlcXVlc3QgcmVxdWVzdCwgSHR0cFNlcnZsZXRSZXNwb25zZSByZXNwb25zZSkgdGhyb3dzIFNlcnZsZXRFeGNlcHRpb24sIElPRXhjZXB0aW9uIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIEdldCBwcm9kdWN0IElEIGZyb20gcmVxdWVzdFxuICAgICAgICAgICAgU3RyaW5nIHByb2R1Y3RJZFN0ciA9IHJlcXVlc3QuZ2V0UGFyYW1ldGVyKFwicHJvZHVjdElkXCIpO1xuICAgICAgICAgICAgU3RyaW5nIHJldHVyblVybCA9IHJlcXVlc3QuZ2V0UGFyYW1ldGVyKFwicmV0dXJuVXJsXCIpO1xuXG4gICAgICAgICAgICAvLyBEZWZhdWx0IHJldHVybiBVUkwgaWYgbm90IHNwZWNpZmllZFxuICAgICAgICAgICAgaWYgKHJldHVyblVybCA9PSBudWxsIHx8IHJldHVyblVybC5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm5VcmwgPSBcIi9hZG1pbi9BZG1pblByb2R1Y3RTZXJ2bGV0XCI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChwcm9kdWN0SWRTdHIgPT0gbnVsbCB8fCBwcm9kdWN0SWRTdHIuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIHJldHVyblVybCArIFwiP2Vycm9yPVByb2R1Y3QrSUQraXMrcmVxdWlyZWRcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuLi4uXG5cbiAgICAgICAgICAgICAgICAvLyBVcGxvYWQgdGhlIGltYWdlIHVzaW5nIHRoZSBzZXJ2aWNlXG4gICAgICAgICAgICAgICAgU3RyaW5nIHVwbG9hZFBhdGggPSByZXF1ZXN0LmdldFNlcnZsZXRDb250ZXh0KCkuZ2V0UmVhbFBhdGgoXCIvXCIpO1xuICAgICAgICAgICAgICAgIFN0cmluZyBpbWFnZVVybCA9IHByb2R1Y3RJbWFnZVNlcnZpY2UudXBsb2FkUHJvZHVjdEltYWdlKHByb2R1Y3RJZCwgZmlsZVBhcnQsIHVwbG9hZFBhdGgpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGltYWdlVXJsID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIHJldHVyblVybCArIFwiP2Vycm9yPUZhaWxlZCt0byt1cGxvYWQraW1hZ2VcIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgcHJvZHVjdCBpbWFnZSBVUkwgaW4gZGF0YWJhc2VcbiAgICAgICAgICAgICAgICBib29sZWFuIHN1Y2Nlc3MgPSBwcm9kdWN0SW1hZ2VTZXJ2aWNlLnVwZGF0ZVByb2R1Y3RJbWFnZVVybChwcm9kdWN0SWQsIGltYWdlVXJsKTtcblxuICAgICAgICAgICAgICAgIGlmIChzdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyByZXR1cm5VcmwgKyBcIj9zdWNjZXNzPVByb2R1Y3QraW1hZ2UrdXBkYXRlZCtzdWNjZXNzZnVsbHlcIik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIHJldHVyblVybCArIFwiP2Vycm9yPUZhaWxlZCt0byt1cGRhdGUrcHJvZHVjdCtpbWFnZVwiKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0gY2F0Y2ggKE51bWJlckZvcm1hdEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRXJyb3IgcGFyc2luZyBwcm9kdWN0IElEOiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyByZXR1cm5VcmwgKyBcIj9lcnJvcj1JbnZhbGlkK3Byb2R1Y3QrSURcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJFcnJvciBpbiBJbWFnZVNlcnZsZXQuZG9Qb3N0OiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvYWRtaW4vQWRtaW5Qcm9kdWN0U2VydmxldD9lcnJvcj1FcnJvcit1cGxvYWRpbmcraW1hZ2U6K1wiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICB9XG4gICAgfVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbnRyb2xsZXIvSW1hZ2VEb3dubG9hZFNlcnZsZXQuamF2YVxuLi4uXG5cbiAgICAgICAgaWYgKFwiZG93bmxvYWRcIi5lcXVhbHMoYWN0aW9uKSkge1xuICAgICAgICAgICAgLy8gRG93bmxvYWQgaW1hZ2VzXG4gICAgICAgICAgICBTdHJpbmcgY2F0ZWdvcnkgPSByZXF1ZXN0LmdldFBhcmFtZXRlcihcImNhdGVnb3J5XCIpO1xuXG4gICAgICAgICAgICBpZiAoY2F0ZWdvcnkgPT0gbnVsbCB8fCBjYXRlZ29yeS5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICAvLyBEb3dubG9hZCBhbGwgY2F0ZWdvcmllc1xuICAgICAgICAgICAgICAgIGZvciAoU3RyaW5nIGNhdCA6IElNQUdFX1VSTFMua2V5U2V0KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRJbWFnZXMoY2F0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2Vzc2lvbi5zZXRBdHRyaWJ1dGUoXCJzdWNjZXNzTWVzc2FnZVwiLCBcIkFsbCBpbWFnZXMgZG93bmxvYWRlZCBzdWNjZXNzZnVsbHlcIik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIERvd25sb2FkIHNwZWNpZmljIGNhdGVnb3J5XG4gICAgICAgICAgICAgICAgaWYgKElNQUdFX1VSTFMuY29udGFpbnNLZXkoY2F0ZWdvcnkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGRvd25sb2FkSW1hZ2VzKGNhdGVnb3J5KTtcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbi5zZXRBdHRyaWJ1dGUoXCJzdWNjZXNzTWVzc2FnZVwiLCBjYXRlZ29yeSArIFwiIGltYWdlcyBkb3dubG9hZGVkIHN1Y2Nlc3NmdWxseVwiKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uLnNldEF0dHJpYnV0ZShcImVycm9yTWVzc2FnZVwiLCBcIkludmFsaWQgY2F0ZWdvcnk6IFwiICsgY2F0ZWdvcnkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KFwiSW1hZ2VEb3dubG9hZFNlcnZsZXRcIik7XG4gICAgICAgIH1cbiAgICB9XG4uLi5cblxuICAgIC8qKlxuICAgICAqIERvd25sb2FkIGltYWdlcyBmb3IgYSBzcGVjaWZpYyBjYXRlZ29yeVxuICAgICAqIEBwYXJhbSBjYXRlZ29yeSBDYXRlZ29yeSB0byBkb3dubG9hZCBpbWFnZXMgZm9yXG4gICAgICovXG4gICAgcHJpdmF0ZSB2b2lkIGRvd25sb2FkSW1hZ2VzKFN0cmluZyBjYXRlZ29yeSkge1xuICAgICAgICBMaXN0PFN0cmluZz4gdXJscyA9IElNQUdFX1VSTFMuZ2V0KGNhdGVnb3J5KTtcblxuICAgICAgICBpZiAodXJscyA9PSBudWxsIHx8IHVybHMuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBTdHJpbmcgYmFzZVBhdGggPSBnZXRTZXJ2bGV0Q29udGV4dCgpLmdldFJlYWxQYXRoKFwiL2ltYWdlcy9wcm9kdWN0cy9cIiArIGNhdGVnb3J5KTtcbiAgICAgICAgRmlsZSBiYXNlRGlyID0gbmV3IEZpbGUoYmFzZVBhdGgpO1xuXG4gICAgICAgIGlmICghYmFzZURpci5leGlzdHMoKSkge1xuICAgICAgICAgICAgYmFzZURpci5ta2RpcnMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgdXJscy5zaXplKCk7IGkrKykge1xuICAgICAgICAgICAgU3RyaW5nIHVybCA9IHVybHMuZ2V0KGkpO1xuICAgICAgICAgICAgU3RyaW5nIGZpbGVOYW1lID0gY2F0ZWdvcnkgKyAoaSArIDEpICsgXCIuanBnXCI7XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZG93bmxvYWRJbWFnZSh1cmwsIG5ldyBGaWxlKGJhc2VEaXIsIGZpbGVOYW1lKSk7XG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRG93bmxvYWRlZDogXCIgKyBmaWxlTmFtZSk7XG4gICAgICAgICAgICB9IGNhdGNoIChJT0V4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICAgICAgU3lzdGVtLmVyci5wcmludGxuKFwiRXJyb3IgZG93bmxvYWRpbmcgXCIgKyBmaWxlTmFtZSArIFwiOiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERvd25sb2FkIGFuIGltYWdlIGZyb20gYSBVUkwgYW5kIHNhdmUgaXQgdG8gYSBmaWxlXG4gICAgICogQHBhcmFtIGltYWdlVXJsIFVSTCBvZiB0aGUgaW1hZ2UgdG8gZG93bmxvYWRcbiAgICAgKiBAcGFyYW0gZGVzdGluYXRpb25GaWxlIEZpbGUgdG8gc2F2ZSB0aGUgaW1hZ2UgdG9cbiAgICAgKiBAdGhyb3dzIElPRXhjZXB0aW9uIElmIGFuIGVycm9yIG9jY3VycyBkdXJpbmcgZG93bmxvYWRcbiAgICAgKi9cbiAgICBwcml2YXRlIHZvaWQgZG93bmxvYWRJbWFnZShTdHJpbmcgaW1hZ2VVcmwsIEZpbGUgZGVzdGluYXRpb25GaWxlKSB0aHJvd3MgSU9FeGNlcHRpb24ge1xuICAgICAgICBVUkwgdXJsID0gbmV3IFVSTChpbWFnZVVybCk7XG4gICAgICAgIFVSTENvbm5lY3Rpb24gY29ubmVjdGlvbiA9IHVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIlVzZXItQWdlbnRcIiwgXCJNb3ppbGxhLzUuMFwiKTtcblxuICAgICAgICB0cnkgKElucHV0U3RyZWFtIGluID0gY29ubmVjdGlvbi5nZXRJbnB1dFN0cmVhbSgpO1xuICAgICAgICAgICAgIEZpbGVPdXRwdXRTdHJlYW0gb3V0ID0gbmV3IEZpbGVPdXRwdXRTdHJlYW0oZGVzdGluYXRpb25GaWxlKSkge1xuXG4gICAgICAgICAgICBieXRlW10gYnVmZmVyID0gbmV3IGJ5dGVbNDA5Nl07XG4gICAgICAgICAgICBpbnQgYnl0ZXNSZWFkO1xuXG4gICAgICAgICAgICB3aGlsZSAoKGJ5dGVzUmVhZCA9IGluLnJlYWQoYnVmZmVyKSkgIT0gLTEpIHtcbiAgICAgICAgICAgICAgICBvdXQud3JpdGUoYnVmZmVyLCAwLCBieXRlc1JlYWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuLi4uXG5QYXRoOiBzcmMvbWFpbi93ZWJhcHAvaW1hZ2VzL1JFQURNRS50eHRcblBsZWFzZSBhZGQgYSBkZWZhdWx0IHByb2ZpbGUgaW1hZ2UgbmFtZWQgXCJkZWZhdWx0LXByb2ZpbGUuanBnXCIgaW4gdGhpcyBkaXJlY3RvcnkuXG5UaGlzIGltYWdlIHdpbGwgYmUgdXNlZCBhcyB0aGUgZGVmYXVsdCBwcm9maWxlIHBpY3R1cmUgZm9yIHVzZXJzIHdobyBoYXZlbid0IHVwbG9hZGVkIHRoZWlyIG93bi5cbi4uLlxuUGF0aDogQ2xvdGhlZS9zcmMvbWFpbi93ZWJhcHAvaW1hZ2VzL1JFQURNRS50eHRcblBsZWFzZSBhZGQgYSBkZWZhdWx0IHByb2ZpbGUgaW1hZ2UgbmFtZWQgXCJkZWZhdWx0LXByb2ZpbGUuanBnXCIgaW4gdGhpcyBkaXJlY3RvcnkuXG5UaGlzIGltYWdlIHdpbGwgYmUgdXNlZCBhcyB0aGUgZGVmYXVsdCBwcm9maWxlIHBpY3R1cmUgZm9yIHVzZXJzIHdobyBoYXZlbid0IHVwbG9hZGVkIHRoZWlyIG93bi5cbi4uLlxuUGF0aDogQ2xvdGhlZS9zcmMvbWFpbi9qYXZhL2NvbnRyb2xsZXIvSW1hZ2VEb3dubG9hZFNlcnZsZXQuamF2YVxuLi4uXG5cbiAgICAgICAgaWYgKFwiZG93bmxvYWRcIi5lcXVhbHMoYWN0aW9uKSkge1xuICAgICAgICAgICAgLy8gRG93bmxvYWQgaW1hZ2VzXG4gICAgICAgICAgICBTdHJpbmcgY2F0ZWdvcnkgPSByZXF1ZXN0LmdldFBhcmFtZXRlcihcImNhdGVnb3J5XCIpO1xuXG4gICAgICAgICAgICBpZiAoY2F0ZWdvcnkgPT0gbnVsbCB8fCBjYXRlZ29yeS5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICAvLyBEb3dubG9hZCBhbGwgY2F0ZWdvcmllc1xuICAgICAgICAgICAgICAgIGZvciAoU3RyaW5nIGNhdCA6IElNQUdFX1VSTFMua2V5U2V0KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRJbWFnZXMoY2F0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2Vzc2lvbi5zZXRBdHRyaWJ1dGUoXCJzdWNjZXNzTWVzc2FnZVwiLCBcIkFsbCBpbWFnZXMgZG93bmxvYWRlZCBzdWNjZXNzZnVsbHlcIik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIERvd25sb2FkIHNwZWNpZmljIGNhdGVnb3J5XG4gICAgICAgICAgICAgICAgaWYgKElNQUdFX1VSTFMuY29udGFpbnNLZXkoY2F0ZWdvcnkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGRvd25sb2FkSW1hZ2VzKGNhdGVnb3J5KTtcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbi5zZXRBdHRyaWJ1dGUoXCJzdWNjZXNzTWVzc2FnZVwiLCBjYXRlZ29yeSArIFwiIGltYWdlcyBkb3dubG9hZGVkIHN1Y2Nlc3NmdWxseVwiKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uLnNldEF0dHJpYnV0ZShcImVycm9yTWVzc2FnZVwiLCBcIkludmFsaWQgY2F0ZWdvcnk6IFwiICsgY2F0ZWdvcnkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KFwiSW1hZ2VEb3dubG9hZFNlcnZsZXRcIik7XG4gICAgICAgIH1cbiAgICB9XG4uLi5cblxuICAgIC8qKlxuICAgICAqIERvd25sb2FkIGltYWdlcyBmb3IgYSBzcGVjaWZpYyBjYXRlZ29yeVxuICAgICAqIEBwYXJhbSBjYXRlZ29yeSBDYXRlZ29yeSB0byBkb3dubG9hZCBpbWFnZXMgZm9yXG4gICAgICovXG4gICAgcHJpdmF0ZSB2b2lkIGRvd25sb2FkSW1hZ2VzKFN0cmluZyBjYXRlZ29yeSkge1xuICAgICAgICBMaXN0PFN0cmluZz4gdXJscyA9IElNQUdFX1VSTFMuZ2V0KGNhdGVnb3J5KTtcblxuICAgICAgICBpZiAodXJscyA9PSBudWxsIHx8IHVybHMuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBTdHJpbmcgYmFzZVBhdGggPSBnZXRTZXJ2bGV0Q29udGV4dCgpLmdldFJlYWxQYXRoKFwiL2ltYWdlcy9wcm9kdWN0cy9cIiArIGNhdGVnb3J5KTtcbiAgICAgICAgRmlsZSBiYXNlRGlyID0gbmV3IEZpbGUoYmFzZVBhdGgpO1xuXG4gICAgICAgIGlmICghYmFzZURpci5leGlzdHMoKSkge1xuICAgICAgICAgICAgYmFzZURpci5ta2RpcnMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgdXJscy5zaXplKCk7IGkrKykge1xuICAgICAgICAgICAgU3RyaW5nIHVybCA9IHVybHMuZ2V0KGkpO1xuICAgICAgICAgICAgU3RyaW5nIGZpbGVOYW1lID0gY2F0ZWdvcnkgKyAoaSArIDEpICsgXCIuanBnXCI7XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZG93bmxvYWRJbWFnZSh1cmwsIG5ldyBGaWxlKGJhc2VEaXIsIGZpbGVOYW1lKSk7XG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRG93bmxvYWRlZDogXCIgKyBmaWxlTmFtZSk7XG4gICAgICAgICAgICB9IGNhdGNoIChJT0V4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICAgICAgU3lzdGVtLmVyci5wcmludGxuKFwiRXJyb3IgZG93bmxvYWRpbmcgXCIgKyBmaWxlTmFtZSArIFwiOiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbi4uLlxuUGF0aDogc3JjL21haW4vd2ViYXBwL2ltYWdlcy9wcm9kdWN0cy9SRUFETUUudHh0XG5Qcm9kdWN0IEltYWdlcyBEaXJlY3RvcnkgU3RydWN0dXJlXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuVGhpcyBkaXJlY3RvcnkgY29udGFpbnMgcHJvZHVjdCBpbWFnZXMgb3JnYW5pemVkIGJ5IGNhdGVnb3J5OlxuXG4vbWVuIC0gTWVuJ3MgY2xvdGhpbmcgYW5kIGFjY2Vzc29yaWVzXG4vd29tZW4gLSBXb21lbidzIGNsb3RoaW5nIGFuZCBhY2Nlc3Nvcmllc1xuL2tpZHMgLSBLaWRzJyBjbG90aGluZyBhbmQgYWNjZXNzb3JpZXNcbi9hY2Nlc3NvcmllcyAtIEdlbmVyYWwgYWNjZXNzb3JpZXNcblxuSW1hZ2UgTmFtaW5nIENvbnZlbnRpb25cbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblBsZWFzZSBuYW1lIHlvdXIgcHJvZHVjdCBpbWFnZXMgdXNpbmcgdGhlIGZvbGxvd2luZyBmb3JtYXQ6XG5bY2F0ZWdvcnldX1twcm9kdWN0LXR5cGVdX1tudW1iZXJdLmpwZ1xuXG5FeGFtcGxlczpcbi0gbWVuX3RzaGlydF8xLmpwZ1xuLSB3b21lbl9kcmVzc18yLmpwZ1xuLSBraWRzX2plYW5zXzEuanBnXG4tIGFjY2Vzc29yaWVzX2JlbHRfMS5qcGdcblxuSW1hZ2UgUmVxdWlyZW1lbnRzXG4tLS0tLS0tLS0tLS0tLS0tLVxuLSBGb3JtYXQ6IEpQRyBvciBQTkdcbi0gU2l6ZTogODAweDgwMCBwaXhlbHMgKHNxdWFyZSkgcmVjb21tZW5kZWRcbi0gTWF4IGZpbGUgc2l6ZTogNTAwS0Jcbi4uLlxuUGF0aDogc3JjL21haW4vd2ViYXBwL2ltYWdlcy9wcm9kdWN0cy9SRUFETUUuaHRtbFxuLi4uXG4gICAgXG4gICAgPGRpdiBjbGFzcz1cImNvbnRhaW5lclwiPlxuICAgICAgICA8aDI+RGF0YWJhc2UgU2V0dXA8L2gyPlxuICAgICAgICA8cD5BZnRlciBwbGFjaW5nIHRoZSBpbWFnZXMgaW4gdGhlIGNvcnJlY3QgZGlyZWN0b3JpZXMsIHlvdSBuZWVkIHRvIHVwZGF0ZSB0aGUgZGF0YWJhc2U6PC9wPlxuICAgICAgICBcbiAgICAgICAgPG9sPlxuICAgICAgICAgICAgPGxpPlJ1biB0aGUgPGNvZGU+cHJvZHVjdF9pbWFnZXMuc3FsPC9jb2RlPiBzY3JpcHQgdG8gY3JlYXRlIHRoZSBwcm9kdWN0X2ltYWdlcyB0YWJsZTwvbGk+XG4gICAgICAgICAgICA8bGk+UnVuIHRoZSA8Y29kZT5zYW1wbGVfcHJvZHVjdF9pbWFnZXMuc3FsPC9jb2RlPiBzY3JpcHQgdG8gYWRkIHRoZSBpbWFnZSByZWZlcmVuY2VzIHRvIHRoZSBkYXRhYmFzZTwvbGk+XG4gICAgICAgIDwvb2w+XG4gICAgICAgIFxuICAgICAgICA8cHJlPlxuLS0gUnVuIHRoZXNlIGNvbW1hbmRzIGluIHlvdXIgTXlTUUwgZGF0YWJhc2VcbnNvdXJjZSBwcm9kdWN0X2ltYWdlcy5zcWxcbnNvdXJjZSBzYW1wbGVfcHJvZHVjdF9pbWFnZXMuc3FsXG4gICAgICAgIDwvcHJlPlxuICAgIDwvZGl2PlxuICAgIFxuICAgIDxkaXYgY2xhc3M9XCJjb250YWluZXJcIj5cbiAgICAgICAgPGgyPlZlcmlmeWluZyB0aGUgU2V0dXA8L2gyPlxuICAgICAgICA8cD5UbyB2ZXJpZnkgdGhhdCB0aGUgaW1hZ2VzIGFyZSBjb3JyZWN0bHkgc2V0IHVwOjwvcD5cbiAgICAgICAgXG4gICAgICAgIDxvbD5cbiAgICAgICAgICAgIDxsaT5TdGFydCB0aGUgVG9tY2F0IHNlcnZlcjwvbGk+XG4gICAgICAgICAgICA8bGk+TmF2aWdhdGUgdG8gdGhlIHByb2R1Y3RzIHBhZ2U8L2xpPlxuICAgICAgICAgICAgPGxpPkNsaWNrIG9uIGEgcHJvZHVjdCB0byB2aWV3IGl0cyBkZXRhaWxzPC9saT5cbiAgICAgICAgICAgIDxsaT5WZXJpZnkgdGhhdCB0aGUgaW1hZ2VzIGFyZSBkaXNwbGF5ZWQgY29ycmVjdGx5PC9saT5cbiAgICAgICAgICAgIDxsaT5UZXN0IHRoZSBpbWFnZSBnYWxsZXJ5IGZ1bmN0aW9uYWxpdHkgYnkgY2xpY2tpbmcgb24gdGh1bWJuYWlsczwvLi4uIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiM2UyNDc0ZmYtYTQ0MS00Zjk3LTg4ZWUtNDUxMWRmMzY1NDk3O3Rvb2x1X3ZydHhfMDFDeHNudXM4RGRNQTg2M0xmWWY2eURpIjp7InJlcXVlc3RJZCI6IjNlMjQ3NGZmLWE0NDEtNGY5Ny04OGVlLTQ1MTFkZjM2NTQ5NyIsInRvb2xVc2VJZCI6InRvb2x1X3ZydHhfMDFDeHNudXM4RGRNQTg2M0xmWWY2eURpIiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiVGhlIGZvbGxvd2luZyBjb2RlIHNlY3Rpb25zIHdlcmUgcmV0cmlldmVkOlxuUGF0aDogQ2xvdGhlZS9zcmMvbWFpbi93ZWJhcHAvYWRtaW4vdXBsb2FkLWNhdGVnb3J5LWltYWdlLmpzcFxuPCVAIHBhZ2UgbGFuZ3VhZ2U9XCJqYXZhXCIgY29udGVudFR5cGU9XCJ0ZXh0L2h0bWw7IGNoYXJzZXQ9VVRGLThcIiBwYWdlRW5jb2Rpbmc9XCJVVEYtOFwiJT5cbjwlQCBwYWdlIGltcG9ydD1cImphdmEudXRpbC5MaXN0XCIgJT5cbjwlQCBwYWdlIGltcG9ydD1cIm1vZGVsLlVzZXJcIiAlPlxuPCVAIHBhZ2UgaW1wb3J0PVwibW9kZWwuQ2F0ZWdvcnlcIiAlPlxuPCVAIHBhZ2UgaW1wb3J0PVwiZGFvLkNhdGVnb3J5REFPXCIgJT5cblxuPCVcbi8vIENoZWNrIGlmIHVzZXIgaXMgbG9nZ2VkIGluIGFuZCBpcyBhbiBhZG1pblxuT2JqZWN0IHVzZXJPYmogPSBzZXNzaW9uLmdldEF0dHJpYnV0ZShcInVzZXJcIik7XG5pZiAodXNlck9iaiA9PSBudWxsKSB7XG4gICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL0xvZ2luU2VydmxldFwiKTtcbiAgICByZXR1cm47XG59XG5cblVzZXIgdXNlciA9IChVc2VyKSB1c2VyT2JqO1xuaWYgKCF1c2VyLmlzQWRtaW4oKSkge1xuICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9Mb2dpblNlcnZsZXRcIik7XG4gICAgcmV0dXJuO1xufVxuLi4uXG4gICAgPC9zdHlsZT5cbjwvaGVhZD5cbjxib2R5PlxuICAgIDxkaXYgY2xhc3M9XCJkYXNoYm9hcmQtY29udGFpbmVyXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJzaWRlYmFyXCIgaWQ9XCJzaWRlYmFyXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwic2lkZWJhci1oZWFkZXJcIj5cbiAgICAgICAgICAgICAgICA8YSBocmVmPVwiPCU9IHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSAlPi9pbmRleC5qc3BcIiBjbGFzcz1cImxvZ29cIj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJsb2dvLWljb25cIj48aSBjbGFzcz1cImZhcyBmYS10c2hpcnRcIj48L2k+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImxvZ28tdGV4dFwiPkNMT1RIRUU8L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ1c2VyLWluZm9cIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInVzZXItYXZhdGFyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImZhcyBmYS11c2VyLXNoaWVsZFwiPjwvaT5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ1c2VyLWRldGFpbHNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxoND48JT0gdXNlci5nZXRGaXJzdE5hbWUoKSAlPjwvaDQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cD5BZG1pbmlzdHJhdG9yPC9wPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwic2lkZWJhci1tZW51XCI+XG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cIjwlPSByZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgJT4vYWRtaW4vZGFzaGJvYXJkLmpzcFwiIGNsYXNzPVwibWVudS1pdGVtXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibWVudS1pY29uXCI+PGkgY2xhc3M9XCJmYXMgZmEtdGFjaG9tZXRlci1hbHRcIj48L2k+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICBEYXNoYm9hcmRcbiAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cIjwlPSByZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgJT4vYWRtaW4vcHJvZHVjdHMuanNwXCIgY2xhc3M9XCJtZW51LWl0ZW1cIj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJtZW51LWljb25cIj48aSBjbGFzcz1cImZhcyBmYS1ib3hcIj48L2k+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICBQcm9kdWN0c1xuICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICA8YSBocmVmPVwiPCU9IHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSAlPi9hZG1pbi9jYXRlZ29yaWVzLmpzcFwiIGNsYXNzPVwibWVudS1pdGVtIGFjdGl2ZVwiPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm1lbnUtaWNvblwiPjxpIGNsYXNzPVwiZmFzIGZhLXRhZ3NcIj48L2k+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICBDYXRlZ29yaWVzXG4gICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgIDxhIGhyZWY9XCI8JT0gcmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICU+L2FkbWluL29yZGVycy5qc3BcIiBjbGFzcz1cIm1lbnUtaXRlbVwiPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm1lbnUtaWNvblwiPjxpIGNsYXNzPVwiZmFzIGZhLXNob3BwaW5nLWJhZ1wiPjwvaT48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIE9yZGVyc1xuICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICA8YSBocmVmPVwiPCU9IHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSAlPi9hZG1pbi9jdXN0b21lcnMuanNwXCIgY2xhc3M9XCJtZW51LWl0ZW1cIj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJtZW51LWljb25cIj48aSBjbGFzcz1cImZhcyBmYS11c2Vyc1wiPjwvaT48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIEN1c3RvbWVyc1xuICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICA8YSBocmVmPVwiPCU9IHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSAlPi9hZG1pbi9yZXZpZXdzLmpzcFwiIGNsYXNzPVwibWVudS1pdGVtXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibWVudS1pY29uXCI+PGkgY2xhc3M9XCJmYXMgZmEtc3RhclwiPjwvaT48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIFJldmlld3NcbiAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cIjwlPSByZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgJT4vYWRtaW4vbWVzc2FnZXMuanNwXCIgY2xhc3M9XCJtZW51LWl0ZW1cIj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJtZW51LWljb25cIj48aSBjbGFzcz1cImZhcyBmYS1lbnZlbG9wZVwiPjwvaT48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIE1lc3NhZ2VzXG4gICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgIDxhIGhyZWY9XCI8JT0gcmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICU+L2FkbWluL3NldHRpbmdzLmpzcFwiIGNsYXNzPVwibWVudS1pdGVtXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibWVudS1pY29uXCI+PGkgY2xhc3M9XCJmYXMgZmEtY29nXCI+PC9pPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgU2V0dGluZ3NcbiAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cIjwlPSByZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgJT4vTG9nb3V0U2VydmxldFwiIGNsYXNzPVwibWVudS1pdGVtXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibWVudS1pY29uXCI+PGkgY2xhc3M9XCJmYXMgZmEtc2lnbi1vdXQtYWx0XCI+PC9pPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgTG9nb3V0XG4gICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxkaXYgY2xhc3M9XCJtYWluLWNvbnRlbnRcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJoZWFkZXJcIj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPVwic2lkZWJhclRvZ2dsZVwiIGNsYXNzPVwic2lkZWJhci10b2dnbGVcIj5cbiAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYXMgZmEtYmFyc1wiPjwvaT5cbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cblxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJoZWFkZXItYWN0aW9uc1wiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic2VhcmNoLWJveFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgcGxhY2Vob2xkZXI9XCJTZWFyY2guLi5cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24+PGkgY2xhc3M9XCJmYXMgZmEtc2VhcmNoXCI+PC9pPjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibm90aWZpY2F0aW9uc1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cIm5vdGlmaWNhdGlvbi1idG5cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImZhcyBmYS1iZWxsXCI+PC9pPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiYmFkZ2VcIj4zPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250ZW50XCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRlbnQtaGVhZGVyXCI+XG4gICAgICAgICAgICAgICAgICAgIDxoMT5VcGxvYWQgQ2F0ZWdvcnkgSW1hZ2U8L2gxPlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYnRuLWJhY2tcIiBvbmNsaWNrPVwibG9jYXRpb24uaHJlZj0nPCU9IHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSAlPi9hZG1pbi9lZGl0LWNhdGVnb3J5LmpzcD9pZD08JT0gY2F0ZWdvcnkuZ2V0SWQoKSAlPidcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwiZmFzIGZhLWFycm93LWxlZnRcIj48L2k+IEJhY2sgdG8gRWRpdCBDYXRlZ29yeVxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbi4uLlxuXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tY29udGFpbmVyXCI+XG4gICAgICAgICAgICAgICAgICAgIDxmb3JtIGFjdGlvbj1cIjwlPSByZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgJT4vQ2F0ZWdvcnlJbWFnZVNlcnZsZXRcIiBtZXRob2Q9XCJwb3N0XCIgZW5jdHlwZT1cIm11bHRpcGFydC9mb3JtLWRhdGFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cImNhdGVnb3J5SWRcIiB2YWx1ZT1cIjwlPSBjYXRlZ29yeS5nZXRJZCgpICU+XCI+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cImNhdGVnb3J5SW1hZ2VcIiBjbGFzcz1cImZvcm0tbGFiZWxcIj5TZWxlY3QgSW1hZ2U8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiZmlsZVwiIGlkPVwiY2F0ZWdvcnlJbWFnZVwiIG5hbWU9XCJjYXRlZ29yeUltYWdlXCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBhY2NlcHQ9XCJpbWFnZS8qXCIgcmVxdWlyZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0taGludFwiPlJlY29tbWVuZGVkIHNpemU6IDgwMHg2MDAgcGl4ZWxzLiBNYXggZmlsZSBzaXplOiAxME1CLjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4uLi5cblBhdGg6IENsb3RoZWUvc3JjL21haW4vd2ViYXBwL2FkbWluL2VkaXQtY2F0ZWdvcnkuanNwXG4uLi5cblxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgICAgICAgICA8IS0tIENhdGVnb3J5IEltYWdlIFNlY3Rpb24gLS0+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXRlZ29yeS1pbWFnZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGgzPkNhdGVnb3J5IEltYWdlPC9oMz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwlIGlmIChjYXRlZ29yeS5nZXRJbWFnZVVybCgpICE9IG51bGwgJiYgIWNhdGVnb3J5LmdldEltYWdlVXJsKCkuaXNFbXB0eSgpKSB7ICU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCI8JT0gcmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICU+LzwlPSBjYXRlZ29yeS5nZXRJbWFnZVVybCgpICU+XCIgYWx0PVwiPCU9IGNhdGVnb3J5LmdldE5hbWUoKSAlPlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPCUgfSBlbHNlIHsgJT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibm8taW1hZ2VcIj5ObyBpbWFnZSB1cGxvYWRlZDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPCUgfSAlPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImltYWdlLWFjdGlvbnNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwidXBsb2FkLWNhdGVnb3J5LWltYWdlLmpzcD9pZD08JT0gY2F0ZWdvcnkuZ2V0SWQoKSAlPlwiIGNsYXNzPVwiYnRuLXN1Ym1pdFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImZhcyBmYS11cGxvYWRcIj48L2k+IDwlPSBjYXRlZ29yeS5nZXRJbWFnZVVybCgpICE9IG51bGwgJiYgIWNhdGVnb3J5LmdldEltYWdlVXJsKCkuaXNFbXB0eSgpID8gXCJDaGFuZ2UgSW1hZ2VcIiA6IFwiVXBsb2FkIEltYWdlXCIgJT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPCUgaWYgKGNhdGVnb3J5LmdldEltYWdlVXJsKCkgIT0gbnVsbCAmJiAhY2F0ZWdvcnkuZ2V0SW1hZ2VVcmwoKS5pc0VtcHR5KCkpIHsgJT5cbi4uLlxuUGF0aDogc3JjL21haW4vd2ViYXBwL2FkbWluL3VwbG9hZC1jYXRlZ29yeS1pbWFnZS5qc3Bcbi4uLlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm1lbnUtaWNvblwiPjxpIGNsYXNzPVwiZmFzIGZhLXVzZXJzXCI+PC9pPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgQ3VzdG9tZXJzXG4gICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgIDxhIGhyZWY9XCI8JT0gcmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICU+L2FkbWluL3Jldmlld3MuanNwXCIgY2xhc3M9XCJtZW51LWl0ZW1cIj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJtZW51LWljb25cIj48aSBjbGFzcz1cImZhcyBmYS1zdGFyXCI+PC9pPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgUmV2aWV3c1xuICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICA8YSBocmVmPVwiPCU9IHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSAlPi9hZG1pbi9tZXNzYWdlcy5qc3BcIiBjbGFzcz1cIm1lbnUtaXRlbVwiPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm1lbnUtaWNvblwiPjxpIGNsYXNzPVwiZmFzIGZhLWVudmVsb3BlXCI+PC9pPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgTWVzc2FnZXNcbiAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cIjwlPSByZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgJT4vYWRtaW4vc2V0dGluZ3MuanNwXCIgY2xhc3M9XCJtZW51LWl0ZW1cIj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJtZW51LWljb25cIj48aSBjbGFzcz1cImZhcyBmYS1jb2dcIj48L2k+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICBTZXR0aW5nc1xuICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICA8YSBocmVmPVwiPCU9IHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSAlPi9Mb2dvdXRTZXJ2bGV0XCIgY2xhc3M9XCJtZW51LWl0ZW1cIj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJtZW51LWljb25cIj48aSBjbGFzcz1cImZhcyBmYS1zaWduLW91dC1hbHRcIj48L2k+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICBMb2dvdXRcbiAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4uLi5cblxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgICAgICAgICA8Zm9ybSBhY3Rpb249XCI8JT0gcmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICU+L0NhdGVnb3J5SW1hZ2VTZXJ2bGV0XCIgbWV0aG9kPVwicG9zdFwiIGVuY3R5cGU9XCJtdWx0aXBhcnQvZm9ybS1kYXRhXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImhpZGRlblwiIG5hbWU9XCJjYXRlZ29yeUlkXCIgdmFsdWU9XCI8JT0gY2F0ZWdvcnkuZ2V0SWQoKSAlPlwiPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJjYXRlZ29yeUltYWdlXCIgY2xhc3M9XCJmb3JtLWxhYmVsXCI+U2VsZWN0IEltYWdlPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImZpbGVcIiBpZD1cImNhdGVnb3J5SW1hZ2VcIiBuYW1lPVwiY2F0ZWdvcnlJbWFnZVwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgYWNjZXB0PVwiaW1hZ2UvKlwiIHJlcXVpcmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWhpbnRcIj5SZWNvbW1lbmRlZCBzaXplOiA4MDB4NjAwIHBpeGVscy4gTWF4IGZpbGUgc2l6ZTogMTBNQi48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuLi4uXG5QYXRoOiBDbG90aGVlL3NyYy9tYWluL3dlYmFwcC9hZG1pbi9jYXRlZ29yaWVzLmpzcFxuLi4uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY2F0ZWdvcnktZGF0ZVwiPjxpIGNsYXNzPVwiZmFzIGZhLWNhbGVuZGFyLWFsdFwiPjwvaT4gPCU9IGNhdGVnb3J5LmdldENyZWF0ZWRBdCgpICE9IG51bGwgPyBkYXRlRm9ybWF0LmZvcm1hdChjYXRlZ29yeS5nZXRDcmVhdGVkQXQoKSkgOiBcIk4vQVwiICU+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXRlZ29yeS1hY3Rpb25zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCI8JT0gcmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICU+L0NhdGVnb3J5U2VydmxldD9hY3Rpb249dmlldyZpZD08JT0gY2F0ZWdvcnkuZ2V0SWQoKSAlPlwiIGNsYXNzPVwiYnRuLXZpZXdcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwiZmFzIGZhLWV5ZVwiPjwvaT4gVmlld1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCI8JT0gcmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICU+L0NhdGVnb3J5U2VydmxldD9hY3Rpb249c2hvd0VkaXQmaWQ9PCU9IGNhdGVnb3J5LmdldElkKCkgJT5cIiBjbGFzcz1cImJ0bi1lZGl0XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImZhcyBmYS1lZGl0XCI+PC9pPiBFZGl0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIjwlPSByZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgJT4vYWRtaW4vdXBsb2FkLWNhdGVnb3J5LWltYWdlLmpzcD9pZD08JT0gY2F0ZWdvcnkuZ2V0SWQoKSAlPlwiIGNsYXNzPVwiYnRuLXVwbG9hZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYXMgZmEtaW1hZ2VcIj48L2k+IEltYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cbi4uLlxuUGF0aDogQ2xvdGhlZS9zcmMvbWFpbi9qYXZhL2NvbnRyb2xsZXIvQ2F0ZWdvcnlJbWFnZVNlcnZsZXQuamF2YVxuLi4uXG5cbiAgICAgICAgICAgIFN0cmluZyBmaWxlRXh0ZW5zaW9uID0gZmlsZU5hbWUuc3Vic3RyaW5nKGZpbGVOYW1lLmxhc3RJbmRleE9mKFwiLlwiKSk7XG4gICAgICAgICAgICBTdHJpbmcgbmV3RmlsZU5hbWUgPSBcImNhdGVnb3J5X1wiICsgY2F0ZWdvcnlJZCArIGZpbGVFeHRlbnNpb247XG5cbiAgICAgICAgICAgIC8vIFNhdmUgdGhlIGZpbGUgdG8gYSBwZXJtYW5lbnQgbG9jYXRpb25cbiAgICAgICAgICAgIFN0cmluZyByZWxhdGl2ZVBhdGggPSBcImltYWdlcy9jYXRlZ29yaWVzXCI7XG5cbiAgICAgICAgICAgIC8vIEdldCB0aGUgcmVhbCBwYXRoIHRvIHRoZSB3ZWIgYXBwbGljYXRpb24gcm9vdCBkaXJlY3RvcnlcbiAgICAgICAgICAgIFN0cmluZyB3ZWJhcHBSb290ID0gcmVxdWVzdC5nZXRTZXJ2bGV0Q29udGV4dCgpLmdldFJlYWxQYXRoKFwiL1wiKTtcblxuICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBkZXBsb3ltZW50IGRpcmVjdG9yeSBwYXRoXG4gICAgICAgICAgICBTdHJpbmcgZGVwbG95bWVudFBhdGggPSB3ZWJhcHBSb290ICsgcmVsYXRpdmVQYXRoO1xuXG4gICAgICAgICAgICAvLyBFbnN1cmUgZGVwbG95bWVudCBkaXJlY3RvcnkgZXhpc3RzXG4gICAgICAgICAgICBGaWxlIGRlcGxveW1lbnREaXIgPSBuZXcgRmlsZShkZXBsb3ltZW50UGF0aCk7XG4gICAgICAgICAgICBpZiAoIWRlcGxveW1lbnREaXIuZXhpc3RzKCkpIHtcbiAgICAgICAgICAgICAgICBib29sZWFuIGNyZWF0ZWQgPSBkZXBsb3ltZW50RGlyLm1rZGlycygpO1xuICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNhdGVnb3J5SW1hZ2VTZXJ2bGV0IC0gQ3JlYXRlZCBkZXBsb3ltZW50IGRpcmVjdG9yeTogXCIgKyBjcmVhdGVkKTtcbiAgICAgICAgICAgIH1cbi4uLlxuXG4gICAgICAgICAgICAvLyBVcGRhdGUgY2F0ZWdvcnkgaW1hZ2UgVVJMIGluIGRhdGFiYXNlXG4gICAgICAgICAgICBTdHJpbmcgaW1hZ2VVcmwgPSByZWxhdGl2ZVBhdGggKyBcIi9cIiArIG5ld0ZpbGVOYW1lO1xuICAgICAgICAgICAgYm9vbGVhbiBzdWNjZXNzID0gY2F0ZWdvcnlEQU8udXBkYXRlQ2F0ZWdvcnlJbWFnZShjYXRlZ29yeUlkLCBpbWFnZVVybCk7XG5cbiAgICAgICAgICAgIGlmIChzdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL2FkbWluL2NhdGVnb3JpZXMuanNwP3N1Y2Nlc3M9dHJ1ZSZtZXNzYWdlPUNhdGVnb3J5K2ltYWdlK3VwZGF0ZWQrc3VjY2Vzc2Z1bGx5XCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvYWRtaW4vY2F0ZWdvcmllcy5qc3A/ZXJyb3I9dHJ1ZSZtZXNzYWdlPUZhaWxlZCt0byt1cGRhdGUrY2F0ZWdvcnkraW1hZ2VcIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSBjYXRjaCAoTnVtYmVyRm9ybWF0RXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9hZG1pbi9jYXRlZ29yaWVzLmpzcD9lcnJvcj10cnVlJm1lc3NhZ2U9SW52YWxpZCtjYXRlZ29yeStJRFwiKTtcbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9hZG1pbi9jYXRlZ29yaWVzLmpzcD9lcnJvcj10cnVlJm1lc3NhZ2U9RXJyb3IrdXBsb2FkaW5nK2ltYWdlOitcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgfVxuICAgIH1cbi4uLlxuUGF0aDogQ2xvdGhlZS9zcmMvbWFpbi93ZWJhcHAvYWRtaW4vc2ltcGxlLWFkZC1jYXRlZ29yeS5qc3BcbjwlQCBwYWdlIGxhbmd1YWdlPVwiamF2YVwiIGNvbnRlbnRUeXBlPVwidGV4dC9odG1sOyBjaGFyc2V0PVVURi04XCIgcGFnZUVuY29kaW5nPVwiVVRGLThcIiU+XG48JUAgcGFnZSBpbXBvcnQ9XCJtb2RlbC5Vc2VyXCIgJT5cblxuPCVcbi8vIENoZWNrIGlmIHVzZXIgaXMgbG9nZ2VkIGluIGFuZCBpcyBhbiBhZG1pblxuT2JqZWN0IHVzZXJPYmogPSBzZXNzaW9uLmdldEF0dHJpYnV0ZShcInVzZXJcIik7XG5pZiAodXNlck9iaiA9PSBudWxsKSB7XG4gICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL0xvZ2luU2VydmxldFwiKTtcbiAgICByZXR1cm47XG59XG5cblVzZXIgdXNlciA9IChVc2VyKSB1c2VyT2JqO1xuaWYgKCF1c2VyLmlzQWRtaW4oKSkge1xuICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9Mb2dpblNlcnZsZXRcIik7XG4gICAgcmV0dXJuO1xufVxuLi4uXG5cbjwhRE9DVFlQRSBodG1sPlxuPGh0bWwgbGFuZz1cImVuXCI+XG48aGVhZD5cbiAgICA8bWV0YSBjaGFyc2V0PVwiVVRGLThcIj5cbiAgICA8bWV0YSBuYW1lPVwidmlld3BvcnRcIiBjb250ZW50PVwid2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMFwiPlxuICAgIDx0aXRsZT5BZGQgTmV3IENhdGVnb3J5PC90aXRsZT5cbiAgICA8c3R5bGU+XG4gICAgICAgICoge1xuICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICAgICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgICAgIHBhZGRpbmc6IDA7XG4gICAgICAgICAgICBmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGJvZHkge1xuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2Y1ZjVmNTtcbiAgICAgICAgICAgIGNvbG9yOiAjMzMzO1xuICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNjtcbiAgICAgICAgICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC5jb250YWluZXIge1xuICAgICAgICAgICAgbWF4LXdpZHRoOiA4MDBweDtcbiAgICAgICAgICAgIG1hcmdpbjogMCBhdXRvO1xuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMnB4IDEwcHggcmdiYSgwLCAwLCAwLCAwLjEpO1xuICAgICAgICAgICAgcGFkZGluZzogMzBweDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaDEge1xuICAgICAgICAgICAgZm9udC1zaXplOiAyNHB4O1xuICAgICAgICAgICAgY29sb3I6ICMzMzM7XG4gICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAuZm9ybS1ncm91cCB7XG4gICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBsYWJlbCB7XG4gICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDhweDtcbiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgICAgICBjb2xvcjogIzMzMztcbiAgICAgICAgfVxuLi4uXG4gICAgICAgIFxuICAgICAgICA8Zm9ybSBhY3Rpb249XCI8JT0gcmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICU+L2FkbWluL0FkbWluQ2F0ZWdvcnlTZXJ2bGV0XCIgbWV0aG9kPVwicG9zdFwiPlxuICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJoaWRkZW5cIiBuYW1lPVwiYWN0aW9uXCIgdmFsdWU9XCJhZGRcIj5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwibmFtZVwiPkNhdGVnb3J5IE5hbWU8L2xhYmVsPlxuICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGlkPVwibmFtZVwiIG5hbWU9XCJuYW1lXCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiB2YWx1ZT1cIjwlPSBjYXRlZ29yeU5hbWUgJT5cIiByZXF1aXJlZD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cFwiPlxuICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJkZXNjcmlwdGlvblwiPkRlc2NyaXB0aW9uPC9sYWJlbD5cbiAgICAgICAgICAgICAgICA8dGV4dGFyZWEgaWQ9XCJkZXNjcmlwdGlvblwiIG5hbWU9XCJkZXNjcmlwdGlvblwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCI+PCU9IGNhdGVnb3J5RGVzY3JpcHRpb24gJT48L3RleHRhcmVhPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWFjdGlvbnNcIj5cbiAgICAgICAgICAgICAgICA8YSBocmVmPVwiPCU9IHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSAlPi9hZG1pbi9jYXRlZ29yaWVzLmpzcFwiIGNsYXNzPVwiYnRuLWNhbmNlbFwiPkNhbmNlbDwvYT5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIiBjbGFzcz1cImJ0bi1zdWJtaXRcIj5BZGQgQ2F0ZWdvcnk8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Zvcm0+XG4uLi5cblBhdGg6IENsb3RoZWUvc3JjL21haW4vd2ViYXBwL2FkbWluL3ZpZXctY2F0ZWdvcnkuanNwXG48JUAgcGFnZSBsYW5ndWFnZT1cImphdmFcIiBjb250ZW50VHlwZT1cInRleHQvaHRtbDsgY2hhcnNldD1VVEYtOFwiIHBhZ2VFbmNvZGluZz1cIlVURi04XCIlPlxuPCVAIHBhZ2UgaW1wb3J0PVwiamF2YS51dGlsLkxpc3RcIiAlPlxuPCVAIHBhZ2UgaW1wb3J0PVwibW9kZWwuVXNlclwiICU+XG48JUAgcGFnZSBpbXBvcnQ9XCJtb2RlbC5DYXRlZ29yeVwiICU+XG48JUAgcGFnZSBpbXBvcnQ9XCJtb2RlbC5Qcm9kdWN0XCIgJT5cbjwlQCBwYWdlIGltcG9ydD1cImphdmEudGV4dC5TaW1wbGVEYXRlRm9ybWF0XCIgJT5cblxuPCVcbi8vIENoZWNrIGlmIHVzZXIgaXMgbG9nZ2VkIGluIGFuZCBpcyBhbiBhZG1pblxuT2JqZWN0IHVzZXJPYmogPSBzZXNzaW9uLmdldEF0dHJpYnV0ZShcInVzZXJcIik7XG5pZiAodXNlck9iaiA9PSBudWxsKSB7XG4gICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL0xvZ2luU2VydmxldFwiKTtcbiAgICByZXR1cm47XG59XG5cblVzZXIgdXNlciA9IChVc2VyKSB1c2VyT2JqO1xuaWYgKCF1c2VyLmlzQWRtaW4oKSkge1xuICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9Mb2dpblNlcnZsZXRcIik7XG4gICAgcmV0dXJuO1xufVxuLi4uXG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250ZW50XCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRlbnQtaGVhZGVyXCI+XG4gICAgICAgICAgICAgICAgICAgIDxoMT5DYXRlZ29yeSBEZXRhaWxzOiA8JT0gY2F0ZWdvcnkuZ2V0TmFtZSgpICU+PC9oMT5cbiAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidG4tZWRpdFwiIG9uY2xpY2s9XCJsb2NhdGlvbi5ocmVmPScuLi9hZG1pbi9DYXRlZ29yeVNlcnZsZXQ/YWN0aW9uPWVkaXQmaWQ9PCU9IGNhdGVnb3J5LmdldElkKCkgJT4nXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYXMgZmEtZWRpdFwiPjwvaT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ0bi1iYWNrXCIgb25jbGljaz1cImxvY2F0aW9uLmhyZWY9J2NhdGVnb3JpZXMuanNwJ1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwiZmFzIGZhLWFycm93LWxlZnRcIj48L2k+IEJhY2sgdG8gQ2F0ZWdvcmllc1xuICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbnRyb2xsZXIvQ2F0ZWdvcnlJbWFnZVNlcnZsZXQuamF2YVxuLi4uXG5cbiAgICAgICAgICAgIC8vIFByb2Nlc3MgdGhlIHVwbG9hZGVkIGZpbGVcbiAgICAgICAgICAgIFN0cmluZyBmaWxlTmFtZSA9IGdldFN1Ym1pdHRlZEZpbGVOYW1lKGZpbGVQYXJ0KTtcbiAgICAgICAgICAgIGlmIChmaWxlTmFtZSA9PSBudWxsIHx8IGZpbGVOYW1lLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9hZG1pbi9jYXRlZ29yaWVzLmpzcD9lcnJvcj10cnVlJm1lc3NhZ2U9SW52YWxpZCtmaWxlK25hbWVcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBTdHJpbmcgZmlsZUV4dGVuc2lvbiA9IGZpbGVOYW1lLnN1YnN0cmluZyhmaWxlTmFtZS5sYXN0SW5kZXhPZihcIi5cIikpO1xuICAgICAgICAgICAgU3RyaW5nIG5ld0ZpbGVOYW1lID0gXCJjYXRlZ29yeV9cIiArIGNhdGVnb3J5SWQgKyBmaWxlRXh0ZW5zaW9uO1xuXG4gICAgICAgICAgICAvLyBTYXZlIHRoZSBmaWxlIHRvIHRoZSBzZXJ2ZXJcbiAgICAgICAgICAgIFN0cmluZyByZWxhdGl2ZVBhdGggPSBcImltYWdlcy9jYXRlZ29yaWVzXCI7XG4gICAgICAgICAgICBTdHJpbmcgdXBsb2FkUGF0aCA9IHJlcXVlc3QuZ2V0U2VydmxldENvbnRleHQoKS5nZXRSZWFsUGF0aChcIi9cIikgKyByZWxhdGl2ZVBhdGggKyBcIi9cIjtcblxuICAgICAgICAgICAgRmlsZSB1cGxvYWREaXIgPSBuZXcgRmlsZSh1cGxvYWRQYXRoKTtcbiAgICAgICAgICAgIGlmICghdXBsb2FkRGlyLmV4aXN0cygpKSB7XG4gICAgICAgICAgICAgICAgdXBsb2FkRGlyLm1rZGlycygpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmaWxlUGFydC53cml0ZSh1cGxvYWRQYXRoICsgbmV3RmlsZU5hbWUpO1xuXG4gICAgICAgICAgICAvLyBVcGRhdGUgY2F0ZWdvcnkgaW1hZ2UgVVJMIGluIGRhdGFiYXNlXG4gICAgICAgICAgICBTdHJpbmcgaW1hZ2VVcmwgPSByZWxhdGl2ZVBhdGggKyBcIi9cIiArIG5ld0ZpbGVOYW1lO1xuICAgICAgICAgICAgYm9vbGVhbiBzdWNjZXNzID0gY2F0ZWdvcnlEQU8udXBkYXRlQ2F0ZWdvcnlJbWFnZShjYXRlZ29yeUlkLCBpbWFnZVVybCk7XG5cbiAgICAgICAgICAgIGlmIChzdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL2FkbWluL2NhdGVnb3JpZXMuanNwP3N1Y2Nlc3M9dHJ1ZSZtZXNzYWdlPUNhdGVnb3J5K2ltYWdlK3VwZGF0ZWQrc3VjY2Vzc2Z1bGx5XCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvYWRtaW4vY2F0ZWdvcmllcy5qc3A/ZXJyb3I9dHJ1ZSZtZXNzYWdlPUZhaWxlZCt0byt1cGRhdGUrY2F0ZWdvcnkraW1hZ2VcIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSBjYXRjaCAoTnVtYmVyRm9ybWF0RXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9hZG1pbi9jYXRlZ29yaWVzLmpzcD9lcnJvcj10cnVlJm1lc3NhZ2U9SW52YWxpZCtjYXRlZ29yeStJRFwiKTtcbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9hZG1pbi9jYXRlZ29yaWVzLmpzcD9lcnJvcj10cnVlJm1lc3NhZ2U9RXJyb3IrdXBsb2FkaW5nK2ltYWdlOitcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhlbHBlciBtZXRob2QgdG8gZ2V0IHRoZSBzdWJtaXR0ZWQgZmlsZSBuYW1lIGZyb20gYSBQYXJ0XG4gICAgICovXG4gICAgcHJpdmF0ZSBTdHJpbmcgZ2V0U3VibWl0dGVkRmlsZU5hbWUoUGFydCBwYXJ0KSB7XG4gICAgICAgIGZvciAoU3RyaW5nIGNvbnRlbnQgOiBwYXJ0LmdldEhlYWRlcihcImNvbnRlbnQtZGlzcG9zaXRpb25cIikuc3BsaXQoXCI7XCIpKSB7XG4gICAgICAgICAgICBpZiAoY29udGVudC50cmltKCkuc3RhcnRzV2l0aChcImZpbGVuYW1lXCIpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQuc3Vic3RyaW5nKGNvbnRlbnQuaW5kZXhPZignPScpICsgMSkudHJpbSgpLnJlcGxhY2UoXCJcXFwiXCIsIFwiXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cbi4uLlxuUGF0aDogc3JjL21haW4vd2ViYXBwL2FkbWluL3NpbXBsZS1hZGQtY2F0ZWdvcnkuanNwXG48JUAgcGFnZSBsYW5ndWFnZT1cImphdmFcIiBjb250ZW50VHlwZT1cInRleHQvaHRtbDsgY2hhcnNldD1VVEYtOFwiIHBhZ2VFbmNvZGluZz1cIlVURi04XCIlPlxuPCVAIHBhZ2UgaW1wb3J0PVwibW9kZWwuVXNlclwiICU+XG5cbjwlXG4vLyBDaGVjayBpZiB1c2VyIGlzIGxvZ2dlZCBpbiBhbmQgaXMgYW4gYWRtaW5cbk9iamVjdCB1c2VyT2JqID0gc2Vzc2lvbi5nZXRBdHRyaWJ1dGUoXCJ1c2VyXCIpO1xuaWYgKHVzZXJPYmogPT0gbnVsbCkge1xuICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9Mb2dpblNlcnZsZXRcIik7XG4gICAgcmV0dXJuO1xufVxuXG5Vc2VyIHVzZXIgPSAoVXNlcikgdXNlck9iajtcbmlmICghdXNlci5pc0FkbWluKCkpIHtcbiAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvTG9naW5TZXJ2bGV0XCIpO1xuICAgIHJldHVybjtcbn1cbi4uLlxuICAgICAgICBcbiAgICAgICAgPGZvcm0gYWN0aW9uPVwiPCU9IHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSAlPi9hZG1pbi9BZG1pbkNhdGVnb3J5U2VydmxldFwiIG1ldGhvZD1cInBvc3RcIj5cbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cImFjdGlvblwiIHZhbHVlPVwiYWRkXCI+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwXCI+XG4gICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cIm5hbWVcIj5DYXRlZ29yeSBOYW1lPC9sYWJlbD5cbiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBpZD1cIm5hbWVcIiBuYW1lPVwibmFtZVwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgdmFsdWU9XCI8JT0gY2F0ZWdvcnlOYW1lICU+XCIgcmVxdWlyZWQ+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiZGVzY3JpcHRpb25cIj5EZXNjcmlwdGlvbjwvbGFiZWw+XG4gICAgICAgICAgICAgICAgPHRleHRhcmVhIGlkPVwiZGVzY3JpcHRpb25cIiBuYW1lPVwiZGVzY3JpcHRpb25cIiBjbGFzcz1cImZvcm0tY29udHJvbFwiPjwlPSBjYXRlZ29yeURlc2NyaXB0aW9uICU+PC90ZXh0YXJlYT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1hY3Rpb25zXCI+XG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cIjwlPSByZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgJT4vYWRtaW4vY2F0ZWdvcmllcy5qc3BcIiBjbGFzcz1cImJ0bi1jYW5jZWxcIj5DYW5jZWw8L2E+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwic3VibWl0XCIgY2xhc3M9XCJidG4tc3VibWl0XCI+QWRkIENhdGVnb3J5PC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9mb3JtPlxuLi4uXG5QYXRoOiBzcmMvbWFpbi93ZWJhcHAvYWRtaW4vdmlldy1jYXRlZ29yeS5qc3Bcbi4uLlxuXG4vLyBHZXQgY2F0ZWdvcnkgZnJvbSByZXF1ZXN0IGF0dHJpYnV0ZVxuQ2F0ZWdvcnkgY2F0ZWdvcnkgPSAoQ2F0ZWdvcnkpIHJlcXVlc3QuZ2V0QXR0cmlidXRlKFwiY2F0ZWdvcnlcIik7XG5pZiAoY2F0ZWdvcnkgPT0gbnVsbCkge1xuICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9hZG1pbi9jYXRlZ29yaWVzLmpzcD9lcnJvcj1DYXRlZ29yeStub3QrZm91bmRcIik7XG4gICAgcmV0dXJuO1xufVxuXG4vLyBHZXQgcHJvZHVjdHMgaW4gdGhpcyBjYXRlZ29yeVxuTGlzdDxQcm9kdWN0PiBwcm9kdWN0cyA9IChMaXN0PFByb2R1Y3Q+KSByZXF1ZXN0LmdldEF0dHJpYnV0ZShcInByb2R1Y3RzXCIpO1xuXG4vLyBGb3JtYXQgZGF0ZVxuU2ltcGxlRGF0ZUZvcm1hdCBkYXRlRm9ybWF0ID0gbmV3IFNpbXBsZURhdGVGb3JtYXQoXCJNTU0gZGQsIHl5eXlcIik7XG4lPlxuLi4uXG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250ZW50XCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRlbnQtaGVhZGVyXCI+XG4gICAgICAgICAgICAgICAgICAgIDxoMT5DYXRlZ29yeSBEZXRhaWxzOiA8JT0gY2F0ZWdvcnkuZ2V0TmFtZSgpICU+PC9oMT5cbiAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidG4tZWRpdFwiIG9uY2xpY2s9XCJsb2NhdGlvbi5ocmVmPScuLi9hZG1pbi9DYXRlZ29yeVNlcnZsZXQ/YWN0aW9uPWVkaXQmaWQ9PCU9IGNhdGVnb3J5LmdldElkKCkgJT4nXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYXMgZmEtZWRpdFwiPjwvaT4gRWRpdCBDYXRlZ29yeVxuICAgICAgIC4uLiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sIjQ5YzY2NTUwLWE2NTctNDZlMS04MTdkLWJmZGI5NDY4NTRiMTt0b29sdV92cnR4XzAxUkZoRXEyZlZjNWdOakNhU1JraVZydiI6eyJyZXF1ZXN0SWQiOiI0OWM2NjU1MC1hNjU3LTQ2ZTEtODE3ZC1iZmRiOTQ2ODU0YjEiLCJ0b29sVXNlSWQiOiJ0b29sdV92cnR4XzAxUkZoRXEyZlZjNWdOakNhU1JraVZydiIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gQ2xvdGhlZS9zcmMvbWFpbi9qYXZhL2NvbnRyb2xsZXIvQ2F0ZWdvcnlJbWFnZVNlcnZsZXQuamF2YTpcbiAgICAgMVx0cGFja2FnZSBjb250cm9sbGVyO1xuICAgICAyXHRcbiAgICAgM1x0aW1wb3J0IGphdmEuaW8uRmlsZTtcbiAgICAgNFx0aW1wb3J0IGphdmEuaW8uRmlsZUlucHV0U3RyZWFtO1xuICAgICA1XHRpbXBvcnQgamF2YS5pby5GaWxlT3V0cHV0U3RyZWFtO1xuICAgICA2XHRpbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjtcbiAgICAgN1x0aW1wb3J0IGphdmEuaW8uSW5wdXRTdHJlYW07XG4gICAgIDhcdGltcG9ydCBqYXZhLmlvLk91dHB1dFN0cmVhbTtcbiAgICAgOVx0XG4gICAgMTBcdGltcG9ydCBqYWthcnRhLnNlcnZsZXQuU2VydmxldEV4Y2VwdGlvbjtcbiAgICAxMVx0aW1wb3J0IGpha2FydGEuc2VydmxldC5hbm5vdGF0aW9uLk11bHRpcGFydENvbmZpZztcbiAgICAxMlx0aW1wb3J0IGpha2FydGEuc2VydmxldC5odHRwLkh0dHBTZXJ2bGV0O1xuICAgIDEzXHRpbXBvcnQgamFrYXJ0YS5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXRSZXF1ZXN0O1xuICAgIDE0XHRpbXBvcnQgamFrYXJ0YS5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXRSZXNwb25zZTtcbiAgICAxNVx0aW1wb3J0IGpha2FydGEuc2VydmxldC5odHRwLlBhcnQ7XG4gICAgMTZcdFxuICAgIDE3XHRpbXBvcnQgZGFvLkNhdGVnb3J5REFPO1xuICAgIDE4XHRpbXBvcnQgbW9kZWwuQ2F0ZWdvcnk7XG4gICAgMTlcdFxuICAgIDIwXHRcbiAgICAyMVx0LyoqXG4gICAgMjJcdCAqIFNlcnZsZXQgZm9yIGhhbmRsaW5nIGNhdGVnb3J5IGltYWdlIHVwbG9hZHNcbiAgICAyM1x0ICovXG4gICAgMjRcdC8vIFNlcnZsZXQgbWFwcGluZyBkZWZpbmVkIGluIHdlYi54bWxcbiAgICAyNVx0QE11bHRpcGFydENvbmZpZyhcbiAgICAyNlx0ICAgIGZpbGVTaXplVGhyZXNob2xkID0gMTAyNCAqIDEwMjQsIC8vIDEgTUJcbiAgICAyN1x0ICAgIG1heEZpbGVTaXplID0gMTAyNCAqIDEwMjQgKiAxMCwgIC8vIDEwIE1CXG4gICAgMjhcdCAgICBtYXhSZXF1ZXN0U2l6ZSA9IDEwMjQgKiAxMDI0ICogNTAgLy8gNTAgTUJcbiAgICAyOVx0KVxuICAgIDMwXHRwdWJsaWMgY2xhc3MgQ2F0ZWdvcnlJbWFnZVNlcnZsZXQgZXh0ZW5kcyBIdHRwU2VydmxldCB7XG4gICAgMzFcdCAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBsb25nIHNlcmlhbFZlcnNpb25VSUQgPSAxTDtcbiAgICAzMlx0ICAgIHByaXZhdGUgZmluYWwgQ2F0ZWdvcnlEQU8gY2F0ZWdvcnlEQU87XG4gICAgMzNcdFxuICAgIDM0XHQgICAgcHVibGljIENhdGVnb3J5SW1hZ2VTZXJ2bGV0KCkge1xuICAgIDM1XHQgICAgICAgIHN1cGVyKCk7XG4gICAgMzZcdCAgICAgICAgY2F0ZWdvcnlEQU8gPSBuZXcgQ2F0ZWdvcnlEQU8oKTtcbiAgICAzN1x0ICAgIH1cbiAgICAzOFx0XG4gICAgMzlcdCAgICBwcm90ZWN0ZWQgdm9pZCBkb1Bvc3QoSHR0cFNlcnZsZXRSZXF1ZXN0IHJlcXVlc3QsIEh0dHBTZXJ2bGV0UmVzcG9uc2UgcmVzcG9uc2UpXG4gICAgNDBcdCAgICAgICAgICAgIHRocm93cyBTZXJ2bGV0RXhjZXB0aW9uLCBJT0V4Y2VwdGlvbiB7XG4gICAgNDFcdFxuICAgIDQyXHQgICAgICAgIC8vIENoZWNrIGlmIHVzZXIgaXMgbG9nZ2VkIGluIGFuZCBpcyBhbiBhZG1pblxuICAgIDQzXHQgICAgICAgIGpha2FydGEuc2VydmxldC5odHRwLkh0dHBTZXNzaW9uIHNlc3Npb24gPSByZXF1ZXN0LmdldFNlc3Npb24oKTtcbiAgICA0NFx0ICAgICAgICBtb2RlbC5Vc2VyIHVzZXIgPSAobW9kZWwuVXNlcikgc2Vzc2lvbi5nZXRBdHRyaWJ1dGUoXCJ1c2VyXCIpO1xuICAgIDQ1XHRcbiAgICA0Nlx0ICAgICAgICBpZiAodXNlciA9PSBudWxsIHx8ICF1c2VyLmlzQWRtaW4oKSkge1xuICAgIDQ3XHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJDYXRlZ29yeUltYWdlU2VydmxldCAtIFVzZXIgbm90IGxvZ2dlZCBpbiBvciBub3QgYWRtaW5cIik7XG4gICAgNDhcdCAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9Mb2dpblNlcnZsZXRcIik7XG4gICAgNDlcdCAgICAgICAgICAgIHJldHVybjtcbiAgICA1MFx0ICAgICAgICB9XG4gICAgNTFcdFxuICAgIDUyXHQgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNhdGVnb3J5SW1hZ2VTZXJ2bGV0IC0gVXNlciBpcyBhZG1pbjogXCIgKyB1c2VyLmlzQWRtaW4oKSk7XG4gICAgNTNcdFxuICAgIDU0XHQgICAgICAgIC8vIEdldCBjYXRlZ29yeSBJRCBmcm9tIHJlcXVlc3RcbiAgICA1NVx0ICAgICAgICBTdHJpbmcgY2F0ZWdvcnlJZFN0ciA9IHJlcXVlc3QuZ2V0UGFyYW1ldGVyKFwiY2F0ZWdvcnlJZFwiKTtcbiAgICA1Nlx0XG4gICAgNTdcdCAgICAgICAgaWYgKGNhdGVnb3J5SWRTdHIgPT0gbnVsbCB8fCBjYXRlZ29yeUlkU3RyLmlzRW1wdHkoKSkge1xuICAgIDU4XHQgICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvYWRtaW4vY2F0ZWdvcmllcy5qc3A/ZXJyb3I9dHJ1ZSZtZXNzYWdlPUNhdGVnb3J5K0lEK2lzK3JlcXVpcmVkXCIpO1xuICAgIDU5XHQgICAgICAgICAgICByZXR1cm47XG4gICAgNjBcdCAgICAgICAgfVxuICAgIDYxXHRcbiAgICA2Mlx0ICAgICAgICB0cnkge1xuICAgIDYzXHQgICAgICAgICAgICBpbnQgY2F0ZWdvcnlJZCA9IEludGVnZXIucGFyc2VJbnQoY2F0ZWdvcnlJZFN0cik7XG4gICAgNjRcdFxuICAgIDY1XHQgICAgICAgICAgICAvLyBHZXQgY2F0ZWdvcnkgZnJvbSBkYXRhYmFzZVxuICAgIDY2XHQgICAgICAgICAgICBDYXRlZ29yeSBjYXRlZ29yeSA9IGNhdGVnb3J5REFPLmdldENhdGVnb3J5QnlJZChjYXRlZ29yeUlkKTtcbiAgICA2N1x0XG4gICAgNjhcdCAgICAgICAgICAgIGlmIChjYXRlZ29yeSA9PSBudWxsKSB7XG4gICAgNjlcdCAgICAgICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvYWRtaW4vY2F0ZWdvcmllcy5qc3A/ZXJyb3I9dHJ1ZSZtZXNzYWdlPUNhdGVnb3J5K25vdCtmb3VuZFwiKTtcbiAgICA3MFx0ICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICA3MVx0ICAgICAgICAgICAgfVxuICAgIDcyXHRcbiAgICA3M1x0ICAgICAgICAgICAgLy8gSGFuZGxlIGZpbGUgdXBsb2FkXG4gICAgNzRcdCAgICAgICAgICAgIFBhcnQgZmlsZVBhcnQgPSByZXF1ZXN0LmdldFBhcnQoXCJjYXRlZ29yeUltYWdlXCIpO1xuICAgIDc1XHQgICAgICAgICAgICBpZiAoZmlsZVBhcnQgPT0gbnVsbCB8fCBmaWxlUGFydC5nZXRTaXplKCkgPD0gMCkge1xuICAgIDc2XHQgICAgICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL2FkbWluL2NhdGVnb3JpZXMuanNwP2Vycm9yPXRydWUmbWVzc2FnZT1ObytpbWFnZStmaWxlK3NlbGVjdGVkXCIpO1xuICAgIDc3XHQgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgIDc4XHQgICAgICAgICAgICB9XG4gICAgNzlcdFxuICAgIDgwXHQgICAgICAgICAgICAvLyBQcm9jZXNzIHRoZSB1cGxvYWRlZCBmaWxlXG4gICAgODFcdCAgICAgICAgICAgIFN0cmluZyBmaWxlTmFtZSA9IGdldFN1Ym1pdHRlZEZpbGVOYW1lKGZpbGVQYXJ0KTtcbiAgICA4Mlx0ICAgICAgICAgICAgaWYgKGZpbGVOYW1lID09IG51bGwgfHwgZmlsZU5hbWUuaXNFbXB0eSgpKSB7XG4gICAgODNcdCAgICAgICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvYWRtaW4vY2F0ZWdvcmllcy5qc3A/ZXJyb3I9dHJ1ZSZtZXNzYWdlPUludmFsaWQrZmlsZStuYW1lXCIpO1xuICAgIDg0XHQgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgIDg1XHQgICAgICAgICAgICB9XG4gICAgODZcdFxuICAgIDg3XHQgICAgICAgICAgICBTdHJpbmcgZmlsZUV4dGVuc2lvbiA9IGZpbGVOYW1lLnN1YnN0cmluZyhmaWxlTmFtZS5sYXN0SW5kZXhPZihcIi5cIikpO1xuICAgIDg4XHQgICAgICAgICAgICBTdHJpbmcgbmV3RmlsZU5hbWUgPSBcImNhdGVnb3J5X1wiICsgY2F0ZWdvcnlJZCArIGZpbGVFeHRlbnNpb247XG4gICAgODlcdFxuICAgIDkwXHQgICAgICAgICAgICAvLyBTYXZlIHRoZSBmaWxlIHRvIGEgcGVybWFuZW50IGxvY2F0aW9uXG4gICAgOTFcdCAgICAgICAgICAgIFN0cmluZyByZWxhdGl2ZVBhdGggPSBcImltYWdlcy9jYXRlZ29yaWVzXCI7XG4gICAgOTJcdFxuICAgIDkzXHQgICAgICAgICAgICAvLyBHZXQgdGhlIHJlYWwgcGF0aCB0byB0aGUgd2ViIGFwcGxpY2F0aW9uIHJvb3QgZGlyZWN0b3J5XG4gICAgOTRcdCAgICAgICAgICAgIFN0cmluZyB3ZWJhcHBSb290ID0gcmVxdWVzdC5nZXRTZXJ2bGV0Q29udGV4dCgpLmdldFJlYWxQYXRoKFwiL1wiKTtcbiAgICA5NVx0XG4gICAgOTZcdCAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgZGVwbG95bWVudCBkaXJlY3RvcnkgcGF0aFxuICAgIDk3XHQgICAgICAgICAgICBTdHJpbmcgZGVwbG95bWVudFBhdGggPSB3ZWJhcHBSb290ICsgcmVsYXRpdmVQYXRoO1xuICAgIDk4XHRcbiAgICA5OVx0ICAgICAgICAgICAgLy8gRW5zdXJlIGRlcGxveW1lbnQgZGlyZWN0b3J5IGV4aXN0c1xuICAgMTAwXHQgICAgICAgICAgICBGaWxlIGRlcGxveW1lbnREaXIgPSBuZXcgRmlsZShkZXBsb3ltZW50UGF0aCk7XG4gICAxMDFcdCAgICAgICAgICAgIGlmICghZGVwbG95bWVudERpci5leGlzdHMoKSkge1xuICAgMTAyXHQgICAgICAgICAgICAgICAgYm9vbGVhbiBjcmVhdGVkID0gZGVwbG95bWVudERpci5ta2RpcnMoKTtcbiAgIDEwM1x0ICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNhdGVnb3J5SW1hZ2VTZXJ2bGV0IC0gQ3JlYXRlZCBkZXBsb3ltZW50IGRpcmVjdG9yeTogXCIgKyBjcmVhdGVkKTtcbiAgIDEwNFx0ICAgICAgICAgICAgfVxuICAgMTA1XHRcbiAgIDEwNlx0ICAgICAgICAgICAgLy8gR2V0IHRoZSBwZXJtYW5lbnQgcGF0aCAocGVyc2lzdHMgYWNyb3NzIHNlcnZlciByZXN0YXJ0cylcbiAgIDEwN1x0ICAgICAgICAgICAgU3RyaW5nIHBlcm1hbmVudFBhdGggPSBnZXRQZXJtYW5lbnRQYXRoKHdlYmFwcFJvb3QsIHJlbGF0aXZlUGF0aCk7XG4gICAxMDhcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNhdGVnb3J5SW1hZ2VTZXJ2bGV0IC0gUGVybWFuZW50IHBhdGg6IFwiICsgcGVybWFuZW50UGF0aCk7XG4gICAxMDlcdFxuICAgMTEwXHQgICAgICAgICAgICAvLyBDcmVhdGUgdGhlIHBlcm1hbmVudCBkaXJlY3RvcnkgaWYgaXQgZG9lc24ndCBleGlzdFxuICAgMTExXHQgICAgICAgICAgICBib29sZWFuIGRpckNyZWF0ZWQgPSBlbnN1cmVEaXJlY3RvcnlFeGlzdHMocGVybWFuZW50UGF0aCk7XG4gICAxMTJcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNhdGVnb3J5SW1hZ2VTZXJ2bGV0IC0gQ3JlYXRlZCBwZXJtYW5lbnQgZGlyZWN0b3J5OiBcIiArIGRpckNyZWF0ZWQpO1xuICAgMTEzXHRcbiAgIDExNFx0ICAgICAgICAgICAgLy8gV3JpdGUgdGhlIGZpbGUgdG8gZGVwbG95bWVudCBwYXRoXG4gICAxMTVcdCAgICAgICAgICAgIFN0cmluZyBkZXBsb3ltZW50RmlsZVBhdGggPSBkZXBsb3ltZW50UGF0aCArIFwiL1wiICsgbmV3RmlsZU5hbWU7XG4gICAxMTZcdCAgICAgICAgICAgIGZpbGVQYXJ0LndyaXRlKGRlcGxveW1lbnRGaWxlUGF0aCk7XG4gICAxMTdcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNhdGVnb3J5SW1hZ2VTZXJ2bGV0IC0gSW1hZ2Ugc2F2ZWQgdG8gZGVwbG95bWVudCBwYXRoOiBcIiArIGRlcGxveW1lbnRGaWxlUGF0aCk7XG4gICAxMThcdFxuICAgMTE5XHQgICAgICAgICAgICAvLyBWZXJpZnkgdGhlIGZpbGUgd2FzIHdyaXR0ZW4gc3VjY2Vzc2Z1bGx5XG4gICAxMjBcdCAgICAgICAgICAgIEZpbGUgZGVwbG95bWVudEZpbGUgPSBuZXcgRmlsZShkZXBsb3ltZW50RmlsZVBhdGgpO1xuICAgMTIxXHQgICAgICAgICAgICBpZiAoZGVwbG95bWVudEZpbGUuZXhpc3RzKCkpIHtcbiAgIDEyMlx0ICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNhdGVnb3J5SW1hZ2VTZXJ2bGV0IC0gRGVwbG95bWVudCBmaWxlIGV4aXN0czogXCIgKyBkZXBsb3ltZW50RmlsZS5leGlzdHMoKSk7XG4gICAxMjNcdCAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJDYXRlZ29yeUltYWdlU2VydmxldCAtIERlcGxveW1lbnQgZmlsZSBzaXplOiBcIiArIGRlcGxveW1lbnRGaWxlLmxlbmd0aCgpICsgXCIgYnl0ZXNcIik7XG4gICAxMjRcdFxuICAgMTI1XHQgICAgICAgICAgICAgICAgLy8gQ29weSB0aGUgZmlsZSB0byB0aGUgcGVybWFuZW50IGxvY2F0aW9uIHVzaW5nIE5JTyAobW9yZSByZWxpYWJsZSlcbiAgIDEyNlx0ICAgICAgICAgICAgICAgIHRyeSB7XG4gICAxMjdcdCAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHBlcm1hbmVudCBmaWxlIHBhdGhcbiAgIDEyOFx0ICAgICAgICAgICAgICAgICAgICBTdHJpbmcgcGVybWFuZW50RmlsZVBhdGggPSBwZXJtYW5lbnRQYXRoICsgXCIvXCIgKyBuZXdGaWxlTmFtZTtcbiAgIDEyOVx0XG4gICAxMzBcdCAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGlucHV0IHN0cmVhbSBmcm9tIHRoZSBkZXBsb3ltZW50IGZpbGVcbiAgIDEzMVx0ICAgICAgICAgICAgICAgICAgICBJbnB1dFN0cmVhbSBpbnB1dCA9IG5ldyBGaWxlSW5wdXRTdHJlYW0oZGVwbG95bWVudEZpbGUpO1xuICAgMTMyXHRcbiAgIDEzM1x0ICAgICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgb3V0cHV0IHN0cmVhbSB0byB0aGUgcGVybWFuZW50IGZpbGVcbiAgIDEzNFx0ICAgICAgICAgICAgICAgICAgICBPdXRwdXRTdHJlYW0gb3V0cHV0ID0gbmV3IEZpbGVPdXRwdXRTdHJlYW0ocGVybWFuZW50RmlsZVBhdGgpO1xuICAgMTM1XHRcbiAgIDEzNlx0ICAgICAgICAgICAgICAgICAgICAvLyBDb3B5IHRoZSBmaWxlIHVzaW5nIHRyYWRpdGlvbmFsIEkvT1xuICAgMTM3XHQgICAgICAgICAgICAgICAgICAgIGJ5dGVbXSBidWZmZXIgPSBuZXcgYnl0ZVsxMDI0XTtcbiAgIDEzOFx0ICAgICAgICAgICAgICAgICAgICBpbnQgbGVuZ3RoO1xuICAgMTM5XHQgICAgICAgICAgICAgICAgICAgIHdoaWxlICgobGVuZ3RoID0gaW5wdXQucmVhZChidWZmZXIpKSA+IDApIHtcbiAgIDE0MFx0ICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0LndyaXRlKGJ1ZmZlciwgMCwgbGVuZ3RoKTtcbiAgIDE0MVx0ICAgICAgICAgICAgICAgICAgICB9XG4gICAxNDJcdFxuICAgMTQzXHQgICAgICAgICAgICAgICAgICAgIC8vIENsb3NlIHN0cmVhbXNcbiAgIDE0NFx0ICAgICAgICAgICAgICAgICAgICBpbnB1dC5jbG9zZSgpO1xuICAgMTQ1XHQgICAgICAgICAgICAgICAgICAgIG91dHB1dC5jbG9zZSgpO1xuICAgMTQ2XHRcbiAgIDE0N1x0ICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJDYXRlZ29yeUltYWdlU2VydmxldCAtIEZpbGUgY29waWVkIHRvIHBlcm1hbmVudCBwYXRoOiBcIiArIHBlcm1hbmVudEZpbGVQYXRoKTtcbiAgIDE0OFx0XG4gICAxNDlcdCAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZ5IHRoZSBwZXJtYW5lbnQgZmlsZSB3YXMgd3JpdHRlbiBzdWNjZXNzZnVsbHlcbiAgIDE1MFx0ICAgICAgICAgICAgICAgICAgICBGaWxlIHBlcm1hbmVudEZpbGUgPSBuZXcgRmlsZShwZXJtYW5lbnRGaWxlUGF0aCk7XG4gICAxNTFcdCAgICAgICAgICAgICAgICAgICAgaWYgKHBlcm1hbmVudEZpbGUuZXhpc3RzKCkpIHtcbiAgIDE1Mlx0ICAgICAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQ2F0ZWdvcnlJbWFnZVNlcnZsZXQgLSBQZXJtYW5lbnQgZmlsZSBleGlzdHM6IFwiICsgcGVybWFuZW50RmlsZS5leGlzdHMoKSk7XG4gICAxNTNcdCAgICAgICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNhdGVnb3J5SW1hZ2VTZXJ2bGV0IC0gUGVybWFuZW50IGZpbGUgc2l6ZTogXCIgKyBwZXJtYW5lbnRGaWxlLmxlbmd0aCgpICsgXCIgYnl0ZXNcIik7XG4gICAxNTRcdCAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgIDE1NVx0ICAgICAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQ2F0ZWdvcnlJbWFnZVNlcnZsZXQgLSBXQVJOSU5HOiBQZXJtYW5lbnQgZmlsZSBkb2VzIG5vdCBleGlzdCBhZnRlciB3cml0aW5nIVwiKTtcbiAgIDE1Nlx0ICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgcGVybWFuZW50IGZpbGUgZG9lc24ndCBleGlzdCwgdHJ5IGRpcmVjdCB3cml0ZSBhcyBmYWxsYmFja1xuICAgMTU3XHQgICAgICAgICAgICAgICAgICAgICAgICBmaWxlUGFydC53cml0ZShwZXJtYW5lbnRGaWxlUGF0aCk7XG4gICAxNThcdCAgICAgICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNhdGVnb3J5SW1hZ2VTZXJ2bGV0IC0gQXR0ZW1wdGVkIGRpcmVjdCB3cml0ZSB0byBwZXJtYW5lbnQgcGF0aFwiKTtcbiAgIDE1OVx0ICAgICAgICAgICAgICAgICAgICB9XG4gICAxNjBcdCAgICAgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgMTYxXHQgICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNhdGVnb3J5SW1hZ2VTZXJ2bGV0IC0gRXJyb3IgY29weWluZyBmaWxlIHRvIHBlcm1hbmVudCBsb2NhdGlvbjogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAxNjJcdCAgICAgICAgICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgIDE2M1x0ICAgICAgICAgICAgICAgICAgICAvLyBDb250aW51ZSBldmVuIGlmIHBlcm1hbmVudCBjb3B5IGZhaWxzIC0gYXQgbGVhc3QgdGhlIGRlcGxveW1lbnQgY29weSB3b3JrZWRcbiAgIDE2NFx0ICAgICAgICAgICAgICAgIH1cbiAgIDE2NVx0ICAgICAgICAgICAgfSBlbHNlIHtcbiAgIDE2Nlx0ICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNhdGVnb3J5SW1hZ2VTZXJ2bGV0IC0gV0FSTklORzogRGVwbG95bWVudCBmaWxlIGRvZXMgbm90IGV4aXN0IGFmdGVyIHdyaXRpbmchXCIpO1xuICAgMTY3XHQgICAgICAgICAgICB9XG4gICAxNjhcdFxuICAgMTY5XHQgICAgICAgICAgICAvLyBVcGRhdGUgY2F0ZWdvcnkgaW1hZ2UgVVJMIGluIGRhdGFiYXNlXG4gICAxNzBcdCAgICAgICAgICAgIFN0cmluZyBpbWFnZVVybCA9IHJlbGF0aXZlUGF0aCArIFwiL1wiICsgbmV3RmlsZU5hbWU7XG4gICAxNzFcdCAgICAgICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IGNhdGVnb3J5REFPLnVwZGF0ZUNhdGVnb3J5SW1hZ2UoY2F0ZWdvcnlJZCwgaW1hZ2VVcmwpO1xuICAgMTcyXHRcbiAgIDE3M1x0ICAgICAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcbiAgIDE3NFx0ICAgICAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9hZG1pbi9jYXRlZ29yaWVzLmpzcD9zdWNjZXNzPXRydWUmbWVzc2FnZT1DYXRlZ29yeStpbWFnZSt1cGRhdGVkK3N1Y2Nlc3NmdWxseVwiKTtcbiAgIDE3NVx0ICAgICAgICAgICAgfSBlbHNlIHtcbiAgIDE3Nlx0ICAgICAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9hZG1pbi9jYXRlZ29yaWVzLmpzcD9lcnJvcj10cnVlJm1lc3NhZ2U9RmFpbGVkK3RvK3VwZGF0ZStjYXRlZ29yeStpbWFnZVwiKTtcbiAgIDE3N1x0ICAgICAgICAgICAgfVxuICAgMTc4XHRcbiAgIDE3OVx0ICAgICAgICB9IGNhdGNoIChOdW1iZXJGb3JtYXRFeGNlcHRpb24gZSkge1xuICAgMTgwXHQgICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvYWRtaW4vY2F0ZWdvcmllcy5qc3A/ZXJyb3I9dHJ1ZSZtZXNzYWdlPUludmFsaWQrY2F0ZWdvcnkrSURcIik7XG4gICAxODFcdCAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgIDE4Mlx0ICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL2FkbWluL2NhdGVnb3JpZXMuanNwP2Vycm9yPXRydWUmbWVzc2FnZT1FcnJvcit1cGxvYWRpbmcraW1hZ2U6K1wiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgMTgzXHQgICAgICAgIH1cbiAgIDE4NFx0ICAgIH1cbiAgIDE4NVx0XG4gICAxODZcdCAgICAvKipcbiAgIDE4N1x0ICAgICAqIEhlbHBlciBtZXRob2QgdG8gZ2V0IHRoZSBzdWJtaXR0ZWQgZmlsZSBuYW1lIGZyb20gYSBQYXJ0XG4gICAxODhcdCAgICAgKi9cbiAgIDE4OVx0ICAgIHByaXZhdGUgU3RyaW5nIGdldFN1Ym1pdHRlZEZpbGVOYW1lKFBhcnQgcGFydCkge1xuICAgMTkwXHQgICAgICAgIGZvciAoU3RyaW5nIGNvbnRlbnQgOiBwYXJ0LmdldEhlYWRlcihcImNvbnRlbnQtZGlzcG9zaXRpb25cIikuc3BsaXQoXCI7XCIpKSB7XG4gICAxOTFcdCAgICAgICAgICAgIGlmIChjb250ZW50LnRyaW0oKS5zdGFydHNXaXRoKFwiZmlsZW5hbWVcIikpIHtcbiAgIDE5Mlx0ICAgICAgICAgICAgICAgIHJldHVybiBjb250ZW50LnN1YnN0cmluZyhjb250ZW50LmluZGV4T2YoJz0nKSArIDEpLnRyaW0oKS5yZXBsYWNlKFwiXFxcIlwiLCBcIlwiKTtcbiAgIDE5M1x0ICAgICAgICAgICAgfVxuICAgMTk0XHQgICAgICAgIH1cbiAgIDE5NVx0ICAgICAgICByZXR1cm4gbnVsbDtcbiAgIDE5Nlx0ICAgIH1cbiAgIDE5N1x0XG4gICAxOThcdCAgICAvKipcbiAgIDE5OVx0ICAgICAqIEdldCB0aGUgcGVybWFuZW50IHBhdGggZm9yIHN0b3JpbmcgaW1hZ2VzXG4gICAyMDBcdCAgICAgKiBAcGFyYW0gd2ViYXBwUm9vdCBUaGUgd2ViYXBwIHJvb3QgcGF0aFxuICAgMjAxXHQgICAgICogQHBhcmFtIHJlbGF0aXZlUGF0aCBUaGUgcmVsYXRpdmUgcGF0aCB3aXRoaW4gdGhlIHdlYmFwcFxuICAgMjAyXHQgICAgICogQHJldHVybiBUaGUgcGVybWFuZW50IHBhdGhcbiAgIDIwM1x0ICAgICAqL1xuICAgMjA0XHQgICAgcHJpdmF0ZSBTdHJpbmcgZ2V0UGVybWFuZW50UGF0aChTdHJpbmcgd2ViYXBwUm9vdCwgU3RyaW5nIHJlbGF0aXZlUGF0aCkge1xuICAgMjA1XHQgICAgICAgIHRyeSB7XG4gICAyMDZcdCAgICAgICAgICAgIC8vIEZpcnN0LCB0cnkgdG8gdXNlIGEgZml4ZWQsIGFic29sdXRlIHBhdGggdGhhdCB3aWxsIGRlZmluaXRlbHkgcGVyc2lzdFxuICAgMjA3XHQgICAgICAgICAgICAvLyBUaGlzIHBhdGggc2hvdWxkIGJlIG91dHNpZGUgdGhlIGRlcGxveW1lbnQgZGlyZWN0b3J5IGJ1dCBhY2Nlc3NpYmxlIGJ5IHRoZSB3ZWIgc2VydmVyXG4gICAyMDhcdCAgICAgICAgICAgIC8vIFVzZSB0aGUgdXNlcidzIGhvbWUgZGlyZWN0b3J5XG4gICAyMDlcdCAgICAgICAgICAgIFN0cmluZyB1c2VySG9tZSA9IFN5c3RlbS5nZXRQcm9wZXJ0eShcInVzZXIuaG9tZVwiKTtcbiAgIDIxMFx0ICAgICAgICAgICAgU3RyaW5nIGZpeGVkUGF0aCA9IHVzZXJIb21lICsgRmlsZS5zZXBhcmF0b3IgKyBcIkNsb3RoZWVJbWFnZXNcIiArIEZpbGUuc2VwYXJhdG9yICsgcmVsYXRpdmVQYXRoO1xuICAgMjExXHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJDYXRlZ29yeUltYWdlU2VydmxldCAtIFVzaW5nIGZpeGVkIHBhdGggaW4gdXNlciBob21lOiBcIiArIGZpeGVkUGF0aCk7XG4gICAyMTJcdCAgICAgICAgICAgIEZpbGUgZml4ZWREaXIgPSBuZXcgRmlsZShmaXhlZFBhdGgpO1xuICAgMjEzXHRcbiAgIDIxNFx0ICAgICAgICAgICAgLy8gRW5zdXJlIHRoZSBmaXhlZCBkaXJlY3RvcnkgZXhpc3RzXG4gICAyMTVcdCAgICAgICAgICAgIGlmICghZml4ZWREaXIuZXhpc3RzKCkpIHtcbiAgIDIxNlx0ICAgICAgICAgICAgICAgIGJvb2xlYW4gY3JlYXRlZCA9IGZpeGVkRGlyLm1rZGlycygpO1xuICAgMjE3XHQgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQ2F0ZWdvcnlJbWFnZVNlcnZsZXQgLSBDcmVhdGVkIGZpeGVkIGRpcmVjdG9yeTogXCIgKyBjcmVhdGVkICsgXCIgYXQgXCIgKyBmaXhlZFBhdGgpO1xuICAgMjE4XHQgICAgICAgICAgICAgICAgaWYgKGNyZWF0ZWQpIHtcbiAgIDIxOVx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gZml4ZWRQYXRoO1xuICAgMjIwXHQgICAgICAgICAgICAgICAgfVxuICAgMjIxXHQgICAgICAgICAgICB9IGVsc2Uge1xuICAgMjIyXHQgICAgICAgICAgICAgICAgcmV0dXJuIGZpeGVkUGF0aDtcbiAgIDIyM1x0ICAgICAgICAgICAgfVxuICAgMjI0XHRcbiAgIDIyNVx0ICAgICAgICAgICAgLy8gSWYgdGhlIGZpeGVkIHBhdGggZG9lc24ndCB3b3JrLCB0cnkgdG8gZmluZCB0aGUgcHJvamVjdCByb290IGRpcmVjdG9yeVxuICAgMjI2XHQgICAgICAgICAgICBGaWxlIGRlcGxveW1lbnREaXIgPSBuZXcgRmlsZSh3ZWJhcHBSb290KTtcbiAgIDIyN1x0ICAgICAgICAgICAgRmlsZSBwcm9qZWN0Um9vdCA9IGRlcGxveW1lbnREaXI7XG4gICAyMjhcdFxuICAgMjI5XHQgICAgICAgICAgICAvLyBUcnkgdG8gbmF2aWdhdGUgdXAgdG8gZmluZCB0aGUgcHJvamVjdCByb290XG4gICAyMzBcdCAgICAgICAgICAgIGlmIChkZXBsb3ltZW50RGlyLmdldFBhcmVudEZpbGUoKSAhPSBudWxsKSB7XG4gICAyMzFcdCAgICAgICAgICAgICAgICBwcm9qZWN0Um9vdCA9IGRlcGxveW1lbnREaXIuZ2V0UGFyZW50RmlsZSgpO1xuICAgMjMyXHQgICAgICAgICAgICAgICAgaWYgKHByb2plY3RSb290LmdldFBhcmVudEZpbGUoKSAhPSBudWxsKSB7XG4gICAyMzNcdCAgICAgICAgICAgICAgICAgICAgcHJvamVjdFJvb3QgPSBwcm9qZWN0Um9vdC5nZXRQYXJlbnRGaWxlKCk7XG4gICAyMzRcdCAgICAgICAgICAgICAgICAgICAgaWYgKHByb2plY3RSb290LmdldFBhcmVudEZpbGUoKSAhPSBudWxsKSB7XG4gICAyMzVcdCAgICAgICAgICAgICAgICAgICAgICAgIHByb2plY3RSb290ID0gcHJvamVjdFJvb3QuZ2V0UGFyZW50RmlsZSgpO1xuICAgMjM2XHQgICAgICAgICAgICAgICAgICAgIH1cbiAgIDIzN1x0ICAgICAgICAgICAgICAgIH1cbiAgIDIzOFx0ICAgICAgICAgICAgfVxuICAgMjM5XHRcbiAgIDI0MFx0ICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBwZXJtYW5lbnQgcGF0aFxuICAgMjQxXHQgICAgICAgICAgICBTdHJpbmcgcGVybWFuZW50UGF0aCA9IHByb2plY3RSb290LmdldEFic29sdXRlUGF0aCgpICsgRmlsZS5zZXBhcmF0b3IgKyBcInNyY1wiICsgRmlsZS5zZXBhcmF0b3IgKyBcIm1haW5cIiArIEZpbGUuc2VwYXJhdG9yICsgXCJ3ZWJhcHBcIiArIEZpbGUuc2VwYXJhdG9yICsgcmVsYXRpdmVQYXRoO1xuICAgMjQyXHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJDYXRlZ29yeUltYWdlU2VydmxldCAtIFByb2plY3Qgcm9vdDogXCIgKyBwcm9qZWN0Um9vdC5nZXRBYnNvbHV0ZVBhdGgoKSk7XG4gICAyNDNcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNhdGVnb3J5SW1hZ2VTZXJ2bGV0IC0gUGVybWFuZW50IHBhdGg6IFwiICsgcGVybWFuZW50UGF0aCk7XG4gICAyNDRcdFxuICAgMjQ1XHQgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgcGVybWFuZW50IHBhdGggZXhpc3RzIG9yIGNhbiBiZSBjcmVhdGVkXG4gICAyNDZcdCAgICAgICAgICAgIEZpbGUgcGVybWFuZW50RGlyID0gbmV3IEZpbGUocGVybWFuZW50UGF0aCk7XG4gICAyNDdcdCAgICAgICAgICAgIGlmICghcGVybWFuZW50RGlyLmV4aXN0cygpKSB7XG4gICAyNDhcdCAgICAgICAgICAgICAgICBib29sZWFuIGNyZWF0ZWQgPSBwZXJtYW5lbnREaXIubWtkaXJzKCk7XG4gICAyNDlcdCAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJDYXRlZ29yeUltYWdlU2VydmxldCAtIENyZWF0ZWQgcGVybWFuZW50IGRpcmVjdG9yeTogXCIgKyBjcmVhdGVkKTtcbiAgIDI1MFx0ICAgICAgICAgICAgICAgIGlmICghY3JlYXRlZCkge1xuICAgMjUxXHQgICAgICAgICAgICAgICAgICAgIC8vIElmIHdlIGNhbid0IGNyZWF0ZSB0aGUgcGVybWFuZW50IGRpcmVjdG9yeSwgdXNlIHRoZSBkZXBsb3ltZW50IHBhdGggYXMgZmFsbGJhY2tcbiAgIDI1Mlx0ICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJDYXRlZ29yeUltYWdlU2VydmxldCAtIENvdWxkIG5vdCBjcmVhdGUgcGVybWFuZW50IGRpcmVjdG9yeSwgdXNpbmcgZGVwbG95bWVudCBwYXRoIGFzIGZhbGxiYWNrXCIpO1xuICAgMjUzXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiB3ZWJhcHBSb290ICsgcmVsYXRpdmVQYXRoO1xuICAgMjU0XHQgICAgICAgICAgICAgICAgfVxuICAgMjU1XHQgICAgICAgICAgICB9XG4gICAyNTZcdFxuICAgMjU3XHQgICAgICAgICAgICByZXR1cm4gcGVybWFuZW50UGF0aDtcbiAgIDI1OFx0ICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgMjU5XHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJDYXRlZ29yeUltYWdlU2VydmxldCAtIEVycm9yIGdldHRpbmcgcGVybWFuZW50IHBhdGg6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgMjYwXHQgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgMjYxXHQgICAgICAgICAgICByZXR1cm4gd2ViYXBwUm9vdCArIHJlbGF0aXZlUGF0aDtcbiAgIDI2Mlx0ICAgICAgICB9XG4gICAyNjNcdCAgICB9XG4gICAyNjRcdFxuICAgMjY1XHQgICAgLyoqXG4gICAyNjZcdCAgICAgKiBFbnN1cmUgdGhlIGRpcmVjdG9yeSBleGlzdHNcbiAgIDI2N1x0ICAgICAqIEBwYXJhbSBwYXRoIFRoZSBkaXJlY3RvcnkgcGF0aFxuICAgMjY4XHQgICAgICogQHJldHVybiB0cnVlIGlmIHRoZSBkaXJlY3RvcnkgZXhpc3RzIG9yIHdhcyBjcmVhdGVkLCBmYWxzZSBvdGhlcndpc2VcbiAgIDI2OVx0ICAgICAqL1xuICAgMjcwXHQgICAgcHJpdmF0ZSBib29sZWFuIGVuc3VyZURpcmVjdG9yeUV4aXN0cyhTdHJpbmcgcGF0aCkge1xuICAgMjcxXHQgICAgICAgIHRyeSB7XG4gICAyNzJcdCAgICAgICAgICAgIGlmIChwYXRoID09IG51bGwgfHwgcGF0aC5pc0VtcHR5KCkpIHtcbiAgIDI3M1x0ICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNhdGVnb3J5SW1hZ2VTZXJ2bGV0IC0gRXJyb3I6IERpcmVjdG9yeSBwYXRoIGlzIG51bGwgb3IgZW1wdHlcIik7XG4gICAyNzRcdCAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAyNzVcdCAgICAgICAgICAgIH1cbiAgIDI3Nlx0XG4gICAyNzdcdCAgICAgICAgICAgIEZpbGUgZGlyID0gbmV3IEZpbGUocGF0aCk7XG4gICAyNzhcdCAgICAgICAgICAgIGlmIChkaXIuZXhpc3RzKCkpIHtcbiAgIDI3OVx0ICAgICAgICAgICAgICAgIGlmICghZGlyLmlzRGlyZWN0b3J5KCkpIHtcbiAgIDI4MFx0ICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJDYXRlZ29yeUltYWdlU2VydmxldCAtIEVycm9yOiBQYXRoIGV4aXN0cyBidXQgaXMgbm90IGEgZGlyZWN0b3J5OiBcIiArIHBhdGgpO1xuICAgMjgxXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgIDI4Mlx0ICAgICAgICAgICAgICAgIH1cbiAgIDI4M1x0ICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgMjg0XHQgICAgICAgICAgICB9XG4gICAyODVcdFxuICAgMjg2XHQgICAgICAgICAgICBib29sZWFuIGNyZWF0ZWQgPSBkaXIubWtkaXJzKCk7XG4gICAyODdcdCAgICAgICAgICAgIGlmICghY3JlYXRlZCkge1xuICAgMjg4XHQgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQ2F0ZWdvcnlJbWFnZVNlcnZsZXQgLSBFcnJvcjogRmFpbGVkIHRvIGNyZWF0ZSBkaXJlY3Rvcnk6IFwiICsgcGF0aCk7XG4gICAyODlcdCAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAyOTBcdCAgICAgICAgICAgIH1cbiAgIDI5MVx0XG4gICAyOTJcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNhdGVnb3J5SW1hZ2VTZXJ2bGV0IC0gQ3JlYXRlZCBkaXJlY3Rvcnk6IFwiICsgcGF0aCk7XG4gICAyOTNcdCAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgMjk0XHQgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAyOTVcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNhdGVnb3J5SW1hZ2VTZXJ2bGV0IC0gRXJyb3IgY3JlYXRpbmcgZGlyZWN0b3J5OiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgIDI5Nlx0ICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgIDI5N1x0ICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgMjk4XHQgICAgICAgIH1cbiAgIDI5OVx0ICAgIH1cbiAgIDMwMFx0fVxuICAgMzAxXHRcblRvdGFsIGxpbmVzIGluIGZpbGU6IDMwMVxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiOTdiNzEwNDgtOTBiZC00NjhhLThhOTAtMDRjZGFiZTE5NzI0O3Rvb2x1X3ZydHhfMDFEeXc2bzN5dWRiZFVDRnRyWGVkNEphIjp7InJlcXVlc3RJZCI6Ijk3YjcxMDQ4LTkwYmQtNDY4YS04YTkwLTA0Y2RhYmUxOTcyNCIsInRvb2xVc2VJZCI6InRvb2x1X3ZydHhfMDFEeXc2bzN5dWRiZFVDRnRyWGVkNEphIiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiBDbG90aGVlL3NyYy9tYWluL3dlYmFwcC9pbmRleC5qc3A6XG4gICAgIDFcdDwlQCBwYWdlIGxhbmd1YWdlPVwiamF2YVwiIGNvbnRlbnRUeXBlPVwidGV4dC9odG1sOyBjaGFyc2V0PVVURi04XCIgcGFnZUVuY29kaW5nPVwiVVRGLThcIiU+XG4gICAgIDJcdDwlQCBwYWdlIGltcG9ydD1cImphdmEudXRpbC5MaXN0XCIgJT5cbiAgICAgM1x0PCVAIHBhZ2UgaW1wb3J0PVwiamF2YS51dGlsLkFycmF5TGlzdFwiICU+XG4gICAgIDRcdDwlQCBwYWdlIGltcG9ydD1cIm1vZGVsLlNsaWRlXCIgJT5cbiAgICAgNVx0PCVAIHBhZ2UgaW1wb3J0PVwibW9kZWwuQ2F0ZWdvcnlcIiAlPlxuICAgICA2XHQ8JUAgcGFnZSBpbXBvcnQ9XCJkYW8uQ2F0ZWdvcnlEQU9cIiAlPlxuICAgICA3XHQ8JUAgcGFnZSBpbXBvcnQ9XCJqYXZhLnV0aWwuQ2FsZW5kYXJcIiAlPlxuICAgICA4XHQ8JUAgcGFnZSBpbXBvcnQ9XCJqYXZhLnV0aWwuRGF0ZVwiICU+XG4gICAgIDlcdDwlQCBpbmNsdWRlIGZpbGU9XCIvaW5jbHVkZXMvaGVhZGVyLmpzcFwiICU+XG4gICAgMTBcdDxsaW5rIHJlbD1cInN0eWxlc2hlZXRcIiB0eXBlPVwidGV4dC9jc3NcIiBocmVmPVwiY3NzL3N0eWxlLmNzc1wiPlxuICAgIDExXHRcbiAgICAxMlx0PCVcbiAgICAxM1x0Ly8gRGlzcGxheSBzdWNjZXNzIG1lc3NhZ2UgaWYgYXZhaWxhYmxlXG4gICAgMTRcdFN0cmluZyBtZXNzYWdlID0gcmVxdWVzdC5nZXRQYXJhbWV0ZXIoXCJtZXNzYWdlXCIpO1xuICAgIDE1XHRpZiAobWVzc2FnZSAhPSBudWxsICYmICFtZXNzYWdlLmlzRW1wdHkoKSkge1xuICAgIDE2XHQlPlxuICAgIDE3XHQ8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtc3VjY2Vzc1wiIHN0eWxlPVwibWFyZ2luOiAxMHB4IGF1dG87IG1heC13aWR0aDogODAwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsgcGFkZGluZzogMTBweDsgYmFja2dyb3VuZC1jb2xvcjogI2Q0ZWRkYTsgY29sb3I6ICMxNTU3MjQ7IGJvcmRlci1yYWRpdXM6IDVweDtcIj5cbiAgICAxOFx0ICAgIDwlPSBtZXNzYWdlICU+XG4gICAgMTlcdDwvZGl2PlxuICAgIDIwXHQ8JSB9ICU+XG4gICAgMjFcdFxuICAgIDIyXHQ8JVxuICAgIDIzXHQgICAgLy8gQ3JlYXRlIHNsaWRlcyBkaXJlY3RseSBpbiB0aGUgSlNQXG4gICAgMjRcdCAgICBMaXN0PFNsaWRlPiBzbGlkZXMgPSBuZXcgQXJyYXlMaXN0PD4oKTtcbiAgICAyNVx0XG4gICAgMjZcdCAgICAvLyBBZGQgc2xpZGVzXG4gICAgMjdcdCAgICBzbGlkZXMuYWRkKG5ldyBTbGlkZShcbiAgICAyOFx0ICAgICAgICBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNDkwNDgxNjUxODcxLWFiNjhkZTI1ZDQzZD9peGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0QmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz0xNzcwJnE9ODBcIixcbiAgICAyOVx0ICAgICAgICBcIkVsZXZhdGUgWW91ciBTdHlsZVwiLFxuICAgIDMwXHQgICAgICAgIFwiRGlzY292ZXIgdGhlIGxhdGVzdCB0cmVuZHMgaW4gZmFzaGlvbiBhbmQgZXhwcmVzcyB5b3Vyc2VsZiB3aXRoIG91ciBwcmVtaXVtIGNvbGxlY3Rpb24gb2YgY2xvdGhpbmcgYW5kIGFjY2Vzc29yaWVzLlwiLFxuICAgIDMxXHQgICAgICAgIFwiUHJvZHVjdFNlcnZsZXQ/Y2F0ZWdvcnk9bmV3XCIsXG4gICAgMzJcdCAgICAgICAgXCJTaG9wIE5vd1wiLFxuICAgIDMzXHQgICAgICAgIFwiUHJvZHVjdFNlcnZsZXQ/Y2F0ZWdvcnk9c2FsZVwiLFxuICAgIDM0XHQgICAgICAgIFwiVmlldyBTYWxlXCJcbiAgICAzNVx0ICAgICkpO1xuICAgIDM2XHRcbiAgICAzN1x0ICAgIHNsaWRlcy5hZGQobmV3IFNsaWRlKFxuICAgIDM4XHQgICAgICAgIFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE0NDUyMDUxNzAyMzAtMDUzYjgzMDE2MDUwP2l4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTE3NzEmcT04MFwiLFxuICAgIDM5XHQgICAgICAgIFwiU3VtbWVyIENvbGxlY3Rpb24gMjAyM1wiLFxuICAgIDQwXHQgICAgICAgIFwiQmVhdCB0aGUgaGVhdCB3aXRoIG91ciBjb29sIGFuZCBjb21mb3J0YWJsZSBzdW1tZXIgY29sbGVjdGlvbi5cIixcbiAgICA0MVx0ICAgICAgICBcIlByb2R1Y3RTZXJ2bGV0P2NhdGVnb3J5PXN1bW1lclwiLFxuICAgIDQyXHQgICAgICAgIFwiRXhwbG9yZSBDb2xsZWN0aW9uXCIsXG4gICAgNDNcdCAgICAgICAgbnVsbCxcbiAgICA0NFx0ICAgICAgICBudWxsXG4gICAgNDVcdCAgICApKTtcbiAgICA0Nlx0XG4gICAgNDdcdCAgICBzbGlkZXMuYWRkKG5ldyBTbGlkZShcbiAgICA0OFx0ICAgICAgICBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNDQxOTg0OTA0OTk2LWUwYjZiYTY4N2UwND9peGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0QmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz0xNzcwJnE9ODBcIixcbiAgICA0OVx0ICAgICAgICBcIkV4Y2x1c2l2ZSBEaXNjb3VudHNcIixcbiAgICA1MFx0ICAgICAgICBcIlVwIHRvIDUwJSBvZmYgb24gc2VsZWN0ZWQgaXRlbXMuIExpbWl0ZWQgdGltZSBvZmZlciFcIixcbiAgICA1MVx0ICAgICAgICBcIlByb2R1Y3RTZXJ2bGV0P2NhdGVnb3J5PXNhbGVcIixcbiAgICA1Mlx0ICAgICAgICBcIlNob3AgU2FsZVwiLFxuICAgIDUzXHQgICAgICAgIG51bGwsXG4gICAgNTRcdCAgICAgICAgbnVsbFxuICAgIDU1XHQgICAgKSk7XG4gICAgNTZcdFxuICAgIDU3XHQgICAgLy8gR2V0IGN1cnJlbnQgc2xpZGUgKGRlZmF1bHQgdG8gMClcbiAgICA1OFx0ICAgIGludCBjdXJyZW50U2xpZGUgPSAwO1xuICAgIDU5XHQgICAgU3RyaW5nIHNsaWRlUGFyYW0gPSByZXF1ZXN0LmdldFBhcmFtZXRlcihcInNsaWRlXCIpO1xuICAgIDYwXHQgICAgaWYgKHNsaWRlUGFyYW0gIT0gbnVsbCkge1xuICAgIDYxXHQgICAgICAgIGlmIChcIm5leHRcIi5lcXVhbHMoc2xpZGVQYXJhbSkpIHtcbiAgICA2Mlx0ICAgICAgICAgICAgSW50ZWdlciBzZXNzaW9uU2xpZGUgPSAoSW50ZWdlcikgc2Vzc2lvbi5nZXRBdHRyaWJ1dGUoXCJjdXJyZW50U2xpZGVcIik7XG4gICAgNjNcdCAgICAgICAgICAgIGlmIChzZXNzaW9uU2xpZGUgIT0gbnVsbCkge1xuICAgIDY0XHQgICAgICAgICAgICAgICAgY3VycmVudFNsaWRlID0gKHNlc3Npb25TbGlkZSArIDEpICUgc2xpZGVzLnNpemUoKTtcbiAgICA2NVx0ICAgICAgICAgICAgfVxuICAgIDY2XHQgICAgICAgIH0gZWxzZSBpZiAoXCJwcmV2XCIuZXF1YWxzKHNsaWRlUGFyYW0pKSB7XG4gICAgNjdcdCAgICAgICAgICAgIEludGVnZXIgc2Vzc2lvblNsaWRlID0gKEludGVnZXIpIHNlc3Npb24uZ2V0QXR0cmlidXRlKFwiY3VycmVudFNsaWRlXCIpO1xuICAgIDY4XHQgICAgICAgICAgICBpZiAoc2Vzc2lvblNsaWRlICE9IG51bGwpIHtcbiAgICA2OVx0ICAgICAgICAgICAgICAgIGN1cnJlbnRTbGlkZSA9IChzZXNzaW9uU2xpZGUgLSAxICsgc2xpZGVzLnNpemUoKSkgJSBzbGlkZXMuc2l6ZSgpO1xuICAgIDcwXHQgICAgICAgICAgICB9XG4gICAgNzFcdCAgICAgICAgfSBlbHNlIHtcbiAgICA3Mlx0ICAgICAgICAgICAgdHJ5IHtcbiAgICA3M1x0ICAgICAgICAgICAgICAgIGN1cnJlbnRTbGlkZSA9IEludGVnZXIucGFyc2VJbnQoc2xpZGVQYXJhbSk7XG4gICAgNzRcdCAgICAgICAgICAgICAgICBpZiAoY3VycmVudFNsaWRlIDwgMCB8fCBjdXJyZW50U2xpZGUgPj0gc2xpZGVzLnNpemUoKSkge1xuICAgIDc1XHQgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTbGlkZSA9IDA7XG4gICAgNzZcdCAgICAgICAgICAgICAgICB9XG4gICAgNzdcdCAgICAgICAgICAgIH0gY2F0Y2ggKE51bWJlckZvcm1hdEV4Y2VwdGlvbiBlKSB7XG4gICAgNzhcdCAgICAgICAgICAgICAgICBjdXJyZW50U2xpZGUgPSAwO1xuICAgIDc5XHQgICAgICAgICAgICB9XG4gICAgODBcdCAgICAgICAgfVxuICAgIDgxXHQgICAgfVxuICAgIDgyXHRcbiAgICA4M1x0ICAgIC8vIFN0b3JlIGN1cnJlbnQgc2xpZGUgaW4gc2Vzc2lvblxuICAgIDg0XHQgICAgc2Vzc2lvbi5zZXRBdHRyaWJ1dGUoXCJjdXJyZW50U2xpZGVcIiwgY3VycmVudFNsaWRlKTtcbiAgICA4NVx0XG4gICAgODZcdCAgICAvLyBDb3VudGRvd24gdGltZXIgY2FsY3VsYXRpb24gcmVtb3ZlZCBhcyByZXF1ZXN0ZWRcbiAgICA4N1x0JT5cbiAgICA4OFx0XG4gICAgODlcdDwhLS0gQWRtaW4gTG9naW4gQmFubmVyIC0tPlxuICAgIDkwXHQ8JSBpZiAoc2Vzc2lvbi5nZXRBdHRyaWJ1dGUoXCJ1c2VyUm9sZVwiKSA9PSBudWxsKSB7ICU+XG4gICAgOTFcdDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiAjNGE2YmRmOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6IDEwcHggMDsgdGV4dC1hbGlnbjogY2VudGVyO1wiPlxuICAgIDkyXHQgICAgPGRpdiBzdHlsZT1cImRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogY2VudGVyOyBhbGlnbi1pdGVtczogY2VudGVyOyBnYXA6IDIwcHg7XCI+XG4gICAgOTNcdCAgICAgICAgPGRpdiBzdHlsZT1cImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGdhcDogMTBweDtcIj5cbiAgICA5NFx0ICAgICAgICAgICAgPGkgY2xhc3M9XCJmYXMgZmEtdXNlci1zaGllbGRcIiBzdHlsZT1cImZvbnQtc2l6ZTogMThweDtcIj48L2k+XG4gICAgOTVcdCAgICAgICAgICAgIDxzcGFuPkFkbWluPyA8YSBocmVmPVwiZGlyZWN0LWFkbWluLWxvZ2luLmpzcFwiIHN0eWxlPVwiY29sb3I6IHdoaXRlOyB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsgZm9udC13ZWlnaHQ6IGJvbGQ7XCI+TG9naW4gaGVyZTwvYT48L3NwYW4+XG4gICAgOTZcdCAgICAgICAgPC9kaXY+XG4gICAgOTdcdCAgICAgICAgPGRpdiBzdHlsZT1cImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGdhcDogMTBweDtcIj5cbiAgICA5OFx0ICAgICAgICAgICAgPGkgY2xhc3M9XCJmYXMgZmEtdXNlci1wbHVzXCIgc3R5bGU9XCJmb250LXNpemU6IDE4cHg7XCI+PC9pPlxuICAgIDk5XHQgICAgICAgICAgICA8c3Bhbj5OZXcgdXNlcj8gPGEgaHJlZj1cInJlZ2lzdGVyLmpzcFwiIHN0eWxlPVwiY29sb3I6IHdoaXRlOyB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsgZm9udC13ZWlnaHQ6IGJvbGQ7XCI+UmVnaXN0ZXIgaGVyZTwvYT48L3NwYW4+XG4gICAxMDBcdCAgICAgICAgPC9kaXY+XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiA0MTlcbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sImVjODcwN2UwLWFmNjItNDRhNC05OGUwLTI4MTg0NWY4MzNkODt0b29sdV92cnR4XzAxUGpjVW1RUDNMWWZ2Q0huamlhNnZaeiI6eyJyZXF1ZXN0SWQiOiJlYzg3MDdlMC1hZjYyLTQ0YTQtOThlMC0yODE4NDVmODMzZDgiLCJ0b29sVXNlSWQiOiJ0b29sdV92cnR4XzAxUGpjVW1RUDNMWWZ2Q0huamlhNnZaeiIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gQ2xvdGhlZS9zcmMvbWFpbi93ZWJhcHAvaW5kZXguanNwOlxuICAgMTAwXHQgICAgICAgIDwvZGl2PlxuICAgMTAxXHQgICAgPC9kaXY+XG4gICAxMDJcdDwvZGl2PlxuICAgMTAzXHQ8JSB9ICU+XG4gICAxMDRcdFxuICAgMTA1XHQ8IS0tIEhlcm8gU2VjdGlvbiB3aXRoIE1vZGVybiBTbGlkZXIgLS0+XG4gICAxMDZcdDxzZWN0aW9uIGNsYXNzPVwiaGVyby1zbGlkZXJcIj5cbiAgIDEwN1x0ICAgIDxkaXYgY2xhc3M9XCJzbGlkZXItY29udGFpbmVyXCI+XG4gICAxMDhcdCAgICAgICAgPCVcbiAgIDEwOVx0ICAgICAgICBpZiAoc2xpZGVzICE9IG51bGwgJiYgIXNsaWRlcy5pc0VtcHR5KCkpIHtcbiAgIDExMFx0ICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBzbGlkZXMuc2l6ZSgpOyBpKyspIHtcbiAgIDExMVx0ICAgICAgICAgICAgICAgIFNsaWRlIHNsaWRlID0gc2xpZGVzLmdldChpKTtcbiAgIDExMlx0ICAgICAgICAlPlxuICAgMTEzXHQgICAgICAgIDxkaXYgY2xhc3M9XCJzbGlkZSA8JT0gaSA9PSBjdXJyZW50U2xpZGUgPyBcImFjdGl2ZVwiIDogXCJcIiAlPlwiPlxuICAgMTE0XHQgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic2xpZGUtYmdcIiBzdHlsZT1cImJhY2tncm91bmQtaW1hZ2U6IHVybCgnPCU9IHNsaWRlLmdldEltYWdlVXJsKCkgJT4nKTtcIj48L2Rpdj5cbiAgIDExNVx0ICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNsaWRlLW92ZXJsYXlcIj48L2Rpdj5cbiAgIDExNlx0ICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNsaWRlLWNvbnRlbnRcIj5cbiAgIDExN1x0ICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzbGlkZS10ZXh0LWNvbnRhaW5lclwiPlxuICAgMTE4XHQgICAgICAgICAgICAgICAgICAgIDxoMSBjbGFzcz1cInNsaWRlLXRpdGxlXCI+PCU9IHNsaWRlLmdldFRpdGxlKCkgJT48L2gxPlxuICAgMTE5XHQgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwic2xpZGUtc3VidGl0bGVcIj48JT0gc2xpZGUuZ2V0U3VidGl0bGUoKSAlPjwvcD5cbiAgIDEyMFx0ICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic2xpZGUtYnV0dG9uc1wiPlxuICAgMTIxXHQgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiPCU9IHNsaWRlLmdldFByaW1hcnlCdXR0b25VcmwoKSAlPlwiIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5XCI+PCU9IHNsaWRlLmdldFByaW1hcnlCdXR0b25UZXh0KCkgJT48L2E+XG4gICAxMjJcdCAgICAgICAgICAgICAgICAgICAgICAgIDwlIGlmIChzbGlkZS5nZXRTZWNvbmRhcnlCdXR0b25VcmwoKSAhPSBudWxsICYmIHNsaWRlLmdldFNlY29uZGFyeUJ1dHRvblRleHQoKSAhPSBudWxsKSB7ICU+XG4gICAxMjNcdCAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCI8JT0gc2xpZGUuZ2V0U2Vjb25kYXJ5QnV0dG9uVXJsKCkgJT5cIiBjbGFzcz1cImJ0biBidG4tb3V0bGluZVwiPjwlPSBzbGlkZS5nZXRTZWNvbmRhcnlCdXR0b25UZXh0KCkgJT48L2E+XG4gICAxMjRcdCAgICAgICAgICAgICAgICAgICAgICAgIDwlIH0gJT5cbiAgIDEyNVx0ICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgIDEyNlx0ICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgMTI3XHQgICAgICAgICAgICA8L2Rpdj5cbiAgIDEyOFx0ICAgICAgICA8L2Rpdj5cbiAgIDEyOVx0ICAgICAgICA8JVxuICAgMTMwXHQgICAgICAgICAgICB9XG4gICAxMzFcdCAgICAgICAgfVxuICAgMTMyXHQgICAgICAgICU+XG4gICAxMzNcdCAgICAgICAgPGEgaHJlZj1cImluZGV4LmpzcD9zbGlkZT1wcmV2XCIgY2xhc3M9XCJzbGlkZXItYXJyb3cgcHJldlwiPjxpIGNsYXNzPVwiZmFzIGZhLWNoZXZyb24tbGVmdFwiPjwvaT48L2E+XG4gICAxMzRcdCAgICAgICAgPGEgaHJlZj1cImluZGV4LmpzcD9zbGlkZT1uZXh0XCIgY2xhc3M9XCJzbGlkZXItYXJyb3cgbmV4dFwiPjxpIGNsYXNzPVwiZmFzIGZhLWNoZXZyb24tcmlnaHRcIj48L2k+PC9hPlxuICAgMTM1XHQgICAgICAgIDxkaXYgY2xhc3M9XCJzbGlkZXItZG90c1wiPlxuICAgMTM2XHQgICAgICAgICAgICA8JVxuICAgMTM3XHQgICAgICAgICAgICBpZiAoc2xpZGVzICE9IG51bGwpIHtcbiAgIDEzOFx0ICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgc2xpZGVzLnNpemUoKTsgaSsrKSB7XG4gICAxMzlcdCAgICAgICAgICAgICU+XG4gICAxNDBcdCAgICAgICAgICAgIDxhIGhyZWY9XCJpbmRleC5qc3A/c2xpZGU9PCU9IGkgJT5cIiBjbGFzcz1cImRvdCA8JT0gaSA9PSBjdXJyZW50U2xpZGUgPyBcImFjdGl2ZVwiIDogXCJcIiAlPlwiIGRhdGEtc2xpZGU9XCI8JT0gaSAlPlwiPjwvYT5cbiAgIDE0MVx0ICAgICAgICAgICAgPCVcbiAgIDE0Mlx0ICAgICAgICAgICAgICAgIH1cbiAgIDE0M1x0ICAgICAgICAgICAgfVxuICAgMTQ0XHQgICAgICAgICAgICAlPlxuICAgMTQ1XHQgICAgICAgIDwvZGl2PlxuICAgMTQ2XHQgICAgPC9kaXY+XG4gICAxNDdcdDwvc2VjdGlvbj5cbiAgIDE0OFx0XG4gICAxNDlcdDwhLS0gRmVhdHVyZXMgU2VjdGlvbiB3aXRoIE1vZGVybiBEZXNpZ24gLS0+XG4gICAxNTBcdDxzZWN0aW9uIGNsYXNzPVwiZmVhdHVyZXNcIj5cbiAgIDE1MVx0ICAgIDxkaXYgY2xhc3M9XCJjb250YWluZXJcIj5cbiAgIDE1Mlx0ICAgICAgICA8ZGl2IGNsYXNzPVwiZmVhdHVyZXMtZ3JpZFwiPlxuICAgMTUzXHQgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmVhdHVyZS1pdGVtXCI+XG4gICAxNTRcdCAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmVhdHVyZS1pY29uXCI+XG4gICAxNTVcdCAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImljb24tY2lyY2xlXCI+XG4gICAxNTZcdCAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwiZmFzIGZhLXRydWNrXCI+PC9pPlxuICAgMTU3XHQgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgMTU4XHQgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAxNTlcdCAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmVhdHVyZS1jb250ZW50XCI+XG4gICAxNjBcdCAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPVwiZmVhdHVyZS10aXRsZVwiPkZyZWUgU2hpcHBpbmc8L2gzPlxuICAgMTYxXHQgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwiZmVhdHVyZS10ZXh0XCI+T24gYWxsIG9yZGVycyBvdmVyICQ1MDwvcD5cbiAgIDE2Mlx0ICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgMTYzXHQgICAgICAgICAgICA8L2Rpdj5cbiAgIDE2NFx0ICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZlYXR1cmUtaXRlbVwiPlxuICAgMTY1XHQgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZlYXR1cmUtaWNvblwiPlxuICAgMTY2XHQgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpY29uLWNpcmNsZVwiPlxuICAgMTY3XHQgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImZhcyBmYS11bmRvXCI+PC9pPlxuICAgMTY4XHQgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgMTY5XHQgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAxNzBcdCAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmVhdHVyZS1jb250ZW50XCI+XG4gICAxNzFcdCAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPVwiZmVhdHVyZS10aXRsZVwiPkVhc3kgUmV0dXJuczwvaDM+XG4gICAxNzJcdCAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJmZWF0dXJlLXRleHRcIj4zMCBkYXlzIHJldHVybiBwb2xpY3k8L3A+XG4gICAxNzNcdCAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgIDE3NFx0ICAgICAgICAgICAgPC9kaXY+XG4gICAxNzVcdCAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmZWF0dXJlLWl0ZW0gc3VwcG9ydC0yNDdcIj5cbiAgIDE3Nlx0ICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmZWF0dXJlLWljb25cIj5cbiAgIDE3N1x0ICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaWNvbi1jaXJjbGVcIj5cbiAgIDE3OFx0ICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYXMgZmEtaGVhZHNldFwiPjwvaT5cbiAgIDE3OVx0ICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgIDE4MFx0ICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgMTgxXHQgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZlYXR1cmUtY29udGVudFwiPlxuICAgMTgyXHQgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzcz1cImZlYXR1cmUtdGl0bGVcIj4yNC83IFN1cHBvcnQ8L2gzPlxuICAgMTgzXHQgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwiZmVhdHVyZS10ZXh0XCI+RGVkaWNhdGVkIHN1cHBvcnQgdGVhbTwvcD5cbiAgIDE4NFx0ICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgMTg1XHQgICAgICAgICAgICA8L2Rpdj5cbiAgIDE4Nlx0ICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZlYXR1cmUtaXRlbVwiPlxuICAgMTg3XHQgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZlYXR1cmUtaWNvblwiPlxuICAgMTg4XHQgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpY29uLWNpcmNsZVwiPlxuICAgMTg5XHQgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImZhcyBmYS1sb2NrXCI+PC9pPlxuICAgMTkwXHQgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgMTkxXHQgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAxOTJcdCAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmVhdHVyZS1jb250ZW50XCI+XG4gICAxOTNcdCAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPVwiZmVhdHVyZS10aXRsZVwiPlNlY3VyZSBQYXltZW50PC9oMz5cbiAgIDE5NFx0ICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImZlYXR1cmUtdGV4dFwiPjEwMCUgc2VjdXJlIGNoZWNrb3V0PC9wPlxuICAgMTk1XHQgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAxOTZcdCAgICAgICAgICAgIDwvZGl2PlxuICAgMTk3XHQgICAgICAgIDwvZGl2PlxuICAgMTk4XHQgICAgPC9kaXY+XG4gICAxOTlcdDwvc2VjdGlvbj5cbiAgIDIwMFx0XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiA0MTlcbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sIjI1OWRiYjQzLTQwMjItNGM3ZS05YmNkLWNiMDAwMGRkMGVhYTt0b29sdV92cnR4XzAxTk1IS3ZKQjZTZG9YMjdBOXV6NWVGYSI6eyJyZXF1ZXN0SWQiOiIyNTlkYmI0My00MDIyLTRjN2UtOWJjZC1jYjAwMDBkZDBlYWEiLCJ0b29sVXNlSWQiOiJ0b29sdV92cnR4XzAxTk1IS3ZKQjZTZG9YMjdBOXV6NWVGYSIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gQ2xvdGhlZS9zcmMvbWFpbi93ZWJhcHAvaW5kZXguanNwOlxuICAgMjAwXHRcbiAgIDIwMVx0PCEtLSBDYXRlZ29yaWVzIFNlY3Rpb24gLS0+XG4gICAyMDJcdDxzZWN0aW9uIGNsYXNzPVwiY2F0ZWdvcmllc1wiPlxuICAgMjAzXHQgICAgPGRpdiBjbGFzcz1cImNvbnRhaW5lclwiPlxuICAgMjA0XHQgICAgICAgIDxkaXYgY2xhc3M9XCJzZWN0aW9uLXRpdGxlXCI+XG4gICAyMDVcdCAgICAgICAgICAgIDxoMj5TaG9wIEJ5IENhdGVnb3J5PC9oMj5cbiAgIDIwNlx0ICAgICAgICA8L2Rpdj5cbiAgIDIwN1x0XG4gICAyMDhcdCAgICAgICAgPGRpdiBjbGFzcz1cImNhdGVnb3JpZXMtZ3JpZFwiPlxuICAgMjA5XHQgICAgICAgICAgICA8JVxuICAgMjEwXHQgICAgICAgICAgICAvLyBHZXQgY2F0ZWdvcmllcyBmcm9tIGRhdGFiYXNlXG4gICAyMTFcdCAgICAgICAgICAgIENhdGVnb3J5REFPIGNhdGVnb3J5REFPID0gbmV3IENhdGVnb3J5REFPKCk7XG4gICAyMTJcdCAgICAgICAgICAgIExpc3Q8Q2F0ZWdvcnk+IGNhdGVnb3JpZXMgPSBjYXRlZ29yeURBTy5nZXRBbGxDYXRlZ29yaWVzKCk7XG4gICAyMTNcdFxuICAgMjE0XHQgICAgICAgICAgICAvLyBEaXNwbGF5IHVwIHRvIDYgY2F0ZWdvcmllc1xuICAgMjE1XHQgICAgICAgICAgICBpbnQgbWF4Q2F0ZWdvcmllcyA9IE1hdGgubWluKGNhdGVnb3JpZXMuc2l6ZSgpLCA2KTtcbiAgIDIxNlx0ICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBtYXhDYXRlZ29yaWVzOyBpKyspIHtcbiAgIDIxN1x0ICAgICAgICAgICAgICAgIENhdGVnb3J5IGNhdGVnb3J5ID0gY2F0ZWdvcmllcy5nZXQoaSk7XG4gICAyMThcdCAgICAgICAgICAgICAgICBTdHJpbmcgaW1hZ2VVcmwgPSBjYXRlZ29yeS5nZXRJbWFnZVVybCgpO1xuICAgMjE5XHQgICAgICAgICAgICAgICAgLy8gVXNlIGRlZmF1bHQgaW1hZ2UgaWYgbm8gaW1hZ2UgaXMgc2V0XG4gICAyMjBcdCAgICAgICAgICAgICAgICBpZiAoaW1hZ2VVcmwgPT0gbnVsbCB8fCBpbWFnZVVybC5pc0VtcHR5KCkpIHtcbiAgIDIyMVx0ICAgICAgICAgICAgICAgICAgICAvLyBEZWZhdWx0IGltYWdlcyBiYXNlZCBvbiBjYXRlZ29yeSBpbmRleFxuICAgMjIyXHQgICAgICAgICAgICAgICAgICAgIFN0cmluZ1tdIGRlZmF1bHRJbWFnZXMgPSB7XG4gICAyMjNcdCAgICAgICAgICAgICAgICAgICAgICAgIFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1ODEwNDQ3Nzc1NTAtNGNmYTYwNzA3YzAzP2l4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTc3MiZxPTgwXCIsXG4gICAyMjRcdCAgICAgICAgICAgICAgICAgICAgICAgIFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE2MTcxMzc5Njg0MjctODU5MjRjODAwYTIyP2l4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTc3NCZxPTgwXCIsXG4gICAyMjVcdCAgICAgICAgICAgICAgICAgICAgICAgIFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1ODQ5MTc4NjU0NDItZGU4OWRmNzZhZmQzP2l4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTg3MCZxPTgwXCIsXG4gICAyMjZcdCAgICAgICAgICAgICAgICAgICAgICAgIFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1NzY1NjY1ODgwMjgtNDE0N2YzODQyZjI3P2l4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTc2NCZxPTgwXCIsXG4gICAyMjdcdCAgICAgICAgICAgICAgICAgICAgICAgIFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1NTEyMzI4NjQtM2YwODkwZTU4MGQ5P2l4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTY4NyZxPTgwXCIsXG4gICAyMjhcdCAgICAgICAgICAgICAgICAgICAgICAgIFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1NjIxNTc4NzMtODE4YmMwNzI2ZjY4P2l4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTY1NCZxPTgwXCJcbiAgIDIyOVx0ICAgICAgICAgICAgICAgICAgICB9O1xuICAgMjMwXHQgICAgICAgICAgICAgICAgICAgIGltYWdlVXJsID0gZGVmYXVsdEltYWdlc1tpICUgZGVmYXVsdEltYWdlcy5sZW5ndGhdO1xuICAgMjMxXHQgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgIDIzMlx0ICAgICAgICAgICAgICAgICAgICAvLyBVc2UgdGhlIGltYWdlIGZyb20gdGhlIGRhdGFiYXNlXG4gICAyMzNcdCAgICAgICAgICAgICAgICAgICAgaW1hZ2VVcmwgPSByZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9cIiArIGltYWdlVXJsO1xuICAgMjM0XHQgICAgICAgICAgICAgICAgfVxuICAgMjM1XHQgICAgICAgICAgICAlPlxuICAgMjM2XHQgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2F0ZWdvcnktY2FyZFwiPlxuICAgMjM3XHQgICAgICAgICAgICAgICAgPGltZyBzcmM9XCI8JT0gaW1hZ2VVcmwgJT5cIiBhbHQ9XCI8JT0gY2F0ZWdvcnkuZ2V0TmFtZSgpICU+XCI+XG4gICAyMzhcdCAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2F0ZWdvcnktY29udGVudFwiPlxuICAgMjM5XHQgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzcz1cImNhdGVnb3J5LXRpdGxlXCI+PCU9IGNhdGVnb3J5LmdldE5hbWUoKSAlPjwvaDM+XG4gICAyNDBcdCAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIlByb2R1Y3RTZXJ2bGV0P2NhdGVnb3J5PTwlPSBjYXRlZ29yeS5nZXRJZCgpICU+XCIgY2xhc3M9XCJjYXRlZ29yeS1saW5rXCI+U2hvcCBOb3cgPGkgY2xhc3M9XCJmYXMgZmEtYXJyb3ctcmlnaHRcIj48L2k+PC9hPlxuICAgMjQxXHQgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAyNDJcdCAgICAgICAgICAgIDwvZGl2PlxuICAgMjQzXHQgICAgICAgICAgICA8JSB9ICU+XG4gICAyNDRcdFxuICAgMjQ1XHQgICAgICAgICAgICA8JSBpZiAoY2F0ZWdvcmllcy5pc0VtcHR5KCkpIHsgJT5cbiAgIDI0Nlx0ICAgICAgICAgICAgPCEtLSBEZWZhdWx0IGNhdGVnb3JpZXMgaWYgbm8gY2F0ZWdvcmllcyBpbiBkYXRhYmFzZSAtLT5cbiAgIDI0N1x0ICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhdGVnb3J5LWNhcmRcIj5cbiAgIDI0OFx0ICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1ODEwNDQ3Nzc1NTAtNGNmYTYwNzA3YzAzP2l4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTc3MiZxPTgwXCIgYWx0PVwiV29tZW4ncyBGYXNoaW9uXCI+XG4gICAyNDlcdCAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2F0ZWdvcnktY29udGVudFwiPlxuICAgMjUwXHQgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzcz1cImNhdGVnb3J5LXRpdGxlXCI+V29tZW4ncyBGYXNoaW9uPC9oMz5cbiAgIDI1MVx0ICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiUHJvZHVjdFNlcnZsZXQ/Y2F0ZWdvcnk9d29tZW5cIiBjbGFzcz1cImNhdGVnb3J5LWxpbmtcIj5TaG9wIE5vdyA8aSBjbGFzcz1cImZhcyBmYS1hcnJvdy1yaWdodFwiPjwvaT48L2E+XG4gICAyNTJcdCAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgIDI1M1x0ICAgICAgICAgICAgPC9kaXY+XG4gICAyNTRcdFxuICAgMjU1XHQgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2F0ZWdvcnktY2FyZFwiPlxuICAgMjU2XHQgICAgICAgICAgICAgICAgPGltZyBzcmM9XCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTYxNzEzNzk2ODQyNy04NTkyNGM4MDBhMjI/aXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9Nzc0JnE9ODBcIiBhbHQ9XCJNZW4ncyBGYXNoaW9uXCI+XG4gICAyNTdcdCAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2F0ZWdvcnktY29udGVudFwiPlxuICAgMjU4XHQgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzcz1cImNhdGVnb3J5LXRpdGxlXCI+TWVuJ3MgRmFzaGlvbjwvaDM+XG4gICAyNTlcdCAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIlByb2R1Y3RTZXJ2bGV0P2NhdGVnb3J5PW1lblwiIGNsYXNzPVwiY2F0ZWdvcnktbGlua1wiPlNob3AgTm93IDxpIGNsYXNzPVwiZmFzIGZhLWFycm93LXJpZ2h0XCI+PC9pPjwvYT5cbiAgIDI2MFx0ICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgMjYxXHQgICAgICAgICAgICA8L2Rpdj5cbiAgIDI2Mlx0XG4gICAyNjNcdCAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXRlZ29yeS1jYXJkXCI+XG4gICAyNjRcdCAgICAgICAgICAgICAgICA8aW1nIHNyYz1cImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTg0OTE3ODY1NDQyLWRlODlkZjc2YWZkMz9peGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0QmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz04NzAmcT04MFwiIGFsdD1cIkFjY2Vzc29yaWVzXCI+XG4gICAyNjVcdCAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2F0ZWdvcnktY29udGVudFwiPlxuICAgMjY2XHQgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzcz1cImNhdGVnb3J5LXRpdGxlXCI+QWNjZXNzb3JpZXM8L2gzPlxuICAgMjY3XHQgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCJQcm9kdWN0U2VydmxldD9jYXRlZ29yeT1hY2Nlc3Nvcmllc1wiIGNsYXNzPVwiY2F0ZWdvcnktbGlua1wiPlNob3AgTm93IDxpIGNsYXNzPVwiZmFzIGZhLWFycm93LXJpZ2h0XCI+PC9pPjwvYT5cbiAgIDI2OFx0ICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgMjY5XHQgICAgICAgICAgICA8L2Rpdj5cbiAgIDI3MFx0ICAgICAgICAgICAgPCUgfSAlPlxuICAgMjcxXHQgICAgICAgIDwvZGl2PlxuICAgMjcyXHQgICAgPC9kaXY+XG4gICAyNzNcdDwvc2VjdGlvbj5cbiAgIDI3NFx0XG4gICAyNzVcdDwhLS0gRmVhdHVyZWQgUHJvZHVjdHMgLS0+XG4gICAyNzZcdDxzZWN0aW9uIGNsYXNzPVwiZmVhdHVyZWQtcHJvZHVjdHNcIj5cbiAgIDI3N1x0ICAgIDxkaXYgY2xhc3M9XCJjb250YWluZXJcIj5cbiAgIDI3OFx0ICAgICAgICA8ZGl2IGNsYXNzPVwic2VjdGlvbi10aXRsZVwiPlxuICAgMjc5XHQgICAgICAgICAgICA8aDI+RmVhdHVyZWQgUHJvZHVjdHM8L2gyPlxuICAgMjgwXHQgICAgICAgIDwvZGl2PlxuICAgMjgxXHRcbiAgIDI4Mlx0ICAgICAgICA8ZGl2IGNsYXNzPVwicHJvZHVjdHMtZ3JpZFwiPlxuICAgMjgzXHQgICAgICAgICAgICA8IS0tIFByb2R1Y3QgMiAtLT5cbiAgIDI4NFx0ICAgICAgICAgICAgPGRpdiBjbGFzcz1cInByb2R1Y3QtY2FyZFwiPlxuICAgMjg1XHQgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInByb2R1Y3QtaW1nXCI+XG4gICAyODZcdCAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTYxMTMxMjQ0OTQwOC1mY2VjZTI3Y2RiYjc/aXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9ODY5JnE9ODBcIiBhbHQ9XCJEZW5pbSBKYWNrZXRcIj5cbiAgIDI4N1x0ICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInByb2R1Y3QtdGFnIHRhZy1zYWxlXCI+LTI1JTwvc3Bhbj5cbiAgIDI4OFx0ICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicHJvZHVjdC1hY3Rpb25zXCI+XG4gICAyODlcdCAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCJDYXJ0U2VydmxldD9hY3Rpb249YWRkJnByb2R1Y3RJZD0yJnF1YW50aXR5PTFcIiBjbGFzcz1cInByb2R1Y3QtYWN0aW9uLWJ0blwiPlxuICAgMjkwXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYXMgZmEtc2hvcHBpbmctY2FydFwiPjwvaT5cbiAgIDI5MVx0ICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgMjkyXHQgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiUHJvZHVjdFNlcnZsZXQ/YWN0aW9uPXZpZXcmaWQ9MlwiIGNsYXNzPVwicHJvZHVjdC1hY3Rpb24tYnRuXCI+XG4gICAyOTNcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImZhcyBmYS1leWVcIj48L2k+XG4gICAyOTRcdCAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgIDI5NVx0ICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgIDI5Nlx0ICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgMjk3XHQgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInByb2R1Y3QtaW5mb1wiPlxuICAgMjk4XHQgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwicHJvZHVjdC1jYXRlZ29yeVwiPkphY2tldHM8L3NwYW4+XG4gICAyOTlcdCAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPVwicHJvZHVjdC10aXRsZVwiPkNsYXNzaWMgRGVuaW0gSmFja2V0PC9oMz5cbiAgIDMwMFx0ICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicHJvZHVjdC1yYXRpbmdcIj5cblRvdGFsIGxpbmVzIGluIGZpbGU6IDQxOVxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiYmQ1NmVlYjgtNzhmOC00MzgxLWExNDgtMWJiM2UyNWVkZjczO3Rvb2x1X3ZydHhfMDFCQ0hzcnNqcXBIN2lvY2M0NGhNN25zIjp7InJlcXVlc3RJZCI6ImJkNTZlZWI4LTc4ZjgtNDM4MS1hMTQ4LTFiYjNlMjVlZGY3MyIsInRvb2xVc2VJZCI6InRvb2x1X3ZydHhfMDFCQ0hzcnNqcXBIN2lvY2M0NGhNN25zIiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBDbG90aGVlL3NyYy9tYWluL3dlYmFwcC9pbmRleC5qc3AuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlIGZvciBlbnRyeSB3aXRoIGluZGV4IFswXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgMjI3XHQgICAgICAgICAgICAgICAgICAgICAgICBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTUxMjMyODY0LTNmMDg5MGU1ODBkOT9peGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0QmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz02ODcmcT04MFwiLFxuICAgMjI4XHQgICAgICAgICAgICAgICAgICAgICAgICBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTYyMTU3ODczLTgxOGJjMDcyNmY2OD9peGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0QmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz02NTQmcT04MFwiXG4gICAyMjlcdCAgICAgICAgICAgICAgICAgICAgfTtcbiAgIDIzMFx0ICAgICAgICAgICAgICAgICAgICBpbWFnZVVybCA9IGRlZmF1bHRJbWFnZXNbaSAlIGRlZmF1bHRJbWFnZXMubGVuZ3RoXTtcbiAgIDIzMVx0ICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAyMzJcdCAgICAgICAgICAgICAgICAgICAgLy8gVXNlIHRoZSBpbWFnZSBmcm9tIHRoZSBkYXRhYmFzZVxuICAgMjMzXHQgICAgICAgICAgICAgICAgICAgIC8vIEZpcnN0IGNoZWNrIGlmIHRoZSBmaWxlIGV4aXN0cyBpbiB0aGUgd2ViYXBwIGRpcmVjdG9yeVxuICAgMjM0XHQgICAgICAgICAgICAgICAgICAgIFN0cmluZyB3ZWJhcHBQYXRoID0gcmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvXCIgKyBpbWFnZVVybDtcbiAgIDIzNVx0XG4gICAyMzZcdCAgICAgICAgICAgICAgICAgICAgLy8gQWxzbyBjaGVjayBpZiBpdCBleGlzdHMgaW4gdGhlIHBlcm1hbmVudCBzdG9yYWdlIGxvY2F0aW9uXG4gICAyMzdcdCAgICAgICAgICAgICAgICAgICAgU3RyaW5nIHVzZXJIb21lID0gU3lzdGVtLmdldFByb3BlcnR5KFwidXNlci5ob21lXCIpO1xuICAgMjM4XHQgICAgICAgICAgICAgICAgICAgIFN0cmluZyBwZXJtYW5lbnRQYXRoID0gdXNlckhvbWUgKyBGaWxlLnNlcGFyYXRvciArIFwiQ2xvdGhlZUltYWdlc1wiICsgRmlsZS5zZXBhcmF0b3IgKyBpbWFnZVVybDtcbiAgIDIzOVx0ICAgICAgICAgICAgICAgICAgICBGaWxlIHBlcm1hbmVudEZpbGUgPSBuZXcgRmlsZShwZXJtYW5lbnRQYXRoKTtcbiAgIDI0MFx0XG4gICAyNDFcdCAgICAgICAgICAgICAgICAgICAgaWYgKHBlcm1hbmVudEZpbGUuZXhpc3RzKCkpIHtcbiAgIDI0Mlx0ICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIGZpbGUgZXhpc3RzIGluIHBlcm1hbmVudCBzdG9yYWdlLCBjcmVhdGUgYSBzZXJ2bGV0IHRvIHNlcnZlIGl0XG4gICAyNDNcdCAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlVXJsID0gcmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvQ2F0ZWdvcnlJbWFnZVNlcnZsZXQ/aWQ9XCIgKyBjYXRlZ29yeS5nZXRJZCgpO1xuICAgMjQ0XHQgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAyNDVcdCAgICAgICAgICAgICAgICAgICAgICAgIC8vIE90aGVyd2lzZSB1c2UgdGhlIHdlYmFwcCBwYXRoXG4gICAyNDZcdCAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlVXJsID0gd2ViYXBwUGF0aDtcbiAgIDI0N1x0ICAgICAgICAgICAgICAgICAgICB9XG4gICAyNDhcdCAgICAgICAgICAgICAgICB9XG4gICAyNDlcdCAgICAgICAgICAgICU+XG4gICAyNTBcdCAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXRlZ29yeS1jYXJkXCI+XG4gICAyNTFcdCAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIjwlPSBpbWFnZVVybCAlPlwiIGFsdD1cIjwlPSBjYXRlZ29yeS5nZXROYW1lKCkgJT5cIj5cbiAgIDI1Mlx0ICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXRlZ29yeS1jb250ZW50XCI+XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sImVkY2VjYjY3LTc1YTQtNDRjOS05ZTQ5LWY1ZGY5ZmM1NWU2YTt0b29sdV92cnR4XzAxNnF3cHF4cExXTVNUZ2puaVZqYXhGUSI6eyJyZXF1ZXN0SWQiOiJlZGNlY2I2Ny03NWE0LTQ0YzktOWU0OS1mNWRmOWZjNTVlNmEiLCJ0b29sVXNlSWQiOiJ0b29sdV92cnR4XzAxNnF3cHF4cExXTVNUZ2puaVZqYXhGUSIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgQ2xvdGhlZS9zcmMvbWFpbi9qYXZhL2NvbnRyb2xsZXIvQ2F0ZWdvcnlJbWFnZVNlcnZsZXQuamF2YS5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2UgZm9yIGVudHJ5IHdpdGggaW5kZXggWzBdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICAgMzVcdCAgICAgICAgc3VwZXIoKTtcbiAgICAzNlx0ICAgICAgICBjYXRlZ29yeURBTyA9IG5ldyBDYXRlZ29yeURBTygpO1xuICAgIDM3XHQgICAgfVxuICAgIDM4XHRcbiAgICAzOVx0ICAgIHByb3RlY3RlZCB2b2lkIGRvR2V0KEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBIdHRwU2VydmxldFJlc3BvbnNlIHJlc3BvbnNlKVxuICAgIDQwXHQgICAgICAgICAgICB0aHJvd3MgU2VydmxldEV4Y2VwdGlvbiwgSU9FeGNlcHRpb24ge1xuICAgIDQxXHQgICAgICAgIC8vIEdldCBjYXRlZ29yeSBJRCBmcm9tIHJlcXVlc3RcbiAgICA0Mlx0ICAgICAgICBTdHJpbmcgY2F0ZWdvcnlJZFN0ciA9IHJlcXVlc3QuZ2V0UGFyYW1ldGVyKFwiaWRcIik7XG4gICAgNDNcdFxuICAgIDQ0XHQgICAgICAgIGlmIChjYXRlZ29yeUlkU3RyID09IG51bGwgfHwgY2F0ZWdvcnlJZFN0ci5pc0VtcHR5KCkpIHtcbiAgICA0NVx0ICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZEVycm9yKEh0dHBTZXJ2bGV0UmVzcG9uc2UuU0NfQkFEX1JFUVVFU1QsIFwiQ2F0ZWdvcnkgSUQgaXMgcmVxdWlyZWRcIik7XG4gICAgNDZcdCAgICAgICAgICAgIHJldHVybjtcbiAgICA0N1x0ICAgICAgICB9XG4gICAgNDhcdFxuICAgIDQ5XHQgICAgICAgIHRyeSB7XG4gICAgNTBcdCAgICAgICAgICAgIGludCBjYXRlZ29yeUlkID0gSW50ZWdlci5wYXJzZUludChjYXRlZ29yeUlkU3RyKTtcbiAgICA1MVx0XG4gICAgNTJcdCAgICAgICAgICAgIC8vIEdldCBjYXRlZ29yeSBmcm9tIGRhdGFiYXNlXG4gICAgNTNcdCAgICAgICAgICAgIENhdGVnb3J5IGNhdGVnb3J5ID0gY2F0ZWdvcnlEQU8uZ2V0Q2F0ZWdvcnlCeUlkKGNhdGVnb3J5SWQpO1xuICAgIDU0XHRcbiAgICA1NVx0ICAgICAgICAgICAgaWYgKGNhdGVnb3J5ID09IG51bGwpIHtcbiAgICA1Nlx0ICAgICAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRFcnJvcihIdHRwU2VydmxldFJlc3BvbnNlLlNDX05PVF9GT1VORCwgXCJDYXRlZ29yeSBub3QgZm91bmRcIik7XG4gICAgNTdcdCAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgNThcdCAgICAgICAgICAgIH1cbiAgICA1OVx0XG4gICAgNjBcdCAgICAgICAgICAgIFN0cmluZyBpbWFnZVVybCA9IGNhdGVnb3J5LmdldEltYWdlVXJsKCk7XG4gICAgNjFcdCAgICAgICAgICAgIGlmIChpbWFnZVVybCA9PSBudWxsIHx8IGltYWdlVXJsLmlzRW1wdHkoKSkge1xuICAgIDYyXHQgICAgICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZEVycm9yKEh0dHBTZXJ2bGV0UmVzcG9uc2UuU0NfTk9UX0ZPVU5ELCBcIkNhdGVnb3J5IGhhcyBubyBpbWFnZVwiKTtcbiAgICA2M1x0ICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICA2NFx0ICAgICAgICAgICAgfVxuICAgIDY1XHRcbiAgICA2Nlx0ICAgICAgICAgICAgLy8gR2V0IHRoZSBwZXJtYW5lbnQgcGF0aCB0byB0aGUgaW1hZ2VcbiAgICA2N1x0ICAgICAgICAgICAgU3RyaW5nIHVzZXJIb21lID0gU3lzdGVtLmdldFByb3BlcnR5KFwidXNlci5ob21lXCIpO1xuICAgIDY4XHQgICAgICAgICAgICBTdHJpbmcgcGVybWFuZW50UGF0aCA9IHVzZXJIb21lICsgRmlsZS5zZXBhcmF0b3IgKyBcIkNsb3RoZWVJbWFnZXNcIiArIEZpbGUuc2VwYXJhdG9yICsgaW1hZ2VVcmw7XG4gICAgNjlcdCAgICAgICAgICAgIEZpbGUgaW1hZ2VGaWxlID0gbmV3IEZpbGUocGVybWFuZW50UGF0aCk7XG4gICAgNzBcdFxuICAgIDcxXHQgICAgICAgICAgICBpZiAoIWltYWdlRmlsZS5leGlzdHMoKSkge1xuICAgIDcyXHQgICAgICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZEVycm9yKEh0dHBTZXJ2bGV0UmVzcG9uc2UuU0NfTk9UX0ZPVU5ELCBcIkltYWdlIGZpbGUgbm90IGZvdW5kXCIpO1xuICAgIDczXHQgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgIDc0XHQgICAgICAgICAgICB9XG4gICAgNzVcdFxuICAgIDc2XHQgICAgICAgICAgICAvLyBTZXQgY29udGVudCB0eXBlIGJhc2VkIG9uIGZpbGUgZXh0ZW5zaW9uXG4gICAgNzdcdCAgICAgICAgICAgIFN0cmluZyBmaWxlTmFtZSA9IGltYWdlRmlsZS5nZXROYW1lKCk7XG4gICAgNzhcdCAgICAgICAgICAgIFN0cmluZyBjb250ZW50VHlwZSA9IFwiaW1hZ2UvanBlZ1wiOyAvLyBEZWZhdWx0XG4gICAgNzlcdFxuICAgIDgwXHQgICAgICAgICAgICBpZiAoZmlsZU5hbWUuZW5kc1dpdGgoXCIucG5nXCIpKSB7XG4gICAgODFcdCAgICAgICAgICAgICAgICBjb250ZW50VHlwZSA9IFwiaW1hZ2UvcG5nXCI7XG4gICAgODJcdCAgICAgICAgICAgIH0gZWxzZSBpZiAoZmlsZU5hbWUuZW5kc1dpdGgoXCIuZ2lmXCIpKSB7XG4gICAgODNcdCAgICAgICAgICAgICAgICBjb250ZW50VHlwZSA9IFwiaW1hZ2UvZ2lmXCI7XG4gICAgODRcdCAgICAgICAgICAgIH0gZWxzZSBpZiAoZmlsZU5hbWUuZW5kc1dpdGgoXCIuanBnXCIpIHx8IGZpbGVOYW1lLmVuZHNXaXRoKFwiLmpwZWdcIikpIHtcbiAgICA4NVx0ICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlID0gXCJpbWFnZS9qcGVnXCI7XG4gICAgODZcdCAgICAgICAgICAgIH1cbiAgICA4N1x0XG4gICAgODhcdCAgICAgICAgICAgIHJlc3BvbnNlLnNldENvbnRlbnRUeXBlKGNvbnRlbnRUeXBlKTtcbiAgICA4OVx0XG4gICAgOTBcdCAgICAgICAgICAgIC8vIENvcHkgdGhlIGZpbGUgdG8gdGhlIHJlc3BvbnNlIG91dHB1dCBzdHJlYW1cbiAgICA5MVx0ICAgICAgICAgICAgdHJ5IChGaWxlSW5wdXRTdHJlYW0gaW4gPSBuZXcgRmlsZUlucHV0U3RyZWFtKGltYWdlRmlsZSk7XG4gICAgOTJcdCAgICAgICAgICAgICAgICAgT3V0cHV0U3RyZWFtIG91dCA9IHJlc3BvbnNlLmdldE91dHB1dFN0cmVhbSgpKSB7XG4gICAgOTNcdFxuICAgIDk0XHQgICAgICAgICAgICAgICAgYnl0ZVtdIGJ1ZmZlciA9IG5ldyBieXRlWzQwOTZdO1xuICAgIDk1XHQgICAgICAgICAgICAgICAgaW50IGJ5dGVzUmVhZDtcbiAgICA5Nlx0XG4gICAgOTdcdCAgICAgICAgICAgICAgICB3aGlsZSAoKGJ5dGVzUmVhZCA9IGluLnJlYWQoYnVmZmVyKSkgIT0gLTEpIHtcbiAgICA5OFx0ICAgICAgICAgICAgICAgICAgICBvdXQud3JpdGUoYnVmZmVyLCAwLCBieXRlc1JlYWQpO1xuICAgIDk5XHQgICAgICAgICAgICAgICAgfVxuICAgMTAwXHQgICAgICAgICAgICB9XG4gICAxMDFcdFxuICAgMTAyXHQgICAgICAgIH0gY2F0Y2ggKE51bWJlckZvcm1hdEV4Y2VwdGlvbiBlKSB7XG4gICAxMDNcdCAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRFcnJvcihIdHRwU2VydmxldFJlc3BvbnNlLlNDX0JBRF9SRVFVRVNULCBcIkludmFsaWQgY2F0ZWdvcnkgSURcIik7XG4gICAxMDRcdCAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgIDEwNVx0ICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZEVycm9yKEh0dHBTZXJ2bGV0UmVzcG9uc2UuU0NfSU5URVJOQUxfU0VSVkVSX0VSUk9SLCBcIkVycm9yIHNlcnZpbmcgaW1hZ2U6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgMTA2XHQgICAgICAgIH1cbiAgIDEwN1x0ICAgIH1cbiAgIDEwOFx0XG4gICAxMDlcdCAgICBwcm90ZWN0ZWQgdm9pZCBkb1Bvc3QoSHR0cFNlcnZsZXRSZXF1ZXN0IHJlcXVlc3QsIEh0dHBTZXJ2bGV0UmVzcG9uc2UgcmVzcG9uc2UpXG4gICAxMTBcdCAgICAgICAgICAgIHRocm93cyBTZXJ2bGV0RXhjZXB0aW9uLCBJT0V4Y2VwdGlvbiB7XG4gICAxMTFcdFxuICAgMTEyXHQgICAgICAgIC8vIENoZWNrIGlmIHVzZXIgaXMgbG9nZ2VkIGluIGFuZCBpcyBhbiBhZG1pblxuICAgMTEzXHQgICAgICAgIGpha2FydGEuc2VydmxldC5odHRwLkh0dHBTZXNzaW9uIHNlc3Npb24gPSByZXF1ZXN0LmdldFNlc3Npb24oKTtcbiAgIDExNFx0ICAgICAgICBtb2RlbC5Vc2VyIHVzZXIgPSAobW9kZWwuVXNlcikgc2Vzc2lvbi5nZXRBdHRyaWJ1dGUoXCJ1c2VyXCIpO1xuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCI3NDdlNzFkNi03NjhlLTQzNTQtYmU4My03YjVhZTFlZWJmYmY7dG9vbHVfdnJ0eF8wMVA5SGZtNXQ5U1NnSk0zc3VjZ0N5RWYiOnsicmVxdWVzdElkIjoiNzQ3ZTcxZDYtNzY4ZS00MzU0LWJlODMtN2I1YWUxZWViZmJmIiwidG9vbFVzZUlkIjoidG9vbHVfdnJ0eF8wMVA5SGZtNXQ5U1NnSk0zc3VjZ0N5RWYiLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJUaGUgZm9sbG93aW5nIGNvZGUgc2VjdGlvbnMgd2VyZSByZXRyaWV2ZWQ6XG5QYXRoOiBDbG90aGVlL3NyYy9tYWluL3dlYmFwcC9XRUItSU5GL3dlYi54bWxcbi4uLlxuXG4gICAgPCEtLSBTZXJ2bGV0IE1hcHBpbmdzIC0tPlxuICAgIDxzZXJ2bGV0PlxuICAgICAgICA8c2VydmxldC1uYW1lPkN1c3RvbWVyUmV2aWV3U2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8c2VydmxldC1jbGFzcz5jb250cm9sbGVyLkN1c3RvbWVyUmV2aWV3U2VydmxldDwvc2VydmxldC1jbGFzcz5cbiAgICA8L3NlcnZsZXQ+XG4gICAgPHNlcnZsZXQtbWFwcGluZz5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5DdXN0b21lclJldmlld1NlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9DdXN0b21lclJldmlld1NlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgIDwvc2VydmxldC1tYXBwaW5nPlxuICAgIDxzZXJ2bGV0PlxuICAgICAgICA8c2VydmxldC1uYW1lPlByb2ZpbGVTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDxzZXJ2bGV0LWNsYXNzPmNvbnRyb2xsZXIuUHJvZmlsZVNlcnZsZXQ8L3NlcnZsZXQtY2xhc3M+XG4gICAgICAgIDxtdWx0aXBhcnQtY29uZmlnPlxuICAgICAgICAgICAgPG1heC1maWxlLXNpemU+NTI0Mjg4MDwvbWF4LWZpbGUtc2l6ZT48IS0tIDVNQiAtLT5cbiAgICAgICAgICAgIDxtYXgtcmVxdWVzdC1zaXplPjEwNDg1NzYwPC9tYXgtcmVxdWVzdC1zaXplPjwhLS0gMTBNQiAtLT5cbiAgICAgICAgICAgIDxmaWxlLXNpemUtdGhyZXNob2xkPjEwNDg1NzY8L2ZpbGUtc2l6ZS10aHJlc2hvbGQ+PCEtLSAxTUIgLS0+XG4gICAgICAgIDwvbXVsdGlwYXJ0LWNvbmZpZz5cbiAgICA8L3NlcnZsZXQ+XG4gICAgPHNlcnZsZXQtbWFwcGluZz5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5Qcm9maWxlU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L1Byb2ZpbGVTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICA8L3NlcnZsZXQtbWFwcGluZz5cbi4uLlxuXG4gICAgPCEtLSBMb2dpbiBTZXJ2bGV0IC0tPlxuICAgIDxzZXJ2bGV0PlxuICAgICAgICA8c2VydmxldC1uYW1lPkxvZ2luU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8c2VydmxldC1jbGFzcz5jb250cm9sbGVyLkxvZ2luU2VydmxldDwvc2VydmxldC1jbGFzcz5cbiAgICA8L3NlcnZsZXQ+XG4gICAgPHNlcnZsZXQtbWFwcGluZz5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5Mb2dpblNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9Mb2dpblNlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgIDwvc2VydmxldC1tYXBwaW5nPlxuXG4gICAgPCEtLSBDYXJ0IFNlcnZsZXQgLS0+XG4gICAgPHNlcnZsZXQ+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+Q2FydFNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHNlcnZsZXQtY2xhc3M+Y29udHJvbGxlci5DYXJ0U2VydmxldDwvc2VydmxldC1jbGFzcz5cbiAgICA8L3NlcnZsZXQ+XG4gICAgPHNlcnZsZXQtbWFwcGluZz5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5DYXJ0U2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L0NhcnRTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICA8L3NlcnZsZXQtbWFwcGluZz5cblxuICAgIDwhLS0gQWN0aW9uIFNlcnZsZXQgLS0+XG4gICAgPHNlcnZsZXQ+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+QWN0aW9uU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8c2VydmxldC1jbGFzcz5jb250cm9sbGVyLkFjdGlvblNlcnZsZXQ8L3NlcnZsZXQtY2xhc3M+XG4gICAgPC9zZXJ2bGV0PlxuICAgIDxzZXJ2bGV0LW1hcHBpbmc+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+QWN0aW9uU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L0FjdGlvblNlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgIDwvc2VydmxldC1tYXBwaW5nPlxuXG4gICAgPCEtLSBBYm91dCBTZXJ2bGV0IC0tPlxuICAgIDxzZXJ2bGV0PlxuICAgICAgICA8c2VydmxldC1uYW1lPkFib3V0U2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8c2VydmxldC1jbGFzcz5jb250cm9sbGVyLkFib3V0U2VydmxldDwvc2VydmxldC1jbGFzcz5cbiAgICA8L3NlcnZsZXQ+XG4gICAgPHNlcnZsZXQtbWFwcGluZz5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5BYm91dFNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9BYm91dFNlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgIDwvc2VydmxldC1tYXBwaW5nPlxuLi4uXG5cbiAgICA8IS0tIE9yZGVyIFNlcnZsZXQgLS0+XG4gICAgPHNlcnZsZXQ+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+T3JkZXJTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDxzZXJ2bGV0LWNsYXNzPmNvbnRyb2xsZXIuT3JkZXJTZXJ2bGV0PC9zZXJ2bGV0LWNsYXNzPlxuICAgIDwvc2VydmxldD5cbiAgICA8c2VydmxldC1tYXBwaW5nPlxuICAgICAgICA8c2VydmxldC1uYW1lPk9yZGVyU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L09yZGVyU2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgPC9zZXJ2bGV0LW1hcHBpbmc+XG5cbiAgICA8IS0tIFByb2R1Y3QgU2VydmxldCAtLT5cbiAgICA8c2VydmxldD5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5Qcm9kdWN0U2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8c2VydmxldC1jbGFzcz5jb250cm9sbGVyLlByb2R1Y3RTZXJ2bGV0PC9zZXJ2bGV0LWNsYXNzPlxuICAgIDwvc2VydmxldD5cbiAgICA8c2VydmxldC1tYXBwaW5nPlxuICAgICAgICA8c2VydmxldC1uYW1lPlByb2R1Y3RTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vUHJvZHVjdFNlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgIDwvc2VydmxldC1tYXBwaW5nPlxuXG4gICAgPCEtLSBJbWFnZSBTZXJ2bGV0IC0tPlxuICAgIDxzZXJ2bGV0PlxuICAgICAgICA8c2VydmxldC1uYW1lPkltYWdlU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8c2VydmxldC1jbGFzcz5jb250cm9sbGVyLkltYWdlU2VydmxldDwvc2VydmxldC1jbGFzcz5cbiAgICAgICAgPG11bHRpcGFydC1jb25maWc+XG4gICAgICAgICAgICA8bWF4LWZpbGUtc2l6ZT41MjQyODgwPC9tYXgtZmlsZS1zaXplPjwhLS0gNU1CIC0tPlxuICAgICAgICAgICAgPG1heC1yZXF1ZXN0LXNpemU+MTA0ODU3NjA8L21heC1yZXF1ZXN0LXNpemU+PCEtLSAxME1CIC0tPlxuICAgICAgICAgICAgPGZpbGUtc2l6ZS10aHJlc2hvbGQ+MTA0ODU3NjwvZmlsZS1zaXplLXRocmVzaG9sZD48IS0tIDFNQiAtLT5cbiAgICAgICAgPC9tdWx0aXBhcnQtY29uZmlnPlxuICAgIDwvc2VydmxldD5cbiAgICA8c2VydmxldC1tYXBwaW5nPlxuICAgICAgICA8c2VydmxldC1uYW1lPkltYWdlU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L0ltYWdlU2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgPC9zZXJ2bGV0LW1hcHBpbmc+XG5cbiAgICA8IS0tIEhvbWUgU2VydmxldCAtLT5cbiAgICA8c2VydmxldD5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5Ib21lU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8c2VydmxldC1jbGFzcz5jb250cm9sbGVyLkhvbWVTZXJ2bGV0PC9zZXJ2bGV0LWNsYXNzPlxuICAgIDwvc2VydmxldD5cbiAgICA8c2VydmxldC1tYXBwaW5nPlxuICAgICAgICA8c2VydmxldC1uYW1lPkhvbWVTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vSG9tZVNlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgIDwvc2VydmxldC1tYXBwaW5nPlxuXG4gICAgPCEtLSBDb250YWN0IFNlcnZsZXQgLS0+XG4gICAgPHNlcnZsZXQ+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+Q29udGFjdFNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHNlcnZsZXQtY2xhc3M+Y29udHJvbGxlci5Db250YWN0U2VydmxldDwvc2VydmxldC1jbGFzcz5cbiAgICA8L3NlcnZsZXQ+XG4gICAgPHNlcnZsZXQtbWFwcGluZz5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5Db250YWN0U2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L0NvbnRhY3RTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICA8L3NlcnZsZXQtbWFwcGluZz5cblxuICAgIDwhLS0gQ2F0ZWdvcnkgU2VydmxldCAtLT5cbiAgICA8c2VydmxldD5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5DYXRlZ29yeVNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHNlcnZsZXQtY2xhc3M+Y29udHJvbGxlci5DYXRlZ29yeVNlcnZsZXQ8L3NlcnZsZXQtY2xhc3M+XG4gICAgPC9zZXJ2bGV0PlxuICAgIDxzZXJ2bGV0LW1hcHBpbmc+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+Q2F0ZWdvcnlTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vYWRtaW4vQ2F0ZWdvcnlTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICA8L3NlcnZsZXQtbWFwcGluZz5cbiAgICA8c2VydmxldC1tYXBwaW5nPlxuICAgICAgICA8c2VydmxldC1uYW1lPkNhdGVnb3J5U2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L0NhdGVnb3J5U2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgPC9zZXJ2bGV0LW1hcHBpbmc+XG5cbiAgICA8IS0tIFNldHRpbmdzIFNlcnZsZXQgLS0+XG4gICAgPHNlcnZsZXQ+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+U2V0dGluZ3NTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDxzZXJ2bGV0LWNsYXNzPmNvbnRyb2xsZXIuU2V0dGluZ3NTZXJ2bGV0PC9zZXJ2bGV0LWNsYXNzPlxuICAgIDwvc2VydmxldD5cbiAgICA8c2VydmxldC1tYXBwaW5nPlxuICAgICAgICA8c2VydmxldC1uYW1lPlNldHRpbmdzU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L2FkbWluL1NldHRpbmdzU2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgPC9zZXJ2bGV0LW1hcHBpbmc+XG5cbiAgICA8IS0tIEFkbWluIFByb2R1Y3QgU2VydmxldCAtLT5cbiAgICA8c2VydmxldD5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5BZG1pblByb2R1Y3RTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDxzZXJ2bGV0LWNsYXNzPmNvbnRyb2xsZXIuQWRtaW5Qcm9kdWN0U2VydmxldDwvc2VydmxldC1jbGFzcz5cbiAgICA8L3NlcnZsZXQ+XG4gICAgPHNlcnZsZXQtbWFwcGluZz5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5BZG1pblByb2R1Y3RTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vYWRtaW4vQWRtaW5Qcm9kdWN0U2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgPC9zZXJ2bGV0LW1hcHBpbmc+XG5cbiAgICA8IS0tIEFkbWluIENhdGVnb3J5IFNlcnZsZXQgLS0+XG4gICAgPHNlcnZsZXQ+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+QWRtaW5DYXRlZ29yeVNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHNlcnZsZXQtY2xhc3M+Y29udHJvbGxlci5BZG1pbkNhdGVnb3J5U2VydmxldDwvc2VydmxldC1jbGFzcz5cbiAgICA8L3NlcnZsZXQ+XG4gICAgPHNlcnZsZXQtbWFwcGluZz5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5BZG1pbkNhdGVnb3J5U2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L2FkbWluL0FkbWluQ2F0ZWdvcnlTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICA8L3NlcnZsZXQtbWFwcGluZz5cblxuICAgIDwhLS0gUmVnaXN0ZXIgU2VydmxldCAtLT5cbiAgICA8c2VydmxldD5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5SZWdpc3RlclNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHNlcnZsZXQtY2xhc3M+Y29udHJvbGxlci5SZWdpc3RlclNlcnZsZXQ8L3NlcnZsZXQtY2xhc3M+XG4gICAgPC9zZXJ2bGV0PlxuICAgIDxzZXJ2bGV0LW1hcHBpbmc+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+UmVnaXN0ZXJTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vUmVnaXN0ZXJTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICA8L3NlcnZsZXQtbWFwcGluZz5cbi4uLlxuXG4gICAgPCEtLSBBZG1pbiBNZXNzYWdlIFNlcnZsZXQgLS0+XG4gICAgPHNlcnZsZXQ+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+QWRtaW5NZXNzYWdlU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8c2VydmxldC1jbGFzcz5jb250cm9sbGVyLkFkbWluTWVzc2FnZVNlcnZsZXQ8L3NlcnZsZXQtY2xhc3M+XG4gICAgPC9zZXJ2bGV0PlxuICAgIDxzZXJ2bGV0LW1hcHBpbmc+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+QWRtaW5NZXNzYWdlU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L2FkbWluL0FkbWluTWVzc2FnZVNlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgIDwvc2VydmxldC1tYXBwaW5nPlxuICAgIDxzZXJ2bGV0LW1hcHBpbmc+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+QWRtaW5NZXNzYWdlU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L0FkbWluTWVzc2FnZVNlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgIDwvc2VydmxldC1tYXBwaW5nPlxuXG4gICAgPCEtLSBBZG1pbiBSZXZpZXcgU2VydmxldCAtLT5cbiAgICA8c2VydmxldD5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5BZG1pblJldmlld1NlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHNlcnZsZXQtY2xhc3M+Y29udHJvbGxlci5BZG1pblJldmlld1NlcnZsZXQ8L3NlcnZsZXQtY2xhc3M+XG4gICAgPC9zZXJ2bGV0PlxuICAgIDxzZXJ2bGV0LW1hcHBpbmc+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+QWRtaW5SZXZpZXdTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vYWRtaW4vQWRtaW5SZXZpZXdTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICA8L3NlcnZsZXQtbWFwcGluZz5cblxuICAgIDwhLS0gQ3VzdG9tZXIgTWVzc2FnZSBTZXJ2bGV0IC0tPlxuICAgIDxzZXJ2bGV0PlxuICAgICAgICA8c2VydmxldC1uYW1lPkN1c3RvbWVyTWVzc2FnZVNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHNlcnZsZXQtY2xhc3M+Y29udHJvbGxlci5DdXN0b21lck1lc3NhZ2VTZXJ2bGV0PC9zZXJ2bGV0LWNsYXNzPlxuICAgIDwvc2VydmxldD5cbiAgICA8c2VydmxldC1tYXBwaW5nPlxuICAgICAgICA8c2VydmxldC1uYW1lPkN1c3RvbWVyTWVzc2FnZVNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9DdXN0b21lck1lc3NhZ2VTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICA8L3NlcnZsZXQtbWFwcGluZz5cbiAgICA8c2VydmxldC1tYXBwaW5nPlxuICAgICAgICA8c2VydmxldC1uYW1lPkN1c3RvbWVyTWVzc2FnZVNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9jdXN0b21lci1tZXNzYWdlczwvdXJsLXBhdHRlcm4+XG4gICAgPC9zZXJ2bGV0LW1hcHBpbmc+XG5cbiAgICA8IS0tIE1lc3NhZ2UgRnJvbnQgQ29udHJvbGxlciAoTVZDIFBhdHRlcm4pIC0tPlxuICAgIDxzZXJ2bGV0PlxuICAgICAgICA8c2VydmxldC1uYW1lPk1lc3NhZ2VGcm9udENvbnRyb2xsZXI8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHNlcnZsZXQtY2xhc3M+Y29udHJvbGxlci5NZXNzYWdlRnJvbnRDb250cm9sbGVyPC9zZXJ2bGV0LWNsYXNzPlxuICAgIDwvc2VydmxldD5cbiAgICA8c2VydmxldC1tYXBwaW5nPlxuICAgICAgICA8c2VydmxldC1uYW1lPk1lc3NhZ2VGcm9udENvbnRyb2xsZXI8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9tZXNzYWdlcy8qPC91cmwtcGF0dGVybj5cbiAgICA8L3NlcnZsZXQtbWFwcGluZz5cblxuICAgIDwhLS0gTWVzc2FnZSBDb250cm9sbGVyIC0tPlxuICAgIDxzZXJ2bGV0PlxuICAgICAgICA8c2VydmxldC1uYW1lPk1lc3NhZ2VDb250cm9sbGVyPC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDxzZXJ2bGV0LWNsYXNzPmNvbnRyb2xsZXIuTWVzc2FnZUNvbnRyb2xsZXI8L3NlcnZsZXQtY2xhc3M+XG4gICAgPC9zZXJ2bGV0PlxuICAgIDxzZXJ2bGV0LW1hcHBpbmc+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+TWVzc2FnZUNvbnRyb2xsZXI8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9hZG1pbi9tZXNzYWdlcy8qPC91cmwtcGF0dGVybj5cbiAgICA8L3NlcnZsZXQtbWFwcGluZz5cblxuICAgIDwhLS0gTWVzc2FnZSBTZXJ2bGV0IC0tPlxuICAgIDxzZXJ2bGV0PlxuICAgICAgICA8c2VydmxldC1uYW1lPk1lc3NhZ2VTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDxzZXJ2bGV0LWNsYXNzPmNvbnRyb2xsZXIuTWVzc2FnZVNlcnZsZXQ8L3NlcnZsZXQtY2xhc3M+XG4gICAgPC9zZXJ2bGV0PlxuICAgIDxzZXJ2bGV0LW1hcHBpbmc+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+TWVzc2FnZVNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9NZXNzYWdlU2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgPC9zZXJ2bGV0LW1hcHBpbmc+XG5cbiAgICA8IS0tIFByb2ZpbGUgSW1hZ2UgU2VydmxldCAtLT5cbiAgICA8c2VydmxldD5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5Qcm9maWxlSW1hZ2VTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDxzZXJ2bGV0LWNsYXNzPmNvbnRyb2xsZXIuUHJvZmlsZUltYWdlU2VydmxldDwvc2VydmxldC1jbGFzcz5cbiAgICAgICAgPG11bHRpcGFydC1jb25maWc+XG4gICAgICAgICAgICA8bWF4LWZpbGUtc2l6ZT41MjQyODgwPC9tYXgtZmlsZS1zaXplPjwhLS0gNU1CIC0tPlxuICAgICAgICAgICAgPG1heC1yZXF1ZXN0LXNpemU+MTA0ODU3NjA8L21heC1yZXF1ZXN0LXNpemU+PCEtLSAxME1CIC0tPlxuICAgICAgICAgICAgPGZpbGUtc2l6ZS10aHJlc2hvbGQ+MTA0ODU3NjwvZmlsZS1zaXplLXRocmVzaG9sZD48IS0tIDFNQiAtLT5cbiAgICAgICAgPC9tdWx0aXBhcnQtY29uZmlnPlxuICAgIDwvc2VydmxldD5cbiAgICA8c2VydmxldC1tYXBwaW5nPlxuICAgICAgICA8c2VydmxldC1uYW1lPlByb2ZpbGVJbWFnZVNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9Qcm9maWxlSW1hZ2VTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICA8L3NlcnZsZXQtbWFwcGluZz5cblxuICAgIDwhLS0gUGFzc3dvcmQgU2VydmxldCAtLT5cbiAgICA8c2VydmxldD5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5QYXNzd29yZFNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHNlcnZsZXQtY2xhc3M+Y29udHJvbGxlci5QYXNzd29yZFNlcnZsZXQ8L3NlcnZsZXQtY2xhc3M+XG4gICAgPC9zZXJ2bGV0PlxuICAgIDxzZXJ2bGV0LW1hcHBpbmc+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+UGFzc3dvcmRTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vUGFzc3dvcmRTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICA8L3NlcnZsZXQtbWFwcGluZz5cblxuICAgIDwhLS0gUHJvZmlsZSBVcGRhdGUgU2VydmxldCAtLT5cbiAgICA8c2VydmxldD5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5Qcm9maWxlVXBkYXRlU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8c2VydmxldC1jbGFzcz5jb250cm9sbGVyLlByb2ZpbGVVcGRhdGVTZXJ2bGV0PC9zZXJ2bGV0LWNsYXNzPlxuICAgIDwvc2VydmxldD5cbiAgICA8c2VydmxldC1tYXBwaW5nPlxuICAgICAgICA8c2VydmxldC1uYW1lPlByb2ZpbGVVcGRhdGVTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vUHJvZmlsZVVwZGF0ZVNlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgIDwvc2VydmxldC1tYXBwaW5nPlxuICAgIDxzZXJ2bGV0LW1hcHBpbmc+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+UHJvZmlsZVVwZGF0ZVNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9hZG1pbi9Qcm9maWxlVXBkYXRlU2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgPC9zZXJ2bGV0LW1hcHBpbmc+XG4uLi5cblxuICAgIDwhLS0gTm8gVGFiIFNlcnZsZXQgbmVlZGVkIC0gdXNpbmcgbWluaW1hbCBKUyBmb3IgVUkgZW5oYW5jZW1lbnQgLS0+XG5cbiAgICA8IS0tIENhdGVnb3J5IEltYWdlIFNlcnZsZXQgLS0+XG4gICAgPHNlcnZsZXQ+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+Q2F0ZWdvcnlJbWFnZVNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHNlcnZsZXQtY2xhc3M+Y29udHJvbGxlci5DYXRlZ29yeUltYWdlU2VydmxldDwvc2VydmxldC1jbGFzcz5cbiAgICAgICAgPG11bHRpcGFydC1jb25maWc+XG4gICAgICAgICAgICA8bWF4LWZpbGUtc2l6ZT4xMDQ4NTc2MDwvbWF4LWZpbGUtc2l6ZT48IS0tIDEwTUIgLS0+XG4gICAgICAgICAgICA8bWF4LXJlcXVlc3Qtc2l6ZT41MjQyODgwMDwvbWF4LXJlcXVlc3Qtc2l6ZT48IS0tIDUwTUIgLS0+XG4gICAgICAgICAgICA8ZmlsZS1zaXplLXRocmVzaG9sZD4xMDQ4NTc2PC9maWxlLXNpemUtdGhyZXNob2xkPjwhLS0gMU1CIC0tPlxuICAgICAgICA8L211bHRpcGFydC1jb25maWc+XG4gICAgPC9zZXJ2bGV0PlxuICAgIDxzZXJ2bGV0LW1hcHBpbmc+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+Q2F0ZWdvcnlJbWFnZVNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9DYXRlZ29yeUltYWdlU2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgPC9zZXJ2bGV0LW1hcHBpbmc+XG5cbiAgICA8IS0tIFRlc3QgQ2F0ZWdvcmllcyBTZXJ2bGV0IC0tPlxuICAgIDxzZXJ2bGV0PlxuICAgICAgICA8c2VydmxldC1uYW1lPlRlc3RDYXRlZ29yaWVzU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8c2VydmxldC1jbGFzcz5jb250cm9sbGVyLlRlc3RDYXRlZ29yaWVzU2VydmxldDwvc2VydmxldC1jbGFzcz5cbiAgICA8L3NlcnZsZXQ+XG4gICAgPHNlcnZsZXQtbWFwcGluZz5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5UZXN0Q2F0ZWdvcmllc1NlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9UZXN0Q2F0ZWdvcmllc1NlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgIDwvc2VydmxldC1tYXBwaW5nPlxuXG4gICAgPCEtLSBUZXN0IFNlcnZsZXQgLS0+XG4gICAgPHNlcnZsZXQ+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+VGVzdFNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHNlcnZsZXQtY2xhc3M+Y29udHJvbGxlci5UZXN0U2VydmxldDwvc2VydmxldC1jbGFzcz5cbiAgICA8L3NlcnZsZXQ+XG4gICAgPHNlcnZsZXQtbWFwcGluZz5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5UZXN0U2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L1Rlc3RTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICA8L3NlcnZsZXQtbWFwcGluZz5cbi4uLlxuXG5cbiAgICA8IS0tIEZpbHRlcnMgLS0+XG4gICAgPGZpbHRlcj5cbiAgICAgICAgPGZpbHRlci1uYW1lPkF1dGhlbnRpY2F0aW9uRmlsdGVyPC9maWx0ZXItbmFtZT5cbiAgICAgICAgPGZpbHRlci1jbGFzcz5maWx0ZXIuQXV0aGVudGljYXRpb25GaWx0ZXI8L2ZpbHRlci1jbGFzcz5cbiAgICA8L2ZpbHRlcj5cbiAgICA8ZmlsdGVyLW1hcHBpbmc+XG4gICAgICAgIDxmaWx0ZXItbmFtZT5BdXRoZW50aWNhdGlvbkZpbHRlcjwvZmlsdGVyLW5hbWU+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vQ2FydFNlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L0NoZWNrb3V0U2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vUGF5bWVudFNlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L09yZGVyU2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vUHJvZmlsZUltYWdlU2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vSW1hZ2VTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9DYXRlZ29yeUltYWdlU2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgPC9maWx0ZXItbWFwcGluZz5cblxuICAgIDxmaWx0ZXI+XG4gICAgICAgIDxmaWx0ZXItbmFtZT5DaGVja291dEZpbHRlcjwvZmlsdGVyLW5hbWU+XG4gICAgICAgIDxmaWx0ZXItY2xhc3M+ZmlsdGVyLkNoZWNrb3V0RmlsdGVyPC9maWx0ZXItY2xhc3M+XG4gICAgPC9maWx0ZXI+XG4gICAgPGZpbHRlci1tYXBwaW5nPlxuICAgICAgICA8ZmlsdGVyLW5hbWU+Q2hlY2tvdXRGaWx0ZXI8L2ZpbHRlci1uYW1lPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L0NhcnRTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICA8L2ZpbHRlci1tYXBwaW5nPlxuLi4uXG5QYXRoOiBzcmMvbWFpbi93ZWJhcHAvV0VCLUlORi93ZWIueG1sXG4uLi5cblxuICAgIDwhLS0gU2VydmxldCBNYXBwaW5ncyAtLT5cbiAgICA8c2VydmxldD5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5DdXN0b21lclJldmlld1NlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHNlcnZsZXQtY2xhc3M+Y29udHJvbGxlci5DdXN0b21lclJldmlld1NlcnZsZXQ8L3NlcnZsZXQtY2xhc3M+XG4gICAgPC9zZXJ2bGV0PlxuICAgIDxzZXJ2bGV0LW1hcHBpbmc+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+Q3VzdG9tZXJSZXZpZXdTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vQ3VzdG9tZXJSZXZpZXdTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICA8L3NlcnZsZXQtbWFwcGluZz5cbiAgICA8c2VydmxldD5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5Qcm9maWxlU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8c2VydmxldC1jbGFzcz5jb250cm9sbGVyLlByb2ZpbGVTZXJ2bGV0PC9zZXJ2bGV0LWNsYXNzPlxuICAgICAgICA8bXVsdGlwYXJ0LWNvbmZpZz5cbiAgICAgICAgICAgIDxtYXgtZmlsZS1zaXplPjUyNDI4ODA8L21heC1maWxlLXNpemU+PCEtLSA1TUIgLS0+XG4gICAgICAgICAgICA8bWF4LXJlcXVlc3Qtc2l6ZT4xMDQ4NTc2MDwvbWF4LXJlcXVlc3Qtc2l6ZT48IS0tIDEwTUIgLS0+XG4gICAgICAgICAgICA8ZmlsZS1zaXplLXRocmVzaG9sZD4xMDQ4NTc2PC9maWxlLXNpemUtdGhyZXNob2xkPjwhLS0gMU1CIC0tPlxuICAgICAgICA8L211bHRpcGFydC1jb25maWc+XG4gICAgPC9zZXJ2bGV0PlxuICAgIDxzZXJ2bGV0LW1hcHBpbmc+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+UHJvZmlsZVNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9Qcm9maWxlU2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgPC9zZXJ2bGV0LW1hcHBpbmc+XG4uLi5cblxuICAgIDwhLS0gTG9naW4gU2VydmxldCAtLT5cbiAgICA8c2VydmxldD5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5Mb2dpblNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHNlcnZsZXQtY2xhc3M+Y29udHJvbGxlci5Mb2dpblNlcnZsZXQ8L3NlcnZsZXQtY2xhc3M+XG4gICAgPC9zZXJ2bGV0PlxuICAgIDxzZXJ2bGV0LW1hcHBpbmc+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+TG9naW5TZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vTG9naW5TZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICA8L3NlcnZsZXQtbWFwcGluZz5cblxuICAgIDwhLS0gQ2FydCBTZXJ2bGV0IC0tPlxuICAgIDxzZXJ2bGV0PlxuICAgICAgICA8c2VydmxldC1uYW1lPkNhcnRTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDxzZXJ2bGV0LWNsYXNzPmNvbnRyb2xsZXIuQ2FydFNlcnZsZXQ8L3NlcnZsZXQtY2xhc3M+XG4gICAgPC9zZXJ2bGV0PlxuICAgIDxzZXJ2bGV0LW1hcHBpbmc+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+Q2FydFNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9DYXJ0U2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgPC9zZXJ2bGV0LW1hcHBpbmc+XG4uLi5cblxuICAgIDwhLS0gSW1hZ2UgU2VydmxldCAtLT5cbiAgICA8c2VydmxldD5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5JbWFnZVNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHNlcnZsZXQtY2xhc3M+Y29udHJvbGxlci5JbWFnZVNlcnZsZXQ8L3NlcnZsZXQtY2xhc3M+XG4gICAgICAgIDxtdWx0aXBhcnQtY29uZmlnPlxuICAgICAgICAgICAgPG1heC1maWxlLXNpemU+NTI0Mjg4MDwvbWF4LWZpbGUtc2l6ZT48IS0tIDVNQiAtLT5cbiAgICAgICAgICAgIDxtYXgtcmVxdWVzdC1zaXplPjEwNDg1NzYwPC9tYXgtcmVxdWVzdC1zaXplPjwhLS0gMTBNQiAtLT5cbiAgICAgICAgICAgIDxmaWxlLXNpemUtdGhyZXNob2xkPjEwNDg1NzY8L2ZpbGUtc2l6ZS10aHJlc2hvbGQ+PCEtLSAxTUIgLS0+XG4gICAgICAgIDwvbXVsdGlwYXJ0LWNvbmZpZz5cbiAgICA8L3NlcnZsZXQ+XG4gICAgPHNlcnZsZXQtbWFwcGluZz5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5JbWFnZVNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9JbWFnZVNlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgIDwvc2VydmxldC1tYXBwaW5nPlxuXG4gICAgPCEtLSBIb21lIFNlcnZsZXQgLS0+XG4gICAgPHNlcnZsZXQ+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+SG9tZVNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHNlcnZsZXQtY2xhc3M+Y29udHJvbGxlci5Ib21lU2VydmxldDwvc2VydmxldC1jbGFzcz5cbiAgICA8L3NlcnZsZXQ+XG4gICAgPHNlcnZsZXQtbWFwcGluZz5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5Ib21lU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L0hvbWVTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICA8L3NlcnZsZXQtbWFwcGluZz5cblxuICAgIDwhLS0gQ29udGFjdCBTZXJ2bGV0IC0tPlxuICAgIDxzZXJ2bGV0PlxuICAgICAgICA8c2VydmxldC1uYW1lPkNvbnRhY3RTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDxzZXJ2bGV0LWNsYXNzPmNvbnRyb2xsZXIuQ29udGFjdFNlcnZsZXQ8L3NlcnZsZXQtY2xhc3M+XG4gICAgPC9zZXJ2bGV0PlxuICAgIDxzZXJ2bGV0LW1hcHBpbmc+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+Q29udGFjdFNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9Db250YWN0U2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgPC9zZXJ2bGV0LW1hcHBpbmc+XG5cbiAgICA8IS0tIENhdGVnb3J5IFNlcnZsZXQgLS0+XG4gICAgPHNlcnZsZXQ+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+Q2F0ZWdvcnlTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDxzZXJ2bGV0LWNsYXNzPmNvbnRyb2xsZXIuQ2F0ZWdvcnlTZXJ2bGV0PC9zZXJ2bGV0LWNsYXNzPlxuICAgIDwvc2VydmxldD5cbiAgICA8c2VydmxldC1tYXBwaW5nPlxuICAgICAgICA8c2VydmxldC1uYW1lPkNhdGVnb3J5U2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L2FkbWluL0NhdGVnb3J5U2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgPC9zZXJ2bGV0LW1hcHBpbmc+XG4uLi5cblxuICAgIDwhLS0gQWRtaW4gQ2F0ZWdvcnkgU2VydmxldCAtLT5cbiAgICA8c2VydmxldD5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5BZG1pbkNhdGVnb3J5U2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8c2VydmxldC1jbGFzcz5jb250cm9sbGVyLkFkbWluQ2F0ZWdvcnlTZXJ2bGV0PC9zZXJ2bGV0LWNsYXNzPlxuICAgIDwvc2VydmxldD5cbiAgICA8c2VydmxldC1tYXBwaW5nPlxuICAgICAgICA8c2VydmxldC1uYW1lPkFkbWluQ2F0ZWdvcnlTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vYWRtaW4vQWRtaW5DYXRlZ29yeVNlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgIDwvc2VydmxldC1tYXBwaW5nPlxuXG4gICAgPCEtLSBSZWdpc3RlciBTZXJ2bGV0IC0tPlxuICAgIDxzZXJ2bGV0PlxuICAgICAgICA8c2VydmxldC1uYW1lPlJlZ2lzdGVyU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8c2VydmxldC1jbGFzcz5jb250cm9sbGVyLlJlZ2lzdGVyU2VydmxldDwvc2VydmxldC1jbGFzcz5cbiAgICA8L3NlcnZsZXQ+XG4gICAgPHNlcnZsZXQtbWFwcGluZz5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5SZWdpc3RlclNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9SZWdpc3RlclNlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgIDwvc2VydmxldC1tYXBwaW5nPlxuLi4uXG5cbiAgICA8IS0tIEN1c3RvbWVyIE1lc3NhZ2UgU2VydmxldCAtLT5cbiAgICA8c2VydmxldD5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5DdXN0b21lck1lc3NhZ2VTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDxzZXJ2bGV0LWNsYXNzPmNvbnRyb2xsZXIuQ3VzdG9tZXJNZXNzYWdlU2VydmxldDwvc2VydmxldC1jbGFzcz5cbiAgICA8L3NlcnZsZXQ+XG4gICAgPHNlcnZsZXQtbWFwcGluZz5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5DdXN0b21lck1lc3NhZ2VTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vQ3VzdG9tZXJNZXNzYWdlU2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgPC9zZXJ2bGV0LW1hcHBpbmc+XG4gICAgPHNlcnZsZXQtbWFwcGluZz5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5DdXN0b21lck1lc3NhZ2VTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vY3VzdG9tZXItbWVzc2FnZXM8L3VybC1wYXR0ZXJuPlxuICAgIDwvc2VydmxldC1tYXBwaW5nPlxuXG4gICAgPCEtLSBNZXNzYWdlIEZyb250IENvbnRyb2xsZXIgKE1WQyBQYXR0ZXJuKSAtLT5cbiAgICA8c2VydmxldD5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5NZXNzYWdlRnJvbnRDb250cm9sbGVyPC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDxzZXJ2bGV0LWNsYXNzPmNvbnRyb2xsZXIuTWVzc2FnZUZyb250Q29udHJvbGxlcjwvc2VydmxldC1jbGFzcz5cbiAgICA8L3NlcnZsZXQ+XG4gICAgPHNlcnZsZXQtbWFwcGluZz5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5NZXNzYWdlRnJvbnRDb250cm9sbGVyPC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vbWVzc2FnZXMvKjwvdXJsLXBhdHRlcm4+XG4gICAgPC9zZXJ2bGV0LW1hcHBpbmc+XG5cbiAgICA8IS0tIE1lc3NhZ2UgQ29udHJvbGxlciAtLT5cbiAgICA8c2VydmxldD5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5NZXNzYWdlQ29udHJvbGxlcjwvc2VydmxldC1uYW1lPlxuICAgICAgICA8c2VydmxldC1jbGFzcz5jb250cm9sbGVyLk1lc3NhZ2VDb250cm9sbGVyPC9zZXJ2bGV0LWNsYXNzPlxuICAgIDwvc2VydmxldD5cbiAgICA8c2VydmxldC1tYXBwaW5nPlxuICAgICAgICA8c2VydmxldC1uYW1lPk1lc3NhZ2VDb250cm9sbGVyPC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vYWRtaW4vbWVzc2FnZXMvKjwvdXJsLXBhdHRlcm4+XG4gICAgPC9zZXJ2bGV0LW1hcHBpbmc+XG5cbiAgICA8IS0tIE1lc3NhZ2UgU2VydmxldCAtLT5cbiAgICA8c2VydmxldD5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5NZXNzYWdlU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8c2VydmxldC1jbGFzcz5jb250cm9sbGVyLk1lc3NhZ2VTZXJ2bGV0PC9zZXJ2bGV0LWNsYXNzPlxuICAgIDwvc2VydmxldD5cbiAgICA8c2VydmxldC1tYXBwaW5nPlxuICAgICAgICA8c2VydmxldC1uYW1lPk1lc3NhZ2VTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vTWVzc2FnZVNlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgIDwvc2VydmxldC1tYXBwaW5nPlxuLi4uXG5cbiAgICA8IS0tIENhdGVnb3J5IEltYWdlIFNlcnZsZXQgLS0+XG4gICAgPHNlcnZsZXQ+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+Q2F0ZWdvcnlJbWFnZVNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHNlcnZsZXQtY2xhc3M+Y29udHJvbGxlci5DYXRlZ29yeUltYWdlU2VydmxldDwvc2VydmxldC1jbGFzcz5cbiAgICAgICAgPG11bHRpcGFydC1jb25maWc+XG4gICAgICAgICAgICA8bWF4LWZpbGUtc2l6ZT4xMDQ4NTc2MDwvbWF4LWZpbGUtc2l6ZT48IS0tIDEwTUIgLS0+XG4gICAgICAgICAgICA8bWF4LXJlcXVlc3Qtc2l6ZT41MjQyODgwMDwvbWF4LXJlcXVlc3Qtc2l6ZT48IS0tIDUwTUIgLS0+XG4gICAgICAgICAgICA8ZmlsZS1zaXplLXRocmVzaG9sZD4xMDQ4NTc2PC9maWxlLXNpemUtdGhyZXNob2xkPjwhLS0gMU1CIC0tPlxuICAgICAgICA8L211bHRpcGFydC1jb25maWc+XG4gICAgPC9zZXJ2bGV0PlxuICAgIDxzZXJ2bGV0LW1hcHBpbmc+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+Q2F0ZWdvcnlJbWFnZVNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9DYXRlZ29yeUltYWdlU2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgPC9zZXJ2bGV0LW1hcHBpbmc+XG5cbiAgICA8IS0tIFRlc3QgQ2F0ZWdvcmllcyBTZXJ2bGV0IC0tPlxuICAgIDxzZXJ2bGV0PlxuICAgICAgICA8c2VydmxldC1uYW1lPlRlc3RDYXRlZ29yaWVzU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8c2VydmxldC1jbGFzcz5jb250cm9sbGVyLlRlc3RDYXRlZ29yaWVzU2VydmxldDwvc2VydmxldC1jbGFzcz5cbiAgICA8L3NlcnZsZXQ+XG4gICAgPHNlcnZsZXQtbWFwcGluZz5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5UZXN0Q2F0ZWdvcmllc1NlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9UZXN0Q2F0ZWdvcmllc1NlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgIDwvc2VydmxldC1tYXBwaW5nPlxuXG4gICAgPCEtLSBUZXN0IFNlcnZsZXQgLS0+XG4gICAgPHNlcnZsZXQ+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+VGVzdFNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHNlcnZsZXQtY2xhc3M+Y29udHJvbGxlci5UZXN0U2VydmxldDwvc2VydmxldC1jbGFzcz5cbiAgICA8L3NlcnZsZXQ+XG4gICAgPHNlcnZsZXQtbWFwcGluZz5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5UZXN0U2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L1Rlc3RTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICA8L3NlcnZsZXQtbWFwcGluZz5cblxuXG4gICAgPCEtLSBDaGVja291dCBTZXJ2bGV0IC0tPlxuICAgIDxzZXJ2bGV0PlxuICAgICAgICA8c2VydmxldC1uYW1lPkNoZWNrb3V0U2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8c2VydmxldC1jbGFzcz5jb250cm9sbGVyLkNoZWNrb3V0U2VydmxldDwvc2VydmxldC1jbGFzcz5cbiAgICA8L3NlcnZsZXQ+XG4gICAgPHNlcnZsZXQtbWFwcGluZz5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5DaGVja291dFNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9DaGVja291dFNlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgIDwvc2VydmxldC1tYXBwaW5nPlxuXG5cbiAgICA8IS0tIEZpbHRlcnMgLS0+XG4gICAgPGZpbHRlcj5cbiAgICAgICAgPGZpbHRlci1uYW1lPkF1dGhlbnRpY2F0aW9uRmlsdGVyPC9maWx0ZXItbmFtZT5cbiAgICAgICAgPGZpbHRlci1jbGFzcz5maWx0ZXIuQXV0aGVudGljYXRpb25GaWx0ZXI8L2ZpbHRlci1jbGFzcz5cbiAgICA8L2ZpbHRlcj5cbiAgICA8ZmlsdGVyLW1hcHBpbmc+XG4gICAgICAgIDxmaWx0ZXItbmFtZT5BdXRoZW50aWNhdGlvbkZpbHRlcjwvZmlsdGVyLW5hbWU+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vQ2FydFNlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L0NoZWNrb3V0U2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vUGF5bWVudFNlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L09yZGVyU2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgPC9maWx0ZXItbWFwcGluZz5cbi4uLlxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiODRjMDgyOGQtOTJhNy00ZDMyLTg0OGQtYWM5YTIwNGQ0MmRjO3Rvb2x1X3ZydHhfMDFQTWtvcUt0RVR5bWFVdEgxUGE1Rm9oIjp7InJlcXVlc3RJZCI6Ijg0YzA4MjhkLTkyYTctNGQzMi04NDhkLWFjOWEyMDRkNDJkYyIsInRvb2xVc2VJZCI6InRvb2x1X3ZydHhfMDFQTWtvcUt0RVR5bWFVdEgxUGE1Rm9oIiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiVGhlIGZvbGxvd2luZyBjb2RlIHNlY3Rpb25zIHdlcmUgcmV0cmlldmVkOlxuUGF0aDogQ2xvdGhlZS9zcmMvbWFpbi9qYXZhL2ZpbHRlci9BdXRoZW50aWNhdGlvbkZpbHRlci5qYXZhXG5wYWNrYWdlIGZpbHRlcjtcblxuaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0LkZpbHRlcjtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuRmlsdGVyQ2hhaW47XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0LkZpbHRlckNvbmZpZztcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuU2VydmxldEV4Y2VwdGlvbjtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuU2VydmxldFJlcXVlc3Q7XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0LlNlcnZsZXRSZXNwb25zZTtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuYW5ub3RhdGlvbi5XZWJGaWx0ZXI7XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXRSZXF1ZXN0O1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5odHRwLkh0dHBTZXJ2bGV0UmVzcG9uc2U7XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0Lmh0dHAuSHR0cFNlc3Npb247XG5pbXBvcnQgbW9kZWwuVXNlcjtcblxuLyoqXG4gKiBBdXRoZW50aWNhdGlvbiBmaWx0ZXIgdG8gZW5zdXJlIHVzZXJzIGFyZSBsb2dnZWQgaW4gYmVmb3JlIGFjY2Vzc2luZyBwcm90ZWN0ZWQgcmVzb3VyY2VzXG4gKi9cbkBXZWJGaWx0ZXIoZmlsdGVyTmFtZSA9IFwiQXV0aGVudGljYXRpb25GaWx0ZXJcIiwgdXJsUGF0dGVybnMgPSB7XCIvQ2FydFNlcnZsZXRcIiwgXCIvQ2hlY2tvdXRTZXJ2bGV0XCIsIFwiL1BheW1lbnRTZXJ2bGV0XCIsIFwiL09yZGVyU2VydmxldFwifSlcbnB1YmxpYyBjbGFzcyBBdXRoZW50aWNhdGlvbkZpbHRlciBpbXBsZW1lbnRzIEZpbHRlciB7XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgdm9pZCBpbml0KEZpbHRlckNvbmZpZyBmaWx0ZXJDb25maWcpIHRocm93cyBTZXJ2bGV0RXhjZXB0aW9uIHtcbiAgICAgICAgLy8gSW5pdGlhbGl6YXRpb24gY29kZSwgaWYgbmVlZGVkXG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIHZvaWQgZG9GaWx0ZXIoU2VydmxldFJlcXVlc3QgcmVxdWVzdCwgU2VydmxldFJlc3BvbnNlIHJlc3BvbnNlLCBGaWx0ZXJDaGFpbiBjaGFpbilcbiAgICAgICAgICAgIHRocm93cyBJT0V4Y2VwdGlvbiwgU2VydmxldEV4Y2VwdGlvbiB7XG4gICAgICAgIFxuICAgICAgICBIdHRwU2VydmxldFJlcXVlc3QgaHR0cFJlcXVlc3QgPSAoSHR0cFNlcnZsZXRSZXF1ZXN0KSByZXF1ZXN0O1xuICAgICAgICBIdHRwU2VydmxldFJlc3BvbnNlIGh0dHBSZXNwb25zZSA9IChIdHRwU2VydmxldFJlc3BvbnNlKSByZXNwb25zZTtcbiAgICAgICAgSHR0cFNlc3Npb24gc2Vzc2lvbiA9IGh0dHBSZXF1ZXN0LmdldFNlc3Npb24oZmFsc2UpO1xuICAgICAgICBcbiAgICAgICAgLy8gR2V0IHRoZSByZXF1ZXN0ZWQgVVJMXG4gICAgICAgIFN0cmluZyByZXF1ZXN0VVJJID0gaHR0cFJlcXVlc3QuZ2V0UmVxdWVzdFVSSSgpO1xuICAgICAgICBTdHJpbmcgcXVlcnlTdHJpbmcgPSBodHRwUmVxdWVzdC5nZXRRdWVyeVN0cmluZygpO1xuICAgICAgICBTdHJpbmcgZnVsbFVSTCA9IHJlcXVlc3RVUkkgKyAocXVlcnlTdHJpbmcgIT0gbnVsbCA/IFwiP1wiICsgcXVlcnlTdHJpbmcgOiBcIlwiKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENoZWNrIGlmIHVzZXIgaXMgbG9nZ2VkIGluXG4gICAgICAgIGJvb2xlYW4gaXNMb2dnZWRJbiA9IChzZXNzaW9uICE9IG51bGwgJiYgc2Vzc2lvbi5nZXRBdHRyaWJ1dGUoXCJ1c2VyXCIpICE9IG51bGwpO1xuICAgICAgICBcbiAgICAgICAgLy8gSWYgdGhlIHVzZXIgaXMgbm90IGxvZ2dlZCBpbiBhbmQgdHJ5aW5nIHRvIGFjY2VzcyBhIHByb3RlY3RlZCByZXNvdXJjZVxuICAgICAgICBpZiAoIWlzTG9nZ2VkSW4pIHtcbiAgICAgICAgICAgIC8vIFNhdmUgdGhlIHJlcXVlc3RlZCBVUkwgZm9yIHJlZGlyZWN0IGFmdGVyIGxvZ2luXG4gICAgICAgICAgICBodHRwUmVxdWVzdC5nZXRTZXNzaW9uKCkuc2V0QXR0cmlidXRlKFwicmVkaXJlY3RVUkxcIiwgZnVsbFVSTCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFJlZGlyZWN0IHRvIGxvZ2luIHBhZ2VcbiAgICAgICAgICAgIGh0dHBSZXNwb25zZS5zZW5kUmVkaXJlY3QoaHR0cFJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL2xvZ2luLmpzcFwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gRm9yIGNoZWNrb3V0LXNwZWNpZmljIGFjdGlvbnMsIGVuc3VyZSB0aGUgdXNlciBoYXMgaXRlbXMgaW4gY2FydFxuICAgICAgICBpZiAocmVxdWVzdFVSSS5jb250YWlucyhcIkNhcnRTZXJ2bGV0XCIpICYmIFwiY2hlY2tvdXRcIi5lcXVhbHMoaHR0cFJlcXVlc3QuZ2V0UGFyYW1ldGVyKFwiYWN0aW9uXCIpKSkge1xuICAgICAgICAgICAgVXNlciB1c2VyID0gKFVzZXIpIHNlc3Npb24uZ2V0QXR0cmlidXRlKFwidXNlclwiKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQWRtaW4gdXNlcnMgc2hvdWxkIG5vdCB1c2UgY2FydCBmdW5jdGlvbmFsaXR5XG4gICAgICAgICAgICBpZiAodXNlci5pc0FkbWluKCkpIHtcbiAgICAgICAgICAgICAgICBodHRwUmVzcG9uc2Uuc2VuZFJlZGlyZWN0KGh0dHBSZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9hZG1pbi9kYXNoYm9hcmQuanNwP2Vycm9yPUFkbWluK3VzZXJzK2Nhbm5vdCt1c2UrY2FydCtmdW5jdGlvbmFsaXR5XCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gQ29udGludWUgdGhlIGZpbHRlciBjaGFpblxuICAgICAgICBjaGFpbi5kb0ZpbHRlcihyZXF1ZXN0LCByZXNwb25zZSk7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIHZvaWQgZGVzdHJveSgpIHtcbiAgICAgICAgLy8gQ2xlYW51cCBjb2RlLCBpZiBuZWVkZWRcbiAgICB9XG59XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvZmlsdGVyL0F1dGhlbnRpY2F0aW9uRmlsdGVyLmphdmFcbnBhY2thZ2UgZmlsdGVyO1xuXG5pbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuRmlsdGVyO1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5GaWx0ZXJDaGFpbjtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuRmlsdGVyQ29uZmlnO1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5TZXJ2bGV0RXhjZXB0aW9uO1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5TZXJ2bGV0UmVxdWVzdDtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuU2VydmxldFJlc3BvbnNlO1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5hbm5vdGF0aW9uLldlYkZpbHRlcjtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuaHR0cC5IdHRwU2VydmxldFJlcXVlc3Q7XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXRSZXNwb25zZTtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuaHR0cC5IdHRwU2Vzc2lvbjtcbmltcG9ydCBtb2RlbC5Vc2VyO1xuXG4vKipcbiAqIEF1dGhlbnRpY2F0aW9uIGZpbHRlciB0byBlbnN1cmUgdXNlcnMgYXJlIGxvZ2dlZCBpbiBiZWZvcmUgYWNjZXNzaW5nIHByb3RlY3RlZCByZXNvdXJjZXNcbiAqL1xuQFdlYkZpbHRlcihmaWx0ZXJOYW1lID0gXCJBdXRoZW50aWNhdGlvbkZpbHRlclwiLCB1cmxQYXR0ZXJucyA9IHtcIi9DYXJ0U2VydmxldFwiLCBcIi9DaGVja291dFNlcnZsZXRcIiwgXCIvUGF5bWVudFNlcnZsZXRcIiwgXCIvT3JkZXJTZXJ2bGV0XCJ9KVxucHVibGljIGNsYXNzIEF1dGhlbnRpY2F0aW9uRmlsdGVyIGltcGxlbWVudHMgRmlsdGVyIHtcblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyB2b2lkIGluaXQoRmlsdGVyQ29uZmlnIGZpbHRlckNvbmZpZykgdGhyb3dzIFNlcnZsZXRFeGNlcHRpb24ge1xuICAgICAgICAvLyBJbml0aWFsaXphdGlvbiBjb2RlLCBpZiBuZWVkZWRcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgdm9pZCBkb0ZpbHRlcihTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBTZXJ2bGV0UmVzcG9uc2UgcmVzcG9uc2UsIEZpbHRlckNoYWluIGNoYWluKVxuICAgICAgICAgICAgdGhyb3dzIElPRXhjZXB0aW9uLCBTZXJ2bGV0RXhjZXB0aW9uIHtcbiAgICAgICAgXG4gICAgICAgIEh0dHBTZXJ2bGV0UmVxdWVzdCBodHRwUmVxdWVzdCA9IChIdHRwU2VydmxldFJlcXVlc3QpIHJlcXVlc3Q7XG4gICAgICAgIEh0dHBTZXJ2bGV0UmVzcG9uc2UgaHR0cFJlc3BvbnNlID0gKEh0dHBTZXJ2bGV0UmVzcG9uc2UpIHJlc3BvbnNlO1xuICAgICAgICBIdHRwU2Vzc2lvbiBzZXNzaW9uID0gaHR0cFJlcXVlc3QuZ2V0U2Vzc2lvbihmYWxzZSk7XG4gICAgICAgIFxuICAgICAgICAvLyBHZXQgdGhlIHJlcXVlc3RlZCBVUkxcbiAgICAgICAgU3RyaW5nIHJlcXVlc3RVUkkgPSBodHRwUmVxdWVzdC5nZXRSZXF1ZXN0VVJJKCk7XG4gICAgICAgIFN0cmluZyBxdWVyeVN0cmluZyA9IGh0dHBSZXF1ZXN0LmdldFF1ZXJ5U3RyaW5nKCk7XG4gICAgICAgIFN0cmluZyBmdWxsVVJMID0gcmVxdWVzdFVSSSArIChxdWVyeVN0cmluZyAhPSBudWxsID8gXCI/XCIgKyBxdWVyeVN0cmluZyA6IFwiXCIpO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2hlY2sgaWYgdXNlciBpcyBsb2dnZWQgaW5cbiAgICAgICAgYm9vbGVhbiBpc0xvZ2dlZEluID0gKHNlc3Npb24gIT0gbnVsbCAmJiBzZXNzaW9uLmdldEF0dHJpYnV0ZShcInVzZXJcIikgIT0gbnVsbCk7XG4gICAgICAgIFxuICAgICAgICAvLyBJZiB0aGUgdXNlciBpcyBub3QgbG9nZ2VkIGluIGFuZCB0cnlpbmcgdG8gYWNjZXNzIGEgcHJvdGVjdGVkIHJlc291cmNlXG4gICAgICAgIGlmICghaXNMb2dnZWRJbikge1xuICAgICAgICAgICAgLy8gU2F2ZSB0aGUgcmVxdWVzdGVkIFVSTCBmb3IgcmVkaXJlY3QgYWZ0ZXIgbG9naW5cbiAgICAgICAgICAgIGh0dHBSZXF1ZXN0LmdldFNlc3Npb24oKS5zZXRBdHRyaWJ1dGUoXCJyZWRpcmVjdFVSTFwiLCBmdWxsVVJMKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gUmVkaXJlY3QgdG8gbG9naW4gcGFnZVxuICAgICAgICAgICAgaHR0cFJlc3BvbnNlLnNlbmRSZWRpcmVjdChodHRwUmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvbG9naW4uanNwXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBGb3IgY2hlY2tvdXQtc3BlY2lmaWMgYWN0aW9ucywgZW5zdXJlIHRoZSB1c2VyIGhhcyBpdGVtcyBpbiBjYXJ0XG4gICAgICAgIGlmIChyZXF1ZXN0VVJJLmNvbnRhaW5zKFwiQ2FydFNlcnZsZXRcIikgJiYgXCJjaGVja291dFwiLmVxdWFscyhodHRwUmVxdWVzdC5nZXRQYXJhbWV0ZXIoXCJhY3Rpb25cIikpKSB7XG4gICAgICAgICAgICBVc2VyIHVzZXIgPSAoVXNlcikgc2Vzc2lvbi5nZXRBdHRyaWJ1dGUoXCJ1c2VyXCIpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBBZG1pbiB1c2VycyBzaG91bGQgbm90IHVzZSBjYXJ0IGZ1bmN0aW9uYWxpdHlcbiAgICAgICAgICAgIGlmICh1c2VyLmlzQWRtaW4oKSkge1xuICAgICAgICAgICAgICAgIGh0dHBSZXNwb25zZS5zZW5kUmVkaXJlY3QoaHR0cFJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL2FkbWluL2Rhc2hib2FyZC5qc3A/ZXJyb3I9QWRtaW4rdXNlcnMrY2Fubm90K3VzZStjYXJ0K2Z1bmN0aW9uYWxpdHlcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBDb250aW51ZSB0aGUgZmlsdGVyIGNoYWluXG4gICAgICAgIGNoYWluLmRvRmlsdGVyKHJlcXVlc3QsIHJlc3BvbnNlKTtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgdm9pZCBkZXN0cm95KCkge1xuICAgICAgICAvLyBDbGVhbnVwIGNvZGUsIGlmIG5lZWRlZFxuICAgIH1cbn1cbi4uLlxuUGF0aDogQ2xvdGhlZS9zcmMvbWFpbi9qYXZhL2ZpbHRlci9BZG1pblJlZGlyZWN0RmlsdGVyLmphdmFcbi4uLlxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIHZvaWQgZG9GaWx0ZXIoU2VydmxldFJlcXVlc3QgcmVxdWVzdCwgU2VydmxldFJlc3BvbnNlIHJlc3BvbnNlLCBGaWx0ZXJDaGFpbiBjaGFpbilcbiAgICAgICAgICAgIHRocm93cyBJT0V4Y2VwdGlvbiwgU2VydmxldEV4Y2VwdGlvbiB7XG4gICAgICAgIFxuICAgICAgICBIdHRwU2VydmxldFJlcXVlc3QgaHR0cFJlcXVlc3QgPSAoSHR0cFNlcnZsZXRSZXF1ZXN0KSByZXF1ZXN0O1xuICAgICAgICBIdHRwU2VydmxldFJlc3BvbnNlIGh0dHBSZXNwb25zZSA9IChIdHRwU2VydmxldFJlc3BvbnNlKSByZXNwb25zZTtcbiAgICAgICAgSHR0cFNlc3Npb24gc2Vzc2lvbiA9IGh0dHBSZXF1ZXN0LmdldFNlc3Npb24oZmFsc2UpO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2hlY2sgaWYgdXNlciBpcyBsb2dnZWQgaW4gYW5kIGlzIGFuIGFkbWluXG4gICAgICAgIGlmIChzZXNzaW9uICE9IG51bGwgJiYgc2Vzc2lvbi5nZXRBdHRyaWJ1dGUoXCJ1c2VyXCIpICE9IG51bGwpIHtcbiAgICAgICAgICAgIFVzZXIgdXNlciA9IChVc2VyKSBzZXNzaW9uLmdldEF0dHJpYnV0ZShcInVzZXJcIik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIElmIHRoZSB1c2VyIGlzIGFuIGFkbWluLCByZWRpcmVjdCB0byBhZG1pbiBkYXNoYm9hcmRcbiAgICAgICAgICAgIGlmICh1c2VyLmlzQWRtaW4oKSkge1xuICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkFkbWluUmVkaXJlY3RGaWx0ZXI6IFJlZGlyZWN0aW5nIGFkbWluIHVzZXIgdG8gYWRtaW4gZGFzaGJvYXJkXCIpO1xuICAgICAgICAgICAgICAgIGh0dHBSZXNwb25zZS5zZW5kUmVkaXJlY3QoaHR0cFJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL2FkbWluL2Rhc2hib2FyZC5qc3BcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvZmlsdGVyL0xvZ2dpbmdGaWx0ZXIuamF2YVxuLi4uXG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgdm9pZCBkb0ZpbHRlcihTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBTZXJ2bGV0UmVzcG9uc2UgcmVzcG9uc2UsIEZpbHRlckNoYWluIGNoYWluKVxuICAgICAgICAgICAgdGhyb3dzIElPRXhjZXB0aW9uLCBTZXJ2bGV0RXhjZXB0aW9uIHtcbiAgICAgICAgXG4gICAgICAgIEh0dHBTZXJ2bGV0UmVxdWVzdCBodHRwUmVxdWVzdCA9IChIdHRwU2VydmxldFJlcXVlc3QpIHJlcXVlc3Q7XG4gICAgICAgIFxuICAgICAgICAvLyBMb2cgdGhlIHJlcXVlc3RcbiAgICAgICAgU3RyaW5nIHJlcXVlc3RVUkkgPSBodHRwUmVxdWVzdC5nZXRSZXF1ZXN0VVJJKCk7XG4gICAgICAgIFN0cmluZyBxdWVyeVN0cmluZyA9IGh0dHBSZXF1ZXN0LmdldFF1ZXJ5U3RyaW5nKCk7XG4gICAgICAgIFN0cmluZyBtZXRob2QgPSBodHRwUmVxdWVzdC5nZXRNZXRob2QoKTtcbiAgICAgICAgXG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlJlcXVlc3Q6IFwiICsgbWV0aG9kICsgXCIgXCIgKyByZXF1ZXN0VVJJICsgXG4gICAgICAgICAgICAgICAgKHF1ZXJ5U3RyaW5nICE9IG51bGwgPyBcIj9cIiArIHF1ZXJ5U3RyaW5nIDogXCJcIikpO1xuICAgICAgICBcbiAgICAgICAgLy8gQ29udGludWUgdGhlIGZpbHRlciBjaGFpblxuICAgICAgICBjaGFpbi5kb0ZpbHRlcihyZXF1ZXN0LCByZXNwb25zZSk7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIHZvaWQgZGVzdHJveSgpIHtcbiAgICAgICAgLy8gQ2xlYW51cCBjb2RlLCBpZiBuZWVkZWRcbiAgICB9XG59XG4uLi5cblBhdGg6IENsb3RoZWUvc3JjL21haW4vamF2YS9maWx0ZXIvTG9nZ2luZ0ZpbHRlci5qYXZhXG4uLi5cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyB2b2lkIGRvRmlsdGVyKFNlcnZsZXRSZXF1ZXN0IHJlcXVlc3QsIFNlcnZsZXRSZXNwb25zZSByZXNwb25zZSwgRmlsdGVyQ2hhaW4gY2hhaW4pXG4gICAgICAgICAgICB0aHJvd3MgSU9FeGNlcHRpb24sIFNlcnZsZXRFeGNlcHRpb24ge1xuICAgICAgICBcbiAgICAgICAgSHR0cFNlcnZsZXRSZXF1ZXN0IGh0dHBSZXF1ZXN0ID0gKEh0dHBTZXJ2bGV0UmVxdWVzdCkgcmVxdWVzdDtcbiAgICAgICAgXG4gICAgICAgIC8vIExvZyB0aGUgcmVxdWVzdFxuICAgICAgICBTdHJpbmcgcmVxdWVzdFVSSSA9IGh0dHBSZXF1ZXN0LmdldFJlcXVlc3RVUkkoKTtcbiAgICAgICAgU3RyaW5nIHF1ZXJ5U3RyaW5nID0gaHR0cFJlcXVlc3QuZ2V0UXVlcnlTdHJpbmcoKTtcbiAgICAgICAgU3RyaW5nIG1ldGhvZCA9IGh0dHBSZXF1ZXN0LmdldE1ldGhvZCgpO1xuICAgICAgICBcbiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiUmVxdWVzdDogXCIgKyBtZXRob2QgKyBcIiBcIiArIHJlcXVlc3RVUkkgKyBcbiAgICAgICAgICAgICAgICAocXVlcnlTdHJpbmcgIT0gbnVsbCA/IFwiP1wiICsgcXVlcnlTdHJpbmcgOiBcIlwiKSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDb250aW51ZSB0aGUgZmlsdGVyIGNoYWluXG4gICAgICAgIGNoYWluLmRvRmlsdGVyKHJlcXVlc3QsIHJlc3BvbnNlKTtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgdm9pZCBkZXN0cm95KCkge1xuICAgICAgICAvLyBDbGVhbnVwIGNvZGUsIGlmIG5lZWRlZFxuICAgIH1cbn1cbi4uLlxuUGF0aDogQ2xvdGhlZS9zcmMvbWFpbi93ZWJhcHAvV0VCLUlORi93ZWIueG1sXG48P3htbCB2ZXJzaW9uPVwiMS4wXCIgZW5jb2Rpbmc9XCJVVEYtOFwiPz5cbjx3ZWItYXBwIHhtbG5zPVwiaHR0cHM6Ly9qYWthcnRhLmVlL3htbC9ucy9qYWthcnRhZWVcIlxuICAgICAgICAgeG1sbnM6eHNpPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEtaW5zdGFuY2VcIlxuICAgICAgICAgeHNpOnNjaGVtYUxvY2F0aW9uPVwiaHR0cHM6Ly9qYWthcnRhLmVlL3htbC9ucy9qYWthcnRhZWUgaHR0cHM6Ly9qYWthcnRhLmVlL3htbC9ucy9qYWthcnRhZWUvd2ViLWFwcF82XzAueHNkXCJcbiAgICAgICAgIHZlcnNpb249XCI2LjBcIj5cblxuICAgIDxkaXNwbGF5LW5hbWU+Q2xvdGhlZSBFLUNvbW1lcmNlPC9kaXNwbGF5LW5hbWU+XG5cbiAgICA8IS0tIFdlbGNvbWUgRmlsZSBMaXN0IC0tPlxuICAgIDx3ZWxjb21lLWZpbGUtbGlzdD5cbiAgICAgICAgPHdlbGNvbWUtZmlsZT5pbmRleC5qc3A8L3dlbGNvbWUtZmlsZT5cbiAgICA8L3dlbGNvbWUtZmlsZS1saXN0PlxuXG4gICAgPCEtLSBTZXJ2bGV0IE1hcHBpbmdzIC0tPlxuICAgIDxzZXJ2bGV0PlxuICAgICAgICA8c2VydmxldC1uYW1lPkN1c3RvbWVyUmV2aWV3U2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8c2VydmxldC1jbGFzcz5jb250cm9sbGVyLkN1c3RvbWVyUmV2aWV3U2VydmxldDwvc2VydmxldC1jbGFzcz5cbiAgICA8L3NlcnZsZXQ+XG4gICAgPHNlcnZsZXQtbWFwcGluZz5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5DdXN0b21lclJldmlld1NlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9DdXN0b21lclJldmlld1NlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgIDwvc2VydmxldC1tYXBwaW5nPlxuICAgIDxzZXJ2bGV0PlxuICAgICAgICA8c2VydmxldC1uYW1lPlByb2ZpbGVTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDxzZXJ2bGV0LWNsYXNzPmNvbnRyb2xsZXIuUHJvZmlsZVNlcnZsZXQ8L3NlcnZsZXQtY2xhc3M+XG4gICAgICAgIDxtdWx0aXBhcnQtY29uZmlnPlxuICAgICAgICAgICAgPG1heC1maWxlLXNpemU+NTI0Mjg4MDwvbWF4LWZpbGUtc2l6ZT48IS0tIDVNQiAtLT5cbiAgICAgICAgICAgIDxtYXgtcmVxdWVzdC1zaXplPjEwNDg1NzYwPC9tYXgtcmVxdWVzdC1zaXplPjwhLS0gMTBNQiAtLT5cbiAgICAgICAgICAgIDxmaWxlLXNpemUtdGhyZXNob2xkPjEwNDg1NzY8L2ZpbGUtc2l6ZS10aHJlc2hvbGQ+PCEtLSAxTUIgLS0+XG4gICAgICAgIDwvbXVsdGlwYXJ0LWNvbmZpZz5cbiAgICA8L3NlcnZsZXQ+XG4gICAgPHNlcnZsZXQtbWFwcGluZz5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5Qcm9maWxlU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L1Byb2ZpbGVTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICA8L3NlcnZsZXQtbWFwcGluZz5cbiAgICA8IS0tIFJlbW92ZWQgZHVwbGljYXRlIG1hcHBpbmcgZm9yIFVwZGF0ZVByb2ZpbGVTZXJ2bGV0IC0tPlxuXG4gICAgPCEtLSBXaXNobGlzdCBTZXJ2bGV0IHJlbW92ZWQgLS0+XG5cbiAgICA8IS0tIEFkbWluIFVzZXIgU2VydmxldCAtLT5cbiAgICA8c2VydmxldD5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5BZG1pblVzZXJTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDxzZXJ2bGV0LWNsYXNzPmNvbnRyb2xsZXIuQWRtaW5Vc2VyU2VydmxldDwvc2VydmxldC1jbGFzcz5cbiAgICAgICAgPG11bHRpcGFydC1jb25maWc+XG4gICAgICAgICAgICA8bWF4LWZpbGUtc2l6ZT41MjQyODgwPC9tYXgtZmlsZS1zaXplPjwhLS0gNU1CIC0tPlxuICAgICAgICAgICAgPG1heC1yZXF1ZXN0LXNpemU+MTA0ODU3NjA8L21heC1yZXF1ZXN0LXNpemU+PCEtLSAxME1CIC0tPlxuICAgICAgICAgICAgPGZpbGUtc2l6ZS10aHJlc2hvbGQ+MTA0ODU3NjwvZmlsZS1zaXplLXRocmVzaG9sZD48IS0tIDFNQiAtLT5cbiAgICAgICAgPC9tdWx0aXBhcnQtY29uZmlnPlxuICAgIDwvc2VydmxldD5cbiAgICA8c2VydmxldC1tYXBwaW5nPlxuICAgICAgICA8c2VydmxldC1uYW1lPkFkbWluVXNlclNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9BZG1pblVzZXJTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICA8L3NlcnZsZXQtbWFwcGluZz5cbiAgICA8c2VydmxldC1tYXBwaW5nPlxuICAgICAgICA8c2VydmxldC1uYW1lPkFkbWluVXNlclNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9hZG1pbi9BZG1pblVzZXJTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICA8L3NlcnZsZXQtbWFwcGluZz5cblxuICAgIDwhLS0gRGFzaGJvYXJkIFNldHRpbmdzIFNlcnZsZXQgcmVtb3ZlZCAtLT5cblxuICAgIDwhLS0gVXNlciBTZXJ2bGV0IC0tPlxuICAgIDxzZXJ2bGV0PlxuICAgICAgICA8c2VydmxldC1uYW1lPlVzZXJTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDxzZXJ2bGV0LWNsYXNzPmNvbnRyb2xsZXIuVXNlclNlcnZsZXQ8L3NlcnZsZXQtY2xhc3M+XG4gICAgICAgIDxtdWx0aXBhcnQtY29uZmlnPlxuICAgICAgICAgICAgPG1heC1maWxlLXNpemU+NTI0Mjg4MDwvbWF4LWZpbGUtc2l6ZT48IS0tIDVNQiAtLT5cbiAgICAgICAgICAgIDxtYXgtcmVxdWVzdC1zaXplPjEwNDg1NzYwPC9tYXgtcmVxdWVzdC1zaXplPjwhLS0gMTBNQiAtLT5cbiAgICAgICAgICAgIDxmaWxlLXNpemUtdGhyZXNob2xkPjEwNDg1NzY8L2ZpbGUtc2l6ZS10aHJlc2hvbGQ+PCEtLSAxTUIgLS0+XG4gICAgICAgIDwvbXVsdGlwYXJ0LWNvbmZpZz5cbiAgICA8L3NlcnZsZXQ+XG4gICAgPHNlcnZsZXQtbWFwcGluZz5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5Vc2VyU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L1VzZXJTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICA8L3NlcnZsZXQtbWFwcGluZz5cbiAgICA8c2VydmxldC1tYXBwaW5nPlxuICAgICAgICA8c2VydmxldC1uYW1lPlVzZXJTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vdXNlci8qPC91cmwtcGF0dGVybj5cbiAgICA8L3NlcnZsZXQtbWFwcGluZz5cblxuICAgIDwhLS0gTG9naW4gU2VydmxldCAtLT5cbiAgICA8c2VydmxldD5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5Mb2dpblNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHNlcnZsZXQtY2xhc3M+Y29udHJvbGxlci5Mb2dpblNlcnZsZXQ8L3NlcnZsZXQtY2xhc3M+XG4gICAgPC9zZXJ2bGV0PlxuICAgIDxzZXJ2bGV0LW1hcHBpbmc+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+TG9naW5TZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vTG9naW5TZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICA8L3NlcnZsZXQtbWFwcGluZz5cblxuICAgIDwhLS0gQ2FydCBTZXJ2bGV0IC0tPlxuICAgIDxzZXJ2bGV0PlxuICAgICAgICA8c2VydmxldC1uYW1lPkNhcnRTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDxzZXJ2bGV0LWNsYXNzPmNvbnRyb2xsZXIuQ2FydFNlcnZsZXQ8L3NlcnZsZXQtY2xhc3M+XG4gICAgPC9zZXJ2bGV0PlxuICAgIDxzZXJ2bGV0LW1hcHBpbmc+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+Q2FydFNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9DYXJ0U2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgPC9zZXJ2bGV0LW1hcHBpbmc+XG5cbiAgICA8IS0tIEFjdGlvbiBTZXJ2bGV0IC0tPlxuICAgIDxzZXJ2bGV0PlxuICAgICAgICA8c2VydmxldC1uYW1lPkFjdGlvblNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHNlcnZsZXQtY2xhc3M+Y29udHJvbGxlci5BY3Rpb25TZXJ2bGV0PC9zZXJ2bGV0LWNsYXNzPlxuICAgIDwvc2VydmxldD5cbiAgICA8c2VydmxldC1tYXBwaW5nPlxuICAgICAgICA8c2VydmxldC1uYW1lPkFjdGlvblNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9BY3Rpb25TZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICA8L3NlcnZsZXQtbWFwcGluZz5cblxuICAgIDwhLS0gQWJvdXQgU2VydmxldCAtLT5cbiAgICA8c2VydmxldD5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5BYm91dFNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHNlcnZsZXQtY2xhc3M+Y29udHJvbGxlci5BYm91dFNlcnZsZXQ8L3NlcnZsZXQtY2xhc3M+XG4gICAgPC9zZXJ2bGV0PlxuICAgIDxzZXJ2bGV0LW1hcHBpbmc+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+QWJvdXRTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vQWJvdXRTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICA8L3NlcnZsZXQtbWFwcGluZz5cbi4uLlxuXG4gICAgPCEtLSBJbWFnZSBTZXJ2bGV0IC0tPlxuICAgIDxzZXJ2bGV0PlxuICAgICAgICA8c2VydmxldC1uYW1lPkltYWdlU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8c2VydmxldC1jbGFzcz5jb250cm9sbGVyLkltYWdlU2VydmxldDwvc2VydmxldC1jbGFzcz5cbiAgICAgICAgPG11bHRpcGFydC1jb25maWc+XG4gICAgICAgICAgICA8bWF4LWZpbGUtc2l6ZT41MjQyODgwPC9tYXgtZmlsZS1zaXplPjwhLS0gNU1CIC0tPlxuICAgICAgICAgICAgPG1heC1yZXF1ZXN0LXNpemU+MTA0ODU3NjA8L21heC1yZXF1ZXN0LXNpemU+PCEtLSAxME1CIC0tPlxuICAgICAgICAgICAgPGZpbGUtc2l6ZS10aHJlc2hvbGQ+MTA0ODU3NjwvZmlsZS1zaXplLXRocmVzaG9sZD48IS0tIDFNQiAtLT5cbiAgICAgICAgPC9tdWx0aXBhcnQtY29uZmlnPlxuICAgIDwvc2VydmxldD5cbiAgICA8c2VydmxldC1tYXBwaW5nPlxuICAgICAgICA8c2VydmxldC1uYW1lPkltYWdlU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L0ltYWdlU2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgPC9zZXJ2bGV0LW1hcHBpbmc+XG5cbiAgICA8IS0tIEhvbWUgU2VydmxldCAtLT5cbiAgICA8c2VydmxldD5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5Ib21lU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8c2VydmxldC1jbGFzcz5jb250cm9sbGVyLkhvbWVTZXJ2bGV0PC9zZXJ2bGV0LWNsYXNzPlxuICAgIDwvc2VydmxldD5cbiAgICA8c2VydmxldC1tYXBwaW5nPlxuICAgICAgICA8c2VydmxldC1uYW1lPkhvbWVTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vSG9tZVNlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgIDwvc2VydmxldC1tYXBwaW5nPlxuLi4uXG5cblxuICAgIDwhLS0gRmlsdGVycyAtLT5cbiAgICA8ZmlsdGVyPlxuICAgICAgICA8ZmlsdGVyLW5hbWU+QXV0aGVudGljYXRpb25GaWx0ZXI8L2ZpbHRlci1uYW1lPlxuICAgICAgICA8ZmlsdGVyLWNsYXNzPmZpbHRlci5BdXRoZW50aWNhdGlvbkZpbHRlcjwvZmlsdGVyLWNsYXNzPlxuICAgIDwvZmlsdGVyPlxuICAgIDxmaWx0ZXItbWFwcGluZz5cbiAgICAgICAgPGZpbHRlci1uYW1lPkF1dGhlbnRpY2F0aW9uRmlsdGVyPC9maWx0ZXItbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9DYXJ0U2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vQ2hlY2tvdXRTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9QYXltZW50U2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vT3JkZXJTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9Qcm9maWxlSW1hZ2VTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9JbWFnZVNlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L0NhdGVnb3J5SW1hZ2VTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICA8L2ZpbHRlci1tYXBwaW5nPlxuXG4gICAgPGZpbHRlcj5cbiAgICAgICAgPGZpbHRlci1uYW1lPkNoZWNrb3V0RmlsdGVyPC9maWx0ZXItbmFtZT5cbiAgICAgICAgPGZpbHRlci1jbGFzcz5maWx0ZXIuQ2hlY2tvdXRGaWx0ZXI8L2ZpbHRlci1jbGFzcz5cbiAgICA8L2ZpbHRlcj5cbiAgICA8ZmlsdGVyLW1hcHBpbmc+XG4gICAgICAgIDxmaWx0ZXItbmFtZT5DaGVja291dEZpbHRlcjwvZmlsdGVyLW5hbWU+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vQ2FydFNlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgIDwvZmlsdGVyLW1hcHBpbmc+XG5cbiAgICA8ZmlsdGVyPlxuICAgICAgICA8ZmlsdGVyLW5hbWU+TG9nZ2luZ0ZpbHRlcjwvZmlsdGVyLW5hbWU+XG4gICAgICAgIDxmaWx0ZXItY2xhc3M+ZmlsdGVyLkxvZ2dpbmdGaWx0ZXI8L2ZpbHRlci1jbGFzcz5cbiAgICA8L2ZpbHRlcj5cbiAgICA8ZmlsdGVyLW1hcHBpbmc+XG4gICAgICAgIDxmaWx0ZXItbmFtZT5Mb2dnaW5nRmlsdGVyPC9maWx0ZXItbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi8qPC91cmwtcGF0dGVybj5cbiAgICA8L2ZpbHRlci1tYXBwaW5nPlxuXG4gICAgPGZpbHRlcj5cbiAgICAgICAgPGZpbHRlci1uYW1lPkFkbWluUmVkaXJlY3RGaWx0ZXI8L2ZpbHRlci1uYW1lPlxuICAgICAgICA8ZmlsdGVyLWNsYXNzPmZpbHRlci5BZG1pblJlZGlyZWN0RmlsdGVyPC9maWx0ZXItY2xhc3M+XG4gICAgPC9maWx0ZXI+XG4gICAgPGZpbHRlci1tYXBwaW5nPlxuICAgICAgICA8ZmlsdGVyLW5hbWU+QWRtaW5SZWRpcmVjdEZpbHRlcjwvZmlsdGVyLW5hbWU+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vaW5kZXguanNwPC91cmwtcGF0dGVybj5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi88L3VybC1wYXR0ZXJuPlxuICAgIDwvZmlsdGVyLW1hcHBpbmc+XG5cbiAgICA8IS0tIEVycm9yIFBhZ2VzIC0tPlxuICAgIDxlcnJvci1wYWdlPlxuICAgICAgICA8ZXJyb3ItY29kZT40MDQ8L2Vycm9yLWNvZGU+XG4gICAgICAgIDxsb2NhdGlvbj4vZXJyb3IvNDA0LmpzcDwvbG9jYXRpb24+XG4gICAgPC9lcnJvci1wYWdlPlxuXG4gICAgPGVycm9yLXBhZ2U+XG4gICAgICAgIDxlcnJvci1jb2RlPjUwMDwvZXJyb3ItY29kZT5cbiAgICAgICAgPGxvY2F0aW9uPi9lcnJvci81MDAuanNwPC9sb2NhdGlvbj5cbiAgICA8L2Vycm9yLXBhZ2U+XG5cbiAgICA8ZXJyb3ItcGFnZT5cbiAgICAgICAgPGV4Y2VwdGlvbi10eXBlPmphdmEubGFuZy5UaHJvd2FibGU8L2V4Y2VwdGlvbi10eXBlPlxuICAgICAgICA8bG9jYXRpb24+L2Vycm9yLzUwMC5qc3A8L2xvY2F0aW9uPlxuICAgIDwvZXJyb3ItcGFnZT5cbiAgICA8IS0tIFNlc3Npb24gQ29uZmlndXJhdGlvbiAtLT5cbiAgICA8c2Vzc2lvbi1jb25maWc+XG4gICAgICAgIDxzZXNzaW9uLXRpbWVvdXQ+MzA8L3Nlc3Npb24tdGltZW91dD5cbiAgICA8L3Nlc3Npb24tY29uZmlnPlxuXG4gICAgPCEtLSBMb2dnaW5nIENvbmZpZ3VyYXRpb24gLS0+XG4gICAgPGNvbnRleHQtcGFyYW0+XG4gICAgICAgIDxwYXJhbS1uYW1lPmxvZzRqQ29uZmlndXJhdGlvbjwvcGFyYW0tbmFtZT5cbiAgICAgICAgPHBhcmFtLXZhbHVlPldFQi1JTkYvbG9nNGoyLnhtbDwvcGFyYW0tdmFsdWU+XG4gICAgPC9jb250ZXh0LXBhcmFtPlxuXG48L3dlYi1hcHA+XG4uLi5cblBhdGg6IENsb3RoZWUvc3JjL21haW4vamF2YS9maWx0ZXIvQ2hlY2tvdXRGaWx0ZXIuamF2YVxuLi4uXG5cbi8qKlxuICogRmlsdGVyIHRvIGVuc3VyZSB1c2VycyBoYXZlIGl0ZW1zIGluIHRoZWlyIGNhcnQgYW5kIGEgc2hpcHBpbmcgYWRkcmVzcyBiZWZvcmUgcHJvY2VlZGluZyB0byBjaGVja291dFxuICovXG5AV2ViRmlsdGVyKGZpbHRlck5hbWUgPSBcIkNoZWNrb3V0RmlsdGVyXCIsIHVybFBhdHRlcm5zID0ge1wiL0NhcnRTZXJ2bGV0XCJ9KVxucHVibGljIGNsYXNzIENoZWNrb3V0RmlsdGVyIGltcGxlbWVudHMgRmlsdGVyIHtcblxuICAgIHByaXZhdGUgQ2FydFNlcnZpY2UgY2FydFNlcnZpY2U7XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgdm9pZCBpbml0KEZpbHRlckNvbmZpZyBmaWx0ZXJDb25maWcpIHRocm93cyBTZXJ2bGV0RXhjZXB0aW9uIHtcbiAgICAgICAgY2FydFNlcnZpY2UgPSBuZXcgQ2FydFNlcnZpY2UoKTtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgdm9pZCBkb0ZpbHRlcihTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBTZXJ2bGV0UmVzcG9uc2UgcmVzcG9uc2UsIEZpbHRlckNoYWluIGNoYWluKVxuICAgICAgICAgICAgdGhyb3dzIElPRXhjZXB0aW9uLCBTZXJ2bGV0RXhjZXB0aW9uIHtcblxuICAgICAgICBIdHRwU2VydmxldFJlcXVlc3QgaHR0cFJlcXVlc3QgPSAoSHR0cFNlcnZsZXRSZXF1ZXN0KSByZXF1ZXN0O1xuICAgICAgICBIdHRwU2VydmxldFJlc3BvbnNlIGh0dHBSZXNwb25zZSA9IChIdHRwU2VydmxldFJlc3BvbnNlKSByZXNwb25zZTtcbiAgICAgICAgSHR0cFNlc3Npb24gc2Vzc2lvbiA9IGh0dHBSZXF1ZXN0LmdldFNlc3Npb24oZmFsc2UpO1xuLi4uXG5QYXRoOiBzcmMvbWFpbi93ZWJhcHAvV0VCLUlORi93ZWIueG1sXG4uLi5cblxuICAgIDwhLS0gU2VydmxldCBNYXBwaW5ncyAtLT5cbiAgICA8c2VydmxldD5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5DdXN0b21lclJldmlld1NlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHNlcnZsZXQtY2xhc3M+Y29udHJvbGxlci5DdXN0b21lclJldmlld1NlcnZsZXQ8L3NlcnZsZXQtY2xhc3M+XG4gICAgPC9zZXJ2bGV0PlxuICAgIDxzZXJ2bGV0LW1hcHBpbmc+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+Q3VzdG9tZXJSZXZpZXdTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vQ3VzdG9tZXJSZXZpZXdTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICA8L3NlcnZsZXQtbWFwcGluZz5cbiAgICA8c2VydmxldD5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5Qcm9maWxlU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8c2VydmxldC1jbGFzcz5jb250cm9sbGVyLlByb2ZpbGVTZXJ2bGV0PC9zZXJ2bGV0LWNsYXNzPlxuICAgICAgICA8bXVsdGlwYXJ0LWNvbmZpZz5cbiAgICAgICAgICAgIDxtYXgtZmlsZS1zaXplPjUyNDI4ODA8L21heC1maWxlLXNpemU+PCEtLSA1TUIgLS0+XG4gICAgICAgICAgICA8bWF4LXJlcXVlc3Qtc2l6ZT4xMDQ4NTc2MDwvbWF4LXJlcXVlc3Qtc2l6ZT48IS0tIDEwTUIgLS0+XG4gICAgICAgICAgICA8ZmlsZS1zaXplLXRocmVzaG9sZD4xMDQ4NTc2PC9maWxlLXNpemUtdGhyZXNob2xkPjwhLS0gMU1CIC0tPlxuICAgICAgICA8L211bHRpcGFydC1jb25maWc+XG4gICAgPC9zZXJ2bGV0PlxuICAgIDxzZXJ2bGV0LW1hcHBpbmc+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+UHJvZmlsZVNlcnZsZXQ8L3NlcnZsZXQtbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9Qcm9maWxlU2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgPC9zZXJ2bGV0LW1hcHBpbmc+XG4uLi5cblxuICAgIDwhLS0gRGFzaGJvYXJkIFNldHRpbmdzIFNlcnZsZXQgcmVtb3ZlZCAtLT5cblxuICAgIDwhLS0gVXNlciBTZXJ2bGV0IC0tPlxuICAgIDxzZXJ2bGV0PlxuICAgICAgICA8c2VydmxldC1uYW1lPlVzZXJTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDxzZXJ2bGV0LWNsYXNzPmNvbnRyb2xsZXIuVXNlclNlcnZsZXQ8L3NlcnZsZXQtY2xhc3M+XG4gICAgICAgIDxtdWx0aXBhcnQtY29uZmlnPlxuICAgICAgICAgICAgPG1heC1maWxlLXNpemU+NTI0Mjg4MDwvbWF4LWZpbGUtc2l6ZT48IS0tIDVNQiAtLT5cbiAgICAgICAgICAgIDxtYXgtcmVxdWVzdC1zaXplPjEwNDg1NzYwPC9tYXgtcmVxdWVzdC1zaXplPjwhLS0gMTBNQiAtLT5cbiAgICAgICAgICAgIDxmaWxlLXNpemUtdGhyZXNob2xkPjEwNDg1NzY8L2ZpbGUtc2l6ZS10aHJlc2hvbGQ+PCEtLSAxTUIgLS0+XG4gICAgICAgIDwvbXVsdGlwYXJ0LWNvbmZpZz5cbiAgICA8L3NlcnZsZXQ+XG4gICAgPHNlcnZsZXQtbWFwcGluZz5cbiAgICAgICAgPHNlcnZsZXQtbmFtZT5Vc2VyU2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L1VzZXJTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICA8L3NlcnZsZXQtbWFwcGluZz5cbiAgICA8c2VydmxldC1tYXBwaW5nPlxuICAgICAgICA8c2VydmxldC1uYW1lPlVzZXJTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vdXNlci8qPC91cmwtcGF0dGVybj5cbiAgICA8L3NlcnZsZXQtbWFwcGluZz5cbi4uLlxuXG5cbiAgICA8IS0tIENoZWNrb3V0IFNlcnZsZXQgLS0+XG4gICAgPHNlcnZsZXQ+XG4gICAgICAgIDxzZXJ2bGV0LW5hbWU+Q2hlY2tvdXRTZXJ2bGV0PC9zZXJ2bGV0LW5hbWU+XG4gICAgICAgIDxzZXJ2bGV0LWNsYXNzPmNvbnRyb2xsZXIuQ2hlY2tvdXRTZXJ2bGV0PC9zZXJ2bGV0LWNsYXNzPlxuICAgIDwvc2VydmxldD5cbiAgICA8c2VydmxldC1tYXBwaW5nPlxuICAgICAgICA8c2VydmxldC1uYW1lPkNoZWNrb3V0U2VydmxldDwvc2VydmxldC1uYW1lPlxuICAgICAgICA8dXJsLXBhdHRlcm4+L0NoZWNrb3V0U2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgPC9zZXJ2bGV0LW1hcHBpbmc+XG5cblxuICAgIDwhLS0gRmlsdGVycyAtLT5cbiAgICA8ZmlsdGVyPlxuICAgICAgICA8ZmlsdGVyLW5hbWU+QXV0aGVudGljYXRpb25GaWx0ZXI8L2ZpbHRlci1uYW1lPlxuICAgICAgICA8ZmlsdGVyLWNsYXNzPmZpbHRlci5BdXRoZW50aWNhdGlvbkZpbHRlcjwvZmlsdGVyLWNsYXNzPlxuICAgIDwvZmlsdGVyPlxuICAgIDxmaWx0ZXItbWFwcGluZz5cbiAgICAgICAgPGZpbHRlci1uYW1lPkF1dGhlbnRpY2F0aW9uRmlsdGVyPC9maWx0ZXItbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9DYXJ0U2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vQ2hlY2tvdXRTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi9QYXltZW50U2VydmxldDwvdXJsLXBhdHRlcm4+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vT3JkZXJTZXJ2bGV0PC91cmwtcGF0dGVybj5cbiAgICA8L2ZpbHRlci1tYXBwaW5nPlxuXG4gICAgPGZpbHRlcj5cbiAgICAgICAgPGZpbHRlci1uYW1lPkNoZWNrb3V0RmlsdGVyPC9maWx0ZXItbmFtZT5cbiAgICAgICAgPGZpbHRlci1jbGFzcz5maWx0ZXIuQ2hlY2tvdXRGaWx0ZXI8L2ZpbHRlci1jbGFzcz5cbiAgICA8L2ZpbHRlcj5cbiAgICA8ZmlsdGVyLW1hcHBpbmc+XG4gICAgICAgIDxmaWx0ZXItbmFtZT5DaGVja291dEZpbHRlcjwvZmlsdGVyLW5hbWU+XG4gICAgICAgIDx1cmwtcGF0dGVybj4vQ2FydFNlcnZsZXQ8L3VybC1wYXR0ZXJuPlxuICAgIDwvZmlsdGVyLW1hcHBpbmc+XG5cbiAgICA8ZmlsdGVyPlxuICAgICAgICA8ZmlsdGVyLW5hbWU+TG9nZ2luZ0ZpbHRlcjwvZmlsdGVyLW5hbWU+XG4gICAgICAgIDxmaWx0ZXItY2xhc3M+ZmlsdGVyLkxvZ2dpbmdGaWx0ZXI8L2ZpbHRlci1jbGFzcz5cbiAgICA8L2ZpbHRlcj5cbiAgICA8ZmlsdGVyLW1hcHBpbmc+XG4gICAgICAgIDxmaWx0ZXItbmFtZT5Mb2dnaW5nRmlsdGVyPC9maWx0ZXItbmFtZT5cbiAgICAgICAgPHVybC1wYXR0ZXJuPi8qPC91cmwtcGF0dGVybj5cbiAgICA8L2ZpbHRlci1tYXBwaW5nPlxuXG4gICAgPCEtLSBFcnJvciBQYWdlcyAtLT5cbiAgICA8ZXJyb3ItcGFnZT5cbiAgICAgICAgPGVycm9yLWNvZGU+NDA0PC9lcnJvci1jb2RlPlxuICAgICAgICA8bG9jYXRpb24+L2Vycm9yLzQwNC5qc3A8L2xvY2F0aW9uPlxuICAgIDwvZXJyb3ItcGFnZT5cblxuICAgIDxlcnJvci1wYWdlPlxuICAgICAgICA8ZXJyb3ItY29kZT41MDA8L2Vycm9yLWNvZGU+XG4gICAgICAgIDxsb2NhdGlvbj4vZXJyb3IvNTAwLi4uIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiODgzNDU4MGYtODdiMC00ZTVkLWE2OWYtYzY5Njk2MjA0N2EzO3Rvb2x1X3ZydHhfMDFCS0FwdTZSaWF3a1plNEJEN04yQUR2Ijp7InJlcXVlc3RJZCI6Ijg4MzQ1ODBmLTg3YjAtNGU1ZC1hNjlmLWM2OTY5NjIwNDdhMyIsInRvb2xVc2VJZCI6InRvb2x1X3ZydHhfMDFCS0FwdTZSaWF3a1plNEJEN04yQUR2IiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBDbG90aGVlL3NyYy9tYWluL2phdmEvZmlsdGVyL0F1dGhlbnRpY2F0aW9uRmlsdGVyLmphdmEuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlIGZvciBlbnRyeSB3aXRoIGluZGV4IFswXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgIDIzXHQgICAgcHVibGljIHZvaWQgaW5pdChGaWx0ZXJDb25maWcgZmlsdGVyQ29uZmlnKSB0aHJvd3MgU2VydmxldEV4Y2VwdGlvbiB7XG4gICAgMjRcdCAgICAgICAgLy8gSW5pdGlhbGl6YXRpb24gY29kZSwgaWYgbmVlZGVkXG4gICAgMjVcdCAgICB9XG4gICAgMjZcdFxuICAgIDI3XHQgICAgQE92ZXJyaWRlXG4gICAgMjhcdCAgICBwdWJsaWMgdm9pZCBkb0ZpbHRlcihTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBTZXJ2bGV0UmVzcG9uc2UgcmVzcG9uc2UsIEZpbHRlckNoYWluIGNoYWluKVxuICAgIDI5XHQgICAgICAgICAgICB0aHJvd3MgSU9FeGNlcHRpb24sIFNlcnZsZXRFeGNlcHRpb24ge1xuICAgIDMwXHRcbiAgICAzMVx0ICAgICAgICBIdHRwU2VydmxldFJlcXVlc3QgaHR0cFJlcXVlc3QgPSAoSHR0cFNlcnZsZXRSZXF1ZXN0KSByZXF1ZXN0O1xuICAgIDMyXHQgICAgICAgIEh0dHBTZXJ2bGV0UmVzcG9uc2UgaHR0cFJlc3BvbnNlID0gKEh0dHBTZXJ2bGV0UmVzcG9uc2UpIHJlc3BvbnNlO1xuICAgIDMzXHQgICAgICAgIEh0dHBTZXNzaW9uIHNlc3Npb24gPSBodHRwUmVxdWVzdC5nZXRTZXNzaW9uKGZhbHNlKTtcbiAgICAzNFx0XG4gICAgMzVcdCAgICAgICAgLy8gR2V0IHRoZSByZXF1ZXN0ZWQgVVJMIGFuZCBtZXRob2RcbiAgICAzNlx0ICAgICAgICBTdHJpbmcgcmVxdWVzdFVSSSA9IGh0dHBSZXF1ZXN0LmdldFJlcXVlc3RVUkkoKTtcbiAgICAzN1x0ICAgICAgICBTdHJpbmcgcXVlcnlTdHJpbmcgPSBodHRwUmVxdWVzdC5nZXRRdWVyeVN0cmluZygpO1xuICAgIDM4XHQgICAgICAgIFN0cmluZyBmdWxsVVJMID0gcmVxdWVzdFVSSSArIChxdWVyeVN0cmluZyAhPSBudWxsID8gXCI/XCIgKyBxdWVyeVN0cmluZyA6IFwiXCIpO1xuICAgIDM5XHQgICAgICAgIFN0cmluZyBtZXRob2QgPSBodHRwUmVxdWVzdC5nZXRNZXRob2QoKTtcbiAgICA0MFx0XG4gICAgNDFcdCAgICAgICAgLy8gQWxsb3cgR0VUIHJlcXVlc3RzIHRvIENhdGVnb3J5SW1hZ2VTZXJ2bGV0IHdpdGhvdXQgYXV0aGVudGljYXRpb25cbiAgICA0Mlx0ICAgICAgICBpZiAocmVxdWVzdFVSSS5jb250YWlucyhcIkNhdGVnb3J5SW1hZ2VTZXJ2bGV0XCIpICYmIFwiR0VUXCIuZXF1YWxzKG1ldGhvZCkpIHtcbiAgICA0M1x0ICAgICAgICAgICAgLy8gQ29udGludWUgdGhlIGZpbHRlciBjaGFpbiB3aXRob3V0IGF1dGhlbnRpY2F0aW9uIGNoZWNrXG4gICAgNDRcdCAgICAgICAgICAgIGNoYWluLmRvRmlsdGVyKHJlcXVlc3QsIHJlc3BvbnNlKTtcbiAgICA0NVx0ICAgICAgICAgICAgcmV0dXJuO1xuICAgIDQ2XHQgICAgICAgIH1cbiAgICA0N1x0XG4gICAgNDhcdCAgICAgICAgLy8gQ2hlY2sgaWYgdXNlciBpcyBsb2dnZWQgaW5cbiAgICA0OVx0ICAgICAgICBib29sZWFuIGlzTG9nZ2VkSW4gPSAoc2Vzc2lvbiAhPSBudWxsICYmIHNlc3Npb24uZ2V0QXR0cmlidXRlKFwidXNlclwiKSAhPSBudWxsKTtcbiAgICA1MFx0XG4gICAgNTFcdCAgICAgICAgLy8gSWYgdGhlIHVzZXIgaXMgbm90IGxvZ2dlZCBpbiBhbmQgdHJ5aW5nIHRvIGFjY2VzcyBhIHByb3RlY3RlZCByZXNvdXJjZVxuICAgIDUyXHQgICAgICAgIGlmICghaXNMb2dnZWRJbikge1xuICAgIDUzXHQgICAgICAgICAgICAvLyBTYXZlIHRoZSByZXF1ZXN0ZWQgVVJMIGZvciByZWRpcmVjdCBhZnRlciBsb2dpblxuICAgIDU0XHQgICAgICAgICAgICBodHRwUmVxdWVzdC5nZXRTZXNzaW9uKCkuc2V0QXR0cmlidXRlKFwicmVkaXJlY3RVUkxcIiwgZnVsbFVSTCk7XG4gICAgNTVcdFxuICAgIDU2XHQgICAgICAgICAgICAvLyBSZWRpcmVjdCB0byBsb2dpbiBwYWdlXG4gICAgNTdcdCAgICAgICAgICAgIGh0dHBSZXNwb25zZS5zZW5kUmVkaXJlY3QoaHR0cFJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL2xvZ2luLmpzcFwiKTtcbiAgICA1OFx0ICAgICAgICAgICAgcmV0dXJuO1xuICAgIDU5XHQgICAgICAgIH1cbiAgICA2MFx0XG4gICAgNjFcdCAgICAgICAgLy8gRm9yIGNoZWNrb3V0LXNwZWNpZmljIGFjdGlvbnMsIGVuc3VyZSB0aGUgdXNlciBoYXMgaXRlbXMgaW4gY2FydFxuICAgIDYyXHQgICAgICAgIGlmIChyZXF1ZXN0VVJJLmNvbnRhaW5zKFwiQ2FydFNlcnZsZXRcIikgJiYgXCJjaGVja291dFwiLmVxdWFscyhodHRwUmVxdWVzdC5nZXRQYXJhbWV0ZXIoXCJhY3Rpb25cIikpKSB7XG4gICAgNjNcdCAgICAgICAgICAgIFVzZXIgdXNlciA9IChVc2VyKSBzZXNzaW9uLmdldEF0dHJpYnV0ZShcInVzZXJcIik7XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sIjBhN2E0MjYyLTM2MWItNGJhOS1iYzA1LTdkNDQyZDY0MTI1Mzt0b29sdV92cnR4XzAxM01FcXozQ1pWMnlUZDNUZzlhZ0tYNCI6eyJyZXF1ZXN0SWQiOiIwYTdhNDI2Mi0zNjFiLTRiYTktYmMwNS03ZDQ0MmQ2NDEyNTMiLCJ0b29sVXNlSWQiOiJ0b29sdV92cnR4XzAxM01FcXozQ1pWMnlUZDNUZzlhZ0tYNCIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IkZpbGUgc2F2ZWQgc3VjY2Vzc2Z1bGx5LiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sIjlhMWY3NDZkLTFhYzYtNDUwMS05NGE3LTcwOTI0ZGQ5OGYwZjt0b29sdV92cnR4XzAxWTFqcFFGMXlLRlVKV040ckN0V2RYdCI6eyJyZXF1ZXN0SWQiOiI5YTFmNzQ2ZC0xYWM2LTQ1MDEtOTRhNy03MDkyNGRkOThmMGYiLCJ0b29sVXNlSWQiOiJ0b29sdV92cnR4XzAxWTFqcFFGMXlLRlVKV040ckN0V2RYdCIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgQ2xvdGhlZS9zcmMvbWFpbi9qYXZhL2NvbnRyb2xsZXIvQ2F0ZWdvcnlJbWFnZVNlcnZsZXQuamF2YS5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2UgZm9yIGVudHJ5IHdpdGggaW5kZXggWzBdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICAyMzVcdCAgICAgICAgICAgIH0gZWxzZSB7XG4gICAyMzZcdCAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJDYXRlZ29yeUltYWdlU2VydmxldCAtIFdBUk5JTkc6IERlcGxveW1lbnQgZmlsZSBkb2VzIG5vdCBleGlzdCBhZnRlciB3cml0aW5nIVwiKTtcbiAgIDIzN1x0ICAgICAgICAgICAgfVxuICAgMjM4XHRcbiAgIDIzOVx0ICAgICAgICAgICAgLy8gQ3JlYXRlIGEgcGVybWFuZW50IHBhdGggcmVmZXJlbmNlIGZvciB0aGUgZGF0YWJhc2VcbiAgIDI0MFx0ICAgICAgICAgICAgLy8gVGhpcyB3aWxsIGJlIGEgdmlydHVhbCBwYXRoIHRoYXQgb3VyIHNlcnZsZXQgd2lsbCByZXNvbHZlXG4gICAyNDFcdCAgICAgICAgICAgIFN0cmluZyBpbWFnZVVybCA9IHJlbGF0aXZlUGF0aCArIFwiL1wiICsgbmV3RmlsZU5hbWU7XG4gICAyNDJcdFxuICAgMjQzXHQgICAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhlIGltYWdlIFVSTCBpcyBzdG9yZWQgd2l0aCBhIGNvbnNpc3RlbnQgZm9ybWF0XG4gICAyNDRcdCAgICAgICAgICAgIGlmIChpbWFnZVVybC5zdGFydHNXaXRoKFwiL1wiKSkge1xuICAgMjQ1XHQgICAgICAgICAgICAgICAgaW1hZ2VVcmwgPSBpbWFnZVVybC5zdWJzdHJpbmcoMSk7XG4gICAyNDZcdCAgICAgICAgICAgIH1cbiAgIDI0N1x0XG4gICAyNDhcdCAgICAgICAgICAgIC8vIFVwZGF0ZSBjYXRlZ29yeSBpbWFnZSBVUkwgaW4gZGF0YWJhc2VcbiAgIDI0OVx0ICAgICAgICAgICAgYm9vbGVhbiBzdWNjZXNzID0gY2F0ZWdvcnlEQU8udXBkYXRlQ2F0ZWdvcnlJbWFnZShjYXRlZ29yeUlkLCBpbWFnZVVybCk7XG4gICAyNTBcdFxuICAgMjUxXHQgICAgICAgICAgICBpZiAoc3VjY2Vzcykge1xuICAgMjUyXHQgICAgICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL2FkbWluL2NhdGVnb3JpZXMuanNwP3N1Y2Nlc3M9dHJ1ZSZtZXNzYWdlPUNhdGVnb3J5K2ltYWdlK3VwZGF0ZWQrc3VjY2Vzc2Z1bGx5XCIpO1xuICAgMjUzXHQgICAgICAgICAgICB9IGVsc2Uge1xuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCIxNjBmNjBkMy1iMmVhLTQzYzgtOWIxOC0yMDAyY2JlYWY5MzU7dG9vbHVfdnJ0eF8wMUdoaE5MckVQNE5kTTdHZXBOM1NMajUiOnsicmVxdWVzdElkIjoiMTYwZjYwZDMtYjJlYS00M2M4LTliMTgtMjAwMmNiZWFmOTM1IiwidG9vbFVzZUlkIjoidG9vbHVfdnJ0eF8wMUdoaE5MckVQNE5kTTdHZXBOM1NMajUiLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJUaGUgZm9sbG93aW5nIGNvZGUgc2VjdGlvbnMgd2VyZSByZXRyaWV2ZWQ6XG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbnRyb2xsZXIvSW1hZ2VTZXJ2bGV0LmphdmFcbnBhY2thZ2UgY29udHJvbGxlcjtcblxuaW1wb3J0IGphdmEuaW8uRmlsZTtcbmltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uO1xuXG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0LlNlcnZsZXRFeGNlcHRpb247XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0LmFubm90YXRpb24uTXVsdGlwYXJ0Q29uZmlnO1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5hbm5vdGF0aW9uLldlYlNlcnZsZXQ7XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXQ7XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXRSZXF1ZXN0O1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5odHRwLkh0dHBTZXJ2bGV0UmVzcG9uc2U7XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0Lmh0dHAuUGFydDtcblxuaW1wb3J0IHNlcnZpY2UuUHJvZHVjdEltYWdlU2VydmljZTtcbmltcG9ydCBzZXJ2aWNlLlByb2R1Y3RTZXJ2aWNlO1xuaW1wb3J0IG1vZGVsLlByb2R1Y3Q7XG5cbi8qKlxuICogU2VydmxldCBpbXBsZW1lbnRhdGlvbiBjbGFzcyBJbWFnZVNlcnZsZXRcbiAqIEhhbmRsZXMgcHJvZHVjdCBpbWFnZSB1cGxvYWRzXG4gKi9cbi8vIFNlcnZsZXQgbWFwcGluZyBkZWZpbmVkIGluIHdlYi54bWxcbkBNdWx0aXBhcnRDb25maWdcbnB1YmxpYyBjbGFzcyBJbWFnZVNlcnZsZXQgZXh0ZW5kcyBIdHRwU2VydmxldCB7XG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgbG9uZyBzZXJpYWxWZXJzaW9uVUlEID0gMUw7XG4gICAgcHJpdmF0ZSBQcm9kdWN0SW1hZ2VTZXJ2aWNlIHByb2R1Y3RJbWFnZVNlcnZpY2U7XG4gICAgcHJpdmF0ZSBQcm9kdWN0U2VydmljZSBwcm9kdWN0U2VydmljZTtcblxuICAgIC8qKlxuICAgICAqIEBzZWUgSHR0cFNlcnZsZXQjSHR0cFNlcnZsZXQoKVxuICAgICAqL1xuICAgIHB1YmxpYyBJbWFnZVNlcnZsZXQoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHByb2R1Y3RJbWFnZVNlcnZpY2UgPSBuZXcgUHJvZHVjdEltYWdlU2VydmljZSgpO1xuICAgICAgICBwcm9kdWN0U2VydmljZSA9IG5ldyBQcm9kdWN0U2VydmljZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBzZWUgSHR0cFNlcnZsZXQjZG9Qb3N0KEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBIdHRwU2VydmxldFJlc3BvbnNlIHJlc3BvbnNlKVxuICAgICAqL1xuICAgIHByb3RlY3RlZCB2b2lkIGRvUG9zdChIdHRwU2VydmxldFJlcXVlc3QgcmVxdWVzdCwgSHR0cFNlcnZsZXRSZXNwb25zZSByZXNwb25zZSkgdGhyb3dzIFNlcnZsZXRFeGNlcHRpb24sIElPRXhjZXB0aW9uIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIEdldCBwcm9kdWN0IElEIGZyb20gcmVxdWVzdFxuICAgICAgICAgICAgU3RyaW5nIHByb2R1Y3RJZFN0ciA9IHJlcXVlc3QuZ2V0UGFyYW1ldGVyKFwicHJvZHVjdElkXCIpO1xuICAgICAgICAgICAgU3RyaW5nIHJldHVyblVybCA9IHJlcXVlc3QuZ2V0UGFyYW1ldGVyKFwicmV0dXJuVXJsXCIpO1xuXG4gICAgICAgICAgICAvLyBEZWZhdWx0IHJldHVybiBVUkwgaWYgbm90IHNwZWNpZmllZFxuICAgICAgICAgICAgaWYgKHJldHVyblVybCA9PSBudWxsIHx8IHJldHVyblVybC5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm5VcmwgPSBcIi9hZG1pbi9BZG1pblByb2R1Y3RTZXJ2bGV0XCI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChwcm9kdWN0SWRTdHIgPT0gbnVsbCB8fCBwcm9kdWN0SWRTdHIuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIHJldHVyblVybCArIFwiP2Vycm9yPVByb2R1Y3QrSUQraXMrcmVxdWlyZWRcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGludCBwcm9kdWN0SWQgPSBJbnRlZ2VyLnBhcnNlSW50KHByb2R1Y3RJZFN0cik7XG5cbiAgICAgICAgICAgICAgICAvLyBHZXQgcHJvZHVjdCBmcm9tIGRhdGFiYXNlXG4gICAgICAgICAgICAgICAgUHJvZHVjdCBwcm9kdWN0ID0gcHJvZHVjdFNlcnZpY2UuZ2V0UHJvZHVjdEJ5SWQocHJvZHVjdElkKTtcblxuICAgICAgICAgICAgICAgIGlmIChwcm9kdWN0ID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIHJldHVyblVybCArIFwiP2Vycm9yPVByb2R1Y3Qrbm90K2ZvdW5kXCIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gSGFuZGxlIGZpbGUgdXBsb2FkXG4gICAgICAgICAgICAgICAgUGFydCBmaWxlUGFydCA9IHJlcXVlc3QuZ2V0UGFydChcInByb2R1Y3RJbWFnZVwiKTtcbiAgICAgICAgICAgICAgICBpZiAoZmlsZVBhcnQgPT0gbnVsbCB8fCBmaWxlUGFydC5nZXRTaXplKCkgPD0gMCkge1xuICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgcmV0dXJuVXJsICsgXCI/ZXJyb3I9Tm8raW1hZ2UrZmlsZStzZWxlY3RlZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFVwbG9hZCB0aGUgaW1hZ2UgdXNpbmcgdGhlIHNlcnZpY2VcbiAgICAgICAgICAgICAgICBTdHJpbmcgdXBsb2FkUGF0aCA9IHJlcXVlc3QuZ2V0U2VydmxldENvbnRleHQoKS5nZXRSZWFsUGF0aChcIi9cIik7XG4gICAgICAgICAgICAgICAgU3RyaW5nIGltYWdlVXJsID0gcHJvZHVjdEltYWdlU2VydmljZS51cGxvYWRQcm9kdWN0SW1hZ2UocHJvZHVjdElkLCBmaWxlUGFydCwgdXBsb2FkUGF0aCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoaW1hZ2VVcmwgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgcmV0dXJuVXJsICsgXCI/ZXJyb3I9RmFpbGVkK3RvK3VwbG9hZCtpbWFnZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBwcm9kdWN0IGltYWdlIFVSTCBpbiBkYXRhYmFzZVxuICAgICAgICAgICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IHByb2R1Y3RJbWFnZVNlcnZpY2UudXBkYXRlUHJvZHVjdEltYWdlVXJsKHByb2R1Y3RJZCwgaW1hZ2VVcmwpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIHJldHVyblVybCArIFwiP3N1Y2Nlc3M9UHJvZHVjdCtpbWFnZSt1cGRhdGVkK3N1Y2Nlc3NmdWxseVwiKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgcmV0dXJuVXJsICsgXCI/ZXJyb3I9RmFpbGVkK3RvK3VwZGF0ZStwcm9kdWN0K2ltYWdlXCIpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSBjYXRjaCAoTnVtYmVyRm9ybWF0RXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJFcnJvciBwYXJzaW5nIHByb2R1Y3QgSUQ6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIHJldHVyblVybCArIFwiP2Vycm9yPUludmFsaWQrcHJvZHVjdCtJRFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkVycm9yIGluIEltYWdlU2VydmxldC5kb1Bvc3Q6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9hZG1pbi9BZG1pblByb2R1Y3RTZXJ2bGV0P2Vycm9yPUVycm9yK3VwbG9hZGluZytpbWFnZTorXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIZWxwZXIgbWV0aG9kIHRvIGdldCB0aGUgc3VibWl0dGVkIGZpbGUgbmFtZSBmcm9tIGEgUGFydFxuICAgICAqL1xuICAgIHByaXZhdGUgU3RyaW5nIGdldFN1Ym1pdHRlZEZpbGVOYW1lKFBhcnQgcGFydCkge1xuICAgICAgICBmb3IgKFN0cmluZyBjb250ZW50IDogcGFydC5nZXRIZWFkZXIoXCJjb250ZW50LWRpc3Bvc2l0aW9uXCIpLnNwbGl0KFwiO1wiKSkge1xuICAgICAgICAgICAgaWYgKGNvbnRlbnQudHJpbSgpLnN0YXJ0c1dpdGgoXCJmaWxlbmFtZVwiKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb250ZW50LnN1YnN0cmluZyhjb250ZW50LmluZGV4T2YoJz0nKSArIDEpLnRyaW0oKS5yZXBsYWNlKFwiXFxcIlwiLCBcIlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG4uLi5cblBhdGg6IENsb3RoZWUvc3JjL21haW4vamF2YS9jb250cm9sbGVyL1Byb2ZpbGVJbWFnZVNlcnZsZXQuamF2YVxucGFja2FnZSBjb250cm9sbGVyO1xuXG5pbXBvcnQgamF2YS5pby5GaWxlO1xuaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0LlNlcnZsZXRFeGNlcHRpb247XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0LmFubm90YXRpb24uTXVsdGlwYXJ0Q29uZmlnO1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5odHRwLkh0dHBTZXJ2bGV0O1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5odHRwLkh0dHBTZXJ2bGV0UmVxdWVzdDtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuaHR0cC5IdHRwU2VydmxldFJlc3BvbnNlO1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5odHRwLkh0dHBTZXNzaW9uO1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5odHRwLlBhcnQ7XG5pbXBvcnQgbW9kZWwuVXNlcjtcbmltcG9ydCBkYW8uVXNlckRBTztcbmltcG9ydCBzZXJ2aWNlLlVzZXJJbWFnZVNlcnZpY2U7XG5cbi8qKlxuICogU2VydmxldCBpbXBsZW1lbnRhdGlvbiBjbGFzcyBQcm9maWxlSW1hZ2VTZXJ2bGV0XG4gKiBIYW5kbGVzIHByb2ZpbGUgaW1hZ2UgdXBsb2FkcyB3aXRob3V0IEphdmFTY3JpcHRcbiAqL1xuLy8gU2VydmxldCBtYXBwaW5nIGRlZmluZWQgaW4gd2ViLnhtbFxuQE11bHRpcGFydENvbmZpZyhcbiAgICBmaWxlU2l6ZVRocmVzaG9sZCA9IDEwMjQgKiAxMDI0LCAvLyAxIE1CXG4gICAgbWF4RmlsZVNpemUgPSAxMDI0ICogMTAyNCAqIDUsICAgLy8gNSBNQlxuICAgIG1heFJlcXVlc3RTaXplID0gMTAyNCAqIDEwMjQgKiAxMCAvLyAxMCBNQlxuKVxuLi4uXG5cbiAgICAvKipcbiAgICAgKiBAc2VlIEh0dHBTZXJ2bGV0I2RvUG9zdChIdHRwU2VydmxldFJlcXVlc3QgcmVxdWVzdCwgSHR0cFNlcnZsZXRSZXNwb25zZSByZXNwb25zZSlcbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgdm9pZCBkb0dldChIdHRwU2VydmxldFJlcXVlc3QgcmVxdWVzdCwgSHR0cFNlcnZsZXRSZXNwb25zZSByZXNwb25zZSkgdGhyb3dzIFNlcnZsZXRFeGNlcHRpb24sIElPRXhjZXB0aW9uIHtcbiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiUHJvZmlsZUltYWdlU2VydmxldCAtIGRvR2V0IG1ldGhvZCBjYWxsZWRcIik7XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgdXNlciBpcyBsb2dnZWQgaW5cbiAgICAgICAgSHR0cFNlc3Npb24gc2Vzc2lvbiA9IHJlcXVlc3QuZ2V0U2Vzc2lvbigpO1xuICAgICAgICBVc2VyIHVzZXIgPSAoVXNlcikgc2Vzc2lvbi5nZXRBdHRyaWJ1dGUoXCJ1c2VyXCIpO1xuXG4gICAgICAgIGlmICh1c2VyID09IG51bGwpIHtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlByb2ZpbGVJbWFnZVNlcnZsZXQgLSBVc2VyIG5vdCBsb2dnZWQgaW5cIik7XG4gICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvbG9naW4uanNwXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRm9yd2FyZCB0byB0aGUgcHJvZmlsZSBpbWFnZSB1cGxvYWQgcGFnZVxuICAgICAgICByZXF1ZXN0LmdldFJlcXVlc3REaXNwYXRjaGVyKFwiL2N1c3RvbWVyL3Byb2ZpbGUtaW1hZ2UtdXBsb2FkLmpzcFwiKS5mb3J3YXJkKHJlcXVlc3QsIHJlc3BvbnNlKTtcbiAgICB9XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvY29udHJvbGxlci9Qcm9maWxlSW1hZ2VTZXJ2bGV0LmphdmFcbnBhY2thZ2UgY29udHJvbGxlcjtcblxuaW1wb3J0IGphdmEuaW8uRmlsZTtcbmltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uO1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5TZXJ2bGV0RXhjZXB0aW9uO1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5hbm5vdGF0aW9uLk11bHRpcGFydENvbmZpZztcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuYW5ub3RhdGlvbi5XZWJTZXJ2bGV0O1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5odHRwLkh0dHBTZXJ2bGV0O1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5odHRwLkh0dHBTZXJ2bGV0UmVxdWVzdDtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuaHR0cC5IdHRwU2VydmxldFJlc3BvbnNlO1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5odHRwLkh0dHBTZXNzaW9uO1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5odHRwLlBhcnQ7XG5pbXBvcnQgbW9kZWwuVXNlcjtcbmltcG9ydCBkYW8uVXNlckRBTztcblxuLyoqXG4gKiBTZXJ2bGV0IGltcGxlbWVudGF0aW9uIGNsYXNzIFByb2ZpbGVJbWFnZVNlcnZsZXRcbiAqIEhhbmRsZXMgcHJvZmlsZSBpbWFnZSB1cGxvYWRzIHdpdGhvdXQgSmF2YVNjcmlwdFxuICovXG4vLyBTZXJ2bGV0IG1hcHBpbmcgZGVmaW5lZCBpbiB3ZWIueG1sXG5ATXVsdGlwYXJ0Q29uZmlnKFxuICAgIGZpbGVTaXplVGhyZXNob2xkID0gMTAyNCAqIDEwMjQsIC8vIDEgTUJcbiAgICBtYXhGaWxlU2l6ZSA9IDEwMjQgKiAxMDI0ICogNSwgICAvLyA1IE1CXG4gICAgbWF4UmVxdWVzdFNpemUgPSAxMDI0ICogMTAyNCAqIDEwIC8vIDEwIE1CXG4pXG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvY29udHJvbGxlci9DYXRlZ29yeUltYWdlU2VydmxldC5qYXZhXG5wYWNrYWdlIGNvbnRyb2xsZXI7XG5cbmltcG9ydCBqYXZhLmlvLkZpbGU7XG5pbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuU2VydmxldEV4Y2VwdGlvbjtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuYW5ub3RhdGlvbi5NdWx0aXBhcnRDb25maWc7XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0LmFubm90YXRpb24uV2ViU2VydmxldDtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuaHR0cC5IdHRwU2VydmxldDtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuaHR0cC5IdHRwU2VydmxldFJlcXVlc3Q7XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXRSZXNwb25zZTtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuaHR0cC5QYXJ0O1xuXG5pbXBvcnQgZGFvLkNhdGVnb3J5REFPO1xuaW1wb3J0IG1vZGVsLkNhdGVnb3J5O1xuXG4vKipcbiAqIFNlcnZsZXQgZm9yIGhhbmRsaW5nIGNhdGVnb3J5IGltYWdlIHVwbG9hZHNcbiAqL1xuLy8gU2VydmxldCBtYXBwaW5nIGRlZmluZWQgaW4gd2ViLnhtbFxuQE11bHRpcGFydENvbmZpZyhcbiAgICBmaWxlU2l6ZVRocmVzaG9sZCA9IDEwMjQgKiAxMDI0LCAvLyAxIE1CXG4gICAgbWF4RmlsZVNpemUgPSAxMDI0ICogMTAyNCAqIDEwLCAgLy8gMTAgTUJcbiAgICBtYXhSZXF1ZXN0U2l6ZSA9IDEwMjQgKiAxMDI0ICogNTAgLy8gNTAgTUJcbilcbi4uLlxuXG4gICAgICAgICAgICAvLyBQcm9jZXNzIHRoZSB1cGxvYWRlZCBmaWxlXG4gICAgICAgICAgICBTdHJpbmcgZmlsZU5hbWUgPSBnZXRTdWJtaXR0ZWRGaWxlTmFtZShmaWxlUGFydCk7XG4gICAgICAgICAgICBpZiAoZmlsZU5hbWUgPT0gbnVsbCB8fCBmaWxlTmFtZS5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvYWRtaW4vY2F0ZWdvcmllcy5qc3A/ZXJyb3I9dHJ1ZSZtZXNzYWdlPUludmFsaWQrZmlsZStuYW1lXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgU3RyaW5nIGZpbGVFeHRlbnNpb24gPSBmaWxlTmFtZS5zdWJzdHJpbmcoZmlsZU5hbWUubGFzdEluZGV4T2YoXCIuXCIpKTtcbiAgICAgICAgICAgIFN0cmluZyBuZXdGaWxlTmFtZSA9IFwiY2F0ZWdvcnlfXCIgKyBjYXRlZ29yeUlkICsgZmlsZUV4dGVuc2lvbjtcblxuICAgICAgICAgICAgLy8gU2F2ZSB0aGUgZmlsZSB0byB0aGUgc2VydmVyXG4gICAgICAgICAgICBTdHJpbmcgcmVsYXRpdmVQYXRoID0gXCJpbWFnZXMvY2F0ZWdvcmllc1wiO1xuICAgICAgICAgICAgU3RyaW5nIHVwbG9hZFBhdGggPSByZXF1ZXN0LmdldFNlcnZsZXRDb250ZXh0KCkuZ2V0UmVhbFBhdGgoXCIvXCIpICsgcmVsYXRpdmVQYXRoICsgXCIvXCI7XG5cbiAgICAgICAgICAgIEZpbGUgdXBsb2FkRGlyID0gbmV3IEZpbGUodXBsb2FkUGF0aCk7XG4gICAgICAgICAgICBpZiAoIXVwbG9hZERpci5leGlzdHMoKSkge1xuICAgICAgICAgICAgICAgIHVwbG9hZERpci5ta2RpcnMoKTtcbiAgICAgICAgICAgIH1cbi4uLlxuXG4gICAgICAgIH0gY2F0Y2ggKE51bWJlckZvcm1hdEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvYWRtaW4vY2F0ZWdvcmllcy5qc3A/ZXJyb3I9dHJ1ZSZtZXNzYWdlPUludmFsaWQrY2F0ZWdvcnkrSURcIik7XG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvYWRtaW4vY2F0ZWdvcmllcy5qc3A/ZXJyb3I9dHJ1ZSZtZXNzYWdlPUVycm9yK3VwbG9hZGluZytpbWFnZTorXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIZWxwZXIgbWV0aG9kIHRvIGdldCB0aGUgc3VibWl0dGVkIGZpbGUgbmFtZSBmcm9tIGEgUGFydFxuICAgICAqL1xuICAgIHByaXZhdGUgU3RyaW5nIGdldFN1Ym1pdHRlZEZpbGVOYW1lKFBhcnQgcGFydCkge1xuICAgICAgICBmb3IgKFN0cmluZyBjb250ZW50IDogcGFydC5nZXRIZWFkZXIoXCJjb250ZW50LWRpc3Bvc2l0aW9uXCIpLnNwbGl0KFwiO1wiKSkge1xuICAgICAgICAgICAgaWYgKGNvbnRlbnQudHJpbSgpLnN0YXJ0c1dpdGgoXCJmaWxlbmFtZVwiKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb250ZW50LnN1YnN0cmluZyhjb250ZW50LmluZGV4T2YoJz0nKSArIDEpLnRyaW0oKS5yZXBsYWNlKFwiXFxcIlwiLCBcIlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG4uLi5cblBhdGg6IENsb3RoZWUvc3JjL21haW4vamF2YS9jb250cm9sbGVyL0NhdGVnb3J5SW1hZ2VTZXJ2bGV0LmphdmFcbnBhY2thZ2UgY29udHJvbGxlcjtcblxuaW1wb3J0IGphdmEuaW8uRmlsZTtcbmltcG9ydCBqYXZhLmlvLkZpbGVJbnB1dFN0cmVhbTtcbmltcG9ydCBqYXZhLmlvLkZpbGVPdXRwdXRTdHJlYW07XG5pbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjtcbmltcG9ydCBqYXZhLmlvLklucHV0U3RyZWFtO1xuaW1wb3J0IGphdmEuaW8uT3V0cHV0U3RyZWFtO1xuXG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0LlNlcnZsZXRFeGNlcHRpb247XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0LmFubm90YXRpb24uTXVsdGlwYXJ0Q29uZmlnO1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5odHRwLkh0dHBTZXJ2bGV0O1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5odHRwLkh0dHBTZXJ2bGV0UmVxdWVzdDtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuaHR0cC5IdHRwU2VydmxldFJlc3BvbnNlO1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5odHRwLlBhcnQ7XG5cbmltcG9ydCBkYW8uQ2F0ZWdvcnlEQU87XG5pbXBvcnQgbW9kZWwuQ2F0ZWdvcnk7XG5cblxuLyoqXG4gKiBTZXJ2bGV0IGZvciBoYW5kbGluZyBjYXRlZ29yeSBpbWFnZSB1cGxvYWRzXG4gKi9cbi8vIFNlcnZsZXQgbWFwcGluZyBkZWZpbmVkIGluIHdlYi54bWxcbkBNdWx0aXBhcnRDb25maWcoXG4gICAgZmlsZVNpemVUaHJlc2hvbGQgPSAxMDI0ICogMTAyNCwgLy8gMSBNQlxuICAgIG1heEZpbGVTaXplID0gMTAyNCAqIDEwMjQgKiAxMCwgIC8vIDEwIE1CXG4gICAgbWF4UmVxdWVzdFNpemUgPSAxMDI0ICogMTAyNCAqIDUwIC8vIDUwIE1CXG4pXG4uLi5cblxuICAgICAgICAgICAgLy8gR2V0IHRoZSBwZXJtYW5lbnQgcGF0aCB0byB0aGUgaW1hZ2VcbiAgICAgICAgICAgIFN0cmluZyB1c2VySG9tZSA9IFN5c3RlbS5nZXRQcm9wZXJ0eShcInVzZXIuaG9tZVwiKTtcbiAgICAgICAgICAgIFN0cmluZyBwZXJtYW5lbnRQYXRoID0gdXNlckhvbWUgKyBGaWxlLnNlcGFyYXRvciArIFwiQ2xvdGhlZUltYWdlc1wiICsgRmlsZS5zZXBhcmF0b3IgKyBpbWFnZVVybDtcbiAgICAgICAgICAgIEZpbGUgaW1hZ2VGaWxlID0gbmV3IEZpbGUocGVybWFuZW50UGF0aCk7XG5cbiAgICAgICAgICAgIGlmICghaW1hZ2VGaWxlLmV4aXN0cygpKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZEVycm9yKEh0dHBTZXJ2bGV0UmVzcG9uc2UuU0NfTk9UX0ZPVU5ELCBcIkltYWdlIGZpbGUgbm90IGZvdW5kXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gU2V0IGNvbnRlbnQgdHlwZSBiYXNlZCBvbiBmaWxlIGV4dGVuc2lvblxuICAgICAgICAgICAgU3RyaW5nIGZpbGVOYW1lID0gaW1hZ2VGaWxlLmdldE5hbWUoKTtcbiAgICAgICAgICAgIFN0cmluZyBjb250ZW50VHlwZSA9IFwiaW1hZ2UvanBlZ1wiOyAvLyBEZWZhdWx0XG5cbiAgICAgICAgICAgIGlmIChmaWxlTmFtZS5lbmRzV2l0aChcIi5wbmdcIikpIHtcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZSA9IFwiaW1hZ2UvcG5nXCI7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGZpbGVOYW1lLmVuZHNXaXRoKFwiLmdpZlwiKSkge1xuICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlID0gXCJpbWFnZS9naWZcIjtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZmlsZU5hbWUuZW5kc1dpdGgoXCIuanBnXCIpIHx8IGZpbGVOYW1lLmVuZHNXaXRoKFwiLmpwZWdcIikpIHtcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZSA9IFwiaW1hZ2UvanBlZ1wiO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXNwb25zZS5zZXRDb250ZW50VHlwZShjb250ZW50VHlwZSk7XG5cbiAgICAgICAgICAgIC8vIENvcHkgdGhlIGZpbGUgdG8gdGhlIHJlc3BvbnNlIG91dHB1dCBzdHJlYW1cbiAgICAgICAgICAgIHRyeSAoRmlsZUlucHV0U3RyZWFtIGluID0gbmV3IEZpbGVJbnB1dFN0cmVhbShpbWFnZUZpbGUpO1xuICAgICAgICAgICAgICAgICBPdXRwdXRTdHJlYW0gb3V0ID0gcmVzcG9uc2UuZ2V0T3V0cHV0U3RyZWFtKCkpIHtcblxuICAgICAgICAgICAgICAgIGJ5dGVbXSBidWZmZXIgPSBuZXcgYnl0ZVs0MDk2XTtcbiAgICAgICAgICAgICAgICBpbnQgYnl0ZXNSZWFkO1xuXG4gICAgICAgICAgICAgICAgd2hpbGUgKChieXRlc1JlYWQgPSBpbi5yZWFkKGJ1ZmZlcikpICE9IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIG91dC53cml0ZShidWZmZXIsIDAsIGJ5dGVzUmVhZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0gY2F0Y2ggKE51bWJlckZvcm1hdEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICByZXNwb25zZS5zZW5kRXJyb3IoSHR0cFNlcnZsZXRSZXNwb25zZS5TQ19CQURfUkVRVUVTVCwgXCJJbnZhbGlkIGNhdGVnb3J5IElEXCIpO1xuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZEVycm9yKEh0dHBTZXJ2bGV0UmVzcG9uc2UuU0NfSU5URVJOQUxfU0VSVkVSX0VSUk9SLCBcIkVycm9yIHNlcnZpbmcgaW1hZ2U6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICB9XG4gICAgfVxuLi4uXG5cbiAgICAgICAgICAgIFN0cmluZyBmaWxlRXh0ZW5zaW9uID0gZmlsZU5hbWUuc3Vic3RyaW5nKGZpbGVOYW1lLmxhc3RJbmRleE9mKFwiLlwiKSk7XG4gICAgICAgICAgICBTdHJpbmcgbmV3RmlsZU5hbWUgPSBcImNhdGVnb3J5X1wiICsgY2F0ZWdvcnlJZCArIGZpbGVFeHRlbnNpb247XG5cbiAgICAgICAgICAgIC8vIFNhdmUgdGhlIGZpbGUgdG8gYSBwZXJtYW5lbnQgbG9jYXRpb25cbiAgICAgICAgICAgIFN0cmluZyByZWxhdGl2ZVBhdGggPSBcImltYWdlcy9jYXRlZ29yaWVzXCI7XG5cbiAgICAgICAgICAgIC8vIEdldCB0aGUgcmVhbCBwYXRoIHRvIHRoZSB3ZWIgYXBwbGljYXRpb24gcm9vdCBkaXJlY3RvcnlcbiAgICAgICAgICAgIFN0cmluZyB3ZWJhcHBSb290ID0gcmVxdWVzdC5nZXRTZXJ2bGV0Q29udGV4dCgpLmdldFJlYWxQYXRoKFwiL1wiKTtcblxuICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBkZXBsb3ltZW50IGRpcmVjdG9yeSBwYXRoXG4gICAgICAgICAgICBTdHJpbmcgZGVwbG95bWVudFBhdGggPSB3ZWJhcHBSb290ICsgcmVsYXRpdmVQYXRoO1xuXG4gICAgICAgICAgICAvLyBFbnN1cmUgZGVwbG95bWVudCBkaXJlY3RvcnkgZXhpc3RzXG4gICAgICAgICAgICBGaWxlIGRlcGxveW1lbnREaXIgPSBuZXcgRmlsZShkZXBsb3ltZW50UGF0aCk7XG4gICAgICAgICAgICBpZiAoIWRlcGxveW1lbnREaXIuZXhpc3RzKCkpIHtcbiAgICAgICAgICAgICAgICBib29sZWFuIGNyZWF0ZWQgPSBkZXBsb3ltZW50RGlyLm1rZGlycygpO1xuICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNhdGVnb3J5SW1hZ2VTZXJ2bGV0IC0gQ3JlYXRlZCBkZXBsb3ltZW50IGRpcmVjdG9yeTogXCIgKyBjcmVhdGVkKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gR2V0IHRoZSBwZXJtYW5lbnQgcGF0aCAocGVyc2lzdHMgYWNyb3NzIHNlcnZlciByZXN0YXJ0cylcbiAgICAgICAgICAgIFN0cmluZyBwZXJtYW5lbnRQYXRoID0gZ2V0UGVybWFuZW50UGF0aCh3ZWJhcHBSb290LCByZWxhdGl2ZVBhdGgpO1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQ2F0ZWdvcnlJbWFnZVNlcnZsZXQgLSBQZXJtYW5lbnQgcGF0aDogXCIgKyBwZXJtYW5lbnRQYXRoKTtcblxuICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBwZXJtYW5lbnQgZGlyZWN0b3J5IGlmIGl0IGRvZXNuJ3QgZXhpc3RcbiAgICAgICAgICAgIGJvb2xlYW4gZGlyQ3JlYXRlZCA9IGVuc3VyZURpcmVjdG9yeUV4aXN0cyhwZXJtYW5lbnRQYXRoKTtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNhdGVnb3J5SW1hZ2VTZXJ2bGV0IC0gQ3JlYXRlZCBwZXJtYW5lbnQgZGlyZWN0b3J5OiBcIiArIGRpckNyZWF0ZWQpO1xuXG4gICAgICAgICAgICAvLyBXcml0ZSB0aGUgZmlsZSB0byBkZXBsb3ltZW50IHBhdGhcbiAgICAgICAgICAgIFN0cmluZyBkZXBsb3ltZW50RmlsZVBhdGggPSBkZXBsb3ltZW50UGF0aCArIFwiL1wiICsgbmV3RmlsZU5hbWU7XG4gICAgICAgICAgICBmaWxlUGFydC53cml0ZShkZXBsb3ltZW50RmlsZVBhdGgpO1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQ2F0ZWdvcnlJbWFnZVNlcnZsZXQgLSBJbWFnZSBzYXZlZCB0byBkZXBsb3ltZW50IHBhdGg6IFwiICsgZGVwbG95bWVudEZpbGVQYXRoKTtcbi4uLlxuXG4gICAgICAgICAgICAvLyBVcGRhdGUgY2F0ZWdvcnkgaW1hZ2UgVVJMIGluIGRhdGFiYXNlXG4gICAgICAgICAgICBib29sZWFuIHN1Y2Nlc3MgPSBjYXRlZ29yeURBTy51cGRhdGVDYXRlZ29yeUltYWdlKGNhdGVnb3J5SWQsIGltYWdlVXJsKTtcblxuICAgICAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvYWRtaW4vY2F0ZWdvcmllcy5qc3A/c3VjY2Vzcz10cnVlJm1lc3NhZ2U9Q2F0ZWdvcnkraW1hZ2UrdXBkYXRlZCtzdWNjZXNzZnVsbHlcIik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9hZG1pbi9jYXRlZ29yaWVzLmpzcD9lcnJvcj10cnVlJm1lc3NhZ2U9RmFpbGVkK3RvK3VwZGF0ZStjYXRlZ29yeStpbWFnZVwiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9IGNhdGNoIChOdW1iZXJGb3JtYXRFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL2FkbWluL2NhdGVnb3JpZXMuanNwP2Vycm9yPXRydWUmbWVzc2FnZT1JbnZhbGlkK2NhdGVnb3J5K0lEXCIpO1xuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL2FkbWluL2NhdGVnb3JpZXMuanNwP2Vycm9yPXRydWUmbWVzc2FnZT1FcnJvcit1cGxvYWRpbmcraW1hZ2U6K1wiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICB9XG4gICAgfVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbnRyb2xsZXIvSW1hZ2VEb3dubG9hZFNlcnZsZXQuamF2YVxuLi4uXG5cbi8qKlxuICogU2VydmxldCBpbXBsZW1lbnRhdGlvbiBjbGFzcyBJbWFnZURvd25sb2FkU2VydmxldFxuICogRG93bmxvYWRzIHByb2R1Y3QgaW1hZ2VzIGZyb20gVVJMcyBhbmQgc2F2ZXMgdGhlbSB0byB0aGUgYXBwcm9wcmlhdGUgZGlyZWN0b3JpZXNcbiAqL1xuLy8gU2VydmxldCBtYXBwaW5nIGRlZmluZWQgaW4gd2ViLnhtbFxucHVibGljIGNsYXNzIEltYWdlRG93bmxvYWRTZXJ2bGV0IGV4dGVuZHMgSHR0cFNlcnZsZXQge1xuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIGxvbmcgc2VyaWFsVmVyc2lvblVJRCA9IDFMO1xuXG4gICAgLy8gSW1hZ2UgVVJMcyBmb3IgZGlmZmVyZW50IGNhdGVnb3JpZXNcbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBNYXA8U3RyaW5nLCBMaXN0PFN0cmluZz4+IElNQUdFX1VSTFMgPSBuZXcgSGFzaE1hcDw+KCk7XG5cbiAgICBzdGF0aWMge1xuICAgICAgICAvLyBNZW4ncyBjYXRlZ29yeSBpbWFnZXNcbiAgICAgICAgTGlzdDxTdHJpbmc+IG1lbkltYWdlcyA9IG5ldyBBcnJheUxpc3Q8PigpO1xuICAgICAgICBtZW5JbWFnZXMuYWRkKFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE2MTcxMzc5Njg0MjctODU5MjRjODAwYTIyP3E9ODAmdz0xOTc0JmF1dG89Zm9ybWF0JmZpdD1jcm9wXCIpO1xuICAgICAgICBtZW5JbWFnZXMuYWRkKFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1NzY1NjY1ODgwMjgtNDE0N2YzODQyZjI3P3E9ODAmdz0xOTY0JmF1dG89Zm9ybWF0JmZpdD1jcm9wXCIpO1xuICAgICAgICBtZW5JbWFnZXMuYWRkKFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE2MDAyNjk0NTIxMjEtNGYyNDE2ZTU1YzI4P3E9ODAmdz0xOTY1JmF1dG89Zm9ybWF0JmZpdD1jcm9wXCIpO1xuICAgICAgICBtZW5JbWFnZXMuYWRkKFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE2MTEzMTI0NDk0MDgtZmNlY2UyN2NkYmI3P3E9ODAmdz0xOTY5JmF1dG89Zm9ybWF0JmZpdD1jcm9wXCIpO1xuICAgICAgICBtZW5JbWFnZXMuYWRkKFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1OTMwMzA3NjE3NTctNzFmYWU0NWZhMGU3P3E9ODAmdz0xOTc0JmF1dG89Zm9ybWF0JmZpdD1jcm9wXCIpO1xuICAgICAgICBJTUFHRV9VUkxTLnB1dChcIm1lblwiLCBtZW5JbWFnZXMpO1xuLi4uXG5cbiAgICAvKipcbiAgICAgKiBAc2VlIEh0dHBTZXJ2bGV0I0h0dHBTZXJ2bGV0KClcbiAgICAgKi9cbiAgICBwdWJsaWMgSW1hZ2VEb3dubG9hZFNlcnZsZXQoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHNlZSBIdHRwU2VydmxldCNkb0dldChIdHRwU2VydmxldFJlcXVlc3QgcmVxdWVzdCwgSHR0cFNlcnZsZXRSZXNwb25zZSByZXNwb25zZSlcbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgdm9pZCBkb0dldChIdHRwU2VydmxldFJlcXVlc3QgcmVxdWVzdCwgSHR0cFNlcnZsZXRSZXNwb25zZSByZXNwb25zZSkgdGhyb3dzIFNlcnZsZXRFeGNlcHRpb24sIElPRXhjZXB0aW9uIHtcbiAgICAgICAgSHR0cFNlc3Npb24gc2Vzc2lvbiA9IHJlcXVlc3QuZ2V0U2Vzc2lvbigpO1xuICAgICAgICBVc2VyIHVzZXIgPSAoVXNlcikgc2Vzc2lvbi5nZXRBdHRyaWJ1dGUoXCJ1c2VyXCIpO1xuXG4gICAgICAgIC8vIENoZWNrIGlmIHVzZXIgaXMgbG9nZ2VkIGluIGFuZCBpcyBhZG1pblxuICAgICAgICBpZiAodXNlciA9PSBudWxsIHx8ICF1c2VyLmlzQWRtaW4oKSkge1xuICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KFwiTG9naW5TZXJ2bGV0XCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgU3RyaW5nIGFjdGlvbiA9IHJlcXVlc3QuZ2V0UGFyYW1ldGVyKFwiYWN0aW9uXCIpO1xuXG4gICAgICAgIGlmIChhY3Rpb24gPT0gbnVsbCkge1xuICAgICAgICAgICAgLy8gU2hvdyBkb3dubG9hZCBwYWdlXG4gICAgICAgICAgICByZXF1ZXN0LmdldFJlcXVlc3REaXNwYXRjaGVyKFwiL2FkbWluL2Rvd25sb2FkLWltYWdlcy5qc3BcIikuZm9yd2FyZChyZXF1ZXN0LCByZXNwb25zZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXCJkb3dubG9hZFwiLmVxdWFscyhhY3Rpb24pKSB7XG4gICAgICAgICAgICAvLyBEb3dubG9hZCBpbWFnZXNcbiAgICAgICAgICAgIFN0cmluZyBjYXRlZ29yeSA9IHJlcXVlc3QuZ2V0UGFyYW1ldGVyKFwiY2F0ZWdvcnlcIik7XG5cbiAgICAgICAgICAgIGlmIChjYXRlZ29yeSA9PSBudWxsIHx8IGNhdGVnb3J5LmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgIC8vIERvd25sb2FkIGFsbCBjYXRlZ29yaWVzXG4gICAgICAgICAgICAgICAgZm9yIChTdHJpbmcgY2F0IDogSU1BR0VfVVJMUy5rZXlTZXQoKSkge1xuICAgICAgICAgICAgICAgICAgICBkb3dubG9hZEltYWdlcyhjYXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzZXNzaW9uLnNldEF0dHJpYnV0ZShcInN1Y2Nlc3NNZXNzYWdlXCIsIFwiQWxsIGltYWdlcyBkb3dubG9hZGVkIHN1Y2Nlc3NmdWxseVwiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gRG93bmxvYWQgc3BlY2lmaWMgY2F0ZWdvcnlcbiAgICAgICAgICAgICAgICBpZiAoSU1BR0VfVVJMUy5jb250YWluc0tleShjYXRlZ29yeSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRJbWFnZXMoY2F0ZWdvcnkpO1xuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uLnNldEF0dHJpYnV0ZShcInN1Y2Nlc3NNZXNzYWdlXCIsIGNhdGVnb3J5ICsgXCIgaW1hZ2VzIGRvd25sb2FkZWQgc3VjY2Vzc2Z1bGx5XCIpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb24uc2V0QXR0cmlidXRlKFwiZXJyb3JNZXNzYWdlXCIsIFwiSW52YWxpZCBjYXRlZ29yeTogXCIgKyBjYXRlZ29yeSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QoXCJJbWFnZURvd25sb2FkU2VydmxldFwiKTtcbiAgICAgICAgfVxuICAgIH1cbi4uLlxuXG4gICAgLyoqXG4gICAgICogRG93bmxvYWQgaW1hZ2VzIGZvciBhIHNwZWNpZmljIGNhdGVnb3J5XG4gICAgICogQHBhcmFtIGNhdGVnb3J5IENhdGVnb3J5IHRvIGRvd25sb2FkIGltYWdlcyBmb3JcbiAgICAgKi9cbiAgICBwcml2YXRlIHZvaWQgZG93bmxvYWRJbWFnZXMoU3RyaW5nIGNhdGVnb3J5KSB7XG4gICAgICAgIExpc3Q8U3RyaW5nPiB1cmxzID0gSU1BR0VfVVJMUy5nZXQoY2F0ZWdvcnkpO1xuXG4gICAgICAgIGlmICh1cmxzID09IG51bGwgfHwgdXJscy5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIFN0cmluZyBiYXNlUGF0aCA9IGdldFNlcnZsZXRDb250ZXh0KCkuZ2V0UmVhbFBhdGgoXCIvaW1hZ2VzL3Byb2R1Y3RzL1wiICsgY2F0ZWdvcnkpO1xuICAgICAgICBGaWxlIGJhc2VEaXIgPSBuZXcgRmlsZShiYXNlUGF0aCk7XG5cbiAgICAgICAgaWYgKCFiYXNlRGlyLmV4aXN0cygpKSB7XG4gICAgICAgICAgICBiYXNlRGlyLm1rZGlycygpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCB1cmxzLnNpemUoKTsgaSsrKSB7XG4gICAgICAgICAgICBTdHJpbmcgdXJsID0gdXJscy5nZXQoaSk7XG4gICAgICAgICAgICBTdHJpbmcgZmlsZU5hbWUgPSBjYXRlZ29yeSArIChpICsgMSkgKyBcIi5qcGdcIjtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBkb3dubG9hZEltYWdlKHVybCwgbmV3IEZpbGUoYmFzZURpciwgZmlsZU5hbWUpKTtcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJEb3dubG9hZGVkOiBcIiArIGZpbGVOYW1lKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKElPRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgICAgICBTeXN0ZW0uZXJyLnByaW50bG4oXCJFcnJvciBkb3dubG9hZGluZyBcIiArIGZpbGVOYW1lICsgXCI6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuLi4uXG5QYXRoOiBDbG90aGVlL3NyYy9tYWluL2phdmEvY29udHJvbGxlci9JbWFnZURvd25sb2FkU2VydmxldC5qYXZhXG4uLi5cblxuLyoqXG4gKiBTZXJ2bGV0IGltcGxlbWVudGF0aW9uIGNsYXNzIEltYWdlRG93bmxvYWRTZXJ2bGV0XG4gKiBEb3dubG9hZHMgcHJvZHVjdCBpbWFnZXMgZnJvbSBVUkxzIGFuZCBzYXZlcyB0aGVtIHRvIHRoZSBhcHByb3ByaWF0ZSBkaXJlY3Rvcmllc1xuICovXG4vLyBTZXJ2bGV0IG1hcHBpbmcgZGVmaW5lZCBpbiB3ZWIueG1sXG5wdWJsaWMgY2xhc3MgSW1hZ2VEb3dubG9hZFNlcnZsZXQgZXh0ZW5kcyBIdHRwU2VydmxldCB7XG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgbG9uZyBzZXJpYWxWZXJzaW9uVUlEID0gMUw7XG5cbiAgICAvLyBJbWFnZSBVUkxzIGZvciBkaWZmZXJlbnQgY2F0ZWdvcmllc1xuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIE1hcDxTdHJpbmcsIExpc3Q8U3RyaW5nPj4gSU1BR0VfVVJMUyA9IG5ldyBIYXNoTWFwPD4oKTtcbi4uLlxuXG4gICAgLyoqXG4gICAgICogRG93bmxvYWQgaW1hZ2VzIGZvciBhIHNwZWNpZmljIGNhdGVnb3J5XG4gICAgICogQHBhcmFtIGNhdGVnb3J5IENhdGVnb3J5IHRvIGRvd25sb2FkIGltYWdlcyBmb3JcbiAgICAgKi9cbiAgICBwcml2YXRlIHZvaWQgZG93bmxvYWRJbWFnZXMoU3RyaW5nIGNhdGVnb3J5KSB7XG4gICAgICAgIExpc3Q8U3RyaW5nPiB1cmxzID0gSU1BR0VfVVJMUy5nZXQoY2F0ZWdvcnkpO1xuXG4gICAgICAgIGlmICh1cmxzID09IG51bGwgfHwgdXJscy5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIFN0cmluZyBiYXNlUGF0aCA9IGdldFNlcnZsZXRDb250ZXh0KCkuZ2V0UmVhbFBhdGgoXCIvaW1hZ2VzL3Byb2R1Y3RzL1wiICsgY2F0ZWdvcnkpO1xuICAgICAgICBGaWxlIGJhc2VEaXIgPSBuZXcgRmlsZShiYXNlUGF0aCk7XG5cbiAgICAgICAgaWYgKCFiYXNlRGlyLmV4aXN0cygpKSB7XG4gICAgICAgICAgICBiYXNlRGlyLm1rZGlycygpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCB1cmxzLnNpemUoKTsgaSsrKSB7XG4gICAgICAgICAgICBTdHJpbmcgdXJsID0gdXJscy5nZXQoaSk7XG4gICAgICAgICAgICBTdHJpbmcgZmlsZU5hbWUgPSBjYXRlZ29yeSArIChpICsgMSkgKyBcIi5qcGdcIjtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBkb3dubG9hZEltYWdlKHVybCwgbmV3IEZpbGUoYmFzZURpciwgZmlsZU5hbWUpKTtcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJEb3dubG9hZGVkOiBcIiArIGZpbGVOYW1lKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKElPRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgICAgICBTeXN0ZW0uZXJyLnByaW50bG4oXCJFcnJvciBkb3dubG9hZGluZyBcIiArIGZpbGVOYW1lICsgXCI6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuLi4uXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCJkOTVhYjYxNi00ZTI0LTQwYjgtYWQxNy02ZDI1MzQ3NzliN2U7dG9vbHVfdnJ0eF8wMUtieEZ1Q3B2VnJib2pweXNzUk50WmoiOnsicmVxdWVzdElkIjoiZDk1YWI2MTYtNGUyNC00MGI4LWFkMTctNmQyNTM0Nzc5YjdlIiwidG9vbFVzZUlkIjoidG9vbHVfdnJ0eF8wMUtieEZ1Q3B2VnJib2pweXNzUk50WmoiLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJUaGUgZm9sbG93aW5nIGNvZGUgc2VjdGlvbnMgd2VyZSByZXRyaWV2ZWQ6XG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NlcnZpY2UvUHJvZHVjdEltYWdlU2VydmljZS5qYXZhXG5wYWNrYWdlIHNlcnZpY2U7XG5cbmltcG9ydCBqYXZhLmlvLkZpbGU7XG5pbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuaHR0cC5QYXJ0O1xuXG5pbXBvcnQgZGFvLlByb2R1Y3REQU87XG5pbXBvcnQgbW9kZWwuUHJvZHVjdDtcblxuLyoqXG4gKiBTZXJ2aWNlIGNsYXNzIGZvciBoYW5kbGluZyBwcm9kdWN0IGltYWdlIG9wZXJhdGlvbnNcbiAqL1xucHVibGljIGNsYXNzIFByb2R1Y3RJbWFnZVNlcnZpY2Uge1xuICAgIHByaXZhdGUgUHJvZHVjdERBTyBwcm9kdWN0REFPO1xuICAgIHByaXZhdGUgUHJvZHVjdFNlcnZpY2UgcHJvZHVjdFNlcnZpY2U7XG5cbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIHB1YmxpYyBQcm9kdWN0SW1hZ2VTZXJ2aWNlKCkge1xuICAgICAgICB0aGlzLnByb2R1Y3REQU8gPSBuZXcgUHJvZHVjdERBTygpO1xuICAgICAgICB0aGlzLnByb2R1Y3RTZXJ2aWNlID0gbmV3IFByb2R1Y3RTZXJ2aWNlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBsb2FkIGEgcHJvZHVjdCBpbWFnZVxuICAgICAqIEBwYXJhbSBwcm9kdWN0SWQgUHJvZHVjdCBJRFxuICAgICAqIEBwYXJhbSBmaWxlUGFydCBGaWxlIHBhcnQgZnJvbSBtdWx0aXBhcnQgcmVxdWVzdFxuICAgICAqIEBwYXJhbSB1cGxvYWRQYXRoIEJhc2UgdXBsb2FkIHBhdGhcbiAgICAgKiBAcmV0dXJuIEltYWdlIFVSTCBpZiBzdWNjZXNzZnVsLCBudWxsIG90aGVyd2lzZVxuICAgICAqIEB0aHJvd3MgSU9FeGNlcHRpb24gSWYgYW4gSS9PIGVycm9yIG9jY3Vyc1xuICAgICAqL1xuICAgIHB1YmxpYyBTdHJpbmcgdXBsb2FkUHJvZHVjdEltYWdlKGludCBwcm9kdWN0SWQsIFBhcnQgZmlsZVBhcnQsIFN0cmluZyB1cGxvYWRQYXRoKSB0aHJvd3MgSU9FeGNlcHRpb24ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gR2V0IHByb2R1Y3QgZnJvbSBkYXRhYmFzZVxuICAgICAgICAgICAgUHJvZHVjdCBwcm9kdWN0ID0gcHJvZHVjdFNlcnZpY2UuZ2V0UHJvZHVjdEJ5SWQocHJvZHVjdElkKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHByb2R1Y3QgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBQcm9jZXNzIHRoZSB1cGxvYWRlZCBmaWxlXG4gICAgICAgICAgICBTdHJpbmcgZmlsZU5hbWUgPSBnZXRTdWJtaXR0ZWRGaWxlTmFtZShmaWxlUGFydCk7XG4gICAgICAgICAgICBpZiAoZmlsZU5hbWUgPT0gbnVsbCB8fCBmaWxlTmFtZS5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgU3RyaW5nIGZpbGVFeHRlbnNpb24gPSBmaWxlTmFtZS5zdWJzdHJpbmcoZmlsZU5hbWUubGFzdEluZGV4T2YoXCIuXCIpKTtcbiAgICAgICAgICAgIFN0cmluZyBuZXdGaWxlTmFtZSA9IFwicHJvZHVjdF9cIiArIHByb2R1Y3RJZCArIGZpbGVFeHRlbnNpb247XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIENyZWF0ZSBkaXJlY3Rvcnkgc3RydWN0dXJlIGJhc2VkIG9uIHByb2R1Y3QgY2F0ZWdvcnlcbiAgICAgICAgICAgIFN0cmluZyBjYXRlZ29yeVBhdGggPSBwcm9kdWN0LmdldENhdGVnb3J5KCkudG9Mb3dlckNhc2UoKS5yZXBsYWNlKFwiIFwiLCBcIl9cIik7XG4gICAgICAgICAgICBTdHJpbmcgdHlwZVBhdGggPSBwcm9kdWN0LmdldFR5cGUoKSAhPSBudWxsID8gcHJvZHVjdC5nZXRUeXBlKCkudG9Mb3dlckNhc2UoKS5yZXBsYWNlKFwiIFwiLCBcIl9cIikgOiBcImdlbmVyYWxcIjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBmdWxsIHBhdGhcbiAgICAgICAgICAgIFN0cmluZyByZWxhdGl2ZVBhdGggPSBcImltYWdlcy9wcm9kdWN0cy9cIiArIGNhdGVnb3J5UGF0aCArIFwiL1wiICsgdHlwZVBhdGg7XG4gICAgICAgICAgICBTdHJpbmcgZnVsbFVwbG9hZFBhdGggPSB1cGxvYWRQYXRoICsgcmVsYXRpdmVQYXRoICsgXCIvXCI7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIENyZWF0ZSBkaXJlY3RvcmllcyBpZiB0aGV5IGRvbid0IGV4aXN0XG4gICAgICAgICAgICBGaWxlIHVwbG9hZERpciA9IG5ldyBGaWxlKGZ1bGxVcGxvYWRQYXRoKTtcbiAgICAgICAgICAgIGlmICghdXBsb2FkRGlyLmV4aXN0cygpKSB7XG4gICAgICAgICAgICAgICAgdXBsb2FkRGlyLm1rZGlycygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBXcml0ZSB0aGUgZmlsZVxuICAgICAgICAgICAgZmlsZVBhcnQud3JpdGUoZnVsbFVwbG9hZFBhdGggKyBuZXdGaWxlTmFtZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFJldHVybiB0aGUgcmVsYXRpdmUgcGF0aCB0byB0aGUgaW1hZ2VcbiAgICAgICAgICAgIHJldHVybiByZWxhdGl2ZVBhdGggKyBcIi9cIiArIG5ld0ZpbGVOYW1lO1xuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRXJyb3IgaW4gdXBsb2FkUHJvZHVjdEltYWdlOiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBVcGRhdGUgcHJvZHVjdCBpbWFnZSBVUkwgaW4gZGF0YWJhc2VcbiAgICAgKiBAcGFyYW0gcHJvZHVjdElkIFByb2R1Y3QgSURcbiAgICAgKiBAcGFyYW0gaW1hZ2VVcmwgSW1hZ2UgVVJMXG4gICAgICogQHJldHVybiB0cnVlIGlmIHN1Y2Nlc3NmdWwsIGZhbHNlIG90aGVyd2lzZVxuICAgICAqL1xuICAgIHB1YmxpYyBib29sZWFuIHVwZGF0ZVByb2R1Y3RJbWFnZVVybChpbnQgcHJvZHVjdElkLCBTdHJpbmcgaW1hZ2VVcmwpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBwcm9kdWN0REFPLnVwZGF0ZVByb2R1Y3RJbWFnZShwcm9kdWN0SWQsIGltYWdlVXJsKTtcbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkVycm9yIGluIHVwZGF0ZVByb2R1Y3RJbWFnZVVybDogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIEhlbHBlciBtZXRob2QgdG8gZ2V0IHRoZSBzdWJtaXR0ZWQgZmlsZSBuYW1lIGZyb20gYSBQYXJ0XG4gICAgICovXG4gICAgcHJpdmF0ZSBTdHJpbmcgZ2V0U3VibWl0dGVkRmlsZU5hbWUoUGFydCBwYXJ0KSB7XG4gICAgICAgIGZvciAoU3RyaW5nIGNvbnRlbnQgOiBwYXJ0LmdldEhlYWRlcihcImNvbnRlbnQtZGlzcG9zaXRpb25cIikuc3BsaXQoXCI7XCIpKSB7XG4gICAgICAgICAgICBpZiAoY29udGVudC50cmltKCkuc3RhcnRzV2l0aChcImZpbGVuYW1lXCIpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQuc3Vic3RyaW5nKGNvbnRlbnQuaW5kZXhPZignPScpICsgMSkudHJpbSgpLnJlcGxhY2UoXCJcXFwiXCIsIFwiXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cbi4uLlxuUGF0aDogQ2xvdGhlZS9zcmMvbWFpbi9qYXZhL3NlcnZpY2UvUHJvZHVjdEltYWdlU2VydmljZS5qYXZhXG4uLi5cblxuICAgIC8qKlxuICAgICAqIFVwbG9hZCBhIHByb2R1Y3QgaW1hZ2VcbiAgICAgKiBAcGFyYW0gcHJvZHVjdElkIFByb2R1Y3QgSURcbiAgICAgKiBAcGFyYW0gZmlsZVBhcnQgRmlsZSBwYXJ0IGZyb20gbXVsdGlwYXJ0IHJlcXVlc3RcbiAgICAgKiBAcGFyYW0gdXBsb2FkUGF0aCBCYXNlIHVwbG9hZCBwYXRoXG4gICAgICogQHJldHVybiBJbWFnZSBVUkwgaWYgc3VjY2Vzc2Z1bCwgbnVsbCBvdGhlcndpc2VcbiAgICAgKiBAdGhyb3dzIElPRXhjZXB0aW9uIElmIGFuIEkvTyBlcnJvciBvY2N1cnNcbiAgICAgKi9cbiAgICBwdWJsaWMgU3RyaW5nIHVwbG9hZFByb2R1Y3RJbWFnZShpbnQgcHJvZHVjdElkLCBqYWthcnRhLnNlcnZsZXQuaHR0cC5QYXJ0IGZpbGVQYXJ0LCBTdHJpbmcgdXBsb2FkUGF0aCkgdGhyb3dzIElPRXhjZXB0aW9uIHtcbiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiXFxuXFxuXFxuUHJvZHVjdEltYWdlU2VydmljZSAtIHVwbG9hZFByb2R1Y3RJbWFnZSBjYWxsZWQgZm9yIHByb2R1Y3QgSUQ6IFwiICsgcHJvZHVjdElkICsgXCJcXG5cXG5cXG5cIik7XG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlByb2R1Y3RJbWFnZVNlcnZpY2UgLSBGaWxlIHBhcnQgbmFtZTogXCIgKyBmaWxlUGFydC5nZXROYW1lKCkpO1xuICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJQcm9kdWN0SW1hZ2VTZXJ2aWNlIC0gRmlsZSBwYXJ0IHNpemU6IFwiICsgZmlsZVBhcnQuZ2V0U2l6ZSgpKTtcbiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiUHJvZHVjdEltYWdlU2VydmljZSAtIFVwbG9hZCBwYXRoOiBcIiArIHVwbG9hZFBhdGgpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gR2V0IHByb2R1Y3QgZnJvbSBkYXRhYmFzZVxuLi4uXG5cbiAgICAgICAgICAgIFN0cmluZyBmaWxlRXh0ZW5zaW9uID0gZmlsZU5hbWUuc3Vic3RyaW5nKGZpbGVOYW1lLmxhc3RJbmRleE9mKFwiLlwiKSk7XG4gICAgICAgICAgICBTdHJpbmcgbmV3RmlsZU5hbWUgPSBcInByb2R1Y3RfXCIgKyBwcm9kdWN0SWQgKyBmaWxlRXh0ZW5zaW9uO1xuXG4gICAgICAgICAgICAvLyBDcmVhdGUgYSBzaW1wbGVyIGRpcmVjdG9yeSBzdHJ1Y3R1cmVcbiAgICAgICAgICAgIFN0cmluZyByZWxhdGl2ZVBhdGggPSBcImltYWdlcy9wcm9kdWN0c1wiO1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiUHJvZHVjdEltYWdlU2VydmljZSAtIFJlbGF0aXZlIHBhdGg6IFwiICsgcmVsYXRpdmVQYXRoKTtcblxuICAgICAgICAgICAgLy8gRW5zdXJlIHRoZSBkaXJlY3RvcnkgZXhpc3RzXG4gICAgICAgICAgICBTdHJpbmcgZnVsbFBhdGggPSB1cGxvYWRQYXRoICsgRmlsZS5zZXBhcmF0b3IgKyByZWxhdGl2ZVBhdGg7XG4gICAgICAgICAgICBGaWxlIGRpciA9IG5ldyBGaWxlKGZ1bGxQYXRoKTtcbiAgICAgICAgICAgIGlmICghZGlyLmV4aXN0cygpKSB7XG4gICAgICAgICAgICAgICAgYm9vbGVhbiBjcmVhdGVkID0gZGlyLm1rZGlycygpO1xuICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlByb2R1Y3RJbWFnZVNlcnZpY2UgLSBDcmVhdGVkIGRpcmVjdG9yeTogXCIgKyBjcmVhdGVkICsgXCIgYXQgXCIgKyBmdWxsUGF0aCk7XG4gICAgICAgICAgICB9XG4uLi5cblxuICAgICAgICAgICAgLy8gR2V0IHRoZSBwZXJtYW5lbnQgcGF0aCAocGVyc2lzdHMgYWNyb3NzIHNlcnZlciByZXN0YXJ0cylcbiAgICAgICAgICAgIFN0cmluZyBwZXJtYW5lbnRQYXRoID0gZ2V0UGVybWFuZW50UGF0aCh1cGxvYWRQYXRoLCByZWxhdGl2ZVBhdGgpO1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiUHJvZHVjdEltYWdlU2VydmljZSAtIFBlcm1hbmVudCBwYXRoOiBcIiArIHBlcm1hbmVudFBhdGgpO1xuXG4gICAgICAgICAgICAvLyBDcmVhdGUgdGhlIHBlcm1hbmVudCBkaXJlY3RvcnkgaWYgaXQgZG9lc24ndCBleGlzdFxuICAgICAgICAgICAgYm9vbGVhbiBkaXJDcmVhdGVkID0gZW5zdXJlRGlyZWN0b3J5RXhpc3RzKHBlcm1hbmVudFBhdGgpO1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiUHJvZHVjdEltYWdlU2VydmljZSAtIENyZWF0ZWQgcGVybWFuZW50IGRpcmVjdG9yeTogXCIgKyBkaXJDcmVhdGVkKTtcblxuICAgICAgICAgICAgLy8gQ3JlYXRlIGEgc2ltcGxlciBmaWxlIHBhdGhcbiAgICAgICAgICAgIFN0cmluZyBkZXBsb3ltZW50RmlsZVBhdGggPSBkZXBsb3ltZW50UGF0aCArIFwiL1wiICsgbmV3RmlsZU5hbWU7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJQcm9kdWN0SW1hZ2VTZXJ2aWNlIC0gRGVwbG95bWVudCBmaWxlIHBhdGg6IFwiICsgZGVwbG95bWVudEZpbGVQYXRoKTtcblxuICAgICAgICAgICAgLy8gRGlyZWN0b3J5IGV4aXN0ZW5jZSB3YXMgYWxyZWFkeSBjaGVja2VkIGFib3ZlLCBubyBuZWVkIHRvIGNoZWNrIGFnYWluXG4uLi5cblxuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiUHJvZHVjdEltYWdlU2VydmljZSAtIERlcGxveW1lbnQgZmlsZSBleGlzdHM6IFwiICsgZGVwbG95bWVudEZpbGUuZXhpc3RzKCkpO1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiUHJvZHVjdEltYWdlU2VydmljZSAtIERlcGxveW1lbnQgZmlsZSBzaXplOiBcIiArIGRlcGxveW1lbnRGaWxlLmxlbmd0aCgpICsgXCIgYnl0ZXNcIik7XG5cbiAgICAgICAgICAgIC8vIFJldHVybiB0aGUgcmVsYXRpdmUgcGF0aCB0byB0aGUgaW1hZ2VcbiAgICAgICAgICAgIC8vIEFsd2F5cyB1c2UgZm9yd2FyZCBzbGFzaGVzIGZvciBVUkxzLCByZWdhcmRsZXNzIG9mIHRoZSBvcGVyYXRpbmcgc3lzdGVtXG4gICAgICAgICAgICBTdHJpbmcgaW1hZ2VVcmwgPSByZWxhdGl2ZVBhdGgucmVwbGFjZShcIlxcXFxcIiwgXCIvXCIpICsgXCIvXCIgKyBuZXdGaWxlTmFtZTtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlByb2R1Y3RJbWFnZVNlcnZpY2UgLSBGaW5hbCBpbWFnZSBVUkw6IFwiICsgaW1hZ2VVcmwpO1xuXG4gICAgICAgICAgICAvLyBVcGRhdGUgdGhlIHByb2R1Y3Qgd2l0aCB0aGUgbmV3IGltYWdlIFVSTCBpbW1lZGlhdGVseVxuICAgICAgICAgICAgYm9vbGVhbiB1cGRhdGVkID0gdXBkYXRlUHJvZHVjdEltYWdlVXJsKHByb2R1Y3RJZCwgaW1hZ2VVcmwpO1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiUHJvZHVjdEltYWdlU2VydmljZSAtIFByb2R1Y3QgdXBkYXRlZCB3aXRoIG5ldyBpbWFnZSBVUkw6IFwiICsgdXBkYXRlZCk7XG5cbiAgICAgICAgICAgIHJldHVybiBpbWFnZVVybDtcbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkVycm9yIGluIHVwbG9hZFByb2R1Y3RJbWFnZTogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgcHJvZHVjdCBpbWFnZSBVUkwgaW4gZGF0YWJhc2VcbiAgICAgKiBAcGFyYW0gcHJvZHVjdElkIFByb2R1Y3QgSURcbiAgICAgKiBAcGFyYW0gaW1hZ2VVcmwgSW1hZ2UgVVJMXG4gICAgICogQHJldHVybiB0cnVlIGlmIHN1Y2Nlc3NmdWwsIGZhbHNlIG90aGVyd2lzZVxuICAgICAqL1xuICAgIHB1YmxpYyBib29sZWFuIHVwZGF0ZVByb2R1Y3RJbWFnZVVybChpbnQgcHJvZHVjdElkLCBTdHJpbmcgaW1hZ2VVcmwpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBwcm9kdWN0REFPLnVwZGF0ZVByb2R1Y3RJbWFnZShwcm9kdWN0SWQsIGltYWdlVXJsKTtcbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkVycm9yIGluIHVwZGF0ZVByb2R1Y3RJbWFnZVVybDogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuLi4uXG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHBlcm1hbmVudCBwYXRoIGZvciBzdG9yaW5nIGltYWdlc1xuICAgICAqIEBwYXJhbSB3ZWJhcHBSb290IFRoZSB3ZWJhcHAgcm9vdCBwYXRoXG4gICAgICogQHBhcmFtIHJlbGF0aXZlUGF0aCBUaGUgcmVsYXRpdmUgcGF0aCB3aXRoaW4gdGhlIHdlYmFwcFxuICAgICAqIEByZXR1cm4gVGhlIHBlcm1hbmVudCBwYXRoXG4gICAgICovXG4gICAgcHJpdmF0ZSBTdHJpbmcgZ2V0UGVybWFuZW50UGF0aChTdHJpbmcgd2ViYXBwUm9vdCwgU3RyaW5nIHJlbGF0aXZlUGF0aCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gVXNlIGEgZml4ZWQsIGFic29sdXRlIHBhdGggdGhhdCB3aWxsIGRlZmluaXRlbHkgcGVyc2lzdFxuICAgICAgICAgICAgLy8gVGhpcyBwYXRoIHNob3VsZCBiZSBvdXRzaWRlIHRoZSBkZXBsb3ltZW50IGRpcmVjdG9yeSBidXQgYWNjZXNzaWJsZSBieSB0aGUgd2ViIHNlcnZlclxuICAgICAgICAgICAgLy8gRmlyc3QgdHJ5IHRoZSB1c2VyJ3MgaG9tZSBkaXJlY3RvcnlcbiAgICAgICAgICAgIFN0cmluZyB1c2VySG9tZSA9IFN5c3RlbS5nZXRQcm9wZXJ0eShcInVzZXIuaG9tZVwiKTtcbiAgICAgICAgICAgIFN0cmluZyBmaXhlZFBhdGggPSB1c2VySG9tZSArIEZpbGUuc2VwYXJhdG9yICsgXCJDbG90aGVlSW1hZ2VzXCIgKyBGaWxlLnNlcGFyYXRvciArIHJlbGF0aXZlUGF0aDtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlByb2R1Y3RJbWFnZVNlcnZpY2UgLSBVc2luZyBmaXhlZCBwYXRoIGluIHVzZXIgaG9tZTogXCIgKyBmaXhlZFBhdGgpO1xuICAgICAgICAgICAgRmlsZSBmaXhlZERpciA9IG5ldyBGaWxlKGZpeGVkUGF0aCk7XG5cbiAgICAgICAgICAgIC8vIEVuc3VyZSB0aGUgZml4ZWQgZGlyZWN0b3J5IGV4aXN0c1xuICAgICAgICAgICAgaWYgKCFmaXhlZERpci5leGlzdHMoKSkge1xuICAgICAgICAgICAgICAgIGJvb2xlYW4gY3JlYXRlZCA9IGZpeGVkRGlyLm1rZGlycygpO1xuICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlByb2R1Y3RJbWFnZVNlcnZpY2UgLSBDcmVhdGVkIGZpeGVkIGRpcmVjdG9yeTogXCIgKyBjcmVhdGVkICsgXCIgYXQgXCIgKyBmaXhlZFBhdGgpO1xuICAgICAgICAgICAgICAgIGlmICghY3JlYXRlZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSBjYW4ndCBjcmVhdGUgdGhlIGRpcmVjdG9yeSwgdHJ5IHVzaW5nIEphdmEgTklPIHdoaWNoIGhhcyBiZXR0ZXIgZXJyb3IgaGFuZGxpbmdcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGphdmEubmlvLmZpbGUuUGF0aCBwYXRoID0gamF2YS5uaW8uZmlsZS5QYXRocy5nZXQoZml4ZWRQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGphdmEubmlvLmZpbGUuRmlsZXMuY3JlYXRlRGlyZWN0b3JpZXMocGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJQcm9kdWN0SW1hZ2VTZXJ2aWNlIC0gQ3JlYXRlZCBkaXJlY3RvcnkgdXNpbmcgTklPIGF0IFwiICsgZml4ZWRQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmaXhlZFBhdGg7XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiUHJvZHVjdEltYWdlU2VydmljZSAtIEVycm9yIGNyZWF0aW5nIGRpcmVjdG9yeSB1c2luZyBOSU86IFwiICsgZXguZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbnRpbnVlIHRvIGZhbGxiYWNrIG9wdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmaXhlZFBhdGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZml4ZWRQYXRoO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBJZiB0aGUgZml4ZWQgcGF0aCBkb2Vzbid0IHdvcmssIHRyeSB0byB1c2UgdGhlIHdlYmFwcCBkaXJlY3RvcnlcbiAgICAgICAgICAgIC8vIFRoaXMgaXMgbGVzcyByZWxpYWJsZSBidXQgbWlnaHQgd29yayBhcyBhIGZhbGxiYWNrXG4gICAgICAgICAgICBTdHJpbmcgd2ViYXBwUGF0aCA9IHdlYmFwcFJvb3QgKyByZWxhdGl2ZVBhdGg7XG4gICAgICAgICAgICBGaWxlIHdlYmFwcERpciA9IG5ldyBGaWxlKHdlYmFwcFBhdGgpO1xuICAgICAgICAgICAgaWYgKCF3ZWJhcHBEaXIuZXhpc3RzKCkpIHtcbiAgICAgICAgICAgICAgICBib29sZWFuIGNyZWF0ZWQgPSB3ZWJhcHBEaXIubWtkaXJzKCk7XG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiUHJvZHVjdEltYWdlU2VydmljZSAtIENyZWF0ZWQgd2ViYXBwIGRpcmVjdG9yeTogXCIgKyBjcmVhdGVkICsgXCIgYXQgXCIgKyB3ZWJhcHBQYXRoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHdlYmFwcFBhdGg7XG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJQcm9kdWN0SW1hZ2VTZXJ2aWNlIC0gRXJyb3IgZ2V0dGluZyBwZXJtYW5lbnQgcGF0aDogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgcmV0dXJuIHdlYmFwcFJvb3QgKyByZWxhdGl2ZVBhdGg7XG4gICAgICAgIH1cbiAgICB9XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvZGFvL1Byb2R1Y3REQU8uamF2YVxuLi4uXG5cbiAgICAvKipcbiAgICAgKiBBZGQgYSBuZXcgcHJvZHVjdCB0byB0aGUgZGF0YWJhc2VcbiAgICAgKiBAcGFyYW0gcHJvZHVjdCBQcm9kdWN0IG9iamVjdCB0byBhZGRcbiAgICAgKiBAcmV0dXJuIHRydWUgaWYgc3VjY2Vzc2Z1bCwgZmFsc2Ugb3RoZXJ3aXNlXG4gICAgICovXG4gICAgcHVibGljIGJvb2xlYW4gYWRkUHJvZHVjdChQcm9kdWN0IHByb2R1Y3QpIHtcbiAgICAgICAgU3RyaW5nIHF1ZXJ5ID0gXCJJTlNFUlQgSU5UTyBwcm9kdWN0cyAobmFtZSwgZGVzY3JpcHRpb24sIHByaWNlLCBzdG9jaywgY2F0ZWdvcnksIHR5cGUsIGltYWdlX3VybCwgZmVhdHVyZWQpIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgXCJWQUxVRVMgKD8sID8sID8sID8sID8sID8sID8sID8pXCI7XG5cbiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiUHJvZHVjdERBTyAtIEFkZGluZyBwcm9kdWN0OiBcIiArIHByb2R1Y3QuZ2V0TmFtZSgpKTtcbiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiUHJvZHVjdERBTyAtIEZlYXR1cmVkIGZsYWc6IFwiICsgcHJvZHVjdC5pc0ZlYXR1cmVkKCkpO1xuXG4gICAgICAgIHRyeSAoQ29ubmVjdGlvbiBjb25uID0gREJDb25uZWN0aW9uLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHF1ZXJ5LCBTdGF0ZW1lbnQuUkVUVVJOX0dFTkVSQVRFRF9LRVlTKSkge1xuLi4uXG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgYW4gZXhpc3RpbmcgcHJvZHVjdFxuICAgICAqIEBwYXJhbSBwcm9kdWN0IFByb2R1Y3Qgb2JqZWN0IHRvIHVwZGF0ZVxuICAgICAqIEByZXR1cm4gdHJ1ZSBpZiBzdWNjZXNzZnVsLCBmYWxzZSBvdGhlcndpc2VcbiAgICAgKi9cbiAgICBwdWJsaWMgYm9vbGVhbiB1cGRhdGVQcm9kdWN0KFByb2R1Y3QgcHJvZHVjdCkge1xuICAgICAgICBTdHJpbmcgcXVlcnkgPSBcIlVQREFURSBwcm9kdWN0cyBTRVQgbmFtZSA9ID8sIGRlc2NyaXB0aW9uID0gPywgcHJpY2UgPSA/LCBzdG9jayA9ID8sIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgXCJjYXRlZ29yeSA9ID8sIHR5cGUgPSA/LCBpbWFnZV91cmwgPSA/LCBmZWF0dXJlZCA9ID8sIHVwZGF0ZWRfYXQgPSBDVVJSRU5UX1RJTUVTVEFNUCBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgIFwiV0hFUkUgaWQgPSA/XCI7XG5cbiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiUHJvZHVjdERBTyAtIFVwZGF0aW5nIHByb2R1Y3Q6IFwiICsgcHJvZHVjdC5nZXROYW1lKCkgKyBcIiAoSUQ6IFwiICsgcHJvZHVjdC5nZXRJZCgpICsgXCIpXCIpO1xuICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJQcm9kdWN0REFPIC0gRmVhdHVyZWQgZmxhZzogXCIgKyBwcm9kdWN0LmlzRmVhdHVyZWQoKSk7XG5cbiAgICAgICAgdHJ5IChDb25uZWN0aW9uIGNvbm4gPSBEQkNvbm5lY3Rpb24uZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQocXVlcnkpKSB7XG5cbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIHByb2R1Y3QuZ2V0TmFtZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDIsIHByb2R1Y3QuZ2V0RGVzY3JpcHRpb24oKSk7XG4gICAgICAgICAgICBzdG10LnNldERvdWJsZSgzLCBwcm9kdWN0LmdldFByaWNlKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRJbnQoNCwgcHJvZHVjdC5nZXRTdG9jaygpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDUsIHByb2R1Y3QuZ2V0Q2F0ZWdvcnkoKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZyg2LCBwcm9kdWN0LmdldFR5cGUoKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZyg3LCBwcm9kdWN0LmdldEltYWdlVXJsKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRCb29sZWFuKDgsIHByb2R1Y3QuaXNGZWF0dXJlZCgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0SW50KDksIHByb2R1Y3QuZ2V0SWQoKSk7XG5cbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlByb2R1Y3REQU8gLSBFeGVjdXRpbmcgdXBkYXRlIHF1ZXJ5IGZvciBwcm9kdWN0IElEOiBcIiArIHByb2R1Y3QuZ2V0SWQoKSArIFwiIHdpdGggZmVhdHVyZWQgPSBcIiArIHByb2R1Y3QuaXNGZWF0dXJlZCgpKTtcbiAgICAgICAgICAgIGludCByb3dzQWZmZWN0ZWQgPSBzdG10LmV4ZWN1dGVVcGRhdGUoKTtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlByb2R1Y3REQU8gLSBVcGRhdGUgYWZmZWN0ZWQgXCIgKyByb3dzQWZmZWN0ZWQgKyBcIiByb3dzXCIpO1xuXG4gICAgICAgICAgICAvLyBWZXJpZnkgdGhlIHVwZGF0ZSBieSByZXRyaWV2aW5nIHRoZSBwcm9kdWN0IGFnYWluXG4gICAgICAgICAgICBpZiAocm93c0FmZmVjdGVkID4gMCkge1xuICAgICAgICAgICAgICAgIFByb2R1Y3QgdXBkYXRlZFByb2R1Y3QgPSBnZXRQcm9kdWN0QnlJZChwcm9kdWN0LmdldElkKCkpO1xuICAgICAgICAgICAgICAgIGlmICh1cGRhdGVkUHJvZHVjdCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlByb2R1Y3REQU8gLSBWZXJpZmllZCB1cGRhdGU6IFByb2R1Y3QgSUQgXCIgKyB1cGRhdGVkUHJvZHVjdC5nZXRJZCgpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIiBmZWF0dXJlZCBmbGFnIGlzIG5vdyBcIiArIHVwZGF0ZWRQcm9kdWN0LmlzRmVhdHVyZWQoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gcm93c0FmZmVjdGVkID4gMDtcblxuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiUHJvZHVjdERBTyAtIEVycm9yIHVwZGF0aW5nIHByb2R1Y3Q6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFRoaXMgbWV0aG9kIGhhcyBiZWVuIG1vdmVkIHRvIHRoZSBlbmQgb2YgdGhlIGZpbGVcbi4uLlxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIHByb2R1Y3QgaW1hZ2UgVVJMXG4gICAgICogQHBhcmFtIHByb2R1Y3RJZCBQcm9kdWN0IElEXG4gICAgICogQHBhcmFtIGltYWdlVXJsIE5ldyBpbWFnZSBVUkxcbiAgICAgKiBAcmV0dXJuIHRydWUgaWYgc3VjY2Vzc2Z1bCwgZmFsc2Ugb3RoZXJ3aXNlXG4gICAgICovXG4gICAgcHVibGljIGJvb2xlYW4gdXBkYXRlUHJvZHVjdEltYWdlKGludCBwcm9kdWN0SWQsIFN0cmluZyBpbWFnZVVybCkge1xuICAgICAgICBTdHJpbmcgcXVlcnkgPSBcIlVQREFURSBwcm9kdWN0cyBTRVQgaW1hZ2VfdXJsID0gPywgdXBkYXRlZF9hdCA9IENVUlJFTlRfVElNRVNUQU1QIFdIRVJFIGlkID0gP1wiO1xuXG4gICAgICAgIHRyeSAoQ29ubmVjdGlvbiBjb25uID0gREJDb25uZWN0aW9uLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHF1ZXJ5KSkge1xuXG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCBpbWFnZVVybCk7XG4gICAgICAgICAgICBzdG10LnNldEludCgyLCBwcm9kdWN0SWQpO1xuXG4gICAgICAgICAgICBpbnQgcm93c0FmZmVjdGVkID0gc3RtdC5leGVjdXRlVXBkYXRlKCk7XG4gICAgICAgICAgICByZXR1cm4gcm93c0FmZmVjdGVkID4gMDtcblxuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExvYWQgYWRkaXRpb25hbCBpbWFnZXMgZm9yIGEgcHJvZHVjdFxuICAgICAqIEBwYXJhbSBwcm9kdWN0IFByb2R1Y3QgdG8gbG9hZCBpbWFnZXMgZm9yXG4gICAgICovXG4gICAgcHJpdmF0ZSB2b2lkIGxvYWRQcm9kdWN0SW1hZ2VzKFByb2R1Y3QgcHJvZHVjdCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gSW4gdGhpcyBpbXBsZW1lbnRhdGlvbiwgd2UgZG9uJ3QgaGF2ZSBhIHNlcGFyYXRlIHByb2R1Y3RfaW1hZ2VzIHRhYmxlXG4gICAgICAgICAgICAvLyBUaGUgbWFpbiBpbWFnZSBpcyBzdG9yZWQgaW4gdGhlIHByb2R1Y3RzIHRhYmxlJ3MgaW1hZ2VfdXJsIGNvbHVtblxuICAgICAgICAgICAgLy8gRm9yIG5vdywgd2UnbGwganVzdCB1c2UgdGhlIG1haW4gaW1hZ2UgYXMgdGhlIG9ubHkgaW1hZ2VcbiAgICAgICAgICAgIC8vIFRoaXMgbWV0aG9kIGNhbiBiZSBleHBhbmRlZCBsYXRlciBpZiB5b3UgYWRkIGEgcHJvZHVjdF9pbWFnZXMgdGFibGVcblxuICAgICAgICAgICAgLy8gQWRkIHRoZSBtYWluIGltYWdlIGFzIHRoZSBvbmx5IGltYWdlIGlmIGl0IGV4aXN0c1xuICAgICAgICAgICAgU3RyaW5nIGltYWdlVXJsID0gcHJvZHVjdC5nZXRJbWFnZVVybCgpO1xuICAgICAgICAgICAgaWYgKGltYWdlVXJsICE9IG51bGwgJiYgIWltYWdlVXJsLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgIHByb2R1Y3QuYWRkQWRkaXRpb25hbEltYWdlKGltYWdlVXJsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkVycm9yIGluIGxvYWRQcm9kdWN0SW1hZ2VzOiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICAvLyBDb250aW51ZSB3aXRob3V0IGFkZGl0aW9uYWwgaW1hZ2VzXG4gICAgICAgIH1cbiAgICB9XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvbW9kZWwvUHJvZHVjdC5qYXZhXG5wYWNrYWdlIG1vZGVsO1xuXG5pbXBvcnQgamF2YS5zcWwuVGltZXN0YW1wO1xuaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7XG5pbXBvcnQgamF2YS51dGlsLkxpc3Q7XG5cbi8qKlxuICogUHJvZHVjdCBtb2RlbCBjbGFzc1xuICovXG5wdWJsaWMgY2xhc3MgUHJvZHVjdCB7XG4gICAgcHJpdmF0ZSBpbnQgaWQ7XG4gICAgcHJpdmF0ZSBTdHJpbmcgbmFtZTtcbiAgICBwcml2YXRlIFN0cmluZyBkZXNjcmlwdGlvbjtcbiAgICBwcml2YXRlIGRvdWJsZSBwcmljZTtcbiAgICBwcml2YXRlIGludCBzdG9jaztcbiAgICBwcml2YXRlIFN0cmluZyBjYXRlZ29yeTtcbiAgICBwcml2YXRlIFN0cmluZyB0eXBlO1xuICAgIHByaXZhdGUgU3RyaW5nIGltYWdlVXJsO1xuICAgIHByaXZhdGUgTGlzdDxTdHJpbmc+IGFkZGl0aW9uYWxJbWFnZXM7XG5cbiAgICBwcml2YXRlIGJvb2xlYW4gZmVhdHVyZWQ7XG4gICAgcHJpdmF0ZSBUaW1lc3RhbXAgY3JlYXRlZEF0O1xuICAgIHByaXZhdGUgVGltZXN0YW1wIHVwZGF0ZWRBdDtcblxuICAgIC8vIERlZmF1bHQgY29uc3RydWN0b3JcbiAgICBwdWJsaWMgUHJvZHVjdCgpIHtcbiAgICAgICAgdGhpcy5hZGRpdGlvbmFsSW1hZ2VzID0gbmV3IEFycmF5TGlzdDw+KCk7XG4gICAgfVxuXG4gICAgLy8gQ29uc3RydWN0b3Igd2l0aCBmaWVsZHNcbiAgICBwdWJsaWMgUHJvZHVjdChpbnQgaWQsIFN0cmluZyBuYW1lLCBTdHJpbmcgZGVzY3JpcHRpb24sIGRvdWJsZSBwcmljZSwgaW50IHN0b2NrLCBTdHJpbmcgY2F0ZWdvcnksIFN0cmluZyB0eXBlLFxuICAgICAgICAgICAgU3RyaW5nIGltYWdlVXJsLCBib29sZWFuIGZlYXR1cmVkLCBUaW1lc3RhbXAgY3JlYXRlZEF0LCBUaW1lc3RhbXAgdXBkYXRlZEF0KSB7XG4gICAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICAgICAgICB0aGlzLnByaWNlID0gcHJpY2U7XG4gICAgICAgIHRoaXMuc3RvY2sgPSBzdG9jaztcbiAgICAgICAgdGhpcy5jYXRlZ29yeSA9IGNhdGVnb3J5O1xuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgICAgICB0aGlzLmltYWdlVXJsID0gaW1hZ2VVcmw7XG4gICAgICAgIHRoaXMuZmVhdHVyZWQgPSBmZWF0dXJlZDtcbiAgICAgICAgdGhpcy5jcmVhdGVkQXQgPSBjcmVhdGVkQXQ7XG4gICAgICAgIHRoaXMudXBkYXRlZEF0ID0gdXBkYXRlZEF0O1xuICAgICAgICB0aGlzLmFkZGl0aW9uYWxJbWFnZXMgPSBuZXcgQXJyYXlMaXN0PD4oKTtcbiAgICB9XG5cbiAgICAvLyBHZXR0ZXJzIGFuZCBTZXR0ZXJzXG4gICAgcHVibGljIGludCBnZXRJZCgpIHtcbiAgICAgICAgcmV0dXJuIGlkO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldElkKGludCBpZCkge1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgfVxuXG4gICAgcHVibGljIFN0cmluZyBnZXROYW1lKCkge1xuICAgICAgICByZXR1cm4gbmFtZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXROYW1lKFN0cmluZyBuYW1lKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgfVxuXG4gICAgcHVibGljIFN0cmluZyBnZXREZXNjcmlwdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGRlc2NyaXB0aW9uO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldERlc2NyaXB0aW9uKFN0cmluZyBkZXNjcmlwdGlvbikge1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgfVxuXG4gICAgcHVibGljIGRvdWJsZSBnZXRQcmljZSgpIHtcbiAgICAgICAgcmV0dXJuIHByaWNlO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldFByaWNlKGRvdWJsZSBwcmljZSkge1xuICAgICAgICB0aGlzLnByaWNlID0gcHJpY2U7XG4gICAgfVxuXG4gICAgcHVibGljIGludCBnZXRTdG9jaygpIHtcbiAgICAgICAgcmV0dXJuIHN0b2NrO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldFN0b2NrKGludCBzdG9jaykge1xuICAgICAgICB0aGlzLnN0b2NrID0gc3RvY2s7XG4gICAgfVxuXG4gICAgcHVibGljIFN0cmluZyBnZXRDYXRlZ29yeSgpIHtcbiAgICAgICAgcmV0dXJuIGNhdGVnb3J5O1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldENhdGVnb3J5KFN0cmluZyBjYXRlZ29yeSkge1xuICAgICAgICB0aGlzLmNhdGVnb3J5ID0gY2F0ZWdvcnk7XG4gICAgfVxuXG4gICAgcHVibGljIFN0cmluZyBnZXRUeXBlKCkge1xuICAgICAgICByZXR1cm4gdHlwZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRUeXBlKFN0cmluZyB0eXBlKSB7XG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgfVxuXG4gICAgcHVibGljIFN0cmluZyBnZXRJbWFnZVVybCgpIHtcbiAgICAgICAgcmV0dXJuIGltYWdlVXJsO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldEltYWdlVXJsKFN0cmluZyBpbWFnZVVybCkge1xuICAgICAgICB0aGlzLmltYWdlVXJsID0gaW1hZ2VVcmw7XG4gICAgfVxuXG5cblxuICAgIHB1YmxpYyBib29sZWFuIGlzRmVhdHVyZWQoKSB7XG4gICAgICAgIHJldHVybiBmZWF0dXJlZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRGZWF0dXJlZChib29sZWFuIGZlYXR1cmVkKSB7XG4gICAgICAgIHRoaXMuZmVhdHVyZWQgPSBmZWF0dXJlZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgVGltZXN0YW1wIGdldENyZWF0ZWRBdCgpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZWRBdDtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRDcmVhdGVkQXQoVGltZXN0YW1wIGNyZWF0ZWRBdCkge1xuICAgICAgICB0aGlzLmNyZWF0ZWRBdCA9IGNyZWF0ZWRBdDtcbiAgICB9XG5cbiAgICBwdWJsaWMgVGltZXN0YW1wIGdldFVwZGF0ZWRBdCgpIHtcbiAgICAgICAgcmV0dXJuIHVwZGF0ZWRBdDtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRVcGRhdGVkQXQoVGltZXN0YW1wIHVwZGF0ZWRBdCkge1xuICAgICAgICB0aGlzLnVwZGF0ZWRBdCA9IHVwZGF0ZWRBdDtcbiAgICB9XG5cbiAgICAvLyBIZWxwZXIgbWV0aG9kc1xuXG4gICAgcHVibGljIFN0cmluZyBnZXRGb3JtYXR0ZWRQcmljZSgpIHtcbiAgICAgICAgcmV0dXJuIFN0cmluZy5mb3JtYXQoXCIkJS4yZlwiLCBwcmljZSk7XG4gICAgfVxuXG4gICAgcHVibGljIFN0cmluZyBnZXREZWZhdWx0SW1hZ2UoKSB7XG4gICAgICAgIGlmIChpbWFnZVVybCAhPSBudWxsICYmICFpbWFnZVVybC5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIHJldHVybiBpbWFnZVVybDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBnZXRQbGFjZWhvbGRlckltYWdlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgU3RyaW5nIGdldFBsYWNlaG9sZGVySW1hZ2UoKSB7XG4gICAgICAgIHJldHVybiBcImltYWdlcy9wcm9kdWN0cy9wbGFjZWhvbGRlci5qcGdcIjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgYW4gYWRkaXRpb25hbCBpbWFnZSBVUkwgdG8gdGhlIHByb2R1Y3RcbiAgICAgKiBAcGFyYW0gaW1hZ2VVcmwgSW1hZ2UgVVJMIHRvIGFkZFxuICAgICAqL1xuICAgIHB1YmxpYyB2b2lkIGFkZEFkZGl0aW9uYWxJbWFnZShTdHJpbmcgaW1hZ2VVcmwpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmFkZGl0aW9uYWxJbWFnZXMgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkaXRpb25hbEltYWdlcyA9IG5ldyBBcnJheUxpc3Q8PigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGltYWdlVXJsICE9IG51bGwgJiYgIWltYWdlVXJsLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkaXRpb25hbEltYWdlcy5hZGQoaW1hZ2VVcmwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRXJyb3IgaW4gYWRkQWRkaXRpb25hbEltYWdlOiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICAvLyBJbml0aWFsaXplIHRoZSBsaXN0IGlmIHRoZXJlIHdhcyBhbiBlcnJvclxuICAgICAgICAgICAgdGhpcy5hZGRpdGlvbmFsSW1hZ2VzID0gbmV3IEFycmF5TGlzdDw+KCk7XG4gICAgICAgIH1cbiAgICB9XG4uLi5cblxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIFN0cmluZyB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFwiUHJvZHVjdHtcIiArXG4gICAgICAgICAgICAgICAgXCJpZD1cIiArIGlkICtcbiAgICAgICAgICAgICAgICBcIiwgbmFtZT0nXCIgKyBuYW1lICsgJ1xcJycgK1xuICAgICAgICAgICAgICAgIFwiLCBkZXNjcmlwdGlvbj0nXCIgKyBkZXNjcmlwdGlvbiArICdcXCcnICtcbiAgICAgICAgICAgICAgICBcIiwgcHJpY2U9XCIgKyBwcmljZSArXG4gICAgICAgICAgICAgICAgXCIsIHN0b2NrPVwiICsgc3RvY2sgK1xuICAgICAgICAgICAgICAgIFwiLCBjYXRlZ29yeT0nXCIgKyBjYXRlZ29yeSArICdcXCcnICtcbiAgICAgICAgICAgICAgICBcIiwgdHlwZT0nXCIgKyB0eXBlICsgJ1xcJycgK1xuICAgICAgICAgICAgICAgIFwiLCBpbWFnZVVybD0nXCIgKyBpbWFnZVVybCArICdcXCcnICtcbiAgICAgICAgICAgICAgICBcIiwgYWRkaXRpb25hbEltYWdlcz1cIiArIGFkZGl0aW9uYWxJbWFnZXMgK1xuICAgICAgICAgICAgICAgIFwiLCBmZWF0dXJlZD1cIiArIGZlYXR1cmVkICtcbiAgICAgICAgICAgICAgICBcIiwgY3JlYXRlZEF0PVwiICsgY3JlYXRlZEF0ICtcbiAgICAgICAgICAgICAgICBcIiwgdXBkYXRlZEF0PVwiICsgdXBkYXRlZEF0ICtcbiAgICAgICAgICAgICAgICAnfSc7XG4gICAgfVxufVxuLi4uXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCJiYjU2OWUzNi03MTkwLTRhNTAtOTVlNS1kM2NjNDExOGMyMjU7dG9vbHVfdnJ0eF8wMTJYREgxTUZyUWoyVld1QTFRSkYzS1AiOnsicmVxdWVzdElkIjoiYmI1NjllMzYtNzE5MC00YTUwLTk1ZTUtZDNjYzQxMThjMjI1IiwidG9vbFVzZUlkIjoidG9vbHVfdnJ0eF8wMTJYREgxTUZyUWoyVld1QTFRSkYzS1AiLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJGaWxlIHNhdmVkIHN1Y2Nlc3NmdWxseS4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCJmZDRkZWZlNC03ODI1LTQ4YmUtYTgyNS01ODc1NTEyOTNhNzY7dG9vbHVfdnJ0eF8wMTN0ZUtrNUNKMjNScmhGWHJvS2ptMVIiOnsicmVxdWVzdElkIjoiZmQ0ZGVmZTQtNzgyNS00OGJlLWE4MjUtNTg3NTUxMjkzYTc2IiwidG9vbFVzZUlkIjoidG9vbHVfdnJ0eF8wMTN0ZUtrNUNKMjNScmhGWHJvS2ptMVIiLCJwaGFzZSI6N319LCJkcmFmdEV4Y2hhbmdlIjp7InJlcXVlc3RfbWVzc2FnZSI6IiIsInJpY2hfdGV4dF9qc29uX3JlcHIiOnsidHlwZSI6ImRvYyIsImNvbnRlbnQiOlt7InR5cGUiOiJwYXJhZ3JhcGgifV19LCJzdGF0dXMiOiJkcmFmdCJ9LCJyZXF1ZXN0SWRzIjpbXSwiaXNQaW5uZWQiOmZhbHNlLCJpc1NoYXJlYWJsZSI6dHJ1ZSwiZXh0cmFEYXRhIjp7ImlzQWdlbnRDb252ZXJzYXRpb24iOnRydWUsImhhc0FnZW50T25ib2FyZGVkIjp0cnVlLCJoYXNEaXJ0eUVkaXRzIjpmYWxzZSwiYmFzZWxpbmVUaW1lc3RhbXAiOjE3NDY2OTY0MzM4ODd9LCJwZXJzb25hVHlwZSI6MH19LCJhZ2VudEV4ZWN1dGlvbk1vZGUiOiJtYW51YWwiLCJpc0FnZW50RWRpdHNDb2xsYXBzZWQiOnRydWV9" />
      </map>
    </option>
  </component>
</project>